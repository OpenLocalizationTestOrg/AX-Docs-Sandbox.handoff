{"content":"---\n# required metadata\n\ntitle: Transportation management engines\ndescription: Transportation management engines define the logic that is used to generate and process transportation rates in Transportation management. \nauthor: YuyuScheller\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\nms.search.form: TMSFreightBillType, TMSGenericEngine, TMSMileageEngine, TMSRateEngine, TMSTransitTimeEngine, TMSZoneEngine\n# ROBOTS: \naudience: Application User\n# ms.devlang: \n# ms.reviewer: 2084\nms.search.scope: AX 7.0.0, Operations, Core\n# ms.tgt_pltfrm: \nms.custom: 12234\nms.assetid: b878478c-0e04-4a1e-a037-6fdbb345a9a3\nms.search.region: Global\n# ms.search.industry: \nms.author: yuyus\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Transportation management engines\n\n[!include[banner](../includes/banner.md)]\n\n\nTransportation management engines define the logic that is used to generate and process transportation rates in Transportation management. \n\nA transportation management engine calculates tasks, such as the carrier’s transportation rate. The engine system lets you change calculation strategies at runtime, based on data in Microsoft Dynamics 365 for Operations. A transportation management engine resembles a plug-in that is related to a particular carrier contract.\n\n## What engines are available?\nThe following table shows the transportation management engines that are available in Microsoft Dynamics 365 for Operations.\n\n| Transportation management engine | Description                                                                                                                                                                                                                                                                                                                 |\n|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Rate engine**                  | Calculates rates.                                                                                                                                                                                                                                                                                                           |\n| **Generic engine**               | Simple auxiliary engines that are used by other engines that do not require data from Microsoft Dynamics 365 for Operations, for example, an apportionment engine. Apportionment engines are used to reduce the final costs of transportation to specific orders and lines, based on dimensions, such as volume and weight. |\n| **Mileage engine**               | Calculates the transportation distance.                                                                                                                                                                                                                                                                                     |\n| **Transit time engine**          | Calculates the time that is required to travel from the start to the end destination.                                                                                                                                                                                                                                       |\n| **Zone engine**                  | Calculates the zone based on the current address and calculates the number of zones that must be crossed in order to travel from address A to address B.                                                                                                                                                                    |\n| **Freight bill type**            | Standardizes the freight invoice and the freight bill lines and is used for automatic freight bill matching.                                                                                                                                                                                                                |\n\n \nWhat engines must be configured to rate a shipment?\n---------------------------------------------------\n\nTo rate a shipment using a specific carrier, you must configure multiple transportation management engines. The **Rate engine** is required, but other transportation management engines may be required to support the **Rate engine**. For example, the **Rate engine** can be used to retrieve data from the **Mileage engine** to calculate the rate based on mileage between the source and the destination.\n\n## What’s required to initialize a transportation management engine?\nA transportation management engine requires that you set up initialization data in order to function in a specific way. The setup can include the following types of data:\n-   References to other transportation management engines. For details, see the configuration example in this section.\n-   References to .NET types that are used by the transportation management engine.\n-   Simple configuration data.\n\nIn most cases, you can click the **Parameters** button in the transportation management engine’s setup forms to configure the initialization data. **Example of the configuration of a rate engine that references a mileage engine** The following example shows the setup that is required for a rate engine that is based on the .NET engine type Microsoft.Dynamics.Ax.Tms.Bll.MileageRateEngine and references a mileage engine.\n| Parameter             | Description                                                                                                                                                                                                                                                                                                                                                                      |\n|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| *RateBaseAssigner*    | The .NET type that interprets the rate base assignment data for a particular schema. The syntax of the parameter value consists of two segments delimited by a vertical bar (|). The first segment contains the assembly name that defines the assigner type. The second segment defines the fully-qualified name of the assigner type. This includes the namespace of the type. |\n| *MileageEngineCode*   | Mileage engine code that identifies the mileage engine record in the Microsoft Dynamics 365 for Operations database.                                                                                                                                                                                                                                                             |\n| *ApportionmentEngine* | Generic engine code that identifies the apportionment engine in the Microsoft Dynamics 365 for Operations database.                                                                                                                                                                                                                                                              |\n\n \nHow is metadata used in transportation management engines?\n----------------------------------------------------------\n\nTransportation management engines that rely on data that is defined in Dynamics 365 for Operations may use different data schemas. The transportation management system enables different transportation management engines to use the same generic physical database tables. To make sure that run-time interpretation of engine data is correct, you can define metadata for the database tables. This reduces the cost of building new transportation management engines because additional table and form structures are not required in Operations.\n\n## What can be used as search data in rate calculations?\nThe data that you use when you calculate rates in Microsoft Dynamics 365 for Operations is controlled by the metadata configuration. For example, if you want to search for rates based on postal codes you must set up metadata based on the lookup type of a postal code.\n\n## Do all engine configurations require metadata?\nNo, transportation management engines that are used to retrieve the data that is required for rate calculation from external systems don’t need metadata. The rate data for these engines can be retrieved from external transportation carrier systems, usually through a web service. For example, can use a mileage engine that retrieves data directly from Bing maps so that you don’t need a metadata for this engine.\n| **Note**                                                                                                                                                                                                                                                                                                                                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| The transportation management engines that are delivered with Microsoft Dynamics 365 for Operations rely on data that is retrieved from the application. Engines that connect to external systems are not included with Operations. However, the engine-based extensibility model lets you build extensions using Microsoft Dynamics 365 for Operations Visual Studio Tools. |\n\n## How do I configure metadata for a transportation management engine?\nMetadata for transportation management engines is configured differently for the different types of engines.\n\n| Transportation management engine               | Metadata configuration                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Rate engine**                                | Requires a **Rate base type**. The rate base type contains metadata for the rate base data and the rate base assignment data. The structure of rate base metadata is determined by the type of rate engine. The structure of the rate base assignment metadata is determined by the type of rate base assigner that is associated with that rate engine. You set up the rate base type of a rate engine on the **Rate engine** page and on the **Rate master** page. |\n| **Zone engine**                                | Requires metadata to be set up directly on the zone master.                                                                                                                                                                                                                                                                                                                                                                                                          |\n| **Transit time engine** and **Mileage engine** | Retrieves the metadata directly from the mileage engine’s configuration setup form.                                                                                                                                                                                                                                                                                                                                                                                  |\n\n  **Example of metadata for a rate engine** The transportation management engine requires identification of the origin address, the destination state and country/region, and the start and end point of the shipment. By using these requirements, the metadata would look like the data in the following table. The table also includes information about what type of input data is required.\n-   Define this information in **Transportation management** &gt; **Setup** on the **Rate base type** page.\n\n| Sequence | Name                          | Field type | Data type | Lookup type    | Mandatory |\n|----------|-------------------------------|------------|-----------|----------------|-----------|\n| 1        | Origin postal code            | Assignment | String    | Postal Code    | Selected  |\n| 2        | Destination state             | Assignment | String    | State          |           |\n| 3        | Destination start postal code | Assignment | String    | Postal Code    | Selected  |\n| 4        | Destination end postal code   | Assignment | String    | Postal Code    | Selected  |\n| 5        | Destination country           | Assignment | String    | Country/region |           |\n\n\n\n\n\n","nodes":[{"pos":[32,65],"content":"Transportation management engines","needQuote":true,"needEscape":true,"nodes":[{"content":"Transportation management engines","pos":[0,33]}]},{"pos":[79,217],"content":"Transportation management engines define the logic that is used to generate and process transportation rates in Transportation management.","needQuote":true,"needEscape":true,"nodes":[{"content":"Transportation management engines define the logic that is used to generate and process transportation rates in Transportation management.","pos":[0,138]}]},{"pos":[836,869],"content":"Transportation management engines","linkify":"Transportation management engines","nodes":[{"content":"Transportation management engines","pos":[0,33]}]},{"content":"Transportation management engines define the logic that is used to generate and process transportation rates in Transportation management.","pos":[915,1053]},{"content":"A transportation management engine calculates tasks, such as the carrier’s transportation rate.","pos":[1056,1151]},{"content":"The engine system lets you change calculation strategies at runtime, based on data in Microsoft Dynamics 365 for Operations.","pos":[1152,1276]},{"content":"A transportation management engine resembles a plug-in that is related to a particular carrier contract.","pos":[1277,1381]},{"pos":[1386,1413],"content":"What engines are available?","linkify":"What engines are available?","nodes":[{"content":"What engines are available?","pos":[0,27]}]},{"content":"The following table shows the transportation management engines that are available in Microsoft Dynamics 365 for Operations.","pos":[1414,1538]},{"content":"Transportation management engine","pos":[1542,1574]},{"content":"Description","pos":[1577,1588]},{"pos":[2252,2267],"content":"<bpt id=\"p1\">**</bpt>Rate engine<ept id=\"p1\">**</ept>","source":"**Rate engine**"},{"content":"Calculates rates.","pos":[2287,2304]},{"pos":[2607,2625],"content":"<bpt id=\"p1\">**</bpt>Generic engine<ept id=\"p1\">**</ept>","source":"**Generic engine**"},{"content":"Simple auxiliary engines that are used by other engines that do not require data from Microsoft Dynamics 365 for Operations, for example, an apportionment engine.","pos":[2642,2804]},{"content":"Apportionment engines are used to reduce the final costs of transportation to specific orders and lines, based on dimensions, such as volume and weight.","pos":[2805,2957]},{"pos":[2962,2980],"content":"<bpt id=\"p1\">**</bpt>Mileage engine<ept id=\"p1\">**</ept>","source":"**Mileage engine**"},{"content":"Calculates the transportation distance.","pos":[2997,3036]},{"pos":[3317,3340],"content":"<bpt id=\"p1\">**</bpt>Transit time engine<ept id=\"p1\">**</ept>","source":"**Transit time engine**"},{"content":"Calculates the time that is required to travel from the start to the end destination.","pos":[3352,3437]},{"pos":[3672,3687],"content":"<bpt id=\"p1\">**</bpt>Zone engine<ept id=\"p1\">**</ept>","source":"**Zone engine**"},{"content":"Calculates the zone based on the current address and calculates the number of zones that must be crossed in order to travel from address A to address B.","pos":[3707,3859]},{"pos":[4027,4048],"content":"<bpt id=\"p1\">**</bpt>Freight bill type<ept id=\"p1\">**</ept>","source":"**Freight bill type**"},{"content":"Standardizes the freight invoice and the freight bill lines and is used for automatic freight bill matching.","pos":[4062,4170]},{"pos":[4383,4434],"content":"What engines must be configured to rate a shipment?","linkify":"What engines must be configured to rate a shipment?","nodes":[{"content":"What engines must be configured to rate a shipment?","pos":[0,51]}]},{"content":"To rate a shipment using a specific carrier, you must configure multiple transportation management engines.","pos":[4488,4595]},{"content":"The <bpt id=\"p1\">**</bpt>Rate engine<ept id=\"p1\">**</ept> is required, but other transportation management engines may be required to support the <bpt id=\"p2\">**</bpt>Rate engine<ept id=\"p2\">**</ept>.","pos":[4596,4720],"source":" The **Rate engine** is required, but other transportation management engines may be required to support the **Rate engine**."},{"content":"For example, the <bpt id=\"p1\">**</bpt>Rate engine<ept id=\"p1\">**</ept> can be used to retrieve data from the <bpt id=\"p2\">**</bpt>Mileage engine<ept id=\"p2\">**</ept> to calculate the rate based on mileage between the source and the destination.","pos":[4721,4889],"source":" For example, the **Rate engine** can be used to retrieve data from the **Mileage engine** to calculate the rate based on mileage between the source and the destination."},{"pos":[4894,4959],"content":"What’s required to initialize a transportation management engine?","linkify":"What’s required to initialize a transportation management engine?","nodes":[{"content":"What’s required to initialize a transportation management engine?","pos":[0,65]}]},{"content":"A transportation management engine requires that you set up initialization data in order to function in a specific way.","pos":[4960,5079]},{"content":"The setup can include the following types of data:","pos":[5080,5130]},{"content":"References to other transportation management engines.","pos":[5135,5189]},{"content":"For details, see the configuration example in this section.","pos":[5190,5249]},{"content":"References to .NET types that are used by the transportation management engine.","pos":[5254,5333]},{"content":"Simple configuration data.","pos":[5338,5364]},{"content":"In most cases, you can click the <bpt id=\"p1\">**</bpt>Parameters<ept id=\"p1\">**</ept> button in the transportation management engine’s setup forms to configure the initialization data.","pos":[5366,5512],"source":"In most cases, you can click the **Parameters** button in the transportation management engine’s setup forms to configure the initialization data."},{"content":"<bpt id=\"p1\">**</bpt>Example of the configuration of a rate engine that references a mileage engine<ept id=\"p1\">**</ept> The following example shows the setup that is required for a rate engine that is based on the .NET engine type Microsoft.Dynamics.Ax.Tms.Bll.MileageRateEngine and references a mileage engine.","pos":[5513,5787],"source":"**Example of the configuration of a rate engine that references a mileage engine** The following example shows the setup that is required for a rate engine that is based on the .NET engine type Microsoft.Dynamics.Ax.Tms.Bll.MileageRateEngine and references a mileage engine."},{"content":"Parameter","pos":[5790,5799]},{"content":"Description","pos":[5814,5825]},{"pos":[6584,6602],"content":"<bpt id=\"p1\">*</bpt>RateBaseAssigner<ept id=\"p1\">*</ept>","source":"*RateBaseAssigner*"},{"content":"The .NET type that interprets the rate base assignment data for a particular schema.","pos":[6608,6692]},{"content":"The syntax of the parameter value consists of two segments delimited by a vertical bar (","pos":[6693,6781]},{"content":").","pos":[6782,6784]},{"content":"The first segment contains the assembly name that defines the assigner type.","pos":[6785,6861]},{"content":"The second segment defines the fully-qualified name of the assigner type.","pos":[6862,6935]},{"content":"This includes the namespace of the type.","pos":[6936,6976]},{"pos":[6981,7000],"content":"<bpt id=\"p1\">*</bpt>MileageEngineCode<ept id=\"p1\">*</ept>","source":"*MileageEngineCode*"},{"content":"Mileage engine code that identifies the mileage engine record in the Microsoft Dynamics 365 for Operations database.","pos":[7005,7121]},{"pos":[7378,7399],"content":"<bpt id=\"p1\">*</bpt>ApportionmentEngine<ept id=\"p1\">*</ept>","source":"*ApportionmentEngine*"},{"content":"Generic engine code that identifies the apportionment engine in the Microsoft Dynamics 365 for Operations database.","pos":[7402,7517]},{"pos":[7776,7834],"content":"How is metadata used in transportation management engines?","linkify":"How is metadata used in transportation management engines?","nodes":[{"content":"How is metadata used in transportation management engines?","pos":[0,58]}]},{"content":"Transportation management engines that rely on data that is defined in Dynamics 365 for Operations may use different data schemas.","pos":[7895,8025]},{"content":"The transportation management system enables different transportation management engines to use the same generic physical database tables.","pos":[8026,8164]},{"content":"To make sure that run-time interpretation of engine data is correct, you can define metadata for the database tables.","pos":[8165,8282]},{"content":"This reduces the cost of building new transportation management engines because additional table and form structures are not required in Operations.","pos":[8283,8431]},{"pos":[8436,8489],"content":"What can be used as search data in rate calculations?","linkify":"What can be used as search data in rate calculations?","nodes":[{"content":"What can be used as search data in rate calculations?","pos":[0,53]}]},{"content":"The data that you use when you calculate rates in Microsoft Dynamics 365 for Operations is controlled by the metadata configuration.","pos":[8490,8622]},{"content":"For example, if you want to search for rates based on postal codes you must set up metadata based on the lookup type of a postal code.","pos":[8623,8757]},{"pos":[8762,8808],"content":"Do all engine configurations require metadata?","linkify":"Do all engine configurations require metadata?","nodes":[{"content":"Do all engine configurations require metadata?","pos":[0,46]}]},{"content":"No, transportation management engines that are used to retrieve the data that is required for rate calculation from external systems don’t need metadata.","pos":[8809,8962]},{"content":"The rate data for these engines can be retrieved from external transportation carrier systems, usually through a web service.","pos":[8963,9088]},{"content":"For example, can use a mileage engine that retrieves data directly from Bing maps so that you don’t need a metadata for this engine.","pos":[9089,9221]},{"pos":[9224,9232],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>","source":"**Note**"},{"content":"The transportation management engines that are delivered with Microsoft Dynamics 365 for Operations rely on data that is retrieved from the application.","pos":[9962,10114]},{"content":"Engines that connect to external systems are not included with Operations.","pos":[10115,10189]},{"content":"However, the engine-based extensibility model lets you build extensions using Microsoft Dynamics 365 for Operations Visual Studio Tools.","pos":[10190,10326]},{"pos":[10333,10400],"content":"How do I configure metadata for a transportation management engine?","linkify":"How do I configure metadata for a transportation management engine?","nodes":[{"content":"How do I configure metadata for a transportation management engine?","pos":[0,67]}]},{"content":"Metadata for transportation management engines is configured differently for the different types of engines.","pos":[10401,10509]},{"content":"Transportation management engine","pos":[10513,10545]},{"content":"Metadata configuration","pos":[10562,10584]},{"pos":[11525,11540],"content":"<bpt id=\"p1\">**</bpt>Rate engine<ept id=\"p1\">**</ept>","source":"**Rate engine**"},{"content":"Requires a <bpt id=\"p1\">**</bpt>Rate base type<ept id=\"p1\">**</ept>.","pos":[11574,11604],"source":"Requires a **Rate base type**."},{"content":"The rate base type contains metadata for the rate base data and the rate base assignment data.","pos":[11605,11699]},{"content":"The structure of rate base metadata is determined by the type of rate engine.","pos":[11700,11777]},{"content":"The structure of the rate base assignment metadata is determined by the type of rate base assigner that is associated with that rate engine.","pos":[11778,11918]},{"content":"You set up the rate base type of a rate engine on the <bpt id=\"p1\">**</bpt>Rate engine<ept id=\"p1\">**</ept> page and on the <bpt id=\"p2\">**</bpt>Rate master<ept id=\"p2\">**</ept> page.","pos":[11919,12026],"source":" You set up the rate base type of a rate engine on the **Rate engine** page and on the **Rate master** page."},{"pos":[12031,12046],"content":"<bpt id=\"p1\">**</bpt>Zone engine<ept id=\"p1\">**</ept>","source":"**Zone engine**"},{"content":"Requires metadata to be set up directly on the zone master.","pos":[12080,12139]},{"pos":[12537,12583],"content":"<bpt id=\"p1\">**</bpt>Transit time engine<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Mileage engine<ept id=\"p2\">**</ept>","source":"**Transit time engine** and **Mileage engine**"},{"content":"Retrieves the metadata directly from the mileage engine’s configuration setup form.","pos":[12586,12669]},{"content":"<bpt id=\"p1\">**</bpt>Example of metadata for a rate engine<ept id=\"p1\">**</ept> The transportation management engine requires identification of the origin address, the destination state and country/region, and the start and end point of the shipment.","pos":[13044,13256],"source":"**Example of metadata for a rate engine** The transportation management engine requires identification of the origin address, the destination state and country/region, and the start and end point of the shipment."},{"content":"By using these requirements, the metadata would look like the data in the following table.","pos":[13257,13347]},{"content":"The table also includes information about what type of input data is required.","pos":[13348,13426]},{"pos":[13431,13534],"content":"Define this information in <bpt id=\"p1\">**</bpt>Transportation management<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Setup<ept id=\"p2\">**</ept> on the <bpt id=\"p3\">**</bpt>Rate base type<ept id=\"p3\">**</ept> page.","source":"Define this information in **Transportation management** &gt; **Setup** on the **Rate base type** page."},{"content":"Sequence","pos":[13538,13546]},{"content":"Name","pos":[13549,13553]},{"content":"Field type","pos":[13581,13591]},{"content":"Data type","pos":[13594,13603]},{"content":"Lookup type","pos":[13606,13617]},{"content":"Mandatory","pos":[13623,13632]},{"content":"1","pos":[13736,13737]},{"content":"Origin postal code","pos":[13747,13765]},{"content":"Assignment","pos":[13779,13789]},{"content":"String","pos":[13792,13798]},{"content":"Postal Code","pos":[13804,13815]},{"content":"Selected","pos":[13821,13829]},{"content":"2","pos":[13835,13836]},{"content":"Destination state","pos":[13846,13863]},{"content":"Assignment","pos":[13878,13888]},{"content":"String","pos":[13891,13897]},{"content":"State","pos":[13903,13908]},{"content":"3","pos":[13934,13935]},{"content":"Destination start postal code","pos":[13945,13974]},{"content":"Assignment","pos":[13977,13987]},{"content":"String","pos":[13990,13996]},{"content":"Postal Code","pos":[14002,14013]},{"content":"Selected","pos":[14019,14027]},{"content":"4","pos":[14033,14034]},{"content":"Destination end postal code","pos":[14044,14071]},{"content":"Assignment","pos":[14076,14086]},{"content":"String","pos":[14089,14095]},{"content":"Postal Code","pos":[14101,14112]},{"content":"Selected","pos":[14118,14126]},{"content":"5","pos":[14132,14133]},{"content":"Destination country","pos":[14143,14162]},{"content":"Assignment","pos":[14175,14185]},{"content":"String","pos":[14188,14194]},{"content":"Country/region","pos":[14200,14214]}]}