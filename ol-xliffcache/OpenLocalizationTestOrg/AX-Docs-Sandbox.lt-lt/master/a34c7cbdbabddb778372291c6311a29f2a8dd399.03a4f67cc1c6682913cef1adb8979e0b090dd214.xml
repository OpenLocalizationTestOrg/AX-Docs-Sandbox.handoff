{"nodes":[{"pos":[32,57],"content":"Install a metadata hotfix","needQuote":true,"needEscape":true,"nodes":[{"content":"Install a metadata hotfix","pos":[0,25]}]},{"pos":[71,179],"content":"This topic will guide you through installing an Application Metadata hotfix on your development environment.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic will guide you through installing an Application Metadata hotfix on your development environment.","pos":[0,108]}]},{"pos":[677,702],"content":"Install a metadata hotfix","linkify":"Install a metadata hotfix","nodes":[{"content":"Install a metadata hotfix","pos":[0,25]}]},{"content":"This topic will guide you through installing an Application Metadata hotfix on your development environment.","pos":[704,812]},{"content":"A metadata hotfix package contains changes (metadata or X++ source code) to model elements (XML files) in your development environment.","pos":[814,949]},{"content":"A hotfix can also contain new model elements.","pos":[950,995]},{"content":"A metadata hotfix package is in the form of an SCDP file.","pos":[996,1053]},{"content":"This article describes the process for installing a metadata hotfix package and explains how to share the package with other developers who are working on the same project.","pos":[1054,1226]},{"pos":[1231,1243],"content":"Overall flow","linkify":"Overall flow","nodes":[{"content":"Overall flow","pos":[0,12]}]},{"content":"The following diagram shows the overall flow.","pos":[1244,1289]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Process for installing a metadata hotfix package<ept id=\"p1\">](./media/configureinstallhotfix-1.png)](./media/configureinstallhotfix-1.png)</ept>","pos":[1290,1419],"source":"[![Process for installing a metadata hotfix package](./media/configureinstallhotfix-1.png)](./media/configureinstallhotfix-1.png)"},{"pos":[1424,1452],"content":"Download the hotfix from LCS","linkify":"Download the hotfix from LCS","nodes":[{"content":"Download the hotfix from LCS","pos":[0,28]}]},{"content":"For instructions about how to download a hotfix, see <bpt id=\"p1\">[</bpt>Download hotfixes from Lifecycle Services<ept id=\"p1\">](download-hotfix-lcs.md)</ept>.","pos":[1453,1574],"source":"For instructions about how to download a hotfix, see [Download hotfixes from Lifecycle Services](download-hotfix-lcs.md)."},{"content":"After you download the zip file, extract the SCDP metadata hotfix package from it, and put it in a local folder.","pos":[1575,1687]},{"pos":[1692,1710],"content":"Install the hotfix","linkify":"Install the hotfix","nodes":[{"content":"Install the hotfix","pos":[0,18]}]},{"pos":[1715,1731],"content":"Before you begin","linkify":"Before you begin","nodes":[{"content":"Before you begin","pos":[0,16]}]},{"content":"This article assumes that your packages folder is located at c:<ph id=\"ph1\">\\\\</ph>AOSService<ph id=\"ph2\">\\\\</ph>PackagesLocalDirectory.","pos":[1737,1837],"source":"This article assumes that your packages folder is located at c:\\\\AOSService\\\\PackagesLocalDirectory."},{"content":"On some virtual machines (VMs), it might be located at c:<ph id=\"ph1\">\\\\</ph>Packages, i:<ph id=\"ph2\">\\\\</ph>AOSService<ph id=\"ph3\">\\\\</ph>PackagesLocalDirectory, or j:<ph id=\"ph4\">\\\\</ph>AOSService<ph id=\"ph5\">\\\\</ph>PackagesLocalDirectory.","pos":[1838,1989],"source":" On some virtual machines (VMs), it might be located at c:\\\\Packages, i:\\\\AOSService\\\\PackagesLocalDirectory, or j:\\\\AOSService\\\\PackagesLocalDirectory."},{"content":"If you're not using Microsoft Visual Studio Team Services (VSTS) or another source control system, create a backup of your packages folder (which is also known as the metadata store).","pos":[1994,2177]},{"content":"We don't recommend that you do development unless you use VSTS.","pos":[2178,2241]},{"content":"If you have VSTS or Microsoft Team Foundation Server (TFS) version control, make sure that there are no files in the <bpt id=\"p1\">**</bpt>Pending Changes<ept id=\"p1\">**</ept> list of your current workspace.","pos":[2246,2414],"source":"If you have VSTS or Microsoft Team Foundation Server (TFS) version control, make sure that there are no files in the **Pending Changes** list of your current workspace."},{"content":"If you have pending changes, we recommend that you submit them or shelve them before you install the metadata hotfix.","pos":[2415,2532]},{"pos":[2538,2573],"content":"Install the metadata hotfix package","linkify":"Install the metadata hotfix package","nodes":[{"content":"Install the metadata hotfix package","pos":[0,35]}]},{"content":"To invoke the installation of the metadata hotfix, you can call the SCDPBundleInstall.exe utility from an administrator command prompt.","pos":[2575,2710]},{"content":"SCDPBundleInstall.exe is located in your packages bin folder (c:<ph id=\"ph1\">\\\\</ph>AOSService<ph id=\"ph2\">\\\\</ph>PackagesLocalDirectory).","pos":[2711,2813],"source":" SCDPBundleInstall.exe is located in your packages bin folder (c:\\\\AOSService\\\\PackagesLocalDirectory)."},{"pos":[2820,2861],"content":"Without version control (not recommended)","linkify":"Without version control (not recommended)","nodes":[{"content":"Without version control (not recommended)","pos":[0,41]}]},{"content":"If you're not using VSTS or TFS for source control, use the following command.","pos":[2863,2941]},{"pos":[3073,3107],"content":"With version control (recommended)","linkify":"With version control (recommended)","nodes":[{"content":"With version control (recommended)","pos":[0,34]}]},{"content":"If you're using VSTS or TFS for source control, follow the steps below: <bpt id=\"p1\">**</bpt>Prepare<ept id=\"p1\">**</ept> the installation of the hotfix package using the command below.","pos":[3109,3256],"source":"If you're using VSTS or TFS for source control, follow the steps below: **Prepare** the installation of the hotfix package using the command below."},{"content":"(This step is not available if you are using a platform that is older than platform update 2 (August 2016))","pos":[3257,3364]},{"content":"This will create a changeset of all the existing files on your environment that will be modified by the hotfix package, the prepare command will not install the hotfixes.","pos":[3612,3782]},{"content":"Here is an example.","pos":[3783,3802]},{"content":"<bpt id=\"p1\">**</bpt>Check-in<ept id=\"p1\">**</ept> your pending changes to create a backup of these files in your version control system.","pos":[4069,4168],"source":"**Check-in** your pending changes to create a backup of these files in your version control system."},{"content":"This will enable rolling back the hotfixes if needed.","pos":[4169,4222]},{"content":"<bpt id=\"p1\">**</bpt>Install<ept id=\"p1\">**</ept> the hotfix package using the command below.","pos":[4223,4278],"source":"**Install** the hotfix package using the command below."},{"pos":[4526,4678],"content":"(If you are using a platform that is older than platform update 2 (August 2016), you do not need to specify the <bpt id=\"p1\">**</bpt>-install<ept id=\"p1\">**</ept> option) Here is an example.","source":"(If you are using a platform that is older than platform update 2 (August 2016), you do not need to specify the **-install** option) Here is an example."},{"content":"VSTS/TFS parameters let you add the files that are modified by the package to your list of pending changes in Team Explorer.","pos":[4945,5069]},{"pos":[5075,5094],"content":"Required parameters","linkify":"Required parameters","nodes":[{"content":"Required parameters","pos":[0,19]}]},{"pos":[5324,5338],"content":"TFS parameters","linkify":"TFS parameters","nodes":[{"content":"TFS parameters","pos":[0,14]}]},{"content":"If you're using VSTS or TFS for source control, you should specify the following two parameters.","pos":[5340,5436]},{"content":"After the install command is invoked, the package installation process begins.","pos":[5590,5668]},{"content":"As part of the installation process, some XML files in your metadata store folder will be updated to reflect the changes that were made in the fix itself.","pos":[5669,5823]},{"content":"If you’re using VSTS or TFS, these files will be added to the list of included changes in the <bpt id=\"p1\">**</bpt>Pending Changes<ept id=\"p1\">**</ept> window in Team Explorer.","pos":[5824,5962],"source":" If you’re using VSTS or TFS, these files will be added to the list of included changes in the **Pending Changes** window in Team Explorer."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>List of included changes in the Pending Changes window<ept id=\"p1\">](./media/configureinstallhotfix-2.png)](./media/configureinstallhotfix-2.png)</ept>","pos":[5963,6098],"source":"[![List of included changes in the Pending Changes window](./media/configureinstallhotfix-2.png)](./media/configureinstallhotfix-2.png)"},{"pos":[6103,6173],"content":"Resolve conflicts that are generated by the installation of the hotfix","linkify":"Resolve conflicts that are generated by the installation of the hotfix","nodes":[{"content":"Resolve conflicts that are generated by the installation of the hotfix","pos":[0,70]}]},{"content":"Sometimes, a metadata hotfix package contains changes to objects that have been customized in higher-layer models.","pos":[6174,6288]},{"content":"In this case, the installation process automatically generates conflicts that must be resolved after the hotfix has been installed.","pos":[6289,6420]},{"content":"The development tools let you create a project that groups all items that have conflicts.","pos":[6421,6510]},{"content":"For example, if you have a VAR layer model in the Application Suite package that customizes the VendTable form, and you install a hotfix that modifies the VendTable form in the Sys layer model, conflicts might occur in your VAR layer model.","pos":[6511,6751]},{"pos":[6757,6835],"content":"Click <bpt id=\"p1\">**</bpt>Dynamics 365<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Addins<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Create project from conflicts<ept id=\"p3\">**</ept>.","source":"Click **Dynamics 365** &gt; **Addins** &gt; **Create project from conflicts**."},{"content":"In the dialog box, select a model to check for conflicts.","pos":[6840,6897]},{"content":"Click <bpt id=\"p1\">**</bpt>Create project<ept id=\"p1\">**</ept>.","pos":[6902,6927],"source":"Click **Create project**."},{"content":"A project is generated that contains only those elements in the selected model that were found to have conflicts after the hotfix was applied.","pos":[6928,7070]},{"content":"Open the designer for the conflicting element to view conflicts, and resolve them by using the tools that are provided.","pos":[7075,7194]},{"pos":[7196,7348],"content":"The Office Mix at <bpt id=\"p1\">&lt;</bpt>https://mix.office.com/watch/1rl75ei2cs6d7<ept id=\"p1\">&gt;</ept> provides an introduction to the conflict resolution tools in the development environment.","source":"The Office Mix at <https://mix.office.com/watch/1rl75ei2cs6d7> provides an introduction to the conflict resolution tools in the development environment."},{"pos":[7353,7381],"content":"Build and test on a local VM","linkify":"Build and test on a local VM","nodes":[{"content":"Build and test on a local VM","pos":[0,28]}]},{"content":"Build all models that are affected by the hotfix, and test your application.","pos":[7382,7458]},{"pos":[7463,7506],"content":"Check pending changes in to version control","linkify":"Check pending changes in to version control","nodes":[{"content":"Check pending changes in to version control","pos":[0,43]}]},{"content":"When you're satisfied with all changes that are related to this update, check in your pending changes to VSTS by using Team Explorer in Microsoft Visual Studio.","pos":[7507,7667]},{"content":"Enter a comment in the <bpt id=\"p1\">**</bpt>Comment<ept id=\"p1\">**</ept> field, and then click <bpt id=\"p2\">**</bpt>Check In<ept id=\"p2\">**</ept>.","pos":[7668,7738],"source":" Enter a comment in the **Comment** field, and then click **Check In**."},{"content":"A history of the changes is preserved in your source code repository.","pos":[7739,7808]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If you use a build environment for build and test automation, the build automation process can build metadata hotfix files are in your VSTS project.","pos":[7809,7967],"source":"**Note:** If you use a build environment for build and test automation, the build automation process can build metadata hotfix files are in your VSTS project."},{"content":"A hotfix can be built only if the descriptor file of the model that it belongs to is checked in to version control.","pos":[7968,8083]},{"content":"For example, if the hotfix installation process modified a file that belongs to the Directory model (this file will appear in your list of pending changes), make sure that the descriptor file of the Directory model (c:<ph id=\"ph1\">\\\\</ph>AOSService<ph id=\"ph2\">\\\\</ph>PackagesLocalDirectory<ph id=\"ph3\">\\\\</ph>Directory<ph id=\"ph4\">\\\\</ph>Descriptor<ph id=\"ph5\">\\\\</ph>Directory.xml) is already checked in to your VSTS project.","pos":[8084,8421],"source":" For example, if the hotfix installation process modified a file that belongs to the Directory model (this file will appear in your list of pending changes), make sure that the descriptor file of the Directory model (c:\\\\AOSService\\\\PackagesLocalDirectory\\\\Directory\\\\Descriptor\\\\Directory.xml) is already checked in to your VSTS project."},{"content":"If it isn't checked in, manually add it to your list of pending changes before you check in by using Source Control Explorer.","pos":[8422,8547]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Manually adding the descriptor file to the list of pending changes<ept id=\"p1\">](./media/configureinstallhotfix-8.png)](./media/configureinstallhotfix-8.png)</ept>","pos":[8548,8695],"source":"[![Manually adding the descriptor file to the list of pending changes](./media/configureinstallhotfix-8.png)](./media/configureinstallhotfix-8.png)"},{"pos":[8700,8733],"content":"Synchronize other development VMs","linkify":"Synchronize other development VMs","nodes":[{"content":"Synchronize other development VMs","pos":[0,33]}]},{"content":"After a hotfix has been installed on a development VM as described in this article, you don't have to reinstall, resolve conflicts, and validate on other development VMs that are connected to the same VSTS project.","pos":[8734,8948]},{"content":"Developers and testers who are connected to the same VSTS project can just synchronize the changes into their local VM and then build.","pos":[8949,9083]},{"pos":[9088,9094],"content":"Deploy","linkify":"Deploy","nodes":[{"content":"Deploy","pos":[0,6]}]},{"content":"After you’ve applied a metadata hotfix to your development environment, resolved conflicts, and validated your changes, you must create a deployable package and apply your changes to your test or sandbox environment.","pos":[9095,9311]},{"content":"If you use a build instance for build and test automation, the build process will automatically create the deployable package for you.","pos":[9312,9446]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Create and apply a deployable package<ept id=\"p1\">](../deployment/create-apply-deployable-package.md)</ept>.","pos":[9447,9563],"source":" For more information, see [Create and apply a deployable package](../deployment/create-apply-deployable-package.md)."}],"content":"---\n# required metadata\n\ntitle: Install a metadata hotfix\ndescription: This topic will guide you through installing an Application Metadata hotfix on your development environment.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations\n# ms.tgt_pltfrm: \nms.custom: 79822\nms.assetid: 9b132253-1748-4b71-b128-c4b9d3a311ae\nms.search.region: Global\n# ms.search.industry: \nms.author: robadawy\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Install a metadata hotfix\n\nThis topic will guide you through installing an Application Metadata hotfix on your development environment.\n\nA metadata hotfix package contains changes (metadata or X++ source code) to model elements (XML files) in your development environment. A hotfix can also contain new model elements. A metadata hotfix package is in the form of an SCDP file. This article describes the process for installing a metadata hotfix package and explains how to share the package with other developers who are working on the same project.\n\n## Overall flow\nThe following diagram shows the overall flow. [![Process for installing a metadata hotfix package](./media/configureinstallhotfix-1.png)](./media/configureinstallhotfix-1.png)\n\n## Download the hotfix from LCS\nFor instructions about how to download a hotfix, see [Download hotfixes from Lifecycle Services](download-hotfix-lcs.md). After you download the zip file, extract the SCDP metadata hotfix package from it, and put it in a local folder.\n\n## Install the hotfix\n### Before you begin\n\n-   This article assumes that your packages folder is located at c:\\\\AOSService\\\\PackagesLocalDirectory. On some virtual machines (VMs), it might be located at c:\\\\Packages, i:\\\\AOSService\\\\PackagesLocalDirectory, or j:\\\\AOSService\\\\PackagesLocalDirectory.\n-   If you're not using Microsoft Visual Studio Team Services (VSTS) or another source control system, create a backup of your packages folder (which is also known as the metadata store). We don't recommend that you do development unless you use VSTS.\n-   If you have VSTS or Microsoft Team Foundation Server (TFS) version control, make sure that there are no files in the **Pending Changes** list of your current workspace. If you have pending changes, we recommend that you submit them or shelve them before you install the metadata hotfix.\n\n### Install the metadata hotfix package\n\nTo invoke the installation of the metadata hotfix, you can call the SCDPBundleInstall.exe utility from an administrator command prompt. SCDPBundleInstall.exe is located in your packages bin folder (c:\\\\AOSService\\\\PackagesLocalDirectory).\n\n#### Without version control (not recommended)\n\nIf you're not using VSTS or TFS for source control, use the following command.\n\n    SCDPBundleInstall.exe -packagepath=<scdp file containing the hotfix> -metadatastorepath=<metadata packages root folder>\n\n#### With version control (recommended)\n\nIf you're using VSTS or TFS for source control, follow the steps below: **Prepare** the installation of the hotfix package using the command below. (This step is not available if you are using a platform that is older than platform update 2 (August 2016))\n\n    SCDPBundleInstall.exe -prepare -packagepath=<scdp file containing the hotfixes> -metadatastorepath=<metadata packages root folder> -tfsworkspacepath=<path of local workspace folder> -tfsprojecturi=<URI of the VSTS or TFS project collection>\n\nThis will create a changeset of all the existing files on your environment that will be modified by the hotfix package, the prepare command will not install the hotfixes. Here is an example.\n\n    SCDPBundleInstall.exe -prepare -packagepath=c:\\temp\\hotfixbundle1234.axscdppkg -metadatastorepath= c:\\AOSService\\PackagesLocalDirectory -tfsworkspacepath= c:\\AOSService\\PackagesLocalDirectory -tfsprojecturi=https://myaccount.visualstudio.com/defaultcollection\n\n**Check-in** your pending changes to create a backup of these files in your version control system. This will enable rolling back the hotfixes if needed. **Install** the hotfix package using the command below.\n\n    SCDPBundleInstall.exe -install -packagepath=<scdp file containing the hotfixes> -metadatastorepath=<metadata packages root folder> -tfsworkspacepath=<path of local workspace folder> -tfsprojecturi=<URI of the VSTS or TFS project collection>\n\n(If you are using a platform that is older than platform update 2 (August 2016), you do not need to specify the **-install** option) Here is an example.\n\n    SCDPBundleInstall.exe -install -packagepath=c:\\temp\\hotfixbundle1234.axscdppkg -metadatastorepath= c:\\AOSService\\PackagesLocalDirectory -tfsworkspacepath= c:\\AOSService\\PackagesLocalDirectory -tfsprojecturi=https://myaccount.visualstudio.com/defaultcollection\n\nVSTS/TFS parameters let you add the files that are modified by the package to your list of pending changes in Team Explorer.\n\n### Required parameters\n\n    /packagepath=[Path of the local scdp file containing the hotfixes downloaded from Lifecycle Service (LCS)]\n\n    /metadatastorepath=[Path of the local metadata store folder, such as c:\\AOSService\\PackagesLocalDirectory]\n\n### TFS parameters\n\nIf you're using VSTS or TFS for source control, you should specify the following two parameters.\n\n    /tfsprojecturi=[URI of the TFS Project to connect to]\n\n    /tfsworkspacepath=[Path of the local workspace, usually equal to the metadatastorepath]\n\nAfter the install command is invoked, the package installation process begins. As part of the installation process, some XML files in your metadata store folder will be updated to reflect the changes that were made in the fix itself. If you’re using VSTS or TFS, these files will be added to the list of included changes in the **Pending Changes** window in Team Explorer. [![List of included changes in the Pending Changes window](./media/configureinstallhotfix-2.png)](./media/configureinstallhotfix-2.png)\n\n## Resolve conflicts that are generated by the installation of the hotfix\nSometimes, a metadata hotfix package contains changes to objects that have been customized in higher-layer models. In this case, the installation process automatically generates conflicts that must be resolved after the hotfix has been installed. The development tools let you create a project that groups all items that have conflicts. For example, if you have a VAR layer model in the Application Suite package that customizes the VendTable form, and you install a hotfix that modifies the VendTable form in the Sys layer model, conflicts might occur in your VAR layer model.\n\n1.  Click **Dynamics 365** &gt; **Addins** &gt; **Create project from conflicts**.\n2.  In the dialog box, select a model to check for conflicts.\n3.  Click **Create project**. A project is generated that contains only those elements in the selected model that were found to have conflicts after the hotfix was applied.\n4.  Open the designer for the conflicting element to view conflicts, and resolve them by using the tools that are provided.\n\nThe Office Mix at <https://mix.office.com/watch/1rl75ei2cs6d7> provides an introduction to the conflict resolution tools in the development environment.\n\n## Build and test on a local VM\nBuild all models that are affected by the hotfix, and test your application.\n\n## Check pending changes in to version control\nWhen you're satisfied with all changes that are related to this update, check in your pending changes to VSTS by using Team Explorer in Microsoft Visual Studio. Enter a comment in the **Comment** field, and then click **Check In**. A history of the changes is preserved in your source code repository. **Note:** If you use a build environment for build and test automation, the build automation process can build metadata hotfix files are in your VSTS project. A hotfix can be built only if the descriptor file of the model that it belongs to is checked in to version control. For example, if the hotfix installation process modified a file that belongs to the Directory model (this file will appear in your list of pending changes), make sure that the descriptor file of the Directory model (c:\\\\AOSService\\\\PackagesLocalDirectory\\\\Directory\\\\Descriptor\\\\Directory.xml) is already checked in to your VSTS project. If it isn't checked in, manually add it to your list of pending changes before you check in by using Source Control Explorer. [![Manually adding the descriptor file to the list of pending changes](./media/configureinstallhotfix-8.png)](./media/configureinstallhotfix-8.png)\n\n## Synchronize other development VMs\nAfter a hotfix has been installed on a development VM as described in this article, you don't have to reinstall, resolve conflicts, and validate on other development VMs that are connected to the same VSTS project. Developers and testers who are connected to the same VSTS project can just synchronize the changes into their local VM and then build.\n\n## Deploy\nAfter you’ve applied a metadata hotfix to your development environment, resolved conflicts, and validated your changes, you must create a deployable package and apply your changes to your test or sandbox environment. If you use a build instance for build and test automation, the build process will automatically create the deployable package for you. For more information, see [Create and apply a deployable package](../deployment/create-apply-deployable-package.md).\n\n"}