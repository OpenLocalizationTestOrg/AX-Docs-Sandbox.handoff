{"nodes":[{"pos":[32,51],"content":"Retail SDK overview","needQuote":true,"needEscape":true,"nodes":[{"content":"Retail SDK overview","pos":[0,19]}]},{"pos":[65,245],"content":"This article provides general information about the Retail SDK. The Retail SDK includes code, code samples, templates, and tools that you can use to customize retail functionality.","needQuote":true,"needEscape":true,"nodes":[{"content":"This article provides general information about the Retail SDK. The Retail SDK includes code, code samples, templates, and tools that you can use to customize retail functionality.","pos":[0,180],"nodes":[{"content":"This article provides general information about the Retail SDK.","pos":[0,63]},{"content":"The Retail SDK includes code, code samples, templates, and tools that you can use to customize retail functionality.","pos":[64,180]}]}]},{"pos":[755,774],"content":"Retail SDK overview","linkify":"Retail SDK overview","nodes":[{"content":"Retail SDK overview","pos":[0,19]}]},{"content":"This article provides general information about the Retail SDK.","pos":[776,839]},{"content":"The Retail SDK includes code, code samples, templates, and tools that you can use to customize retail functionality.","pos":[840,956]},{"pos":[958,966],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"The Retail software development kit (SDK) includes code, code samples, templates, and tools that you can use to customize retail functionality.","pos":[977,1120]},{"content":"The SDK supports rapid development, full MSBuild integration, package generation, and code separation.","pos":[1121,1223]},{"pos":[1229,1252],"content":"Download the Retail SDK","linkify":"Download the Retail SDK","nodes":[{"content":"Download the Retail SDK","pos":[0,23]}]},{"content":"The Retail SDK is available in Microsoft Dynamics 365 for Operations development environments, and in hotfix packages in a Retail SDK folder.","pos":[1254,1395]},{"content":"For more information see:","pos":[1396,1421]},{"content":"<bpt id=\"p1\">[</bpt>Access Microsoft Dynamics 365 for Operations Development Instances<ept id=\"p1\">](access-instances.md)</ept>.","pos":[1427,1517],"source":"[Access Microsoft Dynamics 365 for Operations Development Instances](access-instances.md)."},{"content":"If you get the SDK from a development instance, it is immediately ready for configuration and use.","pos":[1518,1616]},{"content":"<bpt id=\"p1\">[</bpt>Install Retail hotfixes.<ept id=\"p1\">](install-retail-hotfix.md)</ept>","pos":[1621,1673],"source":"[Install Retail hotfixes.](install-retail-hotfix.md)"},{"content":"If you get the SDK from a hotfix, it is included in the hotfix package as a zipped folder.","pos":[1674,1764]},{"content":"Retail hotfixes are cumulative and includes all other fixes.","pos":[1765,1825]},{"content":"We recommend that you put the SDK in a source control system such as Visual Studio Online.","pos":[1827,1917]},{"pos":[1923,1940],"content":"Rapid development","linkify":"Rapid development","nodes":[{"content":"Rapid development","pos":[0,17]}]},{"content":"The main focus of the Retail SDK is to help you write customizations efficiently and correctly.","pos":[1942,2037]},{"content":"The SDK lets you run applications directly in a single-computer demo environment by using the F5 functionality (run and debug) in Microsoft Visual Studio.","pos":[2038,2192]},{"content":"All the required “deployment chores” are done for you.","pos":[2193,2247]},{"content":"Therefore, you don't have to copy any files.","pos":[2248,2292]},{"pos":[2298,2322],"content":"Full MSBuild integration","linkify":"Full MSBuild integration","nodes":[{"content":"Full MSBuild integration","pos":[0,24]}]},{"content":"The Retail SDK is a build system.","pos":[2324,2357]},{"content":"A simple MSBuild command from the root of the SDK builds everything.","pos":[2358,2426]},{"content":"This behavior eliminates guesswork about how and where to build from, and guarantees consistency and reproducibility.","pos":[2427,2544]},{"content":"Therefore, the Retail SDK can easily be used together with any application lifecycle management (ALM) system, even Microsoft Visual Studio Online.","pos":[2545,2691]},{"content":"This integration includes automation of the build.","pos":[2692,2742]},{"pos":[2748,2837],"content":"Creation of final update packages, and better and explicit control over the customization","linkify":"Creation of final update packages, and better and explicit control over the customization","nodes":[{"content":"Creation of final update packages, and better and explicit control over the customization","pos":[0,89]}]},{"content":"The Retail SDK includes tools that generate new packages that include everything that is required in order to deploy a service.","pos":[2839,2966]},{"content":"For example, if the commerce runtime is extended with a new custom service dynamic-link library (DLL), the SDK automatically includes the new DLL in all appropriate packages (RetailServer and MPOSOffline).","pos":[2967,3172]},{"content":"Or, if the database is extended, the upgrade script is automatically included in both RetailServer and MPOSOffline packages, because these are the packages that must (potentially) run the channel database update.","pos":[3173,3385]},{"content":"Files that are shared exist only one time in the SDK.","pos":[3386,3439]},{"content":"The packaging projects are set up in such a way that they pull in the right files for the package.","pos":[3440,3538]},{"content":"Therefore, you edit a commerceruntime.config file in only one place.","pos":[3539,3607]},{"content":"The same applies for deployment-related script files, even though these files rarely require customization.","pos":[3608,3715]},{"pos":[3721,3743],"content":"Better code separation","linkify":"Better code separation","nodes":[{"content":"Better code separation","pos":[0,22]}]},{"content":"Whenever the Retail SDK must be updated, a potential code merge is required.","pos":[3745,3821]},{"content":"This requirement applies if existing code was changed.","pos":[3822,3876]},{"content":"Some new features in the implementation of Microsoft Dynamics 365 for Operations for Retail and in the folder structure of the SDK help provide better separation of customization code from sample code.","pos":[3877,4078]},{"content":"Therefore, these features eliminate much of this issue.","pos":[4079,4134]},{"content":"You can expect more improvements in this area in the future.","pos":[4135,4195]},{"pos":[4201,4234],"content":"Real-world implementation samples","linkify":"Real-world implementation samples","nodes":[{"content":"Real-world implementation samples","pos":[0,33]}]},{"content":"In addition to the source code of some of the Retail implementations, the Retail SDK includes sample code that illustrates how certain scenarios should be implemented.","pos":[4236,4403]},{"pos":[4408,4428],"content":"Retail SDK deep dive","linkify":"Retail SDK deep dive","nodes":[{"content":"Retail SDK deep dive","pos":[0,20]}]},{"pos":[4433,4446],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"pos":[4452,4531],"content":"To <bpt id=\"p1\">**</bpt>code<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>build<ept id=\"p2\">**</ept> your customization, you must have the following tools:","source":"To **code** or **build** your customization, you must have the following tools:"},{"content":"Microsoft Visual Studio 2015 with Typescript 1.5 (an LCS developer topology is acceptable)","pos":[4540,4630]},{"content":"ASP.NET MVC 4.0 (an LCS developer topology acceptable) (required only by StoreFront)","pos":[4639,4723]},{"content":"A minimum of 150 MB of available disk space (an LCS developer topology is acceptable)","pos":[4732,4817]},{"content":"This list of requirement is very short and lets developers to be productive on simple laptops.","pos":[4823,4917]},{"content":"There is no longer a prerequisite for a validation utility.","pos":[4918,4977]},{"content":"To <bpt id=\"p1\">**</bpt>run<ept id=\"p1\">**</ept> your customization, the normal prerequisites to run Retail apply.","pos":[4982,5058],"source":"To **run** your customization, the normal prerequisites to run Retail apply."},{"content":"We recommend that you run the customizations on a single-box developer topology (either LCS cloud-hosted or downloaded) during development.","pos":[5059,5198]},{"pos":[5204,5223],"content":"Retail SDK contents","linkify":"Retail SDK contents","nodes":[{"content":"Retail SDK contents","pos":[0,19]}]},{"content":"The following folders and files are part of the Retail SDK at the top level.","pos":[5225,5301]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK01<ept id=\"p1\">](./media/retailsdk01.png)](./media/retailsdk01.png)</ept>","pos":[5302,5368],"source":"[![RetailSDK01](./media/retailsdk01.png)](./media/retailsdk01.png)"},{"content":"Folder/file","pos":[5473,5484]},{"content":"Description","pos":[5494,5505]},{"content":"Assets","pos":[5555,5561]},{"content":"Contains shared items such as scripts and configuration files (commerceRuntime.config, dllhost.exe.config, and so on).","pos":[5571,5689]},{"content":"The configuration files should be customized and edited in this location.","pos":[5690,5763]},{"content":"The projects that use them will pick them up appropriately.","pos":[5764,5823]},{"content":"BuildTools","pos":[5857,5867]},{"content":"Contains anything that is related to the MSBuild and global configurations.","pos":[5877,5952]},{"content":"Customization.settings is the main file that is used to set up the build system.","pos":[5953,6033]},{"content":"The following list shows the items that this file controls and that customizers will likely change:","pos":[6034,6133],"source":" The following list shows the items that this file controls and that customizers will likely change:\n"},{"content":"Prefix for all built assemblies (AssemblyNamePrefix)","pos":[6143,6195]},{"content":"Assembly version for all binaries (CustomAssemblyVersion)","pos":[6205,6262]},{"content":"File version for all binaries (CustomVersion)","pos":[6272,6317]},{"content":"Name of the customization (CustomName)","pos":[6327,6365]},{"content":"Description of the customization (CustomDescription)","pos":[6375,6427]},{"content":"Publisher (CustomPublisher)","pos":[6437,6464]},{"content":"Code signing (SignAssembly, AssemblyOriginatorKeyFile)","pos":[6474,6528]},{"content":"Modern POS certificate path (ModernPOSPackageCertificateKeyFile)","pos":[6538,6602]},{"content":"Files that are related to the customization (RetailServerLibraryPathForProxyGeneration, ISV_*)","pos":[6612,6706]},{"content":"CommerceRuntime","pos":[6750,6765]},{"content":"Contains a Visual Studio solution file (CommerceRuntime.sln) and related C# projects (CommerceRuntime, PricingEngine).","pos":[6775,6893]},{"content":"Database","pos":[6927,6935]},{"content":"Contains shared database scripts.","pos":[6945,6978]},{"content":"The full script CommerceRuntimeScripts_Create.sql is used only to create a new base database.","pos":[6979,7072]},{"content":"The Upgrade folder includes incremental scripts from both Microsoft and the customizer.","pos":[7073,7160]},{"content":"The existence of the database or the version in the database during a deployment controls which full or incremental scripts will be run.","pos":[7161,7297]},{"content":"Only scripts that haven't been run before will be run.","pos":[7298,7352]},{"content":"HardwareStation","pos":[7385,7400]},{"content":"Contains a Visual Studio solution file (HardwareStation.sln) and related C# projects (HardwareStation libraries and Webhost).","pos":[7410,7535]},{"content":"OnlineStore","pos":[7569,7580]},{"content":"Contains a Visual Studio solution file (OnlineStore.sln) and related C# projects (Ecommerce SDK).","pos":[7590,7687]},{"content":"Packages","pos":[7720,7728]},{"content":"Contains multiple projects for package creation.","pos":[7738,7786]},{"content":"These packages are used to deploy via LCS.","pos":[7787,7829]},{"content":"These packages also include the final web.config files.","pos":[7830,7885]},{"content":"Payments","pos":[7919,7927]},{"content":"Contains a Visual Studio solution file (PaymentSDK.sln) and related C# projects (PaymentSDK connectors, samples and functional test).","pos":[7937,8070]},{"content":"POS","pos":[8103,8106]},{"content":"Contains files for POS:","pos":[8116,8139],"source":"Contains files for POS:\n"},{"content":"CloudPos.sln","pos":[8149,8161]},{"content":"ModernPos.sln","pos":[8171,8184]},{"content":"Folder Core – Low-level shared POS code","pos":[8194,8233]},{"content":"Folder ViewModels – Shared POS view models","pos":[8243,8285]},{"content":"Folder SharedApp – Shared POS views","pos":[8295,8330]},{"content":"Folder App – Modern POS–specific views and other items","pos":[8340,8394]},{"content":"Folder Web – Cloud POS–specific views and other items","pos":[8404,8457]},{"content":"Proxies","pos":[8502,8509]},{"content":"Contains two Visual Studio projects that are referenced by others.","pos":[8519,8585]},{"content":"These projects contain interfaces and generated code that serves as a proxy client of Retail Server.","pos":[8586,8686]},{"content":"Proxies.Retail.TypeScript is the TypeScript proxy, and RetailProxy is the C# proxy.","pos":[8687,8770]},{"content":"They are used by Modern POS/Cloud POS and the ECommerce SDK.","pos":[8771,8831]},{"content":"References","pos":[8864,8874]},{"content":"The single place where all binaries live.","pos":[8884,8925]},{"content":"The location is used to resolve any project’s binary references.","pos":[8926,8990]},{"content":"The list of files includes external non-Retail binaries and also Microsoft Retail binaries.","pos":[8991,9082]},{"content":"Additionally, this directory serves as the global drop location for any binaries that are built from the Retail SDK.","pos":[9083,9199]},{"content":"SampleExtensions","pos":[9233,9249]},{"content":"Contains sample extensions.","pos":[9259,9286]},{"content":"dirs.proj","pos":[9319,9328]},{"content":"The top-level MSBuild file that directs the build order.","pos":[9338,9394]},{"content":"Microsoft-version.txt","pos":[9428,9449]},{"content":"A file that includes the Microsoft version of the Retail SDK.","pos":[9459,9520]},{"content":"Don't edit this file.","pos":[9521,9542]},{"content":"The C<ph id=\"ph1\">\\#</ph> source code in the SDK uses the Contoso namespace.","pos":[9573,9631],"source":"The C\\# source code in the SDK uses the Contoso namespace."},{"content":"Therefore, it's easier to distinguish Microsoft types and your own types, because Microsoft uses Microsoft.Dynamics.","pos":[9632,9748]},{"content":"If you're referencing a type from the Microsoft binary, reference it by using Microsoft.Dynamics.","pos":[9749,9846]},{"content":"That way, you'll know that it's not from the Retail SDK but from a referenced binary.","pos":[9847,9932]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK02<ept id=\"p1\">](./media/retailsdk02.png)](./media/retailsdk02.png)</ept>","pos":[9933,9999],"source":"[![RetailSDK02](./media/retailsdk02.png)](./media/retailsdk02.png)"},{"pos":[10005,10046],"content":"Dependencies, build order, and full build","linkify":"Dependencies, build order, and full build","nodes":[{"content":"Dependencies, build order, and full build","pos":[0,41]}]},{"content":"The following illustration shows a high-level logical dependency tree within the Retail SDK.","pos":[10048,10140]},{"content":"It doesn't show the references to all Microsoft files or assets.","pos":[10141,10205]},{"content":"To see these, look at the Visual Studio project and solution files in more detail.","pos":[10206,10288]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK03<ept id=\"p1\">](./media/retailsdk03.png)](./media/retailsdk03.png)</ept> Note the following important points:","pos":[10289,10392],"source":"[![RetailSDK03](./media/retailsdk03.png)](./media/retailsdk03.png) Note the following important points:"},{"content":"The RetailServer API is consumed by a few projects by means of automatically generated client proxy code.","pos":[10398,10503]},{"content":"This behavior allows for more rapid development, and reduces opportunities for errors and bugs.","pos":[10504,10599]},{"content":"By default, the Retail SDK uses the official Microsoft DLL to generate the client code.","pos":[10600,10687]},{"content":"Customizers can switch to their own DLL (in Customization.settings) and therefore automatically generate the proxy code for their customized RetailServer API.","pos":[10688,10846]},{"content":"After switching the DLL, a developer might have to change some implementations inside the RetailProxy project.","pos":[10847,10957]},{"content":"The reason is that Modern POS in offline mode must communicate directly with the commerce runtime, and that code must be implemented.","pos":[10958,11091]},{"content":"However, no guesswork is required.","pos":[11092,11126]},{"content":"The C<ph id=\"ph1\">\\#</ph> compiler will force it.","pos":[11127,11158],"source":" The C\\# compiler will force it."},{"content":"The packaging projects generate the deployment packages in the way that LCS expects them.","pos":[11163,11252]},{"content":"By default, these project will ship only the Microsoft assets (non-customized) and the proxy DLLs.","pos":[11253,11351]},{"content":"Anything else that should be included must be explicitly named in Customization.settings.","pos":[11352,11441]},{"content":"This behavior is by design.","pos":[11442,11469]},{"content":"It reduces the deployed custom code and allows for binary patches.","pos":[11470,11536]},{"content":"For example, a customization adds a new CommerceRuntime service and a new RetailServer controller.","pos":[11537,11635]},{"content":"In this case, two new DLLs are registered for inclusion in the packages and are automatically included in all relevant places.","pos":[11636,11762]},{"content":"The packages will <bpt id=\"p1\">**</bpt>not<ept id=\"p1\">**</ept> have all recompiled binaries from the SDK.","pos":[11763,11831],"source":" The packages will **not** have all recompiled binaries from the SDK."},{"content":"There is no single Visual Studio solution that includes all projects.","pos":[11836,11905]},{"content":"Because there are few couplings between the various Visual Studio projects, you can open multiple projects or solutions side by side, and can compile the appropriate project after a change.","pos":[11906,12095]},{"content":"Even if you didn't customize every component, the easiest way to get the final deployment packages is by building the whole Retail SDK.","pos":[12100,12235]},{"content":"To do this, open an <bpt id=\"p1\">**</bpt>MSBuild Command Prompt for VS2015<ept id=\"p1\">**</ept> window, and enter <bpt id=\"p2\">**</bpt>msbuild<ept id=\"p2\">**</ept> (or <bpt id=\"p3\">**</bpt>msbuild /p:Configuration=Release<ept id=\"p3\">**</ept> for a non-debug version).","pos":[12236,12390],"source":" To do this, open an **MSBuild Command Prompt for VS2015** window, and enter **msbuild** (or **msbuild /p:Configuration=Release** for a non-debug version)."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK04<ept id=\"p1\">](./media/retailsdk04.png)](./media/retailsdk04.png)</ept>","pos":[12391,12457],"source":"[![RetailSDK04](./media/retailsdk04.png)](./media/retailsdk04.png)"},{"content":"This command will build all projects.","pos":[12459,12496]},{"content":"This approach also provides a great way to verify that there are no implementation or code bugs.","pos":[12497,12593]},{"content":"If there are any bugs, the build will fail, and the Command Prompt window will show what failed (this output resembles what Visual Studio would show).","pos":[12594,12744]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK05<ept id=\"p1\">](./media/retailsdk05.png)](./media/retailsdk05.png)</ept> For detailed help for MSBuild, see <bpt id=\"p2\">[</bpt>https://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx<ept id=\"p2\">](https://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)</ept>.","pos":[12745,12960],"source":"[![RetailSDK05](./media/retailsdk05.png)](./media/retailsdk05.png) For detailed help for MSBuild, see [https://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx](https://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)."},{"content":"The binaries that the build creates are automatically copied to the SDK’s References folder.","pos":[12961,13053]},{"content":"The References folder also includes all the other binaries.","pos":[13054,13113]},{"content":"Notice that no DLLs are overwritten, because they are all prefixed with a name (in this case, \"Contoso\") that you can define in Customization.settings.","pos":[13114,13265]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK06<ept id=\"p1\">](./media/retailsdk06.png)](./media/retailsdk06.png)</ept>","pos":[13266,13332],"source":"[![RetailSDK06](./media/retailsdk06.png)](./media/retailsdk06.png)"},{"pos":[13338,13368],"content":"Minimal required configuration","linkify":"Minimal required configuration","nodes":[{"content":"Minimal required configuration","pos":[0,30]}]},{"content":"Do you just want to quickly build the Retail SDK, or to run POS in the debugger on a demo machine?","pos":[13370,13468]},{"content":"For Modern POS only, you must create an app package signing certificate in order to build correctly.","pos":[13469,13569]},{"content":"Alternatively, you can use Cloud POS.","pos":[13570,13607]},{"content":"Follow the instructions at <bpt id=\"p1\">[</bpt>https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx)</ept> to create a PFX file.","pos":[13608,13819],"source":" Follow the instructions at [https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx) to create a PFX file."},{"content":"Then copy the PFX file to the BuildTools folder, and update the BuildTools<ph id=\"ph1\">\\\\</ph>Customization.settings file with the correct name (ModernPOSPackageCertificateKeyFile).","pos":[13820,13983],"source":" Then copy the PFX file to the BuildTools folder, and update the BuildTools\\\\Customization.settings file with the correct name (ModernPOSPackageCertificateKeyFile)."},{"content":"At this point you have everything that you require in order to build individual solutions, projects, or the whole Retail SDK (by using MSBuild).","pos":[13984,14128]},{"pos":[14134,14167],"content":"Normal configuration/code signing","linkify":"Normal configuration/code signing","nodes":[{"content":"Normal configuration/code signing","pos":[0,33]}]},{"content":"BuildTools<ph id=\"ph1\">\\\\</ph>Customization.settings holds most of the configuration values for the SDK.","pos":[14169,14255],"source":"BuildTools\\\\Customization.settings holds most of the configuration values for the SDK."},{"content":"The highlighted items in the following illustration are the global values.","pos":[14256,14330]},{"content":"These values control how built binaries, components, and packages are named, versioned, and code-signed.","pos":[14331,14435]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK07<ept id=\"p1\">](./media/retailsdk07.png)](./media/retailsdk07.png)</ept> It's good practice to sign your assemblies with a strong name, even though this isn't required.","pos":[14436,14598],"source":"[![RetailSDK07](./media/retailsdk07.png)](./media/retailsdk07.png) It's good practice to sign your assemblies with a strong name, even though this isn't required."},{"content":"To learn how to create your own key file if you don't already have one, see <bpt id=\"p1\">[</bpt>https://msdn.microsoft.com/en-us/library/6f05ezxy(v=vs.110).aspx<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/6f05ezxy(v=vs.110).aspx)</ept>.","pos":[14599,14808],"source":" To learn how to create your own key file if you don't already have one, see [https://msdn.microsoft.com/en-us/library/6f05ezxy(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/6f05ezxy(v=vs.110).aspx)."},{"content":"To build correctly, you must create an app package signing certificate.","pos":[14809,14880]},{"content":"Follow these instructions at <bpt id=\"p1\">[</bpt>https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx)</ept> to create a PFX file.","pos":[14881,15094],"source":" Follow these instructions at [https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx) to create a PFX file."},{"content":"Both the strong name key file and the app package signing certificate can be stored inside the BuildTools folder.","pos":[15095,15208]},{"content":"The <bpt id=\"p1\">**</bpt>RetailServerLibraryPathForProxyGeneration<ept id=\"p1\">**</ept> property can be used to set a different RetailServer DLL for proxy generation.","pos":[15209,15337],"source":" The **RetailServerLibraryPathForProxyGeneration** property can be used to set a different RetailServer DLL for proxy generation."},{"content":"Customization.settings is also the place to define your new customization assets, such as binaries, configuration files, and SQL update scripts.","pos":[15338,15482]},{"content":"After you specify your extensions, binaries, and assets here, the files will be added in the deployable package that is created.","pos":[15483,15611]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK08<ept id=\"p1\">](./media/retailsdk08.png)](./media/retailsdk08.png)</ept>","pos":[15612,15678],"source":"[![RetailSDK08](./media/retailsdk08.png)](./media/retailsdk08.png)"},{"pos":[15684,15705],"content":"Customizing the build","linkify":"Customizing the build","nodes":[{"content":"Customizing the build","pos":[0,21]}]},{"pos":[15712,15731],"content":"Adding new projects","linkify":"Adding new projects","nodes":[{"content":"Adding new projects","pos":[0,19]}]},{"content":"It's easy to adding new projects to the Retail SDK’s build system.","pos":[15733,15799]},{"content":"You can either clone one of the many existing projects or start a new project.","pos":[15800,15878]},{"content":"You just have to make some adjustments in a text editor, as shown in the following illustration.","pos":[15879,15975]},{"content":"The relative path of the <bpt id=\"p1\">**</bpt>Import<ept id=\"p1\">**</ept> elements should be adjusted, and the <bpt id=\"p2\">**</bpt>AssemblyName<ept id=\"p2\">**</ept> element should use the predefined <bpt id=\"p3\">**</bpt>AssemblyNamePrefix<ept id=\"p3\">**</ept> property.","pos":[15976,16132],"source":" The relative path of the **Import** elements should be adjusted, and the **AssemblyName** element should use the predefined **AssemblyNamePrefix** property."},{"content":"These adjustments are required in order to get versioning, code signing, uniform assembly naming, automatic dropping to the References folder, and other tasks for free.","pos":[16133,16301]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK09<ept id=\"p1\">](./media/retailsdk09.png)](./media/retailsdk09.png)</ept>","pos":[16302,16368],"source":"[![RetailSDK09](./media/retailsdk09.png)](./media/retailsdk09.png)"},{"pos":[16375,16422],"content":"Changing the build order or adding to the build","linkify":"Changing the build order or adding to the build","nodes":[{"content":"Changing the build order or adding to the build","pos":[0,47]}]},{"content":"The whole directory tree of the Retail SDK is built with the help of MSBuild traversal files (dirs.proj files).","pos":[16424,16535]},{"content":"The following illustration shows the main traversal file of the Retail SDK.","pos":[16536,16611]},{"content":"Similar files might also exist in subdirectories.","pos":[16612,16661]},{"content":"Notice that Visual Studio solution files (.sln files) are very similar to traversal files.","pos":[16662,16752]},{"content":"Both “direct” the MSBuild engine to process other build scripts.","pos":[16753,16817]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK10<ept id=\"p1\">](./media/retailsdk10.png)](./media/retailsdk10.png)</ept> After new code is added, most of it should be located in a new folder (for details, see \"Best practices of code implementation\"), and you must add it to the traversal structure by adding to one or multiple dirs.proj files.","pos":[16818,17107],"source":"[![RetailSDK10](./media/retailsdk10.png)](./media/retailsdk10.png) After new code is added, most of it should be located in a new folder (for details, see \"Best practices of code implementation\"), and you must add it to the traversal structure by adding to one or multiple dirs.proj files."},{"content":"The Extensions folder appears highlighted on line 10 in the previous illustration.","pos":[17108,17190]},{"content":"The quickest way to get started with a new dirs.proj file is to copy an existing file, correct the paths in the <bpt id=\"p1\">**</bpt>Import<ept id=\"p1\">**</ept> elements, and update the <bpt id=\"p2\">**</bpt>ProjectFiles<ept id=\"p2\">**</ept> elements in the <bpt id=\"p3\">**</bpt>ItemGroup<ept id=\"p3\">**</ept> element.","pos":[17191,17394],"source":" The quickest way to get started with a new dirs.proj file is to copy an existing file, correct the paths in the **Import** elements, and update the **ProjectFiles** elements in the **ItemGroup** element."},{"pos":[17401,17427],"content":"Build script customization","linkify":"Build script customization","nodes":[{"content":"Build script customization","pos":[0,26]}]},{"content":"When you must implement new build steps, keep in mind that the existing scripts might be updated by a Retail SDK update later.","pos":[17429,17555]},{"content":"Best practice is to minimize the editing of any file, or add new files instead.","pos":[17556,17635]},{"content":"If you require new global MSBuild properties, BuildTools<ph id=\"ph1\">\\\\</ph>Microsoft.Dynamics.RetailSDK.Build.props is a good place to add them.","pos":[17636,17763],"source":" If you require new global MSBuild properties, BuildTools\\\\Microsoft.Dynamics.RetailSDK.Build.props is a good place to add them."},{"content":"Likewise, BuildTools<ph id=\"ph1\">\\\\</ph>Microsoft.Dynamics.RetailSDK.Build.targets can be used to add new build processing targets.","pos":[17764,17877],"source":" Likewise, BuildTools\\\\Microsoft.Dynamics.RetailSDK.Build.targets can be used to add new build processing targets."},{"content":"If only one project requires special handling, it is better to explicitly make the change there.","pos":[17878,17974]},{"content":"If you require new local MSBuild properties, add a new file that is named local.props in the same directory.","pos":[17975,18083]},{"content":"Alternatively, add a local.targets file if you require local build processing targets.","pos":[18084,18170]},{"pos":[18176,18198],"content":"Developer productivity","linkify":"Developer productivity","nodes":[{"content":"Developer productivity","pos":[0,22]}]},{"content":"As shown in the architecture diagram earlier in this article, several things depend on the RetailServer interface.","pos":[18200,18314]},{"content":"It is likely that someone will change this interface.","pos":[18315,18368]},{"content":"On a developer topology machine, someone might want to immediately try out a change.","pos":[18369,18453]},{"content":"In this case, any CommerceRuntime and RetailServer extension DLLs must be copied into the bin folder of the locally installed RetailServer web application.","pos":[18454,18609]},{"content":"A user can configure the Customization.setting file so that the DLLs are automatically copied into the bin folder of the local RetailServer web application whenever new versions of these files are built.","pos":[18610,18813]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK11<ept id=\"p1\">](./media/retailsdk11.png)](./media/retailsdk11.png)</ept>","pos":[18814,18880],"source":"[![RetailSDK11](./media/retailsdk11.png)](./media/retailsdk11.png)"},{"pos":[18886,18918],"content":"Application lifecycle management","linkify":"Application lifecycle management","nodes":[{"content":"Application lifecycle management","pos":[0,32]}]},{"content":"A good ALM solution provides version control, builds, automated builds, planning tools, tracking tools, dashboards, customization, and more.","pos":[18920,19060]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>https://msdn.microsoft.com/en-us/library/fda2bad5.aspx<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/fda2bad5.aspx)</ept>.","pos":[19061,19200],"source":" For more information, see [https://msdn.microsoft.com/en-us/library/fda2bad5.aspx](https://msdn.microsoft.com/en-us/library/fda2bad5.aspx)."},{"content":"The Retail SDK is organized in such a way that it aligns well with these capabilities.","pos":[19201,19287]},{"content":"Visual Studio Online is a great tool and is recommended.","pos":[19288,19344]},{"pos":[19350,19374],"content":"Branching and versioning","linkify":"Branching and versioning","nodes":[{"content":"Branching and versioning","pos":[0,24]}]},{"content":"To work efficiently in a team, or even just to be able to go back and look at some changes that were done in the past, you must have good branching strategy and versioning discipline.","pos":[19376,19559]},{"content":"The following illustration shows a simple branching strategy that might work well for most teams.","pos":[19560,19657]},{"content":"The version numbers are fictitious.","pos":[19658,19693]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>RetailSDK12<ept id=\"p1\">](./media/retailsdk12.png)](./media/retailsdk12.png)</ept>","pos":[19694,19760],"source":"[![RetailSDK12](./media/retailsdk12.png)](./media/retailsdk12.png)"},{"pos":[19767,19791],"content":"Retail SDK mirror branch","linkify":"Retail SDK mirror branch","nodes":[{"content":"Retail SDK mirror branch","pos":[0,24]}]},{"content":"A very important point to emphasize is that the non-customized Retail SDK should be stored in your source control.","pos":[19793,19907]},{"content":"You don't have to store every version, but the versions that your team wants to snap to should be added (these versions might be cumulative updates or hotfixes).","pos":[19908,20069]},{"content":"Only a simple merge of all changes (additions, changes, and deletions) should be done.","pos":[20070,20156]},{"content":"No other development work should occur in this branch.","pos":[20157,20211]},{"content":"The Retail SDK has its own version.","pos":[20212,20247]},{"content":"All Retail binaries and packages that are included have the same version.","pos":[20248,20321]},{"content":"The version can also be found in the root of the Retail SDK in a file that is named Microsoft-version.txt.","pos":[20322,20428]},{"pos":[20435,20455],"content":"Customization branch","linkify":"Customization branch","nodes":[{"content":"Customization branch","pos":[0,20]}]},{"content":"After development can start, a new branch should be started (customization branch).","pos":[20457,20540]},{"content":"At the beginning of the initial branch-out, this branch will be an exact copy of the Retail SDK mirror branch.","pos":[20541,20651]},{"content":"This is the branch for a team’s development.","pos":[20652,20696]},{"content":"The version of the customization branch must be incremented at least every time that a build is created for testing, or it can even be incremented daily.","pos":[20697,20850]},{"content":"The file version to increment is defined in Customization.setting file by using the <bpt id=\"p1\">**</bpt>CustomVersion<ept id=\"p1\">**</ept> property.","pos":[20851,20962],"source":" The file version to increment is defined in Customization.setting file by using the **CustomVersion** property."},{"content":"If you update it and rebuild, all binaries, packages, manifest files are updated accordingly.","pos":[20963,21056]},{"content":"Note that the <bpt id=\"p1\">**</bpt>CustomAssemblyVersion<ept id=\"p1\">**</ept> property should be updated only when the update isn't backward compatible and/or for major new releases.","pos":[21057,21201],"source":" Note that the **CustomAssemblyVersion** property should be updated only when the update isn't backward compatible and/or for major new releases."},{"content":"In other words, this update should very rarely.","pos":[21202,21249]},{"content":"For example, Microsoft’s assembly version stayed the same for the multiple CTP releases for the current version of Microsoft Dynamics 365 for Operations.","pos":[21250,21403]},{"content":"Because there are both Microsoft assets and your own changes in the same branch, the branch essentially has two file versions.","pos":[21404,21530]},{"content":"The first version is the Microsoft version of the Retail SDK that the current branch is based on, and the second version is the version that is set by the <bpt id=\"p1\">**</bpt>CustomVersion<ept id=\"p1\">**</ept> property.","pos":[21531,21713],"source":" The first version is the Microsoft version of the Retail SDK that the current branch is based on, and the second version is the version that is set by the **CustomVersion** property."},{"content":"In the previous illustration, the current file version of the customization branch is 1.0.2.<ph id=\"ph1\">\\*</ph>","pos":[21714,21808],"source":" In the previous illustration, the current file version of the customization branch is 1.0.2.\\*"},{"content":"(based on Microsoft version 7.0.2200.3).","pos":[21809,21849]},{"content":"The file version of the first rolled-out release was 1.0.0.40 (based on 7.0.2000.0).","pos":[21850,21934]},{"content":"When a testing phase is completed, and the final packages are being deployed with that version, it's important that you increment the version (or create a source control label).","pos":[21935,22112]}],"content":"---\n# required metadata\n\ntitle: Retail SDK overview\ndescription: This article provides general information about the Retail SDK. The Retail SDK includes code, code samples, templates, and tools that you can use to customize retail functionality.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 2015-12-04 20 - 44 - 33\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations\n# ms.tgt_pltfrm: \nms.custom: 17771\nms.assetid: c54d34a5-32e2-4d0d-a1c2-4a9940d95ade\nms.search.region: Global\n# ms.search.industry: \nms.author: sijoshi\nms.dyn365.ops.intro: 01-02-2016\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Retail SDK overview\n\nThis article provides general information about the Retail SDK. The Retail SDK includes code, code samples, templates, and tools that you can use to customize retail functionality.\n\nOverview\n--------\n\nThe Retail software development kit (SDK) includes code, code samples, templates, and tools that you can use to customize retail functionality. The SDK supports rapid development, full MSBuild integration, package generation, and code separation.\n\n### Download the Retail SDK\n\nThe Retail SDK is available in Microsoft Dynamics 365 for Operations development environments, and in hotfix packages in a Retail SDK folder. For more information see:\n\n-   [Access Microsoft Dynamics 365 for Operations Development Instances](access-instances.md). If you get the SDK from a development instance, it is immediately ready for configuration and use.\n-   [Install Retail hotfixes.](install-retail-hotfix.md) If you get the SDK from a hotfix, it is included in the hotfix package as a zipped folder. Retail hotfixes are cumulative and includes all other fixes.\n\nWe recommend that you put the SDK in a source control system such as Visual Studio Online.\n\n### Rapid development\n\nThe main focus of the Retail SDK is to help you write customizations efficiently and correctly. The SDK lets you run applications directly in a single-computer demo environment by using the F5 functionality (run and debug) in Microsoft Visual Studio. All the required “deployment chores” are done for you. Therefore, you don't have to copy any files.\n\n### Full MSBuild integration\n\nThe Retail SDK is a build system. A simple MSBuild command from the root of the SDK builds everything. This behavior eliminates guesswork about how and where to build from, and guarantees consistency and reproducibility. Therefore, the Retail SDK can easily be used together with any application lifecycle management (ALM) system, even Microsoft Visual Studio Online. This integration includes automation of the build.\n\n### Creation of final update packages, and better and explicit control over the customization\n\nThe Retail SDK includes tools that generate new packages that include everything that is required in order to deploy a service. For example, if the commerce runtime is extended with a new custom service dynamic-link library (DLL), the SDK automatically includes the new DLL in all appropriate packages (RetailServer and MPOSOffline). Or, if the database is extended, the upgrade script is automatically included in both RetailServer and MPOSOffline packages, because these are the packages that must (potentially) run the channel database update. Files that are shared exist only one time in the SDK. The packaging projects are set up in such a way that they pull in the right files for the package. Therefore, you edit a commerceruntime.config file in only one place. The same applies for deployment-related script files, even though these files rarely require customization.\n\n### Better code separation\n\nWhenever the Retail SDK must be updated, a potential code merge is required. This requirement applies if existing code was changed. Some new features in the implementation of Microsoft Dynamics 365 for Operations for Retail and in the folder structure of the SDK help provide better separation of customization code from sample code. Therefore, these features eliminate much of this issue. You can expect more improvements in this area in the future.\n\n### Real-world implementation samples\n\nIn addition to the source code of some of the Retail implementations, the Retail SDK includes sample code that illustrates how certain scenarios should be implemented.\n\n## Retail SDK deep dive\n### Prerequisites\n\n-   To **code** or **build** your customization, you must have the following tools:\n    -   Microsoft Visual Studio 2015 with Typescript 1.5 (an LCS developer topology is acceptable)\n    -   ASP.NET MVC 4.0 (an LCS developer topology acceptable) (required only by StoreFront)\n    -   A minimum of 150 MB of available disk space (an LCS developer topology is acceptable)\n\n    This list of requirement is very short and lets developers to be productive on simple laptops. There is no longer a prerequisite for a validation utility.\n-   To **run** your customization, the normal prerequisites to run Retail apply. We recommend that you run the customizations on a single-box developer topology (either LCS cloud-hosted or downloaded) during development.\n\n### Retail SDK contents\n\nThe following folders and files are part of the Retail SDK at the top level. [![RetailSDK01](./media/retailsdk01.png)](./media/retailsdk01.png)\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Folder/file</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>Assets</td>\n<td>Contains shared items such as scripts and configuration files (commerceRuntime.config, dllhost.exe.config, and so on). The configuration files should be customized and edited in this location. The projects that use them will pick them up appropriately.</td>\n</tr>\n<tr class=\"even\">\n<td>BuildTools</td>\n<td>Contains anything that is related to the MSBuild and global configurations. Customization.settings is the main file that is used to set up the build system. The following list shows the items that this file controls and that customizers will likely change:\n<ul>\n<li>Prefix for all built assemblies (AssemblyNamePrefix)</li>\n<li>Assembly version for all binaries (CustomAssemblyVersion)</li>\n<li>File version for all binaries (CustomVersion)</li>\n<li>Name of the customization (CustomName)</li>\n<li>Description of the customization (CustomDescription)</li>\n<li>Publisher (CustomPublisher)</li>\n<li>Code signing (SignAssembly, AssemblyOriginatorKeyFile)</li>\n<li>Modern POS certificate path (ModernPOSPackageCertificateKeyFile)</li>\n<li>Files that are related to the customization (RetailServerLibraryPathForProxyGeneration, ISV_*)</li>\n</ul></td>\n</tr>\n<tr class=\"odd\">\n<td>CommerceRuntime</td>\n<td>Contains a Visual Studio solution file (CommerceRuntime.sln) and related C# projects (CommerceRuntime, PricingEngine).</td>\n</tr>\n<tr class=\"even\">\n<td>Database</td>\n<td>Contains shared database scripts. The full script CommerceRuntimeScripts_Create.sql is used only to create a new base database. The Upgrade folder includes incremental scripts from both Microsoft and the customizer. The existence of the database or the version in the database during a deployment controls which full or incremental scripts will be run. Only scripts that haven't been run before will be run.</td>\n</tr>\n<tr class=\"odd\">\n<td>HardwareStation</td>\n<td>Contains a Visual Studio solution file (HardwareStation.sln) and related C# projects (HardwareStation libraries and Webhost).</td>\n</tr>\n<tr class=\"even\">\n<td>OnlineStore</td>\n<td>Contains a Visual Studio solution file (OnlineStore.sln) and related C# projects (Ecommerce SDK).</td>\n</tr>\n<tr class=\"odd\">\n<td>Packages</td>\n<td>Contains multiple projects for package creation. These packages are used to deploy via LCS. These packages also include the final web.config files.</td>\n</tr>\n<tr class=\"even\">\n<td>Payments</td>\n<td>Contains a Visual Studio solution file (PaymentSDK.sln) and related C# projects (PaymentSDK connectors, samples and functional test).</td>\n</tr>\n<tr class=\"odd\">\n<td>POS</td>\n<td>Contains files for POS:\n<ul>\n<li>CloudPos.sln</li>\n<li>ModernPos.sln</li>\n<li>Folder Core – Low-level shared POS code</li>\n<li>Folder ViewModels – Shared POS view models</li>\n<li>Folder SharedApp – Shared POS views</li>\n<li>Folder App – Modern POS–specific views and other items</li>\n<li>Folder Web – Cloud POS–specific views and other items</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Proxies</td>\n<td>Contains two Visual Studio projects that are referenced by others. These projects contain interfaces and generated code that serves as a proxy client of Retail Server. Proxies.Retail.TypeScript is the TypeScript proxy, and RetailProxy is the C# proxy. They are used by Modern POS/Cloud POS and the ECommerce SDK.</td>\n</tr>\n<tr class=\"odd\">\n<td>References</td>\n<td>The single place where all binaries live. The location is used to resolve any project’s binary references. The list of files includes external non-Retail binaries and also Microsoft Retail binaries. Additionally, this directory serves as the global drop location for any binaries that are built from the Retail SDK.</td>\n</tr>\n<tr class=\"even\">\n<td>SampleExtensions</td>\n<td>Contains sample extensions.</td>\n</tr>\n<tr class=\"odd\">\n<td>dirs.proj</td>\n<td>The top-level MSBuild file that directs the build order.</td>\n</tr>\n<tr class=\"even\">\n<td>Microsoft-version.txt</td>\n<td>A file that includes the Microsoft version of the Retail SDK. Don't edit this file.</td>\n</tr>\n</tbody>\n</table>\n\nThe C\\# source code in the SDK uses the Contoso namespace. Therefore, it's easier to distinguish Microsoft types and your own types, because Microsoft uses Microsoft.Dynamics. If you're referencing a type from the Microsoft binary, reference it by using Microsoft.Dynamics. That way, you'll know that it's not from the Retail SDK but from a referenced binary. [![RetailSDK02](./media/retailsdk02.png)](./media/retailsdk02.png)\n\n### Dependencies, build order, and full build\n\nThe following illustration shows a high-level logical dependency tree within the Retail SDK. It doesn't show the references to all Microsoft files or assets. To see these, look at the Visual Studio project and solution files in more detail. [![RetailSDK03](./media/retailsdk03.png)](./media/retailsdk03.png) Note the following important points:\n\n-   The RetailServer API is consumed by a few projects by means of automatically generated client proxy code. This behavior allows for more rapid development, and reduces opportunities for errors and bugs. By default, the Retail SDK uses the official Microsoft DLL to generate the client code. Customizers can switch to their own DLL (in Customization.settings) and therefore automatically generate the proxy code for their customized RetailServer API. After switching the DLL, a developer might have to change some implementations inside the RetailProxy project. The reason is that Modern POS in offline mode must communicate directly with the commerce runtime, and that code must be implemented. However, no guesswork is required. The C\\# compiler will force it.\n-   The packaging projects generate the deployment packages in the way that LCS expects them. By default, these project will ship only the Microsoft assets (non-customized) and the proxy DLLs. Anything else that should be included must be explicitly named in Customization.settings. This behavior is by design. It reduces the deployed custom code and allows for binary patches. For example, a customization adds a new CommerceRuntime service and a new RetailServer controller. In this case, two new DLLs are registered for inclusion in the packages and are automatically included in all relevant places. The packages will **not** have all recompiled binaries from the SDK.\n-   There is no single Visual Studio solution that includes all projects. Because there are few couplings between the various Visual Studio projects, you can open multiple projects or solutions side by side, and can compile the appropriate project after a change.\n-   Even if you didn't customize every component, the easiest way to get the final deployment packages is by building the whole Retail SDK. To do this, open an **MSBuild Command Prompt for VS2015** window, and enter **msbuild** (or **msbuild /p:Configuration=Release** for a non-debug version). [![RetailSDK04](./media/retailsdk04.png)](./media/retailsdk04.png)\n\nThis command will build all projects. This approach also provides a great way to verify that there are no implementation or code bugs. If there are any bugs, the build will fail, and the Command Prompt window will show what failed (this output resembles what Visual Studio would show). [![RetailSDK05](./media/retailsdk05.png)](./media/retailsdk05.png) For detailed help for MSBuild, see [https://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx](https://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx). The binaries that the build creates are automatically copied to the SDK’s References folder. The References folder also includes all the other binaries. Notice that no DLLs are overwritten, because they are all prefixed with a name (in this case, \"Contoso\") that you can define in Customization.settings. [![RetailSDK06](./media/retailsdk06.png)](./media/retailsdk06.png)\n\n### Minimal required configuration\n\nDo you just want to quickly build the Retail SDK, or to run POS in the debugger on a demo machine? For Modern POS only, you must create an app package signing certificate in order to build correctly. Alternatively, you can use Cloud POS. Follow the instructions at [https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx) to create a PFX file. Then copy the PFX file to the BuildTools folder, and update the BuildTools\\\\Customization.settings file with the correct name (ModernPOSPackageCertificateKeyFile). At this point you have everything that you require in order to build individual solutions, projects, or the whole Retail SDK (by using MSBuild).\n\n### Normal configuration/code signing\n\nBuildTools\\\\Customization.settings holds most of the configuration values for the SDK. The highlighted items in the following illustration are the global values. These values control how built binaries, components, and packages are named, versioned, and code-signed. [![RetailSDK07](./media/retailsdk07.png)](./media/retailsdk07.png) It's good practice to sign your assemblies with a strong name, even though this isn't required. To learn how to create your own key file if you don't already have one, see [https://msdn.microsoft.com/en-us/library/6f05ezxy(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/6f05ezxy(v=vs.110).aspx). To build correctly, you must create an app package signing certificate. Follow these instructions at [https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832(v=vs.85).aspx) to create a PFX file. Both the strong name key file and the app package signing certificate can be stored inside the BuildTools folder. The **RetailServerLibraryPathForProxyGeneration** property can be used to set a different RetailServer DLL for proxy generation. Customization.settings is also the place to define your new customization assets, such as binaries, configuration files, and SQL update scripts. After you specify your extensions, binaries, and assets here, the files will be added in the deployable package that is created. [![RetailSDK08](./media/retailsdk08.png)](./media/retailsdk08.png)\n\n### Customizing the build\n\n#### Adding new projects\n\nIt's easy to adding new projects to the Retail SDK’s build system. You can either clone one of the many existing projects or start a new project. You just have to make some adjustments in a text editor, as shown in the following illustration. The relative path of the **Import** elements should be adjusted, and the **AssemblyName** element should use the predefined **AssemblyNamePrefix** property. These adjustments are required in order to get versioning, code signing, uniform assembly naming, automatic dropping to the References folder, and other tasks for free. [![RetailSDK09](./media/retailsdk09.png)](./media/retailsdk09.png)\n\n#### Changing the build order or adding to the build\n\nThe whole directory tree of the Retail SDK is built with the help of MSBuild traversal files (dirs.proj files). The following illustration shows the main traversal file of the Retail SDK. Similar files might also exist in subdirectories. Notice that Visual Studio solution files (.sln files) are very similar to traversal files. Both “direct” the MSBuild engine to process other build scripts. [![RetailSDK10](./media/retailsdk10.png)](./media/retailsdk10.png) After new code is added, most of it should be located in a new folder (for details, see \"Best practices of code implementation\"), and you must add it to the traversal structure by adding to one or multiple dirs.proj files. The Extensions folder appears highlighted on line 10 in the previous illustration. The quickest way to get started with a new dirs.proj file is to copy an existing file, correct the paths in the **Import** elements, and update the **ProjectFiles** elements in the **ItemGroup** element.\n\n#### Build script customization\n\nWhen you must implement new build steps, keep in mind that the existing scripts might be updated by a Retail SDK update later. Best practice is to minimize the editing of any file, or add new files instead. If you require new global MSBuild properties, BuildTools\\\\Microsoft.Dynamics.RetailSDK.Build.props is a good place to add them. Likewise, BuildTools\\\\Microsoft.Dynamics.RetailSDK.Build.targets can be used to add new build processing targets. If only one project requires special handling, it is better to explicitly make the change there. If you require new local MSBuild properties, add a new file that is named local.props in the same directory. Alternatively, add a local.targets file if you require local build processing targets.\n\n### Developer productivity\n\nAs shown in the architecture diagram earlier in this article, several things depend on the RetailServer interface. It is likely that someone will change this interface. On a developer topology machine, someone might want to immediately try out a change. In this case, any CommerceRuntime and RetailServer extension DLLs must be copied into the bin folder of the locally installed RetailServer web application. A user can configure the Customization.setting file so that the DLLs are automatically copied into the bin folder of the local RetailServer web application whenever new versions of these files are built. [![RetailSDK11](./media/retailsdk11.png)](./media/retailsdk11.png)\n\n### Application lifecycle management\n\nA good ALM solution provides version control, builds, automated builds, planning tools, tracking tools, dashboards, customization, and more. For more information, see [https://msdn.microsoft.com/en-us/library/fda2bad5.aspx](https://msdn.microsoft.com/en-us/library/fda2bad5.aspx). The Retail SDK is organized in such a way that it aligns well with these capabilities. Visual Studio Online is a great tool and is recommended.\n\n### Branching and versioning\n\nTo work efficiently in a team, or even just to be able to go back and look at some changes that were done in the past, you must have good branching strategy and versioning discipline. The following illustration shows a simple branching strategy that might work well for most teams. The version numbers are fictitious. [![RetailSDK12](./media/retailsdk12.png)](./media/retailsdk12.png)\n\n#### Retail SDK mirror branch\n\nA very important point to emphasize is that the non-customized Retail SDK should be stored in your source control. You don't have to store every version, but the versions that your team wants to snap to should be added (these versions might be cumulative updates or hotfixes). Only a simple merge of all changes (additions, changes, and deletions) should be done. No other development work should occur in this branch. The Retail SDK has its own version. All Retail binaries and packages that are included have the same version. The version can also be found in the root of the Retail SDK in a file that is named Microsoft-version.txt.\n\n#### Customization branch\n\nAfter development can start, a new branch should be started (customization branch). At the beginning of the initial branch-out, this branch will be an exact copy of the Retail SDK mirror branch. This is the branch for a team’s development. The version of the customization branch must be incremented at least every time that a build is created for testing, or it can even be incremented daily. The file version to increment is defined in Customization.setting file by using the **CustomVersion** property. If you update it and rebuild, all binaries, packages, manifest files are updated accordingly. Note that the **CustomAssemblyVersion** property should be updated only when the update isn't backward compatible and/or for major new releases. In other words, this update should very rarely. For example, Microsoft’s assembly version stayed the same for the multiple CTP releases for the current version of Microsoft Dynamics 365 for Operations. Because there are both Microsoft assets and your own changes in the same branch, the branch essentially has two file versions. The first version is the Microsoft version of the Retail SDK that the current branch is based on, and the second version is the version that is set by the **CustomVersion** property. In the previous illustration, the current file version of the customization branch is 1.0.2.\\* (based on Microsoft version 7.0.2200.3). The file version of the first rolled-out release was 1.0.0.40 (based on 7.0.2000.0). When a testing phase is completed, and the final packages are being deployed with that version, it's important that you increment the version (or create a source control label).\n\n"}