{"content":"---\n# required metadata\n\ntitle: Exclude test packages from the build output\ndescription: This topic explains how you can prevent specific packages from being included in the deployable package in the build output that the automated build process generates.\nauthor: jorisdg\nmanager: AnnBe\nms.date: 05/15/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations\n# ms.tgt_pltfrm: \nms.custom: 26731\nms.assetid:\nms.search.region: Global\n# ms.search.industry: \nms.author: jorisde\nms.search.validFrom: 2017-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Exclude test packages from the build output\n\nIn Platform update 4, the automated build process lets you prevent specific packages from being included in the deployable package in the build output. This capability can be important for customers that use automated testing. These customers might want to build and run their tests, but prevent them from being added to the deployable package that the build generates as output.\n\nWhen customers that have an existing build definition from Platform update 3 or earlier upgrade, they won't see the build definition automatically updated. To use the new feature, these customers must make a few manual edits to the build definition. For information about how to add the new feature to an existing build definition, see the [Update an existing build definition after upgrade to Platform update 4 or later](#update-an-existing-build-definition-after-upgrading-to-platform-update-4-or-newer) section, later in this topic.\n\nThe new feature exposes a new optional parameter for the package creation step in the build process. Because this parameter is managed by a build variable, you can easily adjust it.\n\n1. In Microsoft Visual Studio Team Services (VSTS), on the **Build & Release** page, under **Builds**, on the **All Definitions** tab, find your build definition. Click the ellipsis (…), and then click **Edit**.\n\n    ![Edit the build definition](media/builddef_edit.png)\n\n1. On the **Variables** tab, notice that the new build definition has a variable that is named **PackagingExclusions**.\n\n    ![PackagingExclusions variable](media/builddef_packexclvariable.png)\n\n1. In the **PackagingExclusions** variable, specify a comma-separated list of the names of packages that should not be packaged into the deployable package.\n\n    > [!NOTE]\n    > The name of a package isn't necessarily the name of the model. Instead, the package name is typically the name of the folder where the model resides. Alternatively, you can copy and paste the package name from the descriptor file of one of the package's models. (In the XML, you can find the package name in the **ModelModule** field.)\n\n    For example, you have one package that is named MyCompanysAwesomeTests and another package that is named ContosoTaskRecordingTests, and you want to exclude both these packages from the deployable package. In this case, the value for the **PackagingExclusions** variable will look like this.\n\n    ![PackagingExclusions example](media/builddef_packexclexample.png)\n\n    After you complete this setup, the build process will still build the code and run any tests that the packages contain. However, the deployable package that the build creates won't include those packages.\n\n# Update an existing build definition after upgrade to Platform update 4 or later\n\nTo use the new feature, you must manually update any existing build definitions that you deployed before Platform update 4.\n\n> [!NOTE]\n> The feature can be added to a build definition only after you update the build virtual machine (VM) to Platform update 4 or later.\n\n1. On the **Variables** tab, click **+ Add** at the bottom of the page.\n1. In the **Name** column, enter **PackagingExclusions**. In the last column, select the **Settable at queue time** check box.\n1. On the **Tasks** tab, find the **Generate Packages** task. Click to select it.\n1. On the right side of the page, find the **Arguments** parameter. Click in the text box, and then press the End key or scroll to the end of the text box. The new build definition will have a new argument that passes the **PackagingExclusions** variable that you defined earlier. However, for an existing build definition, add a space and then the following text to the end of the parameter: **-ExclusionList \"$(PackagingExclusions)\"**\n\n    The **Arguments** text box should now look like this.\n\n    ![Generate Packages task](media/builddef_generatepack.png)\n\n1. Click **Save**.\n\nYou can now use the new feature as described.\n","nodes":[{"pos":[32,75],"content":"Exclude test packages from the build output","needQuote":true,"needEscape":true,"nodes":[{"content":"Exclude test packages from the build output","pos":[0,43]}]},{"pos":[89,256],"content":"This topic explains how you can prevent specific packages from being included in the deployable package in the build output that the automated build process generates.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic explains how you can prevent specific packages from being included in the deployable package in the build output that the automated build process generates.","pos":[0,167]}]},{"pos":[717,760],"content":"Exclude test packages from the build output","linkify":"Exclude test packages from the build output","nodes":[{"content":"Exclude test packages from the build output","pos":[0,43]}]},{"content":"In Platform update 4, the automated build process lets you prevent specific packages from being included in the deployable package in the build output.","pos":[762,913]},{"content":"This capability can be important for customers that use automated testing.","pos":[914,988]},{"content":"These customers might want to build and run their tests, but prevent them from being added to the deployable package that the build generates as output.","pos":[989,1141]},{"content":"When customers that have an existing build definition from Platform update 3 or earlier upgrade, they won't see the build definition automatically updated.","pos":[1143,1298]},{"content":"To use the new feature, these customers must make a few manual edits to the build definition.","pos":[1299,1392]},{"content":"For information about how to add the new feature to an existing build definition, see the <bpt id=\"p1\">[</bpt>Update an existing build definition after upgrade to Platform update 4 or later<ept id=\"p1\">](#update-an-existing-build-definition-after-upgrading-to-platform-update-4-or-newer)</ept> section, later in this topic.","pos":[1393,1678],"source":" For information about how to add the new feature to an existing build definition, see the [Update an existing build definition after upgrade to Platform update 4 or later](#update-an-existing-build-definition-after-upgrading-to-platform-update-4-or-newer) section, later in this topic."},{"content":"The new feature exposes a new optional parameter for the package creation step in the build process.","pos":[1680,1780]},{"content":"Because this parameter is managed by a build variable, you can easily adjust it.","pos":[1781,1861]},{"content":"In Microsoft Visual Studio Team Services (VSTS), on the <bpt id=\"p1\">**</bpt>Build &amp; Release<ept id=\"p1\">**</ept> page, under <bpt id=\"p2\">**</bpt>Builds<ept id=\"p2\">**</ept>, on the <bpt id=\"p3\">**</bpt>All Definitions<ept id=\"p3\">**</ept> tab, find your build definition.","pos":[1866,2025],"source":"In Microsoft Visual Studio Team Services (VSTS), on the **Build & Release** page, under **Builds**, on the **All Definitions** tab, find your build definition."},{"content":"Click the ellipsis (…), and then click <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept>.","pos":[2026,2074],"source":" Click the ellipsis (…), and then click **Edit**."},{"content":"Edit the build definition","pos":[2082,2107]},{"pos":[2138,2254],"content":"On the <bpt id=\"p1\">**</bpt>Variables<ept id=\"p1\">**</ept> tab, notice that the new build definition has a variable that is named <bpt id=\"p2\">**</bpt>PackagingExclusions<ept id=\"p2\">**</ept>.","source":"On the **Variables** tab, notice that the new build definition has a variable that is named **PackagingExclusions**."},{"content":"PackagingExclusions variable","pos":[2262,2290]},{"pos":[2333,2486],"content":"In the <bpt id=\"p1\">**</bpt>PackagingExclusions<ept id=\"p1\">**</ept> variable, specify a comma-separated list of the names of packages that should not be packaged into the deployable package.","source":"In the **PackagingExclusions** variable, specify a comma-separated list of the names of packages that should not be packaged into the deployable package."},{"pos":[2494,2843],"content":"[!NOTE]\nThe name of a package isn't necessarily the name of the model. Instead, the package name is typically the name of the folder where the model resides. Alternatively, you can copy and paste the package name from the descriptor file of one of the package's models. (In the XML, you can find the package name in the **ModelModule** field.)","leadings":["","    > "],"nodes":[{"content":"The name of a package isn't necessarily the name of the model. Instead, the package name is typically the name of the folder where the model resides. Alternatively, you can copy and paste the package name from the descriptor file of one of the package's models. (In the XML, you can find the package name in the **ModelModule** field.)","pos":[8,343],"nodes":[{"content":"The name of a package isn't necessarily the name of the model.","pos":[0,62]},{"content":"Instead, the package name is typically the name of the folder where the model resides.","pos":[63,149]},{"content":"Alternatively, you can copy and paste the package name from the descriptor file of one of the package's models.","pos":[150,261]},{"content":"(In the XML, you can find the package name in the <bpt id=\"p1\">**</bpt>ModelModule<ept id=\"p1\">**</ept> field.)","pos":[262,335],"source":" (In the XML, you can find the package name in the **ModelModule** field.)"}]}]},{"content":"For example, you have one package that is named MyCompanysAwesomeTests and another package that is named ContosoTaskRecordingTests, and you want to exclude both these packages from the deployable package.","pos":[2849,3053]},{"content":"In this case, the value for the <bpt id=\"p1\">**</bpt>PackagingExclusions<ept id=\"p1\">**</ept> variable will look like this.","pos":[3054,3139],"source":" In this case, the value for the **PackagingExclusions** variable will look like this."},{"content":"PackagingExclusions example","pos":[3147,3174]},{"content":"After you complete this setup, the build process will still build the code and run any tests that the packages contain.","pos":[3217,3336]},{"content":"However, the deployable package that the build creates won't include those packages.","pos":[3337,3421]},{"pos":[3425,3504],"content":"Update an existing build definition after upgrade to Platform update 4 or later","linkify":"Update an existing build definition after upgrade to Platform update 4 or later","nodes":[{"content":"Update an existing build definition after upgrade to Platform update 4 or later","pos":[0,79]}]},{"content":"To use the new feature, you must manually update any existing build definitions that you deployed before Platform update 4.","pos":[3506,3629]},{"pos":[3633,3773],"content":"[!NOTE]\nThe feature can be added to a build definition only after you update the build virtual machine (VM) to Platform update 4 or later.","leadings":["","> "],"nodes":[{"content":"The feature can be added to a build definition only after you update the build virtual machine (VM) to Platform update 4 or later.","pos":[8,138]}]},{"pos":[3778,3846],"content":"On the <bpt id=\"p1\">**</bpt>Variables<ept id=\"p1\">**</ept> tab, click <bpt id=\"p2\">**</bpt>+ Add<ept id=\"p2\">**</ept> at the bottom of the page.","source":"On the **Variables** tab, click **+ Add** at the bottom of the page."},{"content":"In the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> column, enter <bpt id=\"p2\">**</bpt>PackagingExclusions<ept id=\"p2\">**</ept>.","pos":[3850,3904],"source":"In the **Name** column, enter **PackagingExclusions**."},{"content":"In the last column, select the <bpt id=\"p1\">**</bpt>Settable at queue time<ept id=\"p1\">**</ept> check box.","pos":[3905,3973],"source":" In the last column, select the **Settable at queue time** check box."},{"content":"On the <bpt id=\"p1\">**</bpt>Tasks<ept id=\"p1\">**</ept> tab, find the <bpt id=\"p2\">**</bpt>Generate Packages<ept id=\"p2\">**</ept> task.","pos":[3977,4035],"source":"On the **Tasks** tab, find the **Generate Packages** task."},{"content":"Click to select it.","pos":[4036,4055]},{"content":"On the right side of the page, find the <bpt id=\"p1\">**</bpt>Arguments<ept id=\"p1\">**</ept> parameter.","pos":[4059,4123],"source":"On the right side of the page, find the **Arguments** parameter."},{"content":"Click in the text box, and then press the End key or scroll to the end of the text box.","pos":[4124,4211]},{"content":"The new build definition will have a new argument that passes the <bpt id=\"p1\">**</bpt>PackagingExclusions<ept id=\"p1\">**</ept> variable that you defined earlier.","pos":[4212,4336],"source":" The new build definition will have a new argument that passes the **PackagingExclusions** variable that you defined earlier."},{"content":"However, for an existing build definition, add a space and then the following text to the end of the parameter: <bpt id=\"p1\">**</bpt>-ExclusionList \"$(PackagingExclusions)\"<ept id=\"p1\">**</ept>","pos":[4337,4492],"source":" However, for an existing build definition, add a space and then the following text to the end of the parameter: **-ExclusionList \"$(PackagingExclusions)\"**"},{"pos":[4498,4551],"content":"The <bpt id=\"p1\">**</bpt>Arguments<ept id=\"p1\">**</ept> text box should now look like this.","source":"The **Arguments** text box should now look like this."},{"content":"Generate Packages task","pos":[4559,4581]},{"pos":[4620,4635],"content":"Click <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","source":"Click **Save**."},{"content":"You can now use the new feature as described.","pos":[4637,4682]}]}