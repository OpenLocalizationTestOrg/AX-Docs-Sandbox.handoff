{"nodes":[{"pos":[32,91],"content":"Upgrade the Dynamics AX platform to the August 2016 release","needQuote":true,"needEscape":true,"nodes":[{"content":"Upgrade the Dynamics AX platform to the August 2016 release","pos":[0,59]}]},{"pos":[105,218],"content":"This topic explains how to upgrade your Microsoft Dynamics AX platform to the August 2016 release of Dynamics AX.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic explains how to upgrade your Microsoft Dynamics AX platform to the August 2016 release of Dynamics AX.","pos":[0,113]}]},{"pos":[739,798],"content":"Upgrade the Dynamics AX platform to the August 2016 release","linkify":"Upgrade the Dynamics AX platform to the August 2016 release","nodes":[{"content":"Upgrade the Dynamics AX platform to the August 2016 release","pos":[0,59]}]},{"content":"This topic explains how to upgrade your Microsoft Dynamics AX platform to the August 2016 release of Dynamics AX.","pos":[800,913]},{"pos":[915,923],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> This topic applies only to Microsoft Dynamics AX releases prior to August 2016.","pos":[934,1028],"source":"**Important:** This topic applies only to Microsoft Dynamics AX releases prior to August 2016."},{"content":"For Microsoft Dynamics 365 for Operations updates, see the topic: <bpt id=\"p1\">[</bpt>Upgrade Dynamics 365 for Operations to the latest platform update<ept id=\"p1\">](upgrade-latest-platform-update.md)</ept>.","pos":[1029,1198],"source":" For Microsoft Dynamics 365 for Operations updates, see the topic: [Upgrade Dynamics 365 for Operations to the latest platform update](upgrade-latest-platform-update.md)."},{"content":"The Microsoft Dynamics AX platform consists of the following components:","pos":[1199,1271]},{"content":"Dynamics AX platform binaries such as Application Object Server (AOS), the data management framework, the reporting and business intelligence (BI) framework, development tools, and analytics services","pos":[1277,1476]},{"content":"The following Application Object Tree (AOT) packages:","pos":[1481,1534]},{"content":"Application Platform","pos":[1543,1563]},{"content":"Application Foundation","pos":[1572,1594]},{"content":"Directory","pos":[1603,1612]},{"content":"TestEssentials","pos":[1621,1635]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> If you want to update the Dynamics AX platform to a new release, your Dynamics AX implementation should not have any customizations (overlayering) of any of the AOT packages that belong to the platform.","pos":[1637,1854],"source":"**Important:** If you want to update the Dynamics AX platform to a new release, your Dynamics AX implementation should not have any customizations (overlayering) of any of the AOT packages that belong to the platform."},{"content":"If you <bpt id=\"p1\">**</bpt>do<ept id=\"p1\">**</ept> customize platform packages (that is, if your solution contains models that belong to one or more of the platform packages), complete the workaround that is described at the end of this topic, and the overall process that is illustrated and described for Dynamics AX implementations that have customized platform packages.","pos":[1855,2191],"source":" If you **do** customize platform packages (that is, if your solution contains models that belong to one or more of the platform packages), complete the workaround that is described at the end of this topic, and the overall process that is illustrated and described for Dynamics AX implementations that have customized platform packages."},{"pos":[2196,2208],"content":"Overall flow","linkify":"Overall flow","nodes":[{"content":"Overall flow","pos":[0,12]}]},{"content":"The following illustrations show the different overall process for two scenarios for upgrading the Dynamics AX platform to the latest update.","pos":[2209,2350]},{"pos":[2356,2426],"content":"Dynamics AX implementations that have no customization of the platform","linkify":"Dynamics AX implementations that have no customization of the platform","nodes":[{"content":"Dynamics AX implementations that have no customization of the platform","pos":[0,70]}]},{"pos":[2428,2579],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Upgrade process for implementations that have no customization of the platform<ept id=\"p1\">](./media/flownocustomisations.jpg)](./media/flownocustomisations.jpg)</ept>","source":"[![Upgrade process for implementations that have no customization of the platform](./media/flownocustomisations.jpg)](./media/flownocustomisations.jpg)"},{"pos":[2585,2651],"content":"Dynamics AX implementations that have customized platform packages","linkify":"Dynamics AX implementations that have customized platform packages","nodes":[{"content":"Dynamics AX implementations that have customized platform packages","pos":[0,66]}]},{"pos":[2653,2804],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Upgrade process for implementations that have customized platform packages<ept id=\"p1\">](./media/flowwithcustomisations.jpg)](./media/flowwithcustomisations.jpg)</ept>","source":"[![Upgrade process for implementations that have customized platform packages](./media/flowwithcustomisations.jpg)](./media/flowwithcustomisations.jpg)"},{"pos":[2809,2843],"content":"Import the platform update package","linkify":"Import the platform update package","nodes":[{"content":"Import the platform update package","pos":[0,34]}]},{"content":"Platform update packages are released by Microsoft and can be imported from the Shared Asset Library in Microsoft Lifecycle Services (LCS).","pos":[2844,2983]},{"content":"The package is named <bpt id=\"p1\">**</bpt>Dynamics AX platform August 2016 release (Update 2).<ept id=\"p1\">**</ept>","pos":[2984,3061],"source":" The package is named **Dynamics AX platform August 2016 release (Update 2).**"},{"content":"If you haven't done so yet, import the <bpt id=\"p1\">**</bpt>Dynamics AX platform August 2016 release (Update 2)<ept id=\"p1\">**</ept> package to your project's asset library by following these steps:","pos":[3062,3222],"source":" If you haven't done so yet, import the **Dynamics AX platform August 2016 release (Update 2)** package to your project's asset library by following these steps:"},{"content":"Go to your LCS project's asset library.","pos":[3228,3267]},{"content":"Select the Software Deployable Package tab.","pos":[3272,3315]},{"pos":[3320,3517],"content":"Click <bpt id=\"p1\">**</bpt>Import <ept id=\"p1\">**</ept>then select the <bpt id=\"p2\">**</bpt>Dynamics AX platform August 2016 release (Update 2)<ept id=\"p2\">**</ept> shared package.<bpt id=\"p3\">[</bpt><ph id=\"ph1\">![</ph>importupgradepackage<ept id=\"p3\">](./media/importupgradepackage.png)](./media/importupgradepackage.png)</ept>","source":"Click **Import **then select the **Dynamics AX platform August 2016 release (Update 2)** shared package.[![importupgradepackage](./media/importupgradepackage.png)](./media/importupgradepackage.png)"},{"pos":[3522,3563],"content":"How to apply the platform upgrade package","linkify":"How to apply the platform upgrade package","nodes":[{"content":"How to apply the platform upgrade package","pos":[0,41]}]},{"content":"From a process perspective, a platform upgrade package is similar to a binary hotfix deployable package.","pos":[3564,3668]},{"content":"To apply the package to your development or build environment, follow the instructions in the sections below.","pos":[3674,3783]},{"pos":[3788,3989],"content":"To apply the package to your demo, sandbox tier-2, or production environments, follow the instructions for a binary hotfix in the topic <bpt id=\"p1\">[</bpt>Apply a Deployable package<ept id=\"p1\">](apply-deployable-package-system.md)</ept>.","source":"To apply the package to your demo, sandbox tier-2, or production environments, follow the instructions for a binary hotfix in the topic [Apply a Deployable package](apply-deployable-package-system.md)."},{"pos":[3994,4059],"content":"Apply the platform update package on your development environment","linkify":"Apply the platform update package on your development environment","nodes":[{"content":"Apply the platform update package on your development environment","pos":[0,65]}]},{"pos":[4064,4124],"content":"Delete any platform metadata hotfixes from your VSTS project","linkify":"Delete any platform metadata hotfixes from your VSTS project","nodes":[{"content":"Delete any platform metadata hotfixes from your VSTS project","pos":[0,60]}]},{"content":"Before you install the new platform update, you need to clean up your Visual Studio Team Services (VSTS) source control project.","pos":[4126,4254]},{"content":"Remove any X++ or metadata hotfixes you have installed on your existing platform.","pos":[4255,4336]},{"content":"If you have any X++ or metadata hotfixes that are checked in your VSTS project for any of the following Microsoft models, delete them from your project using the Visual Studio Source Control Explorer.","pos":[4337,4537]},{"content":"Application Platform","pos":[4543,4563]},{"content":"Application Foundation","pos":[4568,4590]},{"content":"Directory","pos":[4595,4604]},{"content":"TestEssentials","pos":[4609,4623]},{"content":"You can find these hotfixes by browsing the check-in history of these models Microsoft models.","pos":[4625,4719]},{"content":"For example, use Source Control Explorer to browse the check-in history of the folder <bpt id=\"p1\">*</bpt>TrunkMainMetadataApplicationFoundationApplicationFoundation<ept id=\"p1\">*</ept> and delete all XML files that have been checked in this Microsoft model.","pos":[4720,4940],"source":" For example, use Source Control Explorer to browse the check-in history of the folder *TrunkMainMetadataApplicationFoundationApplicationFoundation* and delete all XML files that have been checked in this Microsoft model."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>CheckInHistory<ept id=\"p1\">](./media/checkinhistory.png)](./media/checkinhistory.png)</ept>","pos":[4941,5016],"source":"[![CheckInHistory](./media/checkinhistory.png)](./media/checkinhistory.png)"},{"pos":[5022,5052],"content":"Install the deployable package","linkify":"Install the deployable package","nodes":[{"content":"Install the deployable package","pos":[0,30]}]},{"content":"Copy the platform update package (AXPlatformUpdate.zip) to your virtual machine.","pos":[5058,5138]},{"content":"Unzip the contents to a local directory.","pos":[5143,5183]},{"content":"Depending on the type of environment that you're upgrading, open the PlatformUpdatePackages.Config file under AOSServiceScripts, and change the MetaPackage value:","pos":[5188,5350]},{"pos":[5359,5517],"content":"If you're upgrading a development or demo environment that contains source code, change the <bpt id=\"p1\">**</bpt>MetaPackage<ept id=\"p1\">**</ept> value to <bpt id=\"p2\">**</bpt>dynamicsax-meta-platform-development<ept id=\"p2\">**</ept>.","source":"If you're upgrading a development or demo environment that contains source code, change the **MetaPackage** value to **dynamicsax-meta-platform-development**."},{"pos":[5526,5717],"content":"If you're upgrading a runtime environment, such as a Tier-2 sandbox or other environment that doesn't contain source code, the default value, <bpt id=\"p1\">**</bpt>dynamicsax-meta-platform-runtime<ept id=\"p1\">**</ept>, is correct.","source":"If you're upgrading a runtime environment, such as a Tier-2 sandbox or other environment that doesn't contain source code, the default value, **dynamicsax-meta-platform-runtime**, is correct."},{"content":"Follow the standard instructions for installing a deployable package.","pos":[5723,5792]},{"content":"See <bpt id=\"p1\">[</bpt>Install a deployable package in Microsoft Dynamics AX<ept id=\"p1\">](install-deployable-package.md)</ept>.","pos":[5793,5884],"source":" See [Install a deployable package in Microsoft Dynamics AX](install-deployable-package.md)."},{"content":"If you're working in a development environment, rebuild your application’s code.","pos":[5889,5969]},{"pos":[5971,6100],"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> Do not apply this update in a runtime environment unless you have validated it in a development environment first.","source":"**Important:** Do not apply this update in a runtime environment unless you have validated it in a development environment first."},{"pos":[6107,6162],"content":"Example for a one-box (development or demo) environment","linkify":"Example for a one-box (development or demo) environment","nodes":[{"content":"Example for a one-box (development or demo) environment","pos":[0,55]}]},{"pos":[6477,6520],"content":"Install the Visual Studio development tools","linkify":"Install the Visual Studio development tools","nodes":[{"content":"Install the Visual Studio development tools","pos":[0,43]}]},{"pos":[6522,6679],"content":"Update the Microsoft Visual Studio development tools as described in <bpt id=\"p1\">[</bpt>Updating the Dynamics AX Visual Studio development tools<ept id=\"p1\">](update-development-tools.md)</ept>.","source":"Update the Microsoft Visual Studio development tools as described in [Updating the Dynamics AX Visual Studio development tools](update-development-tools.md)."},{"pos":[6685,6715],"content":"Regenerate form adaptor models","linkify":"Regenerate form adaptor models","nodes":[{"content":"Regenerate form adaptor models","pos":[0,30]}]},{"content":"Form adaptor models are required for test automation.","pos":[6717,6770]},{"content":"Regenerate the platform form adaptor models, based on the newly updated platform models.","pos":[6771,6859]},{"content":"Use the xppfagen.exe tool to generate the form adaptor models.","pos":[6860,6922]},{"content":"This tool is located in the package's bin folder (typically, j:AosServicePackagesLocalDirectorybin).","pos":[6923,7023]},{"content":"Here is a list of the platform form adaptor models:","pos":[7024,7075]},{"content":"ApplicationPlatformFormAdaptor","pos":[7081,7111]},{"content":"ApplicationFoundationFormAdaptor","pos":[7116,7148]},{"content":"DirectoryFormAdaptor","pos":[7153,7173]},{"content":"The following examples show how to generate the form adaptor models.","pos":[7175,7243]},{"pos":[7625,7664],"content":"Install the new Data Management service","linkify":"Install the new Data Management service","nodes":[{"content":"Install the new Data Management service","pos":[0,39]}]},{"content":"After the deployable package is installed, follow these instructions to install the new Data Management service.","pos":[7666,7778]},{"content":"Open a Command Prompt window as an administrator, and run the following commands from the .DIXFServiceScripts folder.","pos":[7779,7896]},{"content":"If you're connected to Microsoft SQL Server Integration Services 2016 (13.0), run the following command.","pos":[7985,8089]},{"content":"If you're connected to an earlier release of Microsoft SQL Server Integration Services, run the following command.","pos":[8224,8338]},{"pos":[8472,8528],"content":"Apply the platform update package on a build environment","linkify":"Apply the platform update package on a build environment","nodes":[{"content":"Apply the platform update package on a build environment","pos":[0,56]}]},{"content":"Applying the platform upgrade package on a build environment requires the same procedure as applying it on a development environment.","pos":[8529,8662]},{"content":"However, you need to prepare your build environment first before you upgrade it to the latest platform as described next.","pos":[8663,8784]},{"pos":[8790,8820],"content":"Prepare your build environment","linkify":"Prepare your build environment","nodes":[{"content":"Prepare your build environment","pos":[0,30]}]},{"content":"When the build machine has been used for one or more builds, you should restore the metadata packages folder from the metadata backup folder before upgrading the VM to a newer Dynamics AX platform.","pos":[8822,9019]},{"content":"You should then delete the metadata backup.","pos":[9020,9063]},{"content":"This will ensure that the platform update will be applied on a clean environment, and the next build process will detect that no metadata backup exists and automatically create a new one, which will include the updated platform.","pos":[9064,9292]},{"content":"To find out if a complete metadata backup exists, please look for a BackupComplete.txt file in I:DynamicsBackupPackages\" (or C:DynamicsBackupPackages on a downloadable VHD).","pos":[9293,9466]},{"content":"The presence of this file indicates that a metadata backup exists and the file will contain a timestamp of when it was created.","pos":[9467,9594]},{"content":"To restore the deployment's metadata packages folder from the metadata backup open an elevated PowerShell command prompt and run the below command.","pos":[9595,9742]},{"content":"This will exercise the same script as used in the first step of the build process.","pos":[9743,9825]},{"content":"Note: Execute the above command only if a complete metadata backup exists, as it will create a new backup if it does not.","pos":[9935,10056]},{"content":"This command will stop the Dynamics AX deployment services and IIS before restoring the files from the metadata backup to the deployment's metadata packages folder.","pos":[10057,10221]},{"content":"You should see output like this: <bpt id=\"p1\">*</bpt>6:17:52 PM: Preparing build environment...<ept id=\"p1\">*</ept> <bpt id=\"p2\">*</bpt>6:17:53 PM: Updating Dynamics SDK registry key with specified values...<ept id=\"p2\">*</ept> <bpt id=\"p3\">*</bpt>6:17:53 PM: Updating Dynamics SDK registry key with values from AOS web config...<ept id=\"p3\">*</ept> <bpt id=\"p4\">*</bpt>6:17:53 PM: Stopping Dynamics AX deployment...<ept id=\"p4\">*</ept> <bpt id=\"p5\">*</bpt>6:18:06 PM: <ept id=\"p5\">*</ept><bpt id=\"p6\">*</bpt>A backup already exists at: I:DynamicsBackupPackages. No new backup will be created<ept id=\"p6\">*</ept><bpt id=\"p7\">*</bpt>.<ept id=\"p7\">*</ept>","pos":[10222,10609],"source":" You should see output like this: *6:17:52 PM: Preparing build environment...* *6:17:53 PM: Updating Dynamics SDK registry key with specified values...* *6:17:53 PM: Updating Dynamics SDK registry key with values from AOS web config...* *6:17:53 PM: Stopping Dynamics AX deployment...* *6:18:06 PM: **A backup already exists at: I:DynamicsBackupPackages. No new backup will be created**.*"},{"content":"<bpt id=\"p1\">*</bpt>6:18:06 PM: <ept id=\"p1\">*</ept><bpt id=\"p2\">*</bpt>Restoring metadata packages from backup...<ept id=\"p2\">*</ept><bpt id=\"p3\">*</bpt><bpt id=\"p4\">*</bpt> <ept id=\"p4\">*</ept>6:22:56 PM: <ept id=\"p3\">*</ept><bpt id=\"p5\">*</bpt>Metadata packages successfully restored from backup<ept id=\"p5\">*</ept><bpt id=\"p6\">*</bpt>.<ept id=\"p6\">*</ept>","pos":[10610,10741],"source":"*6:18:06 PM: **Restoring metadata packages from backup...*** *6:22:56 PM: **Metadata packages successfully restored from backup**.*"},{"content":"<bpt id=\"p1\">*</bpt>6:22:57 PM: Preparing build environment complete.<ept id=\"p1\">*</ept>","pos":[10742,10793],"source":"*6:22:57 PM: Preparing build environment complete.*"},{"content":"<bpt id=\"p1\">*</bpt>6:22:57 PM: Script completed with exit code: 0<ept id=\"p1\">*</ept> Once the metadata backup has been restored, <bpt id=\"p2\">*</bpt><bpt id=\"p3\">*</bpt>delete (or rename) the metadata backup folder (<ept id=\"p3\">*</ept>DynamicsBackupPackages<ept id=\"p2\">*</ept>)** so it will no longer be found by the build process.","pos":[10794,11015],"source":"*6:22:57 PM: Script completed with exit code: 0* Once the metadata backup has been restored, **delete (or rename) the metadata backup folder (*DynamicsBackupPackages*)** so it will no longer be found by the build process."},{"pos":[11021,11054],"content":"Apply the platform update package","linkify":"Apply the platform update package","nodes":[{"content":"Apply the platform update package","pos":[0,33]}]},{"pos":[11056,11296],"content":"Once you have prepared your build environment for this update, apply the platform update package the same way you apply it on a development environment as describe <bpt id=\"p1\">[</bpt>above<ept id=\"p1\">](#apply-the-platform-update-package-on-your-development-environment)</ept>.","source":"Once you have prepared your build environment for this update, apply the platform update package the same way you apply it on a development environment as describe [above](#apply-the-platform-update-package-on-your-development-environment)."},{"pos":[11301,11331],"content":"Features that aren't supported","linkify":"Features that aren't supported","nodes":[{"content":"Features that aren't supported","pos":[0,30]}]},{"pos":[11332,11420],"content":"<bpt id=\"p1\">**</bpt>Dynamics AX platform August 2016 release (Update 2)<ept id=\"p1\">**</ept> includes the following features:","source":"**Dynamics AX platform August 2016 release (Update 2)** includes the following features:"},{"content":"The new Entity Store feature","pos":[11426,11454]},{"content":"Microsoft Power BI with DirectQuery","pos":[11459,11494]},{"content":"Microsoft Cortana Analytics for Retail","pos":[11499,11537]},{"content":"However, an instance of Dynamics AX that was originally deployed by using the February 2016 release won't have these features if you update by using the process that is described in this topic.","pos":[11539,11732]},{"content":"To enable these features, you original deployment must be an Update 1 (May 2016) deployment.","pos":[11733,11825]},{"pos":[11830,11884],"content":"Optional: If your application overlays platform models","linkify":"Optional: If your application overlays platform models","nodes":[{"content":"Optional: If your application overlays platform models","pos":[0,54]}]},{"content":"Before you apply the platform update package on your development instance, follow these steps if your solution contains models that belong to one of the following packages:","pos":[11885,12057]},{"content":"Application Platform","pos":[12063,12083]},{"content":"Application Foundation","pos":[12088,12110]},{"content":"Directory","pos":[12115,12124]},{"content":"TestEssentials","pos":[12129,12143]},{"content":"In Visual Studio, check in all pending changes to your Microsoft Visual Studio Team Services (VSTS) version control project.","pos":[12149,12273]},{"content":"Exit Visual Studio.","pos":[12278,12297]},{"content":"Apply the platform update deployable package as described earlier in this topic.","pos":[12302,12382]},{"content":"Start Visual Studio.","pos":[12387,12407]},{"content":"Resolve potential conflicts in your models that overlay platform models.","pos":[12412,12484]},{"content":"<bpt id=\"p1\">**</bpt>Tip:<ept id=\"p1\">**</ept> You can use the Create project from conflicts add-in to create a project from all conflicts in a model.<bpt id=\"p2\">[</bpt><ph id=\"ph1\">![</ph>Create project from conflicts <ept id=\"p2\">](./media/projectforconflicts.jpg)](./media/projectforconflicts.jpg)</ept>","pos":[12485,12698],"source":"**Tip:** You can use the Create project from conflicts add-in to create a project from all conflicts in a model.[![Create project from conflicts ](./media/projectforconflicts.jpg)](./media/projectforconflicts.jpg)"},{"content":"Rebuild and validate your application.","pos":[12703,12741]},{"content":"Create a custom deployable package from your customized platform package.","pos":[12746,12819]},{"content":"This package should be applied to your sandbox/pre-production environment for validation.","pos":[12820,12909]},{"pos":[12912,12920],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[12931,13013],"content":"<bpt id=\"p1\">[</bpt>Process for upgrading to the latest Dynamics AX update<ept id=\"p1\">](upgrade-latest-update.md)</ept>","source":"[Process for upgrading to the latest Dynamics AX update](upgrade-latest-update.md)"}],"content":"---\n# required metadata\n\ntitle: Upgrade the Dynamics AX platform to the August 2016 release\ndescription: This topic explains how to upgrade your Microsoft Dynamics AX platform to the August 2016 release of Dynamics AX.\nauthor: MargoC\nmanager: AnnBe\nms.date: 2016-08-15 18 - 30 - 38\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \n# ms.reviewer: 11\nms.search.scope: Operations, Platform\n# ms.tgt_pltfrm: \nms.custom: 125753\nms.assetid: 86ab9d3f-43a6-4670-a1d9-0e81cd8b5049\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.dyn365.ops.intro: Aug-16\nms.dyn365.ops.version: Platform update 2\n\n---\n\n# Upgrade the Dynamics AX platform to the August 2016 release\n\nThis topic explains how to upgrade your Microsoft Dynamics AX platform to the August 2016 release of Dynamics AX.\n\nOverview\n--------\n\n**Important:** This topic applies only to Microsoft Dynamics AX releases prior to August 2016. For Microsoft Dynamics 365 for Operations updates, see the topic: [Upgrade Dynamics 365 for Operations to the latest platform update](upgrade-latest-platform-update.md). The Microsoft Dynamics AX platform consists of the following components:\n\n-   Dynamics AX platform binaries such as Application Object Server (AOS), the data management framework, the reporting and business intelligence (BI) framework, development tools, and analytics services\n-   The following Application Object Tree (AOT) packages:\n    -   Application Platform\n    -   Application Foundation\n    -   Directory\n    -   TestEssentials\n\n**Important:** If you want to update the Dynamics AX platform to a new release, your Dynamics AX implementation should not have any customizations (overlayering) of any of the AOT packages that belong to the platform. If you **do** customize platform packages (that is, if your solution contains models that belong to one or more of the platform packages), complete the workaround that is described at the end of this topic, and the overall process that is illustrated and described for Dynamics AX implementations that have customized platform packages.\n\n## Overall flow\nThe following illustrations show the different overall process for two scenarios for upgrading the Dynamics AX platform to the latest update.\n\n### Dynamics AX implementations that have no customization of the platform\n\n[![Upgrade process for implementations that have no customization of the platform](./media/flownocustomisations.jpg)](./media/flownocustomisations.jpg)\n\n### Dynamics AX implementations that have customized platform packages\n\n[![Upgrade process for implementations that have customized platform packages](./media/flowwithcustomisations.jpg)](./media/flowwithcustomisations.jpg)\n\n## Import the platform update package\nPlatform update packages are released by Microsoft and can be imported from the Shared Asset Library in Microsoft Lifecycle Services (LCS). The package is named **Dynamics AX platform August 2016 release (Update 2).** If you haven't done so yet, import the **Dynamics AX platform August 2016 release (Update 2)** package to your project's asset library by following these steps:\n\n1.  Go to your LCS project's asset library.\n2.  Select the Software Deployable Package tab.\n3.  Click **Import **then select the **Dynamics AX platform August 2016 release (Update 2)** shared package.[![importupgradepackage](./media/importupgradepackage.png)](./media/importupgradepackage.png)\n\n## How to apply the platform upgrade package\nFrom a process perspective, a platform upgrade package is similar to a binary hotfix deployable package.\n\n-   To apply the package to your development or build environment, follow the instructions in the sections below.\n-   To apply the package to your demo, sandbox tier-2, or production environments, follow the instructions for a binary hotfix in the topic [Apply a Deployable package](apply-deployable-package-system.md).\n\n## Apply the platform update package on your development environment\n### Delete any platform metadata hotfixes from your VSTS project\n\nBefore you install the new platform update, you need to clean up your Visual Studio Team Services (VSTS) source control project. Remove any X++ or metadata hotfixes you have installed on your existing platform. If you have any X++ or metadata hotfixes that are checked in your VSTS project for any of the following Microsoft models, delete them from your project using the Visual Studio Source Control Explorer.\n\n-   Application Platform\n-   Application Foundation\n-   Directory\n-   TestEssentials\n\nYou can find these hotfixes by browsing the check-in history of these models Microsoft models. For example, use Source Control Explorer to browse the check-in history of the folder *TrunkMainMetadataApplicationFoundationApplicationFoundation* and delete all XML files that have been checked in this Microsoft model. [![CheckInHistory](./media/checkinhistory.png)](./media/checkinhistory.png)\n\n### Install the deployable package\n\n1.  Copy the platform update package (AXPlatformUpdate.zip) to your virtual machine.\n2.  Unzip the contents to a local directory.\n3.  Depending on the type of environment that you're upgrading, open the PlatformUpdatePackages.Config file under AOSServiceScripts, and change the MetaPackage value:\n    -   If you're upgrading a development or demo environment that contains source code, change the **MetaPackage** value to **dynamicsax-meta-platform-development**.\n    -   If you're upgrading a runtime environment, such as a Tier-2 sandbox or other environment that doesn't contain source code, the default value, **dynamicsax-meta-platform-runtime**, is correct.\n\n4.  Follow the standard instructions for installing a deployable package. See [Install a deployable package in Microsoft Dynamics AX](install-deployable-package.md).\n5.  If you're working in a development environment, rebuild your application’s code.\n\n**Important:** Do not apply this update in a runtime environment unless you have validated it in a development environment first.\n\n#### Example for a one-box (development or demo) environment\n\n    AXUpdateInstaller.exe generate -runbookid=\"OneBoxDev\" -topologyfile=\"DefaultTopologyData.xml\" -servicemodelfile=\"DefaultServiceModelData.xml\" -runbookfile=\"OneBoxDev-runbook.xml\"\n\n    AXUpdateInstaller.exe import -runbookfile=OneBoxDev-runbook.xml\n\n    AXUpdateInstaller.exe execute -runbookid=OneBoxDev\n\n### Install the Visual Studio development tools\n\nUpdate the Microsoft Visual Studio development tools as described in [Updating the Dynamics AX Visual Studio development tools](update-development-tools.md).\n\n### Regenerate form adaptor models\n\nForm adaptor models are required for test automation. Regenerate the platform form adaptor models, based on the newly updated platform models. Use the xppfagen.exe tool to generate the form adaptor models. This tool is located in the package's bin folder (typically, j:AosServicePackagesLocalDirectorybin). Here is a list of the platform form adaptor models:\n\n-   ApplicationPlatformFormAdaptor\n-   ApplicationFoundationFormAdaptor\n-   DirectoryFormAdaptor\n\nThe following examples show how to generate the form adaptor models.\n\n    xppfagen.exe -metadata=j:AosServicePackagesLocalDirectory -model=\"ApplicationPlatformFormAdaptor\" -xmllog=\"c:templog1.xml\"\n\n    xppfagen.exe -metadata=j:AosServicePackagesLocalDirectory -model=\"ApplicationFoundationFormAdaptor\" -xmllog=\"c:templog2.xml\"\n\n    xppfagen.exe -metadata=j:AosServicePackagesLocalDirectory -model=\"DirectoryFormAdaptor\" -xmllog=\"c:templog3.xml\"\n\n### Install the new Data Management service\n\nAfter the deployable package is installed, follow these instructions to install the new Data Management service. Open a Command Prompt window as an administrator, and run the following commands from the .DIXFServiceScripts folder.\n\n    msiExec.exe /uninstall {5C74B12A-8583-4B4F-B5F5-8E526507A3E0} /passive /qn /quiet\n\nIf you're connected to Microsoft SQL Server Integration Services 2016 (13.0), run the following command.\n\n    msiexec /i \"DIXF_Service_x64.msi\" ISSQLSERVERVERSION=\"Bin2012\" SERVICEACCOUNT=\"NT AUTHORITYNetworkService\" /qb /lv DIXF_log.txt\n\nIf you're connected to an earlier release of Microsoft SQL Server Integration Services, run the following command.\n\n    msiexec /i \"DIXF_Service_x64.msi\" ISSQLSERVERVERSION=\"Bin\" SERVICEACCOUNT=\"NT AUTHORITYNetworkService\" /qb /lv DIXF_log.txt\n\n## Apply the platform update package on a build environment\nApplying the platform upgrade package on a build environment requires the same procedure as applying it on a development environment. However, you need to prepare your build environment first before you upgrade it to the latest platform as described next.\n\n### Prepare your build environment\n\nWhen the build machine has been used for one or more builds, you should restore the metadata packages folder from the metadata backup folder before upgrading the VM to a newer Dynamics AX platform. You should then delete the metadata backup. This will ensure that the platform update will be applied on a clean environment, and the next build process will detect that no metadata backup exists and automatically create a new one, which will include the updated platform. To find out if a complete metadata backup exists, please look for a BackupComplete.txt file in I:DynamicsBackupPackages\" (or C:DynamicsBackupPackages on a downloadable VHD). The presence of this file indicates that a metadata backup exists and the file will contain a timestamp of when it was created. To restore the deployment's metadata packages folder from the metadata backup open an elevated PowerShell command prompt and run the below command. This will exercise the same script as used in the first step of the build process.\n\n    if (Test-Path -Path \"I:DynamicsBackupPackagesBackupComplete.txt\") { C:DynamicsSDKPrepareForBuild.ps1 }\n\nNote: Execute the above command only if a complete metadata backup exists, as it will create a new backup if it does not. This command will stop the Dynamics AX deployment services and IIS before restoring the files from the metadata backup to the deployment's metadata packages folder. You should see output like this: *6:17:52 PM: Preparing build environment...* *6:17:53 PM: Updating Dynamics SDK registry key with specified values...* *6:17:53 PM: Updating Dynamics SDK registry key with values from AOS web config...* *6:17:53 PM: Stopping Dynamics AX deployment...* *6:18:06 PM: **A backup already exists at: I:DynamicsBackupPackages. No new backup will be created**.* *6:18:06 PM: **Restoring metadata packages from backup...*** *6:22:56 PM: **Metadata packages successfully restored from backup**.* *6:22:57 PM: Preparing build environment complete.* *6:22:57 PM: Script completed with exit code: 0* Once the metadata backup has been restored, **delete (or rename) the metadata backup folder (*DynamicsBackupPackages*)** so it will no longer be found by the build process.\n\n### Apply the platform update package\n\nOnce you have prepared your build environment for this update, apply the platform update package the same way you apply it on a development environment as describe [above](#apply-the-platform-update-package-on-your-development-environment).\n\n## Features that aren't supported\n**Dynamics AX platform August 2016 release (Update 2)** includes the following features:\n\n-   The new Entity Store feature\n-   Microsoft Power BI with DirectQuery\n-   Microsoft Cortana Analytics for Retail\n\nHowever, an instance of Dynamics AX that was originally deployed by using the February 2016 release won't have these features if you update by using the process that is described in this topic. To enable these features, you original deployment must be an Update 1 (May 2016) deployment.\n\n## Optional: If your application overlays platform models\nBefore you apply the platform update package on your development instance, follow these steps if your solution contains models that belong to one of the following packages:\n\n-   Application Platform\n-   Application Foundation\n-   Directory\n-   TestEssentials\n\n1.  In Visual Studio, check in all pending changes to your Microsoft Visual Studio Team Services (VSTS) version control project.\n2.  Exit Visual Studio.\n3.  Apply the platform update deployable package as described earlier in this topic.\n4.  Start Visual Studio.\n5.  Resolve potential conflicts in your models that overlay platform models. **Tip:** You can use the Create project from conflicts add-in to create a project from all conflicts in a model.[![Create project from conflicts ](./media/projectforconflicts.jpg)](./media/projectforconflicts.jpg)\n6.  Rebuild and validate your application.\n7.  Create a custom deployable package from your customized platform package. This package should be applied to your sandbox/pre-production environment for validation.\n\n\nSee also\n--------\n\n[Process for upgrading to the latest Dynamics AX update](upgrade-latest-update.md)\n\n"}