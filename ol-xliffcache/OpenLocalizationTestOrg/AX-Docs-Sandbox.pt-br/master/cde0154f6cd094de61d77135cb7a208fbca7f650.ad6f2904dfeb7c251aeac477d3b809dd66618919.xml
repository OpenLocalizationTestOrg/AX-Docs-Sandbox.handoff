{"nodes":[{"pos":[32,76],"content":"Modeling and aggregate data | Microsoft Docs","needQuote":true,"needEscape":true,"nodes":[{"content":"Modeling and aggregate data | Microsoft Docs","pos":[0,44]}]},{"pos":[90,164],"content":"This tutorial will walk you through the process of modeling aggregate data","needQuote":true,"needEscape":true,"nodes":[{"content":"This tutorial will walk you through the process of modeling aggregate data","pos":[0,74]}]},{"pos":[587,614],"content":"Modeling and aggregate data","linkify":"Modeling and aggregate data","nodes":[{"content":"Modeling and aggregate data","pos":[0,27]}]},{"pos":[616,692],"content":"This tutorial will walk you through the process of modeling aggregate data .","source":"This tutorial will walk you through the process of modeling aggregate data\n."},{"pos":[694,707],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"This tutorial requires you to access the environment using Remote Desktop, and be provisioned as an administrator.","pos":[723,837]},{"content":"For more information, see the wiki named <bpt id=\"p1\">[</bpt>Access Microsoft Dynamics 265 for Operations instances<ept id=\"p1\">](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2)</ept>.","pos":[838,1056],"source":" For more information, see the wiki named [Access Microsoft Dynamics 265 for Operations instances](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2)."},{"pos":[1061,1073],"content":"Key concepts","linkify":"Key concepts","nodes":[{"content":"Key concepts","pos":[0,12]}]},{"pos":[1078,1218],"content":"<bpt id=\"p1\">**</bpt>Aggregate measurements<ept id=\"p1\">**</ept>, similar to <bpt id=\"p2\">**</bpt>perspectives<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Cubes<ept id=\"p3\">**</ept> from earlier versions, enable you to model and consume aggregate data.","source":"**Aggregate measurements**, similar to **perspectives** and **Cubes** from earlier versions, enable you to model and consume aggregate data."},{"content":"<bpt id=\"p1\">**</bpt>Key Performance Indicators (KPIs)<ept id=\"p1\">**</ept> are a form of analytic controls that track organizational performance against the current status.","pos":[1223,1358],"source":"**Key Performance Indicators (KPIs)** are a form of analytic controls that track organizational performance against the current status."},{"content":"KPIs are represented as tiles in a <bpt id=\"p1\">**</bpt>workspace<ept id=\"p1\">**</ept> or the <bpt id=\"p2\">**</bpt>dashboard<ept id=\"p2\">**</ept>.","pos":[1359,1429],"source":" KPIs are represented as tiles in a **workspace** or the **dashboard**."},{"content":"In this tutorial, you will model a KPI in Visual Studio.","pos":[1430,1486]},{"content":"KPIs that are modeled in Visual Studio can be modified in the client.","pos":[1491,1560]},{"content":"A user also has the ability to model new KPIs using the client.","pos":[1561,1624]},{"content":"A <bpt id=\"p1\">**</bpt>workspace<ept id=\"p1\">**</ept> is an overview page that is specific to a particular subject area.","pos":[1629,1711],"source":"A **workspace** is an overview page that is specific to a particular subject area."},{"content":"Workspaces are common to all users.","pos":[1712,1747]},{"pos":[1752,1809],"content":"The <bpt id=\"p1\">**</bpt>dashboard<ept id=\"p1\">**</ept> is the default home page for each user.","source":"The **dashboard** is the default home page for each user."},{"content":"<bpt id=\"p1\">**</bpt>Tiles<ept id=\"p1\">**</ept> are securable objects that can be pinned to a workspace or the dashboard.","pos":[1814,1897],"source":"**Tiles** are securable objects that can be pinned to a workspace or the dashboard."},{"content":"KPIs and aggregate data that are shown on the dashboard, or a workspace, can be secured by using menu items.","pos":[1898,2006]},{"content":"Aggregate data can be consumed in building charts and other controls.","pos":[2011,2080]},{"content":"Using the model driven approach, you have the ability to create data entities by directly referencing aggregate measurements and aggregate dimensions.","pos":[2081,2231]},{"content":"These entities are referred to as <bpt id=\"p1\">**</bpt>Aggregate data entities<ept id=\"p1\">**</ept>.","pos":[2232,2294],"source":" These entities are referred to as **Aggregate data entities**."},{"content":"Aggregate data entities are read-only data entities used for reporting purposes.","pos":[2295,2375]},{"content":"<bpt id=\"p1\">**</bpt>The aggregate programming model<ept id=\"p1\">**</ept> enables a developer to consume aggregate data programmatically using either X++ or C<ph id=\"ph1\">\\#</ph> code.","pos":[2380,2508],"source":"**The aggregate programming model** enables a developer to consume aggregate data programmatically using either X++ or C\\# code."},{"content":"Data retrieved using the aggregate programming model can be used as a data source in forms.","pos":[2509,2600]},{"content":"<bpt id=\"p1\">**</bpt>Method expressions<ept id=\"p1\">**</ept> enable a developer to build rich expressions using aggregate data.","pos":[2605,2694],"source":"**Method expressions** enable a developer to build rich expressions using aggregate data."},{"content":"Method expressions are an X++ class.","pos":[2695,2731]},{"content":"KPIs can be modeled using method expressions, thereby eliminating the need to build MDX expressions.","pos":[2732,2832]},{"pos":[2837,3057],"content":"<bpt id=\"p1\">**</bpt>Contextual BI<ept id=\"p1\">**</ept> refers to providing required insights as part of the user experience such that the user has relevant insights to not only achieve the task at hand, but be highly-productive during the course of the day.","source":"**Contextual BI** refers to providing required insights as part of the user experience such that the user has relevant insights to not only achieve the task at hand, but be highly-productive during the course of the day."},{"content":"<bpt id=\"p1\">**</bpt>Embedded BI<ept id=\"p1\">**</ept> refers to analytic content being embedded within the user experience.","pos":[3062,3147],"source":"**Embedded BI** refers to analytic content being embedded within the user experience."},{"content":"Contextual BI and embedded BI teams are closely related.","pos":[3148,3204]},{"content":"Contextual BI implies the added notion that the context of analytic context revolves around the data or the task.","pos":[3205,3318]},{"pos":[3323,3460],"content":"<bpt id=\"p1\">**</bpt>Self-service BI<ept id=\"p1\">**</ept> refers to enabling a user to tweak existing and/or create new analytic content such as reports, KPIs, and dashboards.","source":"**Self-service BI** refers to enabling a user to tweak existing and/or create new analytic content such as reports, KPIs, and dashboards."},{"pos":[3465,3471],"content":"Set up","linkify":"Set up","nodes":[{"content":"Set up","pos":[0,6]}]},{"content":"If this is the first tutorial you are working on, make sure you have configured the administrator user if you are running on a local VM.","pos":[3472,3608]},{"pos":[3614,3641],"content":"Import the tutorial project","linkify":"Import the tutorial project","nodes":[{"content":"Import the tutorial project","pos":[0,27]}]},{"content":"If you have already imported the Fleet management tutorial project, skip to the next section.","pos":[3643,3736]},{"content":"If you have not done so already, you can download the tutorial project from <bpt id=\"p1\">&lt;</bpt>https://connect.microsoft.com/site1321/Downloads<ept id=\"p1\">&gt;</ept>.","pos":[3737,3864],"source":" If you have not done so already, you can download the tutorial project from <https://connect.microsoft.com/site1321/Downloads>."},{"content":"Please note that you will be required to login to the site.","pos":[3865,3924]},{"content":"After login, choose the document titled \"<bpt id=\"p1\">**</bpt>FMLab for Microsoft Dynamics AX (CTP8)<ept id=\"p1\">**</ept>\".","pos":[3925,4010],"source":" After login, choose the document titled \"**FMLab for Microsoft Dynamics AX (CTP8)**\"."},{"content":"Unzip the downloaded document and place the <bpt id=\"p1\">**</bpt>FMLab<ept id=\"p1\">**</ept> folder into a convenient location.","pos":[4011,4099],"source":" Unzip the downloaded document and place the **FMLab** folder into a convenient location."},{"content":"In Visual Studio, on the <bpt id=\"p1\">**</bpt>Dynamics 365<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Import Project<ept id=\"p2\">**</ept>.","pos":[4100,4173],"source":" In Visual Studio, on the **Dynamics 365** menu, click **Import Project**."},{"pos":[4179,4291],"content":"Download the Fleet Management sample from <bpt id=\"p1\">&lt;</bpt>https://github.com/Microsoft/FMLab<ept id=\"p1\">&gt;</ept>, save it to <bpt id=\"p2\">**</bpt>C:<ept id=\"p2\">**</ept>, and unzip it.","source":"Download the Fleet Management sample from <https://github.com/Microsoft/FMLab>, save it to **C:**, and unzip it."},{"pos":[4296,4391],"content":"In the <bpt id=\"p1\">**</bpt>Import Project<ept id=\"p1\">**</ept> window, next to the <bpt id=\"p2\">**</bpt>Filename<ept id=\"p2\">**</ept> text box, click the ellipsis button.","source":"In the **Import Project** window, next to the **Filename** text box, click the ellipsis button."},{"pos":[4396,4549],"content":"In the <bpt id=\"p1\">**</bpt>Select the file to import<ept id=\"p1\">**</ept> window, browse to the location of the <bpt id=\"p2\">**</bpt>FMLab<ept id=\"p2\">**</ept> folder, click <bpt id=\"p3\">**</bpt>FMTutorialDataModel.axpp<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Open<ept id=\"p4\">**</ept>.","source":"In the **Select the file to import** window, browse to the location of the **FMLab** folder, click **FMTutorialDataModel.axpp**, and then click **Open**."},{"pos":[4554,4617],"content":"In the <bpt id=\"p1\">**</bpt>Project file location<ept id=\"p1\">**</ept> text box, enter <bpt id=\"p2\">**</bpt>C:<ph id=\"ph1\">\\\\</ph>FMLab<ept id=\"p2\">**</ept>.","source":"In the **Project file location** text box, enter **C:\\\\FMLab**."},{"pos":[4622,4689],"content":"Select the <bpt id=\"p1\">**</bpt>Overwrite Elements<ept id=\"p1\">**</ept> check box, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.","source":"Select the **Overwrite Elements** check box, and then click **OK**."},{"pos":[4695,4722],"content":"Import the tutorial project","linkify":"Import the tutorial project","nodes":[{"content":"Import the tutorial project","pos":[0,27]}]},{"content":"In Visual Studio, open the <bpt id=\"p1\">**</bpt>FMTutorial<ept id=\"p1\">**</ept> project.","pos":[4728,4778],"source":"In Visual Studio, open the **FMTutorial** project."},{"content":"On the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, point to <bpt id=\"p2\">**</bpt>Open<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Project/Solution<ept id=\"p3\">**</ept>.","pos":[4779,4856],"source":" On the **File** menu, point to **Open**, and then click **Project/Solution**."},{"content":"In the <bpt id=\"p1\">**</bpt>Open Project<ept id=\"p1\">**</ept> dialog box, browse to C:FMLabFMTutorial, and then click FMTutorial.","pos":[4861,4952],"source":"In the **Open Project** dialog box, browse to C:FMLabFMTutorial, and then click FMTutorial."},{"content":"Click <bpt id=\"p1\">**</bpt>Open<ept id=\"p1\">**</ept>.","pos":[4953,4968],"source":" Click **Open**."},{"content":"The <bpt id=\"p1\">**</bpt>FMTutorial<ept id=\"p1\">**</ept> project appears in <bpt id=\"p2\">**</bpt>Solution Explorer<ept id=\"p2\">**</ept>.","pos":[4969,5029],"source":" The **FMTutorial** project appears in **Solution Explorer**."},{"content":"Use the FMTDataHelper class to load data for the Fleet Management tutorial.","pos":[5034,5109]},{"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, in the FMTutorial project, expand <bpt id=\"p2\">**</bpt>Classes<ept id=\"p2\">**</ept>.","pos":[5110,5182],"source":" In **Solution Explorer**, in the FMTutorial project, expand **Classes**."},{"content":"Right-click <bpt id=\"p1\">**</bpt>FMTDataHelper<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Set as Startup Object<ept id=\"p2\">**</ept>.","pos":[5183,5255],"source":" Right-click **FMTDataHelper**, and then click **Set as Startup Object**."},{"content":"On the <bpt id=\"p1\">**</bpt>Build<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Rebuild Solution<ept id=\"p2\">**</ept>.","pos":[5260,5310],"source":"On the **Build** menu, click **Rebuild Solution**."},{"content":"You use the rebuild to update the timestamps of the imported artifacts.","pos":[5311,5382]},{"content":"You can view the build progress in the <bpt id=\"p1\">**</bpt>Output<ept id=\"p1\">**</ept> window.","pos":[5383,5440],"source":" You can view the build progress in the **Output** window."},{"pos":[5445,5500],"content":"Press <bpt id=\"p1\">**</bpt>Ctrl+F5<ept id=\"p1\">**</ept> to run the project and load the data.","source":"Press **Ctrl+F5** to run the project and load the data."},{"pos":[5505,5554],"content":"Model an aggregate measurement for rental charges","linkify":"Model an aggregate measurement for rental charges","nodes":[{"content":"Model an aggregate measurement for rental charges","pos":[0,49]}]},{"content":"Often, when a user asks for additional information, you get a request for one or more new reports.","pos":[5555,5653]},{"content":"Imagine that the manager of a rental car company has called and asked for a report.","pos":[5654,5737]},{"content":"She is interested in finding out how the rental business is performing.","pos":[5738,5809]},{"content":"She wants a report that shows rental revenue by month.","pos":[5810,5864]},{"content":"You soon find out that she is interested in a breakdown of rental revenues.","pos":[5865,5940]},{"content":"She wants to know whether the rental revenue is high in cases where they have sold additional services, for example, car seats, GPS, re-fueling, as opposed to the base rental charge.","pos":[5941,6123]},{"content":"As it turns out, she suspects that specific customer groups are driving revenue up, and this is why she wanted the report in the first place.","pos":[6124,6265]},{"content":"She insists on adding Customer group to the report.","pos":[6266,6317]},{"content":"Because the revenue must be considered in relation to the number of rentals, she doesn’t want a few large corporate rentals to skew her analysis.","pos":[6318,6463]},{"content":"You both agree that the number of rentals needs to be shown along with revenue.","pos":[6464,6543]},{"content":"We could represent this requirement as a set of business questions using a matrix.","pos":[6544,6626]},{"content":"Rows indicate the <bpt id=\"p1\">**</bpt>measures<ept id=\"p1\">**</ept> (or numbers) and the columns indicate the <bpt id=\"p2\">**</bpt>dimensions<ept id=\"p2\">**</ept> (or slicers).","pos":[6627,6728],"source":" Rows indicate the **measures** (or numbers) and the columns indicate the **dimensions** (or slicers)."},{"content":"An “X” in the intersection between a measure and a dimension indicates that the measure needs to be “grouped by” the dimension.","pos":[6729,6856]},{"pos":[7040,7045],"content":"<bpt id=\"p1\">**</bpt> <ept id=\"p1\">**</ept>","source":"** **"},{"pos":[7064,7079],"content":"<bpt id=\"p1\">**</bpt>Rental date<ept id=\"p1\">**</ept>","source":"**Rental date**"},{"pos":[7082,7100],"content":"<bpt id=\"p1\">**</bpt>Customer group<ept id=\"p1\">**</ept>","source":"**Customer group**"},{"pos":[7103,7125],"content":"<bpt id=\"p1\">**</bpt>Rental charge type<ept id=\"p1\">**</ept>","source":"**Rental charge type**"},{"pos":[7130,7141],"content":"<bpt id=\"p1\">**</bpt>Revenue<ept id=\"p1\">**</ept>","source":"**Revenue**"},{"content":"X","pos":[7154,7155]},{"content":"X","pos":[7172,7173]},{"content":"X","pos":[7193,7194]},{"pos":[7220,7241],"content":"<bpt id=\"p1\">**</bpt>Number of rentals<ept id=\"p1\">**</ept>","source":"**Number of rentals**"},{"content":"X","pos":[7244,7245]},{"content":"X","pos":[7262,7263]},{"content":"X","pos":[7283,7284]},{"content":"Next, we will model an aggregate measurement to answer this business question.","pos":[7309,7387]},{"pos":[7393,7457],"content":"Add a measure group for rental charges by using an existing view","linkify":"Add a measure group for rental charges by using an existing view","nodes":[{"content":"Add a measure group for rental charges by using an existing view","pos":[0,64]}]},{"content":"In this section you will add a new measure group to an existing aggregate measurement.","pos":[7459,7545]},{"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, expand the <bpt id=\"p2\">**</bpt>Analytics<ept id=\"p2\">**</ept> folder of the project, and then double-click the aggregate measurement, <bpt id=\"p3\">**</bpt>FMTAggregateMeasurement<ept id=\"p3\">**</ept>.","pos":[7551,7702],"source":"In **Solution Explorer**, expand the **Analytics** folder of the project, and then double-click the aggregate measurement, **FMTAggregateMeasurement**."},{"content":"The aggregate measurement will be launched in the designer.","pos":[7703,7762]},{"content":"Notice that the existing aggregate measurement contains two measure groups related to vehicle inventory and rental details.","pos":[7763,7886]},{"content":"You will create a new measure group related to rental charges.","pos":[7887,7949]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FMTAggregateMeasurement<ept id=\"p1\">](./media/fmtaggregatemeasurement.png)](./media/fmtaggregatemeasurement.png)</ept>","pos":[7950,8052],"source":"[![FMTAggregateMeasurement](./media/fmtaggregatemeasurement.png)](./media/fmtaggregatemeasurement.png)"},{"pos":[8057,8184],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, expand the <bpt id=\"p2\">**</bpt>Views<ept id=\"p2\">**</ept> folder of the project, and then select the <bpt id=\"p3\">**</bpt>FMTRentalChargeExtendedView<ept id=\"p3\">**</ept> view.","source":"In **Solution Explorer**, expand the **Views** folder of the project, and then select the **FMTRentalChargeExtendedView** view."},{"content":"Drag-and-drop the <bpt id=\"p1\">**</bpt>FMTRentalChargeExtendedView<ept id=\"p1\">**</ept> into the root node of the <bpt id=\"p2\">**</bpt>FMTAggregateMeasurement<ept id=\"p2\">**</ept> aggregate measurement in the designer.","pos":[8189,8331],"source":"Drag-and-drop the **FMTRentalChargeExtendedView** into the root node of the **FMTAggregateMeasurement** aggregate measurement in the designer."},{"content":"Notice that a new measure group is created and the values of properties have been applied as follows.","pos":[8332,8433]},{"content":"Property","pos":[8532,8540]},{"content":"Value","pos":[8543,8548]},{"content":"Name","pos":[8578,8582]},{"content":"FMRentalChargeExtendedView","pos":[8589,8615]},{"content":"Table","pos":[8624,8629]},{"content":"FMRentalChargeExtendedView","pos":[8635,8661]},{"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, double-click the <bpt id=\"p2\">**</bpt>FMRentalChargeExtendedView<ept id=\"p2\">**</ept> view.","pos":[8669,8748],"source":"In **Solution Explorer**, double-click the **FMRentalChargeExtendedView** view."},{"content":"When the designer form opens, expand the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> node.","pos":[8749,8806],"source":" When the designer form opens, expand the **Fields** node."},{"content":"Select the <bpt id=\"p1\">**</bpt>ExtendedAmount<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>RentalID<ept id=\"p2\">**</ept> fields, and then drag-and-drop the two fields onto the <bpt id=\"p3\">**</bpt>Measures<ept id=\"p3\">**</ept> node of the newly created <bpt id=\"p4\">**</bpt>FMAggregateMeasurement<ept id=\"p4\">**</ept> measure group called <bpt id=\"p5\">**</bpt>FMRentalChargeExtendedView<ept id=\"p5\">**</ept>.","pos":[8811,9031],"source":"Select the **ExtendedAmount** and **RentalID** fields, and then drag-and-drop the two fields onto the **Measures** node of the newly created **FMAggregateMeasurement** measure group called **FMRentalChargeExtendedView**."},{"content":"As you drag the fields, hover your cursor over the <bpt id=\"p1\">**</bpt>FMAggregateMeasurement<ept id=\"p1\">**</ept> tab to access the <bpt id=\"p2\">**</bpt>Measures<ept id=\"p2\">**</ept> node.","pos":[9032,9146],"source":" As you drag the fields, hover your cursor over the **FMAggregateMeasurement** tab to access the **Measures** node."},{"content":"By default, when you drag-and-drop the fields, the system assumes that you want counts of the measures.","pos":[9147,9250]},{"content":"In this case, you need to modify default properties for the <bpt id=\"p1\">**</bpt>ExtendedAmount<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>RentalId<ept id=\"p2\">**</ept> measures as follows:","pos":[9251,9367],"source":" In this case, you need to modify default properties for the **ExtendedAmount** and **RentalId** measures as follows:"},{"content":"Property (ExtendedAmount)","pos":[9518,9543]},{"content":"Value","pos":[9546,9551]},{"content":"Default Aggregate","pos":[9590,9607]},{"pos":[9618,9625],"content":"<bpt id=\"p1\">**</bpt>Sum<ept id=\"p1\">**</ept>","source":"**Sum**"},{"content":"Field","pos":[9662,9667]},{"content":"ExtendedAmount (no change required)","pos":[9690,9725]},{"content":"Name","pos":[9734,9738]},{"content":"Revenue","pos":[9762,9769]},{"content":"Property (RentalId)","pos":[9933,9952]},{"content":"Value","pos":[9955,9960]},{"content":"Default Aggregate","pos":[9993,10010]},{"pos":[10015,10032],"content":"<bpt id=\"p1\">**</bpt>DistinctCount<ept id=\"p1\">**</ept>","source":"**DistinctCount**"},{"content":"Field","pos":[10053,10058]},{"content":"RentalId (no change required)","pos":[10075,10104]},{"content":"Name","pos":[10113,10117]},{"content":"NumRentals","pos":[10135,10145]},{"content":"Next let's create another measure which calculates <bpt id=\"p1\">**</bpt>Revenue per Rental<ept id=\"p1\">**</ept> by copying an existing measure.","pos":[10172,10277],"source":"Next let's create another measure which calculates **Revenue per Rental** by copying an existing measure."},{"content":"Select the <bpt id=\"p1\">**</bpt>TotalRevenue<ept id=\"p1\">**</ept> measure.","pos":[10278,10314],"source":" Select the **TotalRevenue** measure."},{"content":"Right-click and select <bpt id=\"p1\">**</bpt>Copy<ept id=\"p1\">**</ept> from the <bpt id=\"p2\">**</bpt>Context<ept id=\"p2\">**</ept> menu.","pos":[10315,10373],"source":" Right-click and select **Copy** from the **Context** menu."},{"content":"Select the <bpt id=\"p1\">**</bpt>FMRentalDetails<ept id=\"p1\">**</ept> measure group.","pos":[10378,10423],"source":"Select the **FMRentalDetails** measure group."},{"content":"Right-click and select paste.","pos":[10424,10453]},{"content":"Rename the newly created measure to <bpt id=\"p1\">**</bpt>RevenuePerRental<ept id=\"p1\">**</ept>.","pos":[10454,10511],"source":" Rename the newly created measure to **RevenuePerRental**."},{"content":"Modify the aggregation function to <bpt id=\"p1\">**</bpt>Average<ept id=\"p1\">**</ept>.","pos":[10512,10559],"source":" Modify the aggregation function to **Average**."},{"pos":[10565,10605],"content":"Model an aggregate dimension charge type","linkify":"Model an aggregate dimension charge type","nodes":[{"content":"Model an aggregate dimension charge type","pos":[0,40]}]},{"content":"To analyze rental revenue by the different charge types, you need to be able to slice revenue by the charge type.","pos":[10607,10720]},{"content":"For this purpose, you will first model a charge type dimension.","pos":[10721,10784]},{"pos":[10790,10911],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, under <bpt id=\"p2\">**</bpt>FMTutorial<ept id=\"p2\">**</ept>, right-click <bpt id=\"p3\">**</bpt>Analytics<ept id=\"p3\">**</ept>, point to <bpt id=\"p4\">**</bpt>Add<ept id=\"p4\">**</ept>, and then click <bpt id=\"p5\">**</bpt>New Item<ept id=\"p5\">**</ept>.","source":"In **Solution Explorer**, under **FMTutorial**, right-click **Analytics**, point to **Add**, and then click **New Item**."},{"pos":[10916,11021],"content":"Select <bpt id=\"p1\">**</bpt>Dynamics 365 Artifacts<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Analytics<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Aggregate Dimension<ept id=\"p3\">**</ept> from the list of items.","source":"Select **Dynamics 365 Artifacts** &gt; **Analytics** &gt; **Aggregate Dimension** from the list of items."},{"content":"In the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> property, enter <bpt id=\"p2\">**</bpt>FMTChargeType<ept id=\"p2\">**</ept>.","pos":[11026,11076],"source":"In the **Name** property, enter **FMTChargeType**."},{"content":"This is the name of the aggregate dimension that will be created.","pos":[11077,11142]},{"content":"This name must be unique.","pos":[11143,11168]},{"content":"Click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>.","pos":[11169,11183],"source":" Click **Add**."},{"content":"The new dimension will appear in Visual Studio.","pos":[11184,11231]},{"content":"In <bpt id=\"p1\">**</bpt>Application Explorer<ept id=\"p1\">**</ept>, expand the <bpt id=\"p2\">**</bpt>AOT<ept id=\"p2\">**</ept> and click <bpt id=\"p3\">**</bpt>Data Model<ept id=\"p3\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Tables<ept id=\"p4\">**</ept>.","pos":[11236,11325],"source":"In **Application Explorer**, expand the **AOT** and click **Data Model** &gt; **Tables**."},{"content":"Drag-and-drop the <bpt id=\"p1\">**</bpt>FMTChargeType<ept id=\"p1\">**</ept> table from <bpt id=\"p2\">**</bpt>Application Explorer<ept id=\"p2\">**</ept> onto the root node of the newly created <bpt id=\"p3\">**</bpt>FMTChargeType<ept id=\"p3\">**</ept> dimension in the designer.","pos":[11326,11482],"source":" Drag-and-drop the **FMTChargeType** table from **Application Explorer** onto the root node of the newly created **FMTChargeType** dimension in the designer."},{"content":"Notice that dimension attributes and corresponding keys have been added using the AutoReport field group of the table.","pos":[11483,11601]},{"content":"Expand the <bpt id=\"p1\">**</bpt>Attributes<ept id=\"p1\">**</ept> node of the new dimension.","pos":[11606,11658],"source":"Expand the **Attributes** node of the new dimension."},{"content":"Notice that several attributes have been created for you by default.","pos":[11659,11727]},{"content":"The system has also created a dimension key based on unique indexes of the table.","pos":[11728,11809]},{"content":"You can add additional fields by dragging and dropping them into the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> node.","pos":[11810,11895],"source":" You can add additional fields by dragging and dropping them into the **Fields** node."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FMTChargeType<ept id=\"p1\">](./media/fmtchargetype.png)](./media/fmtchargetype.png)</ept>","pos":[11896,11968],"source":"[![FMTChargeType](./media/fmtchargetype.png)](./media/fmtchargetype.png)"},{"content":"Save the new dimension.","pos":[11973,11996]},{"content":"You may get a warning asking you to rename the field name Description to avoid the MDX reserved word.","pos":[12001,12102]},{"content":"Even though the aggregate dimension may not be deployed to SSAS in this aggregate measurement, it's possible that this dimension may be used by an aggregate measurement deployed to SSAS in the future.","pos":[12103,12303]},{"content":"To avoid potential issues in the future, rename the field name <bpt id=\"p1\">**</bpt>Description<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>ChargeDescription<ept id=\"p2\">**</ept>.","pos":[12304,12408],"source":" To avoid potential issues in the future, rename the field name **Description** to **ChargeDescription**."},{"pos":[12414,12488],"content":"Model dimension references for customer profile and charge type dimensions","linkify":"Model dimension references for customer profile and charge type dimensions","nodes":[{"content":"Model dimension references for customer profile and charge type dimensions","pos":[0,74]}]},{"content":"Next, create dimension references to new and existing dimensions so that revenue can be sliced by customer as well as charge type.","pos":[12490,12620]},{"pos":[12626,12749],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, double-click <bpt id=\"p2\">**</bpt>FMTAggregateMeasurement<ept id=\"p2\">**</ept> or, if you have it open, navigate to it in the designer.","source":"In **Solution Explorer**, double-click **FMTAggregateMeasurement** or, if you have it open, navigate to it in the designer."},{"pos":[12754,12847],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, select the dimensions <bpt id=\"p2\">**</bpt>FMTChargeType<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>FMTCustomerProfile<ept id=\"p3\">**</ept>.","source":"In **Solution Explorer**, select the dimensions **FMTChargeType** and **FMTCustomerProfile**."},{"content":"Drag-and-drop them into the <bpt id=\"p1\">**</bpt>Dimensions<ept id=\"p1\">**</ept> node of the <bpt id=\"p2\">**</bpt>FMTRentalChargeExtendedView<ept id=\"p2\">**</ept> measure group.","pos":[12852,12953],"source":"Drag-and-drop them into the **Dimensions** node of the **FMTRentalChargeExtendedView** measure group."},{"content":"Notice that dimension references have been created along with relations.","pos":[12954,13026]},{"content":"Save changes to <bpt id=\"p1\">**</bpt>FMTAggregateMeasurement<ept id=\"p1\">**</ept>.","pos":[13031,13075],"source":"Save changes to **FMTAggregateMeasurement**."},{"content":"Review the property sheet for the dimension relation and notice that the <bpt id=\"p1\">**</bpt>Use Table relations<ept id=\"p1\">**</ept> property is set to <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept>.","pos":[13076,13200],"source":" Review the property sheet for the dimension relation and notice that the **Use Table relations** property is set to **Yes**."},{"content":"Notice that the drag-and-drop operation created relationships between the measure group dimensions <bpt id=\"p1\">**</bpt>FMTRentalChargeExtendedView<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>FMTChargeType<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>FMTCustomerProfile<ept id=\"p3\">**</ept>.","pos":[13201,13378],"source":" Notice that the drag-and-drop operation created relationships between the measure group dimensions **FMTRentalChargeExtendedView** and **FMTChargeType**, **FMTCustomerProfile**."},{"content":"Review the property sheet for the dimension relation and notice that the <bpt id=\"p1\">**</bpt>Use Table relations<ept id=\"p1\">**</ept> property is set to <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept>.","pos":[13379,13503],"source":" Review the property sheet for the dimension relation and notice that the **Use Table relations** property is set to **Yes**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FMTChargeType2<ept id=\"p1\">](./media/fmtchargetype2.png)](./media/fmtchargetype2.png)</ept>","pos":[13504,13579],"source":"[![FMTChargeType2](./media/fmtchargetype2.png)](./media/fmtchargetype2.png)"},{"content":"Expand the Dimension relations node for the <bpt id=\"p1\">**</bpt>FMTCustomerProfile<ept id=\"p1\">**</ept> dimension.","pos":[13584,13661],"source":"Expand the Dimension relations node for the **FMTCustomerProfile** dimension."},{"content":"Notice that the <bpt id=\"p1\">**</bpt>UseTableRelations<ept id=\"p1\">**</ept> property is set to <bpt id=\"p2\">**</bpt>No<ept id=\"p2\">**</ept>.","pos":[13662,13726],"source":" Notice that the **UseTableRelations** property is set to **No**."},{"content":"In this case, the system has not been able to find a suitable relationship between the Measure group and dimension.","pos":[13727,13842]},{"content":"You will need to specify one manually.","pos":[13843,13881]},{"content":"Expand the <bpt id=\"p1\">**</bpt>FMTCustomerProfile<ept id=\"p1\">**</ept> dimension reference if you have not done so already.","pos":[13886,13972],"source":"Expand the **FMTCustomerProfile** dimension reference if you have not done so already."},{"content":"Select the node <bpt id=\"p1\">**</bpt>FMTCustomerExtendedView<ept id=\"p1\">**</ept>.","pos":[13973,14017],"source":" Select the node **FMTCustomerExtendedView**."},{"content":"Right-click and see the property sheet.","pos":[14018,14057]},{"content":"Select <bpt id=\"p1\">**</bpt>CustomerID<ept id=\"p1\">**</ept> as the value for property <bpt id=\"p2\">**</bpt>DimensionAttribute<ept id=\"p2\">**</ept>.","pos":[14062,14133],"source":"Select **CustomerID** as the value for property **DimensionAttribute**."},{"content":"Select the relationship shown below.","pos":[14134,14170]},{"content":"Select <bpt id=\"p1\">**</bpt>Customer<ept id=\"p1\">**</ept> for the property value <bpt id=\"p2\">**</bpt>RelatedField<ept id=\"p2\">**</ept>.","pos":[14171,14231],"source":" Select **Customer** for the property value **RelatedField**."},{"content":"Save changes to <bpt id=\"p1\">**</bpt>FMTAggregateMeasurement<ept id=\"p1\">**</ept>.","pos":[14236,14280],"source":"Save changes to **FMTAggregateMeasurement**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FMT4<ept id=\"p1\">](./media/fmt4.png)](./media/fmt4.png)</ept>","pos":[14281,14326],"source":"[![FMT4](./media/fmt4.png)](./media/fmt4.png)"},{"content":"In this scenario, we specified a relationship because the system was unable to find one.","pos":[14331,14419]},{"content":"You could also specify a different relationship if you want to override the system choice by setting <bpt id=\"p1\">**</bpt>Use Table Relations property<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>No<ept id=\"p2\">**</ept>.","pos":[14420,14564],"source":" You could also specify a different relationship if you want to override the system choice by setting **Use Table Relations property** to **No**."},{"pos":[14570,14660],"content":"Model dimension references for the date dimension's rental start date and transaction date","linkify":"Model dimension references for the date dimension's rental start date and transaction date","nodes":[{"content":"Model dimension references for the date dimension's rental start date and transaction date","pos":[0,90]}]},{"content":"Assume that for analysis purposes, you want to enable slicing by the start date of the rental; but for accounting purposes, you want to enable slicing by the transaction date for each of the charges.","pos":[14662,14861]},{"content":"To do this, you need to associate the rental charges measure group with two date dimensions.","pos":[14862,14954]},{"content":"In the BI world, this pattern is known as <bpt id=\"p1\">**</bpt>Role Playing dimensions<ept id=\"p1\">**</ept>.","pos":[14955,15025],"source":" In the BI world, this pattern is known as **Role Playing dimensions**."},{"content":"By default, a date dimension is added to the measure group.","pos":[15026,15085]},{"content":"You can rename the default name appropriately and add new date dimensions as required.","pos":[15086,15172]},{"content":"Expand the <bpt id=\"p1\">**</bpt>Dimensions<ept id=\"p1\">**</ept> node of the <bpt id=\"p2\">**</bpt>FMTRentalChargeExtendedView<ept id=\"p2\">**</ept> measure group.","pos":[15178,15262],"source":"Expand the **Dimensions** node of the **FMTRentalChargeExtendedView** measure group."},{"content":"Notice that the <bpt id=\"p1\">**</bpt>Date<ph id=\"ph1\">\\_</ph><ept id=\"p1\">**</ept> dimension has already been included as dimension slicers.","pos":[15263,15347],"source":" Notice that the **Date\\_** dimension has already been included as dimension slicers."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If the table or the view used to model the measure group is a Company-specific table, for example it contains DATAAREAID as part of the key), a <bpt id=\"p2\">**</bpt>Company<ept id=\"p2\">**</ept> dimension relation will be created by default.","pos":[15348,15560],"source":"**Note:** If the table or the view used to model the measure group is a Company-specific table, for example it contains DATAAREAID as part of the key), a **Company** dimension relation will be created by default."},{"content":"In this case, the view we used is not a company specific one.","pos":[15561,15622]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FMT5<ept id=\"p1\">](./media/fmt5.png)](./media/fmt5.png)</ept>","pos":[15623,15668],"source":"[![FMT5](./media/fmt5.png)](./media/fmt5.png)"},{"pos":[15673,15740],"content":"Select the <bpt id=\"p1\">**</bpt>Date<ept id=\"p1\">**</ept> dimension and specify the following properties.","source":"Select the **Date** dimension and specify the following properties."},{"content":"Property","pos":[15897,15905]},{"content":"Value","pos":[15919,15924]},{"content":"Name","pos":[15972,15976]},{"content":"RentalStartDate","pos":[15994,16009]},{"content":"Use Table Relations","pos":[16047,16066]},{"content":"No (This is the default – no need to change)","pos":[16069,16113]},{"content":"Define the table relationship.","pos":[16121,16151]},{"content":"Expand <bpt id=\"p1\">**</bpt>RentalStartDate<ept id=\"p1\">**</ept>, and then expand the <bpt id=\"p2\">**</bpt>Date<ept id=\"p2\">**</ept> node.","pos":[16152,16214],"source":" Expand **RentalStartDate**, and then expand the **Date** node."},{"content":"Select the Relationship shown.","pos":[16219,16249]},{"content":"Right-click and select the property sheet.","pos":[16250,16292]},{"content":"Select <bpt id=\"p1\">**</bpt>StartDate<ept id=\"p1\">**</ept> for the value of <bpt id=\"p2\">**</bpt>Related field<ept id=\"p2\">**</ept> property.","pos":[16293,16358],"source":" Select **StartDate** for the value of **Related field** property."},{"content":"The relationship you defined should look like the following screenshot.","pos":[16363,16434]},{"content":"FMT6","pos":[16436,16440]},{"content":"Next, enable slicing of measures by the TransactionDate dimension.","pos":[16464,16530]},{"content":"TransactionDate is also a date dimension, so you will add another reference to the date dimension and associate that with the corresponding field that contains the transaction date.","pos":[16531,16712]},{"content":"When more than one date dimension is used as a slicer, each date dimension is known as a <bpt id=\"p1\">**</bpt>Role playing date dimension<ept id=\"p1\">**</ept>.","pos":[16713,16834],"source":" When more than one date dimension is used as a slicer, each date dimension is known as a **Role playing date dimension**."},{"content":"Under the <bpt id=\"p1\">**</bpt>FMTRentalChargeExtendedView<ept id=\"p1\">**</ept> measure group, right-click the <bpt id=\"p2\">**</bpt>Dimensions<ept id=\"p2\">**</ept> node, and then click <bpt id=\"p3\">**</bpt>New Dimension<ept id=\"p3\">**</ept>.","pos":[16839,16966],"source":"Under the **FMTRentalChargeExtendedView** measure group, right-click the **Dimensions** node, and then click **New Dimension**."},{"content":"A new dimension will be added to the list of dimension references.","pos":[16967,17033]},{"pos":[17038,17648],"content":"Specify the following properties for the new dimension reference.\nProperty\nValue\nDimension Name **NOTE:** If you select the Dimension Name in the wrong order, it will reset the other values you already set.\nDate\\_\nName\nTransactionDate\nUse table relations\nNo\nTags\nRolePlayingDate; Fleet\nNotice the new property called **Tags**. This property enables the discovery of patterns within code and metadata from within the Visual studio environment. You can enter any number of tags and they can be searched using the hot keys or the **Dynamics 365** menu in Visual Studio.","leadings":["","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    "],"nodes":[{"content":"Specify the following properties for the new dimension reference.","pos":[0,65]},{"content":"Property Value Dimension Name <bpt id=\"p1\">**</bpt>NOTE:<ept id=\"p1\">**</ept> If you select the Dimension Name in the wrong order, it will reset the other values you already set.","pos":[66,206],"source":"Property\nValue\nDimension Name **NOTE:** If you select the Dimension Name in the wrong order, it will reset the other values you already set."},{"content":"Date<ph id=\"ph1\">\\_</ph><ph id=\"ph2\">\n</ph>Name TransactionDate Use table relations No Tags RolePlayingDate; Fleet Notice the new property called <bpt id=\"p1\">**</bpt>Tags<ept id=\"p1\">**</ept>.","pos":[207,326],"source":"Date\\_\nName\nTransactionDate\nUse table relations\nNo\nTags\nRolePlayingDate; Fleet\nNotice the new property called **Tags**."},{"content":"This property enables the discovery of patterns within code and metadata from within the Visual studio environment.","pos":[327,442]},{"content":"You can enter any number of tags and they can be searched using the hot keys or the <bpt id=\"p1\">**</bpt>Dynamics 365<ept id=\"p1\">**</ept> menu in Visual Studio.","pos":[443,566],"source":" You can enter any number of tags and they can be searched using the hot keys or the **Dynamics 365** menu in Visual Studio."}]},{"content":"Define the table relationship.","pos":[17653,17683]},{"content":"Right-click <bpt id=\"p1\">**</bpt>TransactionDate<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Relation<ept id=\"p2\">**</ept>.","pos":[17684,17749],"source":" Right-click **TransactionDate**, and then click **New Relation**."},{"content":"You do not need to specify any properties in the DimensionsRelation at this point.","pos":[17750,17832]},{"content":"Expand <bpt id=\"p1\">**</bpt>BIDateDimensionValue<ept id=\"p1\">**</ept>, and then select the <bpt id=\"p2\">**</bpt>Relationship<ept id=\"p2\">**</ept> <bpt id=\"p3\">**</bpt>Constraint<ept id=\"p3\">**</ept>.","pos":[17837,17922],"source":"Expand **BIDateDimensionValue**, and then select the **Relationship** **Constraint**."},{"content":"Right-click and select the property sheet","pos":[17923,17964]},{"content":"Specify the following properties for the BIDateDimensionsView relation constraint.","pos":[17969,18051]},{"content":"Property","pos":[18124,18132]},{"content":"Value","pos":[18140,18145]},{"content":"Field","pos":[18157,18162]},{"content":"Date","pos":[18173,18177]},{"content":"Related Field","pos":[18190,18203]},{"content":"TranDate","pos":[18206,18214]},{"pos":[18222,18338],"content":"The relationship you defined should look like the following screenshot.<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FMY7<ept id=\"p1\">](./media/fmy7.png)](./media/fmy7.png)</ept>","source":"The relationship you defined should look like the following screenshot.[![FMY7](./media/fmy7.png)](./media/fmy7.png)"},{"content":"Save the aggregate measurement.","pos":[18343,18374]},{"pos":[18380,18428],"content":"Deploy the newly generated aggregate measurement","linkify":"Deploy the newly generated aggregate measurement","nodes":[{"content":"Deploy the newly generated aggregate measurement","pos":[0,48]}]},{"content":"Now that you have completed modeling the aggregate measurement, you can deploy the aggregate measurement and continue with building KPIs and visualizations.","pos":[18430,18586]},{"content":"You have 2 deployment choices as shown below.","pos":[18587,18632]},{"pos":[19064,19074],"content":"<bpt id=\"p1\">**</bpt>Option<ept id=\"p1\">**</ept>","source":"**Option**"},{"pos":[19090,19108],"content":"<bpt id=\"p1\">**</bpt>Considerations<ept id=\"p1\">**</ept>","source":"**Considerations**"},{"pos":[19278,19301],"content":"<bpt id=\"p1\">**</bpt>In-memory real-time<ept id=\"p1\">**</ept>","source":"**In-memory real-time**"},{"content":"This option will leverage the In-memory Column store indexes of SQL Server database to deploy Aggregate Measurements.This option will be fully supported in the next technology preview","pos":[19304,19487]},{"pos":[19492,19504],"content":"<bpt id=\"p1\">**</bpt>SSASCube<ept id=\"p1\">**</ept>","source":"**SSASCube**"},{"content":"Aggregate measurement will be deployed to SQL Server Analysis services server (SSAS) as a multi-dimensional cube similar to previous releases.","pos":[19518,19660]},{"pos":[19705,19777],"content":"At this point, only <bpt id=\"p1\">**</bpt>InMemoryRealTime<ept id=\"p1\">**</ept> aggregate models are supported.","source":"At this point, only **InMemoryRealTime** aggregate models are supported."},{"content":"Select the <bpt id=\"p1\">**</bpt>FMTAggregateMeasurement<ept id=\"p1\">**</ept> node.","pos":[19783,19827],"source":"Select the **FMTAggregateMeasurement** node."},{"content":"Right-click and select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","pos":[19828,19866],"source":" Right-click and select **Properties**."},{"content":"Select <bpt id=\"p1\">**</bpt>InMemoryRealTime<ept id=\"p1\">**</ept> as the value for the property <bpt id=\"p2\">**</bpt>Usage<ept id=\"p2\">**</ept>.","pos":[19867,19935],"source":" Select **InMemoryRealTime** as the value for the property **Usage**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FMT9<ept id=\"p1\">](./media/fmt9.png)](./media/fmt9.png)</ept>","pos":[19936,19981],"source":"[![FMT9](./media/fmt9.png)](./media/fmt9.png)"},{"content":"InMemoryRealTime aggregate models are deployed to SQL Server using Non-Clustered Column Store Index (NCCI) technology.","pos":[19986,20104]},{"content":"NCCIs is an in-memory technology that enables analytical and operational workloads to be served from SQL server database.","pos":[20105,20226]},{"content":"NCCI indexes can be defined on tables similar to any other index.","pos":[20227,20292]},{"content":"While NCCI indexes can be defined manually, framework has the ability to analyze index requirements and add them to underlying tables where necessary.","pos":[20293,20443]},{"content":"Right-click <bpt id=\"p1\">**</bpt>FMAggregateMeasurement<ept id=\"p1\">**</ept> in Solution Explorer, and then click <bpt id=\"p2\">**</bpt>Add Column store indices option<ept id=\"p2\">**</ept>.","pos":[20448,20560],"source":"Right-click **FMAggregateMeasurement** in Solution Explorer, and then click **Add Column store indices option**."},{"content":"You will notice several new indexes being added by the system.","pos":[20561,20623]},{"content":"Save and build the project.","pos":[20628,20655]},{"content":"InMemoryRealTime aggregate models do not require data processing as the models are queried real-time.","pos":[20660,20761]},{"content":"If you have not enabled database synchronization along with the build, manually synchronize the database.","pos":[20762,20867]},{"pos":[20872,20910],"content":"Model a KPI to show revenue per rental","linkify":"Model a KPI to show revenue per rental","nodes":[{"content":"Model a KPI to show revenue per rental","pos":[0,38]}]},{"pos":[20915,20943],"content":"Model a KPI in Visual Studio","linkify":"Model a KPI in Visual Studio","nodes":[{"content":"Model a KPI in Visual Studio","pos":[0,28]}]},{"content":"Model a KPI definition in Visual Studio by using the aggregate measurement you defined above.","pos":[20945,21038]},{"pos":[21044,21144],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>FMTutorial<ept id=\"p2\">**</ept>, point to <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>New Item<ept id=\"p4\">**</ept>.","source":"In **Solution Explorer**, right-click **FMTutorial**, point to **Add**, and then click **New Item**."},{"content":"Select <bpt id=\"p1\">**</bpt>Dynamics 365 Artifacts<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Analytics<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Key Performance Indicator<ept id=\"p3\">**</ept>.","pos":[21149,21237],"source":"Select **Dynamics 365 Artifacts** &gt; **Analytics** &gt; **Key Performance Indicator**."},{"content":"Enter FMTRevenuePerRental as the name of the KPI, and then click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>.","pos":[21238,21311],"source":" Enter FMTRevenuePerRental as the name of the KPI, and then click **Add**."},{"content":"The name must be unique across KPIs.","pos":[21312,21348]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>AddNewItem<ept id=\"p1\">](./media/addnewitem.png)](./media/addnewitem.png)</ept>The KPI is created.","pos":[21349,21431],"source":"[![AddNewItem](./media/addnewitem.png)](./media/addnewitem.png)The KPI is created."},{"pos":[21436,21550],"content":"Select <bpt id=\"p1\">**</bpt>FMTRevenuePerRental<ept id=\"p1\">**</ept>, and specify the <bpt id=\"p2\">**</bpt>Measurement<ept id=\"p2\">**</ept> Leave the default values for the other properties.","source":"Select **FMTRevenuePerRental**, and specify the **Measurement** Leave the default values for the other properties."},{"content":"Property","pos":[21658,21666]},{"content":"Value","pos":[21682,21687]},{"content":"Measurement","pos":[21710,21721]},{"content":"FMTAggregateMeasurement","pos":[21734,21757]},{"content":"Bad Threshold","pos":[21762,21775]},{"content":"0","pos":[21786,21787]},{"content":"Good Threshold","pos":[21814,21828]},{"content":"0","pos":[21838,21839]},{"content":"Scoring Pattern","pos":[21866,21881]},{"content":"MoreIsBetter","pos":[21890,21902]},{"content":"Show Goal","pos":[21918,21927]},{"content":"Yes","pos":[21942,21945]},{"content":"Show Status and Trend","pos":[21970,21991]},{"content":"Yes","pos":[21994,21997]},{"content":"Threshold Type","pos":[22022,22036]},{"content":"Value","pos":[22046,22051]},{"content":"Define the expression for the KPI value.","pos":[22076,22116]},{"content":"Under <bpt id=\"p1\">**</bpt>FMTRevenuePerRental<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Value<ept id=\"p2\">**</ept>, and specify the following properties.","pos":[22117,22203],"source":" Under **FMTRevenuePerRental**, select **Value**, and specify the following properties."},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>: The values must be entered in the order they appear in the table:","pos":[22204,22279],"source":"**Note**: The values must be entered in the order they appear in the table:"},{"content":"Property","pos":[22379,22387]},{"content":"Value","pos":[22395,22400]},{"content":"Value Type","pos":[22427,22437]},{"content":"BasedOnMeasure","pos":[22443,22457]},{"content":"Measure Group","pos":[22475,22488]},{"content":"FMTRentalChargeExtendedView","pos":[22491,22518]},{"content":"Measure","pos":[22523,22530]},{"content":"RevenuePerRental","pos":[22539,22555]},{"content":"Define the expression for the KPI Goal.","pos":[22575,22614]},{"content":"Select <bpt id=\"p1\">**</bpt>Goal<ept id=\"p1\">**</ept>, and specify the following properties.","pos":[22615,22669],"source":" Select **Goal**, and specify the following properties."},{"content":"Property","pos":[22731,22739]},{"content":"Value","pos":[22743,22748]},{"content":"Goal Type","pos":[22760,22769]},{"content":"BasedOnValue","pos":[22772,22784]},{"content":"Value","pos":[22789,22794]},{"content":"250","pos":[22801,22804]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>: You could have defined a goal based on an aggregate measure as well.","pos":[22819,22897],"source":"**Note**: You could have defined a goal based on an aggregate measure as well."},{"content":"In this case, we will define a number as the goal.","pos":[22898,22948]},{"content":"6.","pos":[22949,22951]},{"content":"Save the KPI definition.","pos":[22952,22976]},{"pos":[22982,23003],"content":"Preview KPI in client","linkify":"Preview KPI in client","nodes":[{"content":"Preview KPI in client","pos":[0,21]}]},{"content":"Next you will preview the KPI definition in the client.","pos":[23005,23060]},{"content":"Right-click <bpt id=\"p1\">**</bpt>FMTutorial<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Re-Build<ept id=\"p2\">**</ept>.","pos":[23066,23122],"source":"Right-click **FMTutorial**, and then click **Re-Build**."},{"content":"On completion of the build, select the <bpt id=\"p1\">**</bpt>Synchronize ... database<ept id=\"p1\">**</ept> option","pos":[23123,23197],"source":" On completion of the build, select the **Synchronize ... database** option"},{"content":"Open Internet Explorer, and navigate to your Rainier instance base URL.","pos":[23202,23273]},{"pos":[23278,23425],"content":"Navigate to the <bpt id=\"p1\">**</bpt>Reservation Management workspace<ept id=\"p1\">**</ept> under <bpt id=\"p2\">**</bpt>App links<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph><bpt id=\"p3\">**</bpt> Fleet Management<ept id=\"p3\">**</ept> <ph id=\"ph2\">&amp;gt;</ph><bpt id=\"p4\">**</bpt> Workspaces <ph id=\"ph3\">&amp;gt;</ph> Reservation Management<ept id=\"p4\">**</ept>.","source":"Navigate to the **Reservation Management workspace** under **App links** &gt;** Fleet Management** &gt;** Workspaces &gt; Reservation Management**."},{"content":"Select the KPI tile <bpt id=\"p1\">**</bpt>Total Revenue<ept id=\"p1\">**</ept>.","pos":[23430,23468],"source":"Select the KPI tile **Total Revenue**."},{"content":"KPI details page for T<bpt id=\"p1\">**</bpt>otal Revenue<ept id=\"p1\">**</ept> KPI will be displayed.","pos":[23469,23530],"source":" KPI details page for T**otal Revenue** KPI will be displayed."},{"content":"To navigate to the newly defined KPI, select the <bpt id=\"p1\">**</bpt>Show list<ept id=\"p1\">**</ept> icon on top left.","pos":[23535,23615],"source":"To navigate to the newly defined KPI, select the **Show list** icon on top left."},{"content":"From the list of KPIs shown, select <bpt id=\"p1\">**</bpt>FMTRevenuePerRental<ept id=\"p1\">**</ept>","pos":[23616,23675],"source":" From the list of KPIs shown, select **FMTRevenuePerRental**"},{"content":"Notice that the KPI details page for the new KPI, <bpt id=\"p1\">**</bpt>FMTRevenuePerRental<ept id=\"p1\">**</ept> is shown.","pos":[23677,23760],"source":"Notice that the KPI details page for the new KPI, **FMTRevenuePerRental** is shown."},{"content":"Even though we did not define trend charts, the system created a set of charts based on the limited metadata defined by the developer.","pos":[23761,23895]},{"content":"Users have the ability to modify KPI definitions and create new ones in the client.","pos":[23896,23979]},{"content":"Next, you will modify the newly defined KPI.","pos":[23980,24024]},{"content":"6.","pos":[24025,24027]},{"content":"To demonstrate this capability, you can change the KPI Goal.","pos":[24028,24088]},{"content":"Click the <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept> button on top left, and enter 900 as the Goal Value.","pos":[24089,24160],"source":" Click the **Edit** button on top left, and enter 900 as the Goal Value."},{"content":"7.","pos":[24161,24163]},{"content":"Modify the threshold properties as follows:","pos":[24164,24207]},{"content":"Property","pos":[24284,24292]},{"content":"Value","pos":[24304,24309]},{"content":"Threshold Type","pos":[24319,24333]},{"content":"Percentage","pos":[24340,24350]},{"content":"Red if less than","pos":[24355,24371]},{"content":"90","pos":[24376,24378]},{"content":"Green if more than","pos":[24391,24409]},{"content":"110","pos":[24412,24415]},{"content":"Click <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept> on the bottom left to save changes.","pos":[24433,24483],"source":"Click **Save** on the bottom left to save changes."},{"content":"Notice that the KPI status color has changed in the KPI tile shown.","pos":[24484,24551]},{"pos":[24554,24562],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[24573,24712],"content":"<bpt id=\"p1\">[</bpt>Adding BI to workspaces<ept id=\"p1\">](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/adding-bi-to-workspaces)</ept>","source":"[Adding BI to workspaces](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/adding-bi-to-workspaces)"},{"pos":[24714,24865],"content":"<bpt id=\"p1\">[</bpt>Adding contextual BI to forms<ept id=\"p1\">](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/adding-contextual-bi-to-forms)</ept>","source":"[Adding contextual BI to forms](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/adding-contextual-bi-to-forms)"}],"content":"---\n# required metadata\n\ntitle: Modeling and aggregate data | Microsoft Docs\ndescription: This tutorial will walk you through the process of modeling aggregate data\nauthor: sericks007\nmanager: AnnBe\nms.date: 2015-10-19 23:00:42\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# keywords: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: 61\nms.suite: Released- Dynamics AX 7.0.0\n# ms.tgt_pltfrm: \nms.custom: 10234\nms.assetid: 7c6adb34-089a-4423-9fbc-97857e45f184\nms.region: Global\n# ms.industry: \nms.author: milindav\n\n---\n\n# Modeling and aggregate data\n\nThis tutorial will walk you through the process of modeling aggregate data\n.\n\nPrerequisites\n-------------\n\nThis tutorial requires you to access the environment using Remote Desktop, and be provisioned as an administrator. For more information, see the wiki named [Access Microsoft Dynamics 265 for Operations instances](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2).\n\n## Key concepts\n-   **Aggregate measurements**, similar to **perspectives** and **Cubes** from earlier versions, enable you to model and consume aggregate data.\n-   **Key Performance Indicators (KPIs)** are a form of analytic controls that track organizational performance against the current status. KPIs are represented as tiles in a **workspace** or the **dashboard**. In this tutorial, you will model a KPI in Visual Studio.\n-   KPIs that are modeled in Visual Studio can be modified in the client. A user also has the ability to model new KPIs using the client.\n-   A **workspace** is an overview page that is specific to a particular subject area. Workspaces are common to all users.\n-   The **dashboard** is the default home page for each user.\n-   **Tiles** are securable objects that can be pinned to a workspace or the dashboard. KPIs and aggregate data that are shown on the dashboard, or a workspace, can be secured by using menu items.\n-   Aggregate data can be consumed in building charts and other controls. Using the model driven approach, you have the ability to create data entities by directly referencing aggregate measurements and aggregate dimensions. These entities are referred to as **Aggregate data entities**. Aggregate data entities are read-only data entities used for reporting purposes.\n-   **The aggregate programming model** enables a developer to consume aggregate data programmatically using either X++ or C\\# code. Data retrieved using the aggregate programming model can be used as a data source in forms.\n-   **Method expressions** enable a developer to build rich expressions using aggregate data. Method expressions are an X++ class. KPIs can be modeled using method expressions, thereby eliminating the need to build MDX expressions.\n-   **Contextual BI** refers to providing required insights as part of the user experience such that the user has relevant insights to not only achieve the task at hand, but be highly-productive during the course of the day.\n-   **Embedded BI** refers to analytic content being embedded within the user experience. Contextual BI and embedded BI teams are closely related. Contextual BI implies the added notion that the context of analytic context revolves around the data or the task.\n-   **Self-service BI** refers to enabling a user to tweak existing and/or create new analytic content such as reports, KPIs, and dashboards.\n\n## Set up\nIf this is the first tutorial you are working on, make sure you have configured the administrator user if you are running on a local VM.\n\n### Import the tutorial project\n\nIf you have already imported the Fleet management tutorial project, skip to the next section. If you have not done so already, you can download the tutorial project from <https://connect.microsoft.com/site1321/Downloads>. Please note that you will be required to login to the site. After login, choose the document titled \"**FMLab for Microsoft Dynamics AX (CTP8)**\". Unzip the downloaded document and place the **FMLab** folder into a convenient location. In Visual Studio, on the **Dynamics 365** menu, click **Import Project**.\n\n1.  Download the Fleet Management sample from <https://github.com/Microsoft/FMLab>, save it to **C:**, and unzip it.\n2.  In the **Import Project** window, next to the **Filename** text box, click the ellipsis button.\n3.  In the **Select the file to import** window, browse to the location of the **FMLab** folder, click **FMTutorialDataModel.axpp**, and then click **Open**.\n4.  In the **Project file location** text box, enter **C:\\\\FMLab**.\n5.  Select the **Overwrite Elements** check box, and then click **OK**.\n\n### Import the tutorial project\n\n1.  In Visual Studio, open the **FMTutorial** project. On the **File** menu, point to **Open**, and then click **Project/Solution**.\n2.  In the **Open Project** dialog box, browse to C:FMLabFMTutorial, and then click FMTutorial. Click **Open**. The **FMTutorial** project appears in **Solution Explorer**.\n3.  Use the FMTDataHelper class to load data for the Fleet Management tutorial. In **Solution Explorer**, in the FMTutorial project, expand **Classes**. Right-click **FMTDataHelper**, and then click **Set as Startup Object**.\n4.  On the **Build** menu, click **Rebuild Solution**. You use the rebuild to update the timestamps of the imported artifacts. You can view the build progress in the **Output** window.\n5.  Press **Ctrl+F5** to run the project and load the data.\n\n## Model an aggregate measurement for rental charges\nOften, when a user asks for additional information, you get a request for one or more new reports. Imagine that the manager of a rental car company has called and asked for a report. She is interested in finding out how the rental business is performing. She wants a report that shows rental revenue by month. You soon find out that she is interested in a breakdown of rental revenues. She wants to know whether the rental revenue is high in cases where they have sold additional services, for example, car seats, GPS, re-fueling, as opposed to the base rental charge. As it turns out, she suspects that specific customer groups are driving revenue up, and this is why she wanted the report in the first place. She insists on adding Customer group to the report. Because the revenue must be considered in relation to the number of rentals, she doesn’t want a few large corporate rentals to skew her analysis. You both agree that the number of rentals needs to be shown along with revenue. We could represent this requirement as a set of business questions using a matrix. Rows indicate the **measures** (or numbers) and the columns indicate the **dimensions** (or slicers). An “X” in the intersection between a measure and a dimension indicates that the measure needs to be “grouped by” the dimension.\n\n|                       |                 |                    |                        |\n|-----------------------|-----------------|--------------------|------------------------|\n| ** **                 | **Rental date** | **Customer group** | **Rental charge type** |\n| **Revenue**           | X               | X                  | X                      |\n| **Number of rentals** | X               | X                  | X                      |\n\nNext, we will model an aggregate measurement to answer this business question.\n\n### Add a measure group for rental charges by using an existing view\n\nIn this section you will add a new measure group to an existing aggregate measurement.\n\n1.  In **Solution Explorer**, expand the **Analytics** folder of the project, and then double-click the aggregate measurement, **FMTAggregateMeasurement**. The aggregate measurement will be launched in the designer. Notice that the existing aggregate measurement contains two measure groups related to vehicle inventory and rental details. You will create a new measure group related to rental charges. [![FMTAggregateMeasurement](./media/fmtaggregatemeasurement.png)](./media/fmtaggregatemeasurement.png)\n2.  In **Solution Explorer**, expand the **Views** folder of the project, and then select the **FMTRentalChargeExtendedView** view.\n3.  Drag-and-drop the **FMTRentalChargeExtendedView** into the root node of the **FMTAggregateMeasurement** aggregate measurement in the designer. Notice that a new measure group is created and the values of properties have been applied as follows.\n    |          |                            |\n    |----------|----------------------------|\n    | Property | Value                      |\n    | Name     | FMRentalChargeExtendedView |\n    | Table    | FMRentalChargeExtendedView |\n\n4.  In **Solution Explorer**, double-click the **FMRentalChargeExtendedView** view. When the designer form opens, expand the **Fields** node.\n5.  Select the **ExtendedAmount** and **RentalID** fields, and then drag-and-drop the two fields onto the **Measures** node of the newly created **FMAggregateMeasurement** measure group called **FMRentalChargeExtendedView**. As you drag the fields, hover your cursor over the **FMAggregateMeasurement** tab to access the **Measures** node. By default, when you drag-and-drop the fields, the system assumes that you want counts of the measures. In this case, you need to modify default properties for the **ExtendedAmount** and **RentalId** measures as follows:\n    |                           |                                     |\n    |---------------------------|-------------------------------------|\n    | Property (ExtendedAmount) | Value                               |\n    | Default Aggregate         | **Sum**                             |\n    | Field                     | ExtendedAmount (no change required) |\n    | Name                      | Revenue                             |\n\n     \n    |                     |                               |\n    |---------------------|-------------------------------|\n    | Property (RentalId) | Value                         |\n    | Default Aggregate   | **DistinctCount**             |\n    | Field               | RentalId (no change required) |\n    | Name                | NumRentals                    |\n\n6.  Next let's create another measure which calculates **Revenue per Rental** by copying an existing measure. Select the **TotalRevenue** measure. Right-click and select **Copy** from the **Context** menu.\n7.  Select the **FMRentalDetails** measure group. Right-click and select paste. Rename the newly created measure to **RevenuePerRental**. Modify the aggregation function to **Average**.\n\n### Model an aggregate dimension charge type\n\nTo analyze rental revenue by the different charge types, you need to be able to slice revenue by the charge type. For this purpose, you will first model a charge type dimension.\n\n1.  In **Solution Explorer**, under **FMTutorial**, right-click **Analytics**, point to **Add**, and then click **New Item**.\n2.  Select **Dynamics 365 Artifacts** &gt; **Analytics** &gt; **Aggregate Dimension** from the list of items.\n3.  In the **Name** property, enter **FMTChargeType**. This is the name of the aggregate dimension that will be created. This name must be unique. Click **Add**. The new dimension will appear in Visual Studio.\n4.  In **Application Explorer**, expand the **AOT** and click **Data Model** &gt; **Tables**. Drag-and-drop the **FMTChargeType** table from **Application Explorer** onto the root node of the newly created **FMTChargeType** dimension in the designer. Notice that dimension attributes and corresponding keys have been added using the AutoReport field group of the table.\n5.  Expand the **Attributes** node of the new dimension. Notice that several attributes have been created for you by default. The system has also created a dimension key based on unique indexes of the table. You can add additional fields by dragging and dropping them into the **Fields** node. [![FMTChargeType](./media/fmtchargetype.png)](./media/fmtchargetype.png)\n6.  Save the new dimension.\n7.  You may get a warning asking you to rename the field name Description to avoid the MDX reserved word. Even though the aggregate dimension may not be deployed to SSAS in this aggregate measurement, it's possible that this dimension may be used by an aggregate measurement deployed to SSAS in the future. To avoid potential issues in the future, rename the field name **Description** to **ChargeDescription**.\n\n### Model dimension references for customer profile and charge type dimensions\n\nNext, create dimension references to new and existing dimensions so that revenue can be sliced by customer as well as charge type.\n\n1.  In **Solution Explorer**, double-click **FMTAggregateMeasurement** or, if you have it open, navigate to it in the designer.\n2.  In **Solution Explorer**, select the dimensions **FMTChargeType** and **FMTCustomerProfile**.\n3.  Drag-and-drop them into the **Dimensions** node of the **FMTRentalChargeExtendedView** measure group. Notice that dimension references have been created along with relations.\n4.  Save changes to **FMTAggregateMeasurement**. Review the property sheet for the dimension relation and notice that the **Use Table relations** property is set to **Yes**. Notice that the drag-and-drop operation created relationships between the measure group dimensions **FMTRentalChargeExtendedView** and **FMTChargeType**, **FMTCustomerProfile**. Review the property sheet for the dimension relation and notice that the **Use Table relations** property is set to **Yes**. [![FMTChargeType2](./media/fmtchargetype2.png)](./media/fmtchargetype2.png)\n5.  Expand the Dimension relations node for the **FMTCustomerProfile** dimension. Notice that the **UseTableRelations** property is set to **No**. In this case, the system has not been able to find a suitable relationship between the Measure group and dimension. You will need to specify one manually.\n6.  Expand the **FMTCustomerProfile** dimension reference if you have not done so already. Select the node **FMTCustomerExtendedView**. Right-click and see the property sheet.\n7.  Select **CustomerID** as the value for property **DimensionAttribute**. Select the relationship shown below. Select **Customer** for the property value **RelatedField**.\n8.  Save changes to **FMTAggregateMeasurement**. [![FMT4](./media/fmt4.png)](./media/fmt4.png)\n9.  In this scenario, we specified a relationship because the system was unable to find one. You could also specify a different relationship if you want to override the system choice by setting **Use Table Relations property** to **No**.\n\n### Model dimension references for the date dimension's rental start date and transaction date\n\nAssume that for analysis purposes, you want to enable slicing by the start date of the rental; but for accounting purposes, you want to enable slicing by the transaction date for each of the charges. To do this, you need to associate the rental charges measure group with two date dimensions. In the BI world, this pattern is known as **Role Playing dimensions**. By default, a date dimension is added to the measure group. You can rename the default name appropriately and add new date dimensions as required.\n\n1.  Expand the **Dimensions** node of the **FMTRentalChargeExtendedView** measure group. Notice that the **Date\\_** dimension has already been included as dimension slicers. **Note:** If the table or the view used to model the measure group is a Company-specific table, for example it contains DATAAREAID as part of the key), a **Company** dimension relation will be created by default. In this case, the view we used is not a company specific one. [![FMT5](./media/fmt5.png)](./media/fmt5.png)\n2.  Select the **Date** dimension and specify the following properties.\n    |                     |                                              |\n    |---------------------|----------------------------------------------|\n    | Property            | Value                                        |\n    | Name                | RentalStartDate                              |\n    | Use Table Relations | No (This is the default – no need to change) |\n\n3.  Define the table relationship. Expand **RentalStartDate**, and then expand the **Date** node.\n4.  Select the Relationship shown. Right-click and select the property sheet. Select **StartDate** for the value of **Related field** property.\n5.  The relationship you defined should look like the following screenshot.![FMT6](./media/fmt6.png)\n6.  Next, enable slicing of measures by the TransactionDate dimension. TransactionDate is also a date dimension, so you will add another reference to the date dimension and associate that with the corresponding field that contains the transaction date. When more than one date dimension is used as a slicer, each date dimension is known as a **Role playing date dimension**.\n7.  Under the **FMTRentalChargeExtendedView** measure group, right-click the **Dimensions** node, and then click **New Dimension**. A new dimension will be added to the list of dimension references.\n8.  Specify the following properties for the new dimension reference.\n    Property\n    Value\n    Dimension Name **NOTE:** If you select the Dimension Name in the wrong order, it will reset the other values you already set.\n    Date\\_\n    Name\n    TransactionDate\n    Use table relations\n    No\n    Tags\n    RolePlayingDate; Fleet\n    Notice the new property called **Tags**. This property enables the discovery of patterns within code and metadata from within the Visual studio environment. You can enter any number of tags and they can be searched using the hot keys or the **Dynamics 365** menu in Visual Studio.\n9.  Define the table relationship. Right-click **TransactionDate**, and then click **New Relation**. You do not need to specify any properties in the DimensionsRelation at this point.\n10. Expand **BIDateDimensionValue**, and then select the **Relationship** **Constraint**. Right-click and select the property sheet\n11. Specify the following properties for the BIDateDimensionsView relation constraint.\n    |               |          |\n    |---------------|----------|\n    | Property      | Value    |\n    | Field         | Date     |\n    | Related Field | TranDate |\n\n    The relationship you defined should look like the following screenshot.[![FMY7](./media/fmy7.png)](./media/fmy7.png)\n12. Save the aggregate measurement.\n\n### Deploy the newly generated aggregate measurement\n\nNow that you have completed modeling the aggregate measurement, you can deploy the aggregate measurement and continue with building KPIs and visualizations. You have 2 deployment choices as shown below.\n\n|                         |                                                                                                                                                                                         |\n|-------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Option**              | **Considerations**                                                                                                                                                                      |\n| **In-memory real-time** | This option will leverage the In-memory Column store indexes of SQL Server database to deploy Aggregate Measurements.This option will be fully supported in the next technology preview |\n| **SSASCube**            | Aggregate measurement will be deployed to SQL Server Analysis services server (SSAS) as a multi-dimensional cube similar to previous releases.                                          |\n\nAt this point, only **InMemoryRealTime** aggregate models are supported.\n\n1.  Select the **FMTAggregateMeasurement** node. Right-click and select **Properties**. Select **InMemoryRealTime** as the value for the property **Usage**. [![FMT9](./media/fmt9.png)](./media/fmt9.png)\n2.  InMemoryRealTime aggregate models are deployed to SQL Server using Non-Clustered Column Store Index (NCCI) technology. NCCIs is an in-memory technology that enables analytical and operational workloads to be served from SQL server database. NCCI indexes can be defined on tables similar to any other index. While NCCI indexes can be defined manually, framework has the ability to analyze index requirements and add them to underlying tables where necessary.\n3.  Right-click **FMAggregateMeasurement** in Solution Explorer, and then click **Add Column store indices option**. You will notice several new indexes being added by the system.\n4.  Save and build the project.\n5.  InMemoryRealTime aggregate models do not require data processing as the models are queried real-time. If you have not enabled database synchronization along with the build, manually synchronize the database.\n\n## Model a KPI to show revenue per rental\n### Model a KPI in Visual Studio\n\nModel a KPI definition in Visual Studio by using the aggregate measurement you defined above.\n\n1.  In **Solution Explorer**, right-click **FMTutorial**, point to **Add**, and then click **New Item**.\n2.  Select **Dynamics 365 Artifacts** &gt; **Analytics** &gt; **Key Performance Indicator**. Enter FMTRevenuePerRental as the name of the KPI, and then click **Add**. The name must be unique across KPIs. [![AddNewItem](./media/addnewitem.png)](./media/addnewitem.png)The KPI is created.\n3.  Select **FMTRevenuePerRental**, and specify the **Measurement** Leave the default values for the other properties.\n\n|                       |                         |\n|-----------------------|-------------------------|\n| Property              | Value                   |\n| Measurement           | FMTAggregateMeasurement |\n| Bad Threshold         | 0                       |\n| Good Threshold        | 0                       |\n| Scoring Pattern       | MoreIsBetter            |\n| Show Goal             | Yes                     |\n| Show Status and Trend | Yes                     |\n| Threshold Type        | Value                   |\n\n4. Define the expression for the KPI value. Under **FMTRevenuePerRental**, select **Value**, and specify the following properties. **Note**: The values must be entered in the order they appear in the table:\n\n|               |                             |\n|---------------|-----------------------------|\n| Property      | Value                       |\n| Value Type    | BasedOnMeasure              |\n| Measure Group | FMTRentalChargeExtendedView |\n| Measure       | RevenuePerRental            |\n\n  5. Define the expression for the KPI Goal. Select **Goal**, and specify the following properties.\n\n|           |              |\n|-----------|--------------|\n| Property  | Value        |\n| Goal Type | BasedOnValue |\n| Value     | 250          |\n\n  **Note**: You could have defined a goal based on an aggregate measure as well. In this case, we will define a number as the goal. 6. Save the KPI definition.\n\n### Preview KPI in client\n\nNext you will preview the KPI definition in the client.\n\n1.  Right-click **FMTutorial**, and then click **Re-Build**. On completion of the build, select the **Synchronize ... database** option\n2.  Open Internet Explorer, and navigate to your Rainier instance base URL.\n3.  Navigate to the **Reservation Management workspace** under **App links** &gt;** Fleet Management** &gt;** Workspaces &gt; Reservation Management**.\n4.  Select the KPI tile **Total Revenue**. KPI details page for T**otal Revenue** KPI will be displayed.\n5.  To navigate to the newly defined KPI, select the **Show list** icon on top left. From the list of KPIs shown, select **FMTRevenuePerRental**\n\nNotice that the KPI details page for the new KPI, **FMTRevenuePerRental** is shown. Even though we did not define trend charts, the system created a set of charts based on the limited metadata defined by the developer. Users have the ability to modify KPI definitions and create new ones in the client. Next, you will modify the newly defined KPI. 6. To demonstrate this capability, you can change the KPI Goal. Click the **Edit** button on top left, and enter 900 as the Goal Value. 7. Modify the threshold properties as follows:\n\n|                    |            |\n|--------------------|------------|\n|  Property          | Value      |\n| Threshold Type     | Percentage |\n| Red if less than   | 90         |\n| Green if more than | 110        |\n\n \n\n1.  Click **Save** on the bottom left to save changes. Notice that the KPI status color has changed in the KPI tile shown.\n\n\nSee also\n--------\n\n[Adding BI to workspaces](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/adding-bi-to-workspaces)\n\n[Adding contextual BI to forms](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/adding-contextual-bi-to-forms)\n\n"}