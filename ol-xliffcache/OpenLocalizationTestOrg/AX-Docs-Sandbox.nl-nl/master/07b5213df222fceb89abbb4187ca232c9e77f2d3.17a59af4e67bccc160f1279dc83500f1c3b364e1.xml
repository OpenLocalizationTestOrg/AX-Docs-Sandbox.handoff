{"nodes":[{"pos":[32,62],"content":"X++ session run-time functions","needQuote":true,"needEscape":true,"nodes":[{"content":"X++ session run-time functions","pos":[0,30]}]},{"pos":[76,127],"content":"This wiki describes the session run-time functions.","needQuote":true,"needEscape":true,"nodes":[{"content":"This wiki describes the session run-time functions.","pos":[0,51]}]},{"pos":[636,666],"content":"X++ session run-time functions","linkify":"X++ session run-time functions","nodes":[{"content":"X++ session run-time functions","pos":[0,30]}]},{"content":"This wiki describes the session run-time functions.","pos":[668,719]},{"pos":[721,727],"content":"curExt","linkify":"curExt","nodes":[{"content":"curExt","pos":[0,6]}]},{"content":"Retrieves the extension that is used for the current company.","pos":[736,797]},{"pos":[821,833],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"content":"The extension for the current company.","pos":[835,873]},{"pos":[879,886],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"Use this method to avoid a call to the server tier.","pos":[888,939]},{"content":"The alternative is the <bpt id=\"p1\">**</bpt>company<ept id=\"p1\">**</ept> method of the <bpt id=\"p2\">**</bpt>Application<ept id=\"p2\">**</ept> class, which does call the server tier.","pos":[940,1044],"source":" The alternative is the **company** method of the **Application** class, which does call the server tier."},{"pos":[1050,1057],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[1271,1280],"content":"curUserId","linkify":"curUserId","nodes":[{"content":"curUserId","pos":[0,9]}]},{"content":"Retrieves the nonnumeric ID that represents the current user.","pos":[1281,1342]},{"pos":[1369,1381],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"content":"The nonnumeric ID that represents the current user.","pos":[1383,1434]},{"pos":[1440,1447],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[1602,1610],"content":"funcName","linkify":"funcName","nodes":[{"content":"funcName","pos":[0,8]}]},{"content":"Retrieves a string that contains the current function context.","pos":[1611,1673]},{"pos":[1699,1711],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"content":"The name of the method that is executing this method.","pos":[1713,1766]},{"pos":[1772,1779],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"If execution is currently within the member of a table or class, the name of the method is prefixed with the name of that table or class.","pos":[1781,1918]},{"pos":[1924,1931],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[2055,2074],"content":"getCurrentPartition","linkify":"getCurrentPartition","nodes":[{"content":"getCurrentPartition","pos":[0,19]}]},{"content":"Retrieves the short name of the current partition.","pos":[2075,2125]},{"pos":[2162,2174],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"content":"The short name of the current partition.","pos":[2176,2216]},{"pos":[2222,2229],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The maximum length of the data partition name that is returned is eight characters.","pos":[2231,2314]},{"pos":[2320,2327],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[2329,2480],"content":"The following code example shows calls to, and output from, the <bpt id=\"p1\">**</bpt>getCurrentPartition<ept id=\"p1\">**</ept> function of the X++ language, and related functions or methods.","source":"The following code example shows calls to, and output from, the **getCurrentPartition** function of the X++ language, and related functions or methods."},{"pos":[3237,3261],"content":"getCurrentPartitionRecId","linkify":"getCurrentPartitionRecId","nodes":[{"content":"getCurrentPartitionRecId","pos":[0,24]}]},{"pos":[3262,3317],"content":"Retrieves the <bpt id=\"p1\">**</bpt>RecId<ept id=\"p1\">**</ept> field of the current partition.","source":"Retrieves the **RecId** field of the current partition."},{"pos":[3361,3373],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"pos":[3375,3425],"content":"The <bpt id=\"p1\">**</bpt>RecId<ept id=\"p1\">**</ept> field of the current data partition.","source":"The **RecId** field of the current data partition."},{"pos":[3431,3438],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[3440,3672],"content":"To see a code example that relies on the <bpt id=\"p1\">**</bpt>getCurrentPartitionRecId<ept id=\"p1\">**</ept> function, see <bpt id=\"p2\">[</bpt>How to: Include a Filter for Partition in Direct Transact-SQL<ept id=\"p2\">](http://msdn.microsoft.com/library/5ce90a42-e862-464e-90bc-1eb16a8afd1a(AX.60).aspx)</ept>.","source":"To see a code example that relies on the **getCurrentPartitionRecId** function, see [How to: Include a Filter for Partition in Direct Transact-SQL](http://msdn.microsoft.com/library/5ce90a42-e862-464e-90bc-1eb16a8afd1a(AX.60).aspx)."},{"pos":[3678,3685],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[3687,3843],"content":"The following code example shows calls to, and output from, the <bpt id=\"p1\">**</bpt>getCurrentPartitionRecId<ept id=\"p1\">**</ept> function of the X++ language, and related functions or methods.","source":"The following code example shows calls to, and output from, the **getCurrentPartitionRecId** function of the X++ language, and related functions or methods."},{"pos":[4600,4609],"content":"getPrefix","linkify":"getPrefix","nodes":[{"content":"getPrefix","pos":[0,9]}]},{"pos":[4610,4702],"content":"Retrieves the current execution prefix after successive calls to the <bpt id=\"p1\">**</bpt>setPrefix<ept id=\"p1\">**</ept> function.","source":"Retrieves the current execution prefix after successive calls to the **setPrefix** function."},{"pos":[4729,4741],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"content":"The current execution prefix.","pos":[4743,4772]},{"pos":[4778,4785],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The prefix mechanism makes it more straightforward to write precise error messages about the transactions that an application performs.","pos":[4787,4922]},{"content":"Because a hierarchical display is created in the Infolog, it can be easier to determine where each error came from.","pos":[4923,5038]},{"pos":[5044,5051],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[5218,5227],"content":"sessionId","linkify":"sessionId","nodes":[{"content":"sessionId","pos":[0,9]}]},{"content":"Retrieves the session number of the current session.","pos":[5228,5280]},{"pos":[5307,5319],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"content":"The numeric ID of the current session.","pos":[5321,5359]},{"pos":[5365,5372],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"A session number is assigned when the client is started and connects to Application Object Server (AOS).","pos":[5374,5478]},{"content":"Every call of this function during the life of the client returns the same integer value.","pos":[5479,5568]},{"content":"The returned value is compatible with the <bpt id=\"p1\">**</bpt>SessionID<ept id=\"p1\">**</ept> extended data type.","pos":[5569,5644],"source":" The returned value is compatible with the **SessionID** extended data type."},{"content":"The <bpt id=\"p1\">**</bpt>contains<ept id=\"p1\">**</ept> methods return information about individual user sessions.","pos":[5645,5720],"source":" The **contains** methods return information about individual user sessions."},{"pos":[5726,5733],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[5922,5934],"content":"prmIsDefault","linkify":"prmIsDefault","nodes":[{"content":"prmIsDefault","pos":[0,12]}]},{"content":"Determines whether the specified parameter for the current method has the default value.","pos":[5935,6023]},{"pos":[6069,6079],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Parameter","pos":[6083,6092]},{"content":"Description","pos":[6095,6106]},{"content":"Argument","pos":[6161,6169]},{"content":"The parameter to test.","pos":[6173,6195]},{"pos":[6203,6215],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"pos":[6217,6296],"content":"<bpt id=\"p1\">**</bpt>1<ept id=\"p1\">**</ept> if the default value for the parameter was used; otherwise, <bpt id=\"p2\">**</bpt>0<ept id=\"p2\">**</ept> (zero).","source":"**1** if the default value for the parameter was used; otherwise, **0** (zero)."},{"pos":[6302,6309],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[6818,6823],"content":"runAs","linkify":"runAs","nodes":[{"content":"runAs","pos":[0,5]}]},{"content":"Enables the caller to run an X++ method in the security context of another user.","pos":[6824,6904]},{"content":"This function is most often used with batch processing.","pos":[6905,6960]},{"pos":[7207,7217],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Parameter","pos":[7221,7230]},{"content":"Description","pos":[7240,7251]},{"content":"userId","pos":[7463,7469]},{"content":"The user to impersonate.","pos":[7482,7506]},{"content":"classId","pos":[7584,7591]},{"content":"The class to invoke in the impersonated session.","pos":[7603,7651]},{"content":"staticMethodName","pos":[7705,7721]},{"content":"The class method to invoke in the new user context.","pos":[7724,7775]},{"content":"params","pos":[7826,7832]},{"content":"The parameters to pass to the method; optional.","pos":[7845,7892]},{"content":"company","pos":[7947,7954]},{"content":"The company that is selected for the impersonated session; optional.","pos":[7966,8034]},{"content":"language","pos":[8068,8076]},{"content":"The language that is selected for the impersonated session; optional.","pos":[8087,8156]},{"content":"partition","pos":[8189,8198]},{"pos":[8208,8305],"content":"The partition key of the type that is returned by the <bpt id=\"p1\">**</bpt>getCurrentPartition<ept id=\"p1\">**</ept> function; optional.","source":"The partition key of the type that is returned by the **getCurrentPartition** function; optional."},{"pos":[8313,8325],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"pos":[8327,8461],"content":"A container that holds the return value or values of the method that is called by the <bpt id=\"p1\">**</bpt>runAs<ept id=\"p1\">**</ept> function, if any values were returned.","source":"A container that holds the return value or values of the method that is called by the **runAs** function, if any values were returned."},{"pos":[8467,8474],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This function makes it possible to run code as another user.","pos":[8476,8536]},{"content":"This capability presents a security threat.","pos":[8537,8580]},{"content":"Therefore, this function runs under <bpt id=\"p1\">[</bpt>Code Access Security<ept id=\"p1\">](http://msdn.microsoft.com/library/09299e91-5b73-4cf5-a17e-f1f39b6bae76(AX.60).aspx)</ept>.","pos":[8581,8724],"source":" Therefore, this function runs under [Code Access Security](http://msdn.microsoft.com/library/09299e91-5b73-4cf5-a17e-f1f39b6bae76(AX.60).aspx)."},{"content":"Calls to this function on the server require permission from the <bpt id=\"p1\">**</bpt>RunAsPermission<ept id=\"p1\">**</ept> class.","pos":[8725,8816],"source":" Calls to this function on the server require permission from the **RunAsPermission** class."},{"content":"Each use of this application programming interface (API) should be threat-modeled.","pos":[8817,8899]},{"content":"If a security vulnerability is discovered, validate input to this API.","pos":[8900,8970]},{"content":"The debugger might ignore breakpoints that are located in a method that is called by using the <bpt id=\"p1\">**</bpt>runAs<ept id=\"p1\">**</ept> function.","pos":[8971,9085],"source":" The debugger might ignore breakpoints that are located in a method that is called by using the **runAs** function."},{"content":"X++ code that is executed by the <bpt id=\"p1\">**</bpt>runAs<ept id=\"p1\">**</ept> function must run as Microsoft .NET Framework Common Intermediate Language (CIL).","pos":[9086,9210],"source":" X++ code that is executed by the **runAs** function must run as Microsoft .NET Framework Common Intermediate Language (CIL)."},{"content":"If CIL hasn't been generated for the target static method, an error message indicates that the method isn't found.","pos":[9211,9325]},{"content":"The <bpt id=\"p1\">**</bpt>PartitionKey<ept id=\"p1\">**</ept> system type is the exact type of the <bpt id=\"p2\">*</bpt>partition<ept id=\"p2\">*</ept> parameter.","pos":[9326,9406],"source":" The **PartitionKey** system type is the exact type of the *partition* parameter."},{"content":"<bpt id=\"p1\">**</bpt>PartitionKey<ept id=\"p1\">**</ept> is a string that has a maximum length of eight characters.","pos":[9407,9482],"source":"**PartitionKey** is a string that has a maximum length of eight characters."},{"pos":[9488,9495],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example calls the <bpt id=\"p1\">**</bpt>runDueDateEventsForUser<ept id=\"p1\">**</ept> method in the <bpt id=\"p2\">**</bpt>EventJobDueDate<ept id=\"p2\">**</ept> class.","pos":[9497,9597],"source":"The following example calls the **runDueDateEventsForUser** method in the **EventJobDueDate** class."},{"content":"The code runs in the security context of a user.","pos":[9598,9646]},{"content":"Run this code by applying it to a method in a new class.","pos":[9647,9703]},{"pos":[10159,10168],"content":"setPrefix","linkify":"setPrefix","nodes":[{"content":"setPrefix","pos":[0,9]}]},{"content":"Sets the prefix for the current execution scope.","pos":[10169,10217]},{"pos":[10255,10265],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"Parameter","pos":[10269,10278]},{"content":"Description","pos":[10281,10292]},{"content":"<ph id=\"ph1\">\\_</ph>prefix","pos":[10389,10397],"source":"\\_prefix"},{"content":"The prefix for the current execution scope.","pos":[10401,10444]},{"pos":[10452,10464],"content":"Return value","linkify":"Return value","nodes":[{"content":"Return value","pos":[0,12]}]},{"pos":[10466,10507],"content":"<bpt id=\"p1\">**</bpt>0<ept id=\"p1\">**</ept> if the prefix was set successfully.","source":"**0** if the prefix was set successfully."},{"pos":[10513,10520],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The complete prefix for the execution can be fetched by using the <bpt id=\"p1\">**</bpt>getPrefix<ept id=\"p1\">**</ept> function.","pos":[10522,10611],"source":"The complete prefix for the execution can be fetched by using the **getPrefix** function."},{"content":"When the scope is left, the prefix is automatically reset to the previous level.","pos":[10612,10692]},{"content":"The prefix mechanism makes it more straightforward to write precise error messages about the transactions that an application performs.","pos":[10693,10828]},{"content":"For example, the <bpt id=\"p1\">**</bpt>AA<ept id=\"p1\">**</ept> method calls the <bpt id=\"p2\">**</bpt>BB<ept id=\"p2\">**</ept> method, and each method calls the <bpt id=\"p3\">**</bpt>setPrefix<ept id=\"p3\">**</ept> function.","pos":[10829,10934],"source":" For example, the **AA** method calls the **BB** method, and each method calls the **setPrefix** function."},{"content":"Messages that the <bpt id=\"p1\">**</bpt>BB<ept id=\"p1\">**</ept> method writes to the Infolog appear nested in a hierarchy.","pos":[10935,11018],"source":" Messages that the **BB** method writes to the Infolog appear nested in a hierarchy."},{"content":"When the <bpt id=\"p1\">**</bpt>BB<ept id=\"p1\">**</ept> method ends, and control returns to the <bpt id=\"p2\">**</bpt>AA<ept id=\"p2\">**</ept> method, the prefix that was set by the <bpt id=\"p3\">**</bpt>BB<ept id=\"p3\">**</ept> method isn't attached to subsequent messages.","pos":[11019,11173],"source":" When the **BB** method ends, and control returns to the **AA** method, the prefix that was set by the **BB** method isn't attached to subsequent messages."},{"pos":[11179,11186],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]}],"content":"---\n# required metadata\n\ntitle: X++ session run-time functions\ndescription: This wiki describes the session run-time functions.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 2016-02-04 22 - 14 - 39\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations\n# ms.tgt_pltfrm: \nms.custom: 31421\nms.assetid: a83ec18b-cc9e-40e3-ab06-87ff1c972a6a\nms.search.region: Global\n# ms.search.industry: \nms.author: robinr\nms.dyn365.ops.intro: 01-02-2016\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# X++ session run-time functions\n\nThis wiki describes the session run-time functions.\n\ncurExt\n------\n\nRetrieves the extension that is used for the current company.\n\n    str curExt()\n\n### Return value\n\nThe extension for the current company.\n\n### Remarks\n\nUse this method to avoid a call to the server tier. The alternative is the **company** method of the **Application** class, which does call the server tier.\n\n### Example\n\n    static void curExtExample(Args _arg)\n    {\n            str s;\n            // Sets s to the extension of the current company.\n            s = curExt();\n            print \"Current extension is \" + s;\n    }\n\n## curUserId\nRetrieves the nonnumeric ID that represents the current user.\n\n    str curUserId()\n\n### Return value\n\nThe nonnumeric ID that represents the current user.\n\n### Example\n\n    static void curUserIdExample(Args _arg)\n    {\n            str s;\n            s = curUserId();\n            print \"Current user ID is \" + s;\n    }\n\n## funcName\nRetrieves a string that contains the current function context.\n\n    str funcName()\n\n### Return value\n\nThe name of the method that is executing this method.\n\n### Remarks\n\nIf execution is currently within the member of a table or class, the name of the method is prefixed with the name of that table or class.\n\n### Example\n\n    static void funcNameExample(Args _arg)\n    {\n            print \"Current function context is \" + funcName();\n    }\n\n## getCurrentPartition\nRetrieves the short name of the current partition.\n\n    str getCurrentPartition()\n\n### Return value\n\nThe short name of the current partition.\n\n### Remarks\n\nThe maximum length of the data partition name that is returned is eight characters.\n\n### Example\n\nThe following code example shows calls to, and output from, the **getCurrentPartition** function of the X++ language, and related functions or methods.\n\n    static public void Main(Args _args)  // X++ method.\n    {\n            int64 iPartition;\n            str sPartition;\n            SelectableDataArea oSelectableDataArea;  // System ExDT.\n            iPartition = getCurrentPartitionRecId();\n            sPartition = getcurrentpartition();\n            oSelectableDataArea = Global::getCompany( tableNum(BankAccountTable) );\n            Global::info( strFmt(\n                    \"getCurrentPartitionRecId =%1 , getCurrentPartition =%2 , getCompany =%3\",\n                    iPartition, sPartition, oSelectableDataArea) );\n    }\n    /**** Pasted from Infolog window:\n    Message_@SYS14327 (03:42:38 pm)\n    getCurrentPartitionRecId =5637144576 , getCurrentPartition =initial , getCompany =ceu\n    ****/\n\n## getCurrentPartitionRecId\nRetrieves the **RecId** field of the current partition.\n\n    int64 getCurrentPartitionRecId()\n\n### Return value\n\nThe **RecId** field of the current data partition.\n\n### Remarks\n\nTo see a code example that relies on the **getCurrentPartitionRecId** function, see [How to: Include a Filter for Partition in Direct Transact-SQL](http://msdn.microsoft.com/library/5ce90a42-e862-464e-90bc-1eb16a8afd1a(AX.60).aspx).\n\n### Example\n\nThe following code example shows calls to, and output from, the **getCurrentPartitionRecId** function of the X++ language, and related functions or methods.\n\n    static public void Main(Args _args)  // X++ method.\n    {\n            int64 iPartition;\n            str sPartition;\n            SelectableDataArea oSelectableDataArea;  // System ExDT.\n            iPartition = getCurrentPartitionRecId();\n            sPartition = getcurrentpartition();\n            oSelectableDataArea = Global::getCompany( tableNum(BankAccountTable) );\n            Global::info( strFmt(\n                    \"getCurrentPartitionRecId =%1 , getCurrentPartition =%2 , getCompany =%3\",\n                    iPartition, sPartition, oSelectableDataArea) );\n    }\n    /**** Pasted from Infolog window:\n    Message_@SYS14327 (03:42:38 pm)\n    getCurrentPartitionRecId =5637144576 , getCurrentPartition =initial , getCompany =ceu\n    ****/\n\n## getPrefix\nRetrieves the current execution prefix after successive calls to the **setPrefix** function.\n\n    str getPrefix()\n\n### Return value\n\nThe current execution prefix.\n\n### Remarks\n\nThe prefix mechanism makes it more straightforward to write precise error messages about the transactions that an application performs. Because a hierarchical display is created in the Infolog, it can be easier to determine where each error came from.\n\n### Example\n\n    static void getPrefixExample(Args _arg)\n    {\n            setPrefix(\"Prefix\");\n            setPrefix(\"Another prefix\");\n            print getPrefix();\n    }\n\n## sessionId\nRetrieves the session number of the current session.\n\n    int sessionId()\n\n### Return value\n\nThe numeric ID of the current session.\n\n### Remarks\n\nA session number is assigned when the client is started and connects to Application Object Server (AOS). Every call of this function during the life of the client returns the same integer value. The returned value is compatible with the **SessionID** extended data type. The **contains** methods return information about individual user sessions.\n\n### Example\n\n    static void sessionIdExample(Args _arg)\n    {\n            int session;\n            session = sessionId();\n            print \"This session ID is number \" + int2Str(session);\n    }\n\n## prmIsDefault\nDetermines whether the specified parameter for the current method has the default value.\n\n    int prmIsDefault(anytype argument)\n\n### Parameters\n\n| Parameter | Description            |\n|-----------|------------------------|\n| Argument  | The parameter to test. |\n\n### Return value\n\n**1** if the default value for the parameter was used; otherwise, **0** (zero).\n\n### Example\n\n    static void prmIsDefaultExample(Args _arg)\n    {\n            void fn(boolean b = true, int j = 42)\n            {\n                    if (prmIsDefault(b) == 1)\n                    {\n                            print \"First parameter is using the default value.\";\n                    }\n                    else\n                    {\n                            print \"First parameter is not using the default value.\";\n                    }\n            }\n            fn();\n            fn(false);\n    }\n\n## runAs\nEnables the caller to run an X++ method in the security context of another user. This function is most often used with batch processing.\n\n    container runAs(\n            str userId,\n            int classId,\n            str staticMethodName\n            [,\n            container params,\n            str company,\n            str language,\n            str partition\n            ])\n\n### Parameters\n\n| Parameter        | Description                                                                                       |\n|------------------|---------------------------------------------------------------------------------------------------|\n| userId           | The user to impersonate.                                                                          |\n| classId          | The class to invoke in the impersonated session.                                                  |\n| staticMethodName | The class method to invoke in the new user context.                                               |\n| params           | The parameters to pass to the method; optional.                                                   |\n| company          | The company that is selected for the impersonated session; optional.                              |\n| language         | The language that is selected for the impersonated session; optional.                             |\n| partition        | The partition key of the type that is returned by the **getCurrentPartition** function; optional. |\n\n### Return value\n\nA container that holds the return value or values of the method that is called by the **runAs** function, if any values were returned.\n\n### Remarks\n\nThis function makes it possible to run code as another user. This capability presents a security threat. Therefore, this function runs under [Code Access Security](http://msdn.microsoft.com/library/09299e91-5b73-4cf5-a17e-f1f39b6bae76(AX.60).aspx). Calls to this function on the server require permission from the **RunAsPermission** class. Each use of this application programming interface (API) should be threat-modeled. If a security vulnerability is discovered, validate input to this API. The debugger might ignore breakpoints that are located in a method that is called by using the **runAs** function. X++ code that is executed by the **runAs** function must run as Microsoft .NET Framework Common Intermediate Language (CIL). If CIL hasn't been generated for the target static method, an error message indicates that the method isn't found. The **PartitionKey** system type is the exact type of the *partition* parameter. **PartitionKey** is a string that has a maximum length of eight characters.\n\n### Example\n\nThe following example calls the **runDueDateEventsForUser** method in the **EventJobDueDate** class. The code runs in the security context of a user. Run this code by applying it to a method in a new class.\n\n    server static public void Main(Args _args)\n    {\n            RunAsPermission perm;\n            UserId runAsUser;\n            SysUserInfo userInfo;\n            userInfo = SysUserInfo::find();\n            runAsUser = userInfo.Id;\n            perm = new RunAsPermission(runAsUser);\n            perm.assert();\n            runAs(runAsUser, classnum(EventJobDueDate), \"runDueDateEventsForUser\");\n            CodeAccessPermission::revertAssert();\n    }\n\n## setPrefix\nSets the prefix for the current execution scope.\n\n    int setPrefix(str _prefix)\n\n### Parameters\n\n| Parameter | Description                                 |\n|-----------|---------------------------------------------|\n| \\_prefix  | The prefix for the current execution scope. |\n\n### Return value\n\n**0** if the prefix was set successfully.\n\n### Remarks\n\nThe complete prefix for the execution can be fetched by using the **getPrefix** function. When the scope is left, the prefix is automatically reset to the previous level. The prefix mechanism makes it more straightforward to write precise error messages about the transactions that an application performs. For example, the **AA** method calls the **BB** method, and each method calls the **setPrefix** function. Messages that the **BB** method writes to the Infolog appear nested in a hierarchy. When the **BB** method ends, and control returns to the **AA** method, the prefix that was set by the **BB** method isn't attached to subsequent messages.\n\n### Example\n\n    static void setPrefixExample(Args _arg)\n    {\n            int i;\n            i = setPrefix(\"Prefix\");\n            print i;\n    }\n\n"}