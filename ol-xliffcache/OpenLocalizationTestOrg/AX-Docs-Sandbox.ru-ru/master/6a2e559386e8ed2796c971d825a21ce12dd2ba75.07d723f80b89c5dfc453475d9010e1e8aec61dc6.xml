{"content":"---\n# required metadata\n\ntitle: Formula designer\ndescription: This topic explains how to use the formula designer to analyze and maintain formulas in a tree view.\nauthor: cvocph \nmanager: AnnBe\nms.date: 06/01/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-applications\nms.technology: \n\n# optional metadata\n\nms.search.form: PlanActivity, ReqSupplyDemandSchedule\n# ROBOTS: \naudience: Application User\n# ms.devlang: \n# ms.reviewer: YuyuScheller\nms.search.scope: Core, AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: \nms.assetid: \nms.search.region: Global\nms.search.industry: \nms.author: cvocph\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Formula designer\n\n[!include[banner](../includes/banner.md)]\n\nThis topic explains how to use the formula designer to analyze and maintain formulas in a tree view.\n\nWhen you open the **Formula designer** page from the **Released products** page, the tree in the left pane shows the list of co-products and the hierarchy of ingredients for the released product. The structure is derived from the hierarchy of formulas that are active and approved for the selected item and its ingredients, the default order site of the item, and the actual date.\n\nClick **Setup** to select different configurations and specify what information appears on the lines of the tree.\n\nClick **Filter** to change the initial selection in the view. If you set the display principle to **Selected/Active** or **Selected**, you can select individual formula or route versions to use in the view. You can select non-approved and non-active formula versions to show or maintain in the formula designer.  \n\n> [!NOTE]\n> If you open the **Formula designer** page from the **Bills of materials** list page, it doesn't show route information. Currently, the selection of a formula or route version applies to all instances of the formula designer.  \n\nThe following sections describe the functionality that is available in the BOM designer.\n\n## Analyze a formula structure by using the formula designer\nThe formula designer has two sections:\n\n-   The tree view of the formula structure.\n-   The details section, which shows details of the selected data. When you select a node in the tree view, the FastTabs in the details section are updated based on that node:\n    -   **Formula line details** – View the details of the formula line that is selected in the tree view.\n    -   **Item data** – View the details of the main item or the item that is used in the selected node. You can click **Edit released product** to maintain the selected item.\n    -   **Formula** – View the header of the formula that is related to the selected node.\n    -   **Route** – View the header of the route that is related to the selected node.\n    -   **Route operations** – View a preview of the operations for the route. When a bill of materials (BOM) line that is assigned to a specific operation is selected, the operation is marked as **Component needed at operations**.\n\n## Select a formula and route\nThe filter that is applied for the formula and route is shown in the header of the formula designer. You can change the filter by using the **Filter** dialog box. The following table describes the fields in this dialog box.\n\n<table>\n<thead>\n<tr class=\"header\">\n<th>Field</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>Product dimensions</td>\n<td>If the selected finished product is a product master, you can define the active product dimensions for the main selection. Note that if you open the formula designer for a product that isn't a product master, no product dimensions can be selected in the <strong>Filter</strong> dialog box.</p></td>\n</tr>\n<tr class=\"even\">\n<td>Site</td>\n<td>Change the site that the ingredient tree is shown for. The default site is the default inventory site of the finished item.</td>\n</tr>\n<tr class=\"odd\">\n<td>Display principle</td>\n<td><p>Select the version display principle that applies to the current formula structure and the current route:</p>\n<ul>\n<li>When the principle is set to <strong>Active</strong> or <strong>Selected/Active</strong>, the valid formula or route version for this date is found.</li>\n<li>When the principle is set to <strong>Selected/Active</strong> or <strong>Selected</strong>, you can select a formula version or route version by clicking <strong>Formula</strong> &gt; <strong>Formula versions</strong> or <strong>Route</strong> &gt; <strong>Route versions</strong>.</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Version date</td>\n<td>Enter the version date for the formula and route. The version identifies which formula version is used on a specific date, based on the version dates in the formula version setup.</td>\n</tr>\n<tr class=\"odd\">\n<td>From quantity</td>\n<td>Filter the versions by selecting a specific \"from\" quantity. If you set a value, different formula and route versions might be selected.</td>\n</tr>\n<tr class=\"even\">\n<td>Show valid only</td>\n<td>When you select the check box, the tree structure shows only formula lines that have valid dates. Right-click or double-click a formula line to open the <strong>Edit formula line</strong> page, where you can see the validity dates for that formula line.</td>\n</tr>\n</tbody>\n</table>\n\nWhen you use the formula designer to review or edit formulas that consist of one or more levels of phantoms, the route that is associated with the top item typically spans the complete formula hierarchy. To simplify the overview, you can lock the top-level route in the display by clicking **View** &gt; **Lock route**. To unlock the route, click **View** &gt; **Unlock route**.\n\n## Add and edit formulas and formula lines\nUse the **BOM lines** or **Formula** functions to modify the formula lines or formula. When you select a node in the tree, the type of the node determines the functions that are available.\n\n| Function                            | Description                                                                                               | Node type and conditions |\n|-------------------------------------|-----------------------------------------------------------------------------------------------------------|--------------------------|\n| BOM lines &gt; Edit                 | Open a dialog box where you can edit the formula line attributes.                                         | This function is available when a formula line node is selected. |\n| BOM lines &gt; Delete               | Delete a formula line from the selected formula.                                                          | This function is available when a formula line node is selected, and the formula isn't locked for editing. |\n| BOM lines &gt; Add before line      | Open a dialog box where you can select a product variant to include before the selected formula line.     | This function is available when a formula line node is selected. |\n| BOM lines &gt; Add to component BOM | Open a dialog box where you can select a product variant to include at the end of the selected formula.   | This function is available when the node that is selected has a selected formula. If this function isn't available, a formula version might be missing for the selected item variant. In this case, you can click **Formula** &gt; **Create version** to create the missing version for the selected node. |\n| BOM lines &gt; Add after line       | Open a dialog box where you can select a product variant to include after the selected formula line.      | This function is available when a formula line node is selected. |\n| Formula &gt; Create version         | Create a new formula version or formula for the product variant of the selected node.                     | This function is available when the formula line node that is selected is linked to an item that has a production type of **BOM** or **Formula**. |\n| Formula &gt; Calculation            | Open a dialog box where you can run the cost or sales price calculation for the selected product variant. | This function is available when the node that is selected is related to a formula version. |\n| Formula &gt; Check                  | Validate and check the selected formula.                                                                  | This function is available when the node that is selected is related to a formula version. |\n\n## Configuring the tree view\nClick **Setup** to customize the information that is shown in the tree view of the formula designer.\n\n| Field group | Description |\n|-------------|-------------|\n| BOM         | Use the check boxes to select the criteria that are shown in the tree structure. The formula designer shows the selected criteria at the bottom of both tabs. |\n| Route       | Use the check boxes to select the criteria that are shown for the routes. |\n","nodes":[{"pos":[4,686],"content":"# required metadata\n\ntitle: Formula designer\ndescription: This topic explains how to use the formula designer to analyze and maintain formulas in a tree view.\nauthor: cvocph \nmanager: AnnBe\nms.date: 06/01/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-applications\nms.technology: \n\n# optional metadata\n\nms.search.form: PlanActivity, ReqSupplyDemandSchedule\n# ROBOTS: \naudience: Application User\n# ms.devlang: \n# ms.reviewer: YuyuScheller\nms.search.scope: Core, AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: \nms.assetid: \nms.search.region: Global\nms.search.industry: \nms.author: cvocph\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n","nodes":[{"content":"Formula designer","nodes":[{"pos":[0,16],"content":"Formula designer","nodes":[{"content":"Formula designer","pos":[0,16]}]}],"path":["title"]},{"content":"This topic explains how to use the formula designer to analyze and maintain formulas in a tree view.","nodes":[{"pos":[0,100],"content":"This topic explains how to use the formula designer to analyze and maintain formulas in a tree view.","nodes":[{"content":"This topic explains how to use the formula designer to analyze and maintain formulas in a tree view.","pos":[0,100]}]}],"path":["description"]}],"header":"# required metadata\n","yml":true},{"pos":[694,710],"content":"Formula designer","linkify":"Formula designer","nodes":[{"content":"Formula designer","pos":[0,16]}]},{"content":"This topic explains how to use the formula designer to analyze and maintain formulas in a tree view.","pos":[755,855]},{"content":"When you open the <bpt id=\"p1\">**</bpt>Formula designer<ept id=\"p1\">**</ept> page from the <bpt id=\"p2\">**</bpt>Released products<ept id=\"p2\">**</ept> page, the tree in the left pane shows the list of co-products and the hierarchy of ingredients for the released product.","pos":[857,1052],"source":"When you open the **Formula designer** page from the **Released products** page, the tree in the left pane shows the list of co-products and the hierarchy of ingredients for the released product."},{"content":"The structure is derived from the hierarchy of formulas that are active and approved for the selected item and its ingredients, the default order site of the item, and the actual date.","pos":[1053,1237]},{"pos":[1239,1352],"content":"Click <bpt id=\"p1\">**</bpt>Setup<ept id=\"p1\">**</ept> to select different configurations and specify what information appears on the lines of the tree.","source":"Click **Setup** to select different configurations and specify what information appears on the lines of the tree."},{"content":"Click <bpt id=\"p1\">**</bpt>Filter<ept id=\"p1\">**</ept> to change the initial selection in the view.","pos":[1354,1415],"source":"Click **Filter** to change the initial selection in the view."},{"content":"If you set the display principle to <bpt id=\"p1\">**</bpt>Selected/Active<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Selected<ept id=\"p2\">**</ept>, you can select individual formula or route versions to use in the view.","pos":[1416,1560],"source":" If you set the display principle to **Selected/Active** or **Selected**, you can select individual formula or route versions to use in the view."},{"content":"You can select non-approved and non-active formula versions to show or maintain in the formula designer.","pos":[1561,1665]},{"pos":[1671,1905],"content":"[!NOTE]\nIf you open the **Formula designer** page from the **Bills of materials** list page, it doesn't show route information. Currently, the selection of a formula or route version applies to all instances of the formula designer.","leadings":["","> "],"nodes":[{"content":"If you open the **Formula designer** page from the **Bills of materials** list page, it doesn't show route information. Currently, the selection of a formula or route version applies to all instances of the formula designer.","pos":[8,232],"nodes":[{"content":"If you open the <bpt id=\"p1\">**</bpt>Formula designer<ept id=\"p1\">**</ept> page from the <bpt id=\"p2\">**</bpt>Bills of materials<ept id=\"p2\">**</ept> list page, it doesn't show route information.","pos":[0,119],"source":"If you open the **Formula designer** page from the **Bills of materials** list page, it doesn't show route information."},{"content":"Currently, the selection of a formula or route version applies to all instances of the formula designer.","pos":[120,224]}]}]},{"content":"The following sections describe the functionality that is available in the BOM designer.","pos":[1909,1997]},{"pos":[2002,2059],"content":"Analyze a formula structure by using the formula designer","linkify":"Analyze a formula structure by using the formula designer","nodes":[{"content":"Analyze a formula structure by using the formula designer","pos":[0,57]}]},{"content":"The formula designer has two sections:","pos":[2060,2098]},{"content":"The tree view of the formula structure.","pos":[2104,2143]},{"content":"The details section, which shows details of the selected data.","pos":[2148,2210]},{"content":"When you select a node in the tree view, the FastTabs in the details section are updated based on that node:","pos":[2211,2319]},{"pos":[2328,2426],"content":"<bpt id=\"p1\">**</bpt>Formula line details<ept id=\"p1\">**</ept> – View the details of the formula line that is selected in the tree view.","source":"**Formula line details** – View the details of the formula line that is selected in the tree view."},{"content":"<bpt id=\"p1\">**</bpt>Item data<ept id=\"p1\">**</ept> – View the details of the main item or the item that is used in the selected node.","pos":[2435,2531],"source":"**Item data** – View the details of the main item or the item that is used in the selected node."},{"content":"You can click <bpt id=\"p1\">**</bpt>Edit released product<ept id=\"p1\">**</ept> to maintain the selected item.","pos":[2532,2602],"source":" You can click **Edit released product** to maintain the selected item."},{"pos":[2611,2693],"content":"<bpt id=\"p1\">**</bpt>Formula<ept id=\"p1\">**</ept> – View the header of the formula that is related to the selected node.","source":"**Formula** – View the header of the formula that is related to the selected node."},{"pos":[2702,2780],"content":"<bpt id=\"p1\">**</bpt>Route<ept id=\"p1\">**</ept> – View the header of the route that is related to the selected node.","source":"**Route** – View the header of the route that is related to the selected node."},{"content":"<bpt id=\"p1\">**</bpt>Route operations<ept id=\"p1\">**</ept> – View a preview of the operations for the route.","pos":[2789,2859],"source":"**Route operations** – View a preview of the operations for the route."},{"content":"When a bill of materials (BOM) line that is assigned to a specific operation is selected, the operation is marked as <bpt id=\"p1\">**</bpt>Component needed at operations<ept id=\"p1\">**</ept>.","pos":[2860,3012],"source":" When a bill of materials (BOM) line that is assigned to a specific operation is selected, the operation is marked as **Component needed at operations**."},{"pos":[3017,3043],"content":"Select a formula and route","linkify":"Select a formula and route","nodes":[{"content":"Select a formula and route","pos":[0,26]}]},{"content":"The filter that is applied for the formula and route is shown in the header of the formula designer.","pos":[3044,3144]},{"content":"You can change the filter by using the <bpt id=\"p1\">**</bpt>Filter<ept id=\"p1\">**</ept> dialog box.","pos":[3145,3206],"source":" You can change the filter by using the **Filter** dialog box."},{"content":"The following table describes the fields in this dialog box.","pos":[3207,3267]},{"content":"Field","pos":[3309,3314]},{"content":"Description","pos":[3324,3335]},{"content":"Product dimensions","pos":[3385,3403]},{"content":"If the selected finished product is a product master, you can define the active product dimensions for the main selection.","pos":[3413,3535]},{"content":"Note that if you open the formula designer for a product that isn't a product master, no product dimensions can be selected in the <bpt id=\"p1\">&lt;strong&gt;</bpt>Filter<ept id=\"p1\">&lt;/strong&gt;</ept> dialog box.","pos":[3536,3702],"source":" Note that if you open the formula designer for a product that isn't a product master, no product dimensions can be selected in the <strong>Filter</strong> dialog box."},{"content":"Site","pos":[3740,3744]},{"content":"Change the site that the ingredient tree is shown for.","pos":[3754,3808]},{"content":"The default site is the default inventory site of the finished item.","pos":[3809,3877]},{"content":"Display principle","pos":[3910,3927]},{"content":"Select the version display principle that applies to the current formula structure and the current route:","pos":[3940,4045]},{"content":"When the principle is set to <bpt id=\"p1\">&lt;strong&gt;</bpt>Active<ept id=\"p1\">&lt;/strong&gt;</ept> or <bpt id=\"p2\">&lt;strong&gt;</bpt>Selected/Active<ept id=\"p2\">&lt;/strong&gt;</ept>, the valid formula or route version for this date is found.","pos":[4059,4207],"source":"When the principle is set to <strong>Active</strong> or <strong>Selected/Active</strong>, the valid formula or route version for this date is found."},{"content":"When the principle is set to <bpt id=\"p1\">&lt;strong&gt;</bpt>Selected/Active<ept id=\"p1\">&lt;/strong&gt;</ept> or <bpt id=\"p2\">&lt;strong&gt;</bpt>Selected<ept id=\"p2\">&lt;/strong&gt;</ept>, you can select a formula version or route version by clicking <bpt id=\"p3\">&lt;strong&gt;</bpt>Formula<ept id=\"p3\">&lt;/strong&gt;</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p4\">&lt;strong&gt;</bpt>Formula versions<ept id=\"p4\">&lt;/strong&gt;</ept> or <bpt id=\"p5\">&lt;strong&gt;</bpt>Route<ept id=\"p5\">&lt;/strong&gt;</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p6\">&lt;strong&gt;</bpt>Route versions<ept id=\"p6\">&lt;/strong&gt;</ept>.","pos":[4217,4498],"source":"When the principle is set to <strong>Selected/Active</strong> or <strong>Selected</strong>, you can select a formula version or route version by clicking <strong>Formula</strong> &gt; <strong>Formula versions</strong> or <strong>Route</strong> &gt; <strong>Route versions</strong>."},{"content":"Version date","pos":[4543,4555]},{"content":"Enter the version date for the formula and route.","pos":[4565,4614]},{"content":"The version identifies which formula version is used on a specific date, based on the version dates in the formula version setup.","pos":[4615,4744]},{"content":"From quantity","pos":[4777,4790]},{"content":"Filter the versions by selecting a specific \"from\" quantity.","pos":[4800,4860]},{"content":"If you set a value, different formula and route versions might be selected.","pos":[4861,4936]},{"content":"Show valid only","pos":[4970,4985]},{"content":"When you select the check box, the tree structure shows only formula lines that have valid dates.","pos":[4995,5092]},{"content":"Right-click or double-click a formula line to open the <bpt id=\"p1\">&lt;strong&gt;</bpt>Edit formula line<ept id=\"p1\">&lt;/strong&gt;</ept> page, where you can see the validity dates for that formula line.","pos":[5093,5248],"source":" Right-click or double-click a formula line to open the <strong>Edit formula line</strong> page, where you can see the validity dates for that formula line."},{"content":"When you use the formula designer to review or edit formulas that consist of one or more levels of phantoms, the route that is associated with the top item typically spans the complete formula hierarchy.","pos":[5279,5482]},{"content":"To simplify the overview, you can lock the top-level route in the display by clicking <bpt id=\"p1\">**</bpt>View<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Lock route<ept id=\"p2\">**</ept>.","pos":[5483,5598],"source":" To simplify the overview, you can lock the top-level route in the display by clicking **View** &gt; **Lock route**."},{"content":"To unlock the route, click <bpt id=\"p1\">**</bpt>View<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Unlock route<ept id=\"p2\">**</ept>.","pos":[5599,5657],"source":" To unlock the route, click **View** &gt; **Unlock route**."},{"pos":[5662,5701],"content":"Add and edit formulas and formula lines","linkify":"Add and edit formulas and formula lines","nodes":[{"content":"Add and edit formulas and formula lines","pos":[0,39]}]},{"content":"Use the <bpt id=\"p1\">**</bpt>BOM lines<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Formula<ept id=\"p2\">**</ept> functions to modify the formula lines or formula.","pos":[5702,5788],"source":"Use the **BOM lines** or **Formula** functions to modify the formula lines or formula."},{"content":"When you select a node in the tree, the type of the node determines the functions that are available.","pos":[5789,5890]},{"content":"Function","pos":[5894,5902]},{"content":"Description","pos":[5932,5943]},{"content":"Node type and conditions","pos":[6040,6064]},{"content":"BOM lines <ph id=\"ph1\">&amp;gt;</ph> Edit","pos":[6244,6263],"source":"BOM lines &gt; Edit"},{"content":"Open a dialog box where you can edit the formula line attributes.","pos":[6282,6347]},{"content":"This function is available when a formula line node is selected.","pos":[6390,6454]},{"content":"BOM lines <ph id=\"ph1\">&amp;gt;</ph> Delete","pos":[6459,6480],"source":"BOM lines &gt; Delete"},{"content":"Delete a formula line from the selected formula.","pos":[6497,6545]},{"content":"This function is available when a formula line node is selected, and the formula isn't locked for editing.","pos":[6605,6711]},{"content":"BOM lines <ph id=\"ph1\">&amp;gt;</ph> Add before line","pos":[6716,6746],"source":"BOM lines &gt; Add before line"},{"content":"Open a dialog box where you can select a product variant to include before the selected formula line.","pos":[6754,6855]},{"content":"This function is available when a formula line node is selected.","pos":[6862,6926]},{"content":"BOM lines <ph id=\"ph1\">&amp;gt;</ph> Add to component BOM","pos":[6931,6966],"source":"BOM lines &gt; Add to component BOM"},{"content":"Open a dialog box where you can select a product variant to include at the end of the selected formula.","pos":[6969,7072]},{"content":"This function is available when the node that is selected has a selected formula.","pos":[7077,7158]},{"content":"If this function isn't available, a formula version might be missing for the selected item variant.","pos":[7159,7258]},{"content":"In this case, you can click <bpt id=\"p1\">**</bpt>Formula<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Create version<ept id=\"p2\">**</ept> to create the missing version for the selected node.","pos":[7259,7375],"source":" In this case, you can click **Formula** &gt; **Create version** to create the missing version for the selected node."},{"content":"BOM lines <ph id=\"ph1\">&amp;gt;</ph> Add after line","pos":[7380,7409],"source":"BOM lines &gt; Add after line"},{"content":"Open a dialog box where you can select a product variant to include after the selected formula line.","pos":[7418,7518]},{"content":"This function is available when a formula line node is selected.","pos":[7526,7590]},{"content":"Formula <ph id=\"ph1\">&amp;gt;</ph> Create version","pos":[7595,7622],"source":"Formula &gt; Create version"},{"content":"Create a new formula version or formula for the product variant of the selected node.","pos":[7633,7718]},{"pos":[7741,7886],"content":"This function is available when the formula line node that is selected is linked to an item that has a production type of <bpt id=\"p1\">**</bpt>BOM<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Formula<ept id=\"p2\">**</ept>.","source":"This function is available when the formula line node that is selected is linked to an item that has a production type of **BOM** or **Formula**."},{"content":"Formula <ph id=\"ph1\">&amp;gt;</ph> Calculation","pos":[7891,7915],"source":"Formula &gt; Calculation"},{"content":"Open a dialog box where you can run the cost or sales price calculation for the selected product variant.","pos":[7929,8034]},{"content":"This function is available when the node that is selected is related to a formula version.","pos":[8037,8127]},{"content":"Formula <ph id=\"ph1\">&amp;gt;</ph> Check","pos":[8132,8150],"source":"Formula &gt; Check"},{"content":"Validate and check the selected formula.","pos":[8170,8210]},{"content":"This function is available when the node that is selected is related to a formula version.","pos":[8278,8368]},{"pos":[8375,8400],"content":"Configuring the tree view","linkify":"Configuring the tree view","nodes":[{"content":"Configuring the tree view","pos":[0,25]}]},{"pos":[8401,8501],"content":"Click <bpt id=\"p1\">**</bpt>Setup<ept id=\"p1\">**</ept> to customize the information that is shown in the tree view of the formula designer.","source":"Click **Setup** to customize the information that is shown in the tree view of the formula designer."},{"content":"Field group","pos":[8505,8516]},{"content":"Description","pos":[8519,8530]},{"content":"BOM","pos":[8565,8568]},{"content":"Use the check boxes to select the criteria that are shown in the tree structure.","pos":[8579,8659]},{"content":"The formula designer shows the selected criteria at the bottom of both tabs.","pos":[8660,8736]},{"content":"Route","pos":[8741,8746]},{"content":"Use the check boxes to select the criteria that are shown for the routes.","pos":[8755,8828]}]}