{"content":"---\n# required metadata\n\ntitle: e-Commerce Platform SDK\ndescription: This topic describes the E-Commerce Platform SDK.\nauthor: kfend\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, Retail, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 18101\nms.assetid: c0b1740b-1cbb-47c4-94e8-779cde8411af\nms.search.region: Global\n# ms.search.industry: \nms.author: meeram\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n\n---\n\n# e-Commerce Platform SDK\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic describes the e-Commerce Platform SDK.\n\n**Purpose:** The e-Commerce Platform SDK consist of the following components:\n\n-   Framework\n-   Controls\n-   Publishing (only supported in version 1661 and higher : [Support for Service to Service authentication in Retail Server](https://community.dynamics.com/ax/b/axforretail/archive/2016/09/24/support-for-service-to-service-authentication-in-retail-server))\n-   Sample ASP.net web site\n\n## Use the sample asp.net website\n### Use the RetailSDK to create the sample asp.net website\n\n1.  Open Visual Studio in Admin mode. This is necessary for publishing to the inetpub folder.\n2.  Open C:\\\\Microsoft Dynamics AX70\\\\RetailSdkOnlineStoreOnlineStore.sln contains all the framework components.\n3.  The sample online store is available at C:\\\\Microsoft Dynamics AX70\\\\RetailSdkSampleExtensionsOnlineStore.\n4.  Compile and Publish the web storefront, from within Visual Studio.\n5.  Update the path of the RetailStorefrontWebSite from IIS Manager.\n    1.  Please note RetailStorefrontWebSite created by the default setup points to C:\\\\Microsoft Dynamics AX70\\\\Retail Store Front\\\\Package.\n    2.  However, the publishing of the web storefront from RetailSDK will drop the files at C:\\\\inetpub\\\\RetailWeb\\\\Storefront.\n    3.  Hence, the physical path of the RetailStorefrontWebSite must be updated to point to “C:\\\\inetpub\\\\RetailWeb\\\\Storefront” to access web storefront on the same ports as before. Another option would be to create a new website and have that point to the inetpub location.\n\n6.  Browse to http://localhost:55080 or access the https://usnconeboxax1ecom.cloud.onebox.dynamics.com/en/ to see a test asp.net web site.\n\n### Enabling anonymous access\n\nE-Commerce websites need to enable anonymous access. This is available as a web.config in the Retail Server web.config under app settings. Please ensure this is enable to have the web site work. &lt;add key=\"IsAnonymousEnabled\" value=\"true\" /&gt;\n\n### Externally accessing the ASP.net website\n\nThe following configuration changes will be required if either of these applies:\n\n-   if you are accessing web storefront from within a browser that is not on the same box as the Ecommerce server\n-   if the ecommerce server and retail server are on two different boxes\n\nYou will need to update the “retailServerUrl” inside web.config of the RetailStorefrontWebSite. The following two fields will need to be updated to use the machine name instead of local host:\n\n-   retailServerUrl=http://localhost:35080/RetailServer/V1\n-   &lt;add key=\"RetailServerRoot\" value=\"http://localhost:35080/RetailServer/V1\" /&gt;\n\nIf you are accessing the web storefront over https, then you will need to update the above urls to the https equivalent.\n\n### Operating unit or channel configuration\n\nThe E-Commerce web site will operate on an operating unit number(channel) specified in the web.config. To change it, change the OU \\# below. Note that Fabrikam is “077” in the demo data. You will need to update the “retailServerUrl” inside web.config of the RetailStorefrontWebSite. The following two fields will need to be updated to use the machine name instead of local host:\n\n    <ecommerceControls productUrlFormat=\"/Pages/ProductDetails/ProductDetails.aspx?itemId={0}\" retailServerUrl=\"http://localhost:35080/RetailServer/V1\" operatingUnitNumber=\"068\">\n\n    <add key=\"OperatingUnitNumber\" value=\"068\" />\n\n## Configure authentication providers\n### Authentication providers that you are using\n\nThe E-Commerce platform uses OpenID as the mechanism for authentication. You can register any OpenID provider of your choice to the tables below to make this work. You can then login to test as needed.\n\n1.  Edit the web.config and change it to below.\n\n        redirectUrl=https://usnconeboxax1ecom.cloud.onebox.dynamics.com/en/Pages/OauthV2Redirect/OauthV2Redirect.aspx\n\n    The subsequent steps should only be done to register additional providers.\n\n2.  The Retail Shared Parameters-&gt; Open ID Providers form can be used to register additional providers.\n3.  Run distribution schedule 1110.\n\n","nodes":[{"pos":[4,657],"embed":true,"content":"# required metadata\n\ntitle: e-Commerce Platform SDK\ndescription: This topic describes the E-Commerce Platform SDK.\nauthor: kfend\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, Retail, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 18101\nms.assetid: c0b1740b-1cbb-47c4-94e8-779cde8411af\nms.search.region: Global\n# ms.search.industry: \nms.author: meeram\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n","nodes":[{"content":"e-Commerce Platform SDK","nodes":[{"pos":[0,23],"content":"e-Commerce Platform SDK","nodes":[{"content":"e-Commerce Platform SDK","pos":[0,23]}]}],"path":["title"]},{"content":"This topic describes the E-Commerce Platform SDK.","nodes":[{"pos":[0,49],"content":"This topic describes the E-Commerce Platform SDK.","nodes":[{"content":"This topic describes the E-Commerce Platform SDK.","pos":[0,49]}]}],"path":["description"]}],"header":"# required metadata\n","yml":true},{"pos":[665,688],"content":"e-Commerce Platform SDK","linkify":"e-Commerce Platform SDK","nodes":[{"content":"e-Commerce Platform SDK","pos":[0,23]}]},{"content":"This topic describes the e-Commerce Platform SDK.","pos":[734,783]},{"pos":[785,862],"content":"<bpt id=\"p1\">**</bpt>Purpose:<ept id=\"p1\">**</ept> The e-Commerce Platform SDK consist of the following components:","source":"**Purpose:** The e-Commerce Platform SDK consist of the following components:"},{"content":"Framework","pos":[868,877]},{"content":"Controls","pos":[882,890]},{"pos":[895,1147],"content":"Publishing (only supported in version 1661 and higher : <bpt id=\"p1\">[</bpt>Support for Service to Service authentication in Retail Server<ept id=\"p1\">](https://community.dynamics.com/ax/b/axforretail/archive/2016/09/24/support-for-service-to-service-authentication-in-retail-server)</ept>)","source":"Publishing (only supported in version 1661 and higher : [Support for Service to Service authentication in Retail Server](https://community.dynamics.com/ax/b/axforretail/archive/2016/09/24/support-for-service-to-service-authentication-in-retail-server))"},{"content":"Sample ASP.net web site","pos":[1152,1175]},{"pos":[1180,1210],"content":"Use the sample asp.net website","linkify":"Use the sample asp.net website","nodes":[{"content":"Use the sample asp.net website","pos":[0,30]}]},{"pos":[1215,1269],"content":"Use the RetailSDK to create the sample asp.net website","linkify":"Use the RetailSDK to create the sample asp.net website","nodes":[{"content":"Use the RetailSDK to create the sample asp.net website","pos":[0,54]}]},{"content":"Open Visual Studio in Admin mode.","pos":[1275,1308]},{"content":"This is necessary for publishing to the inetpub folder.","pos":[1309,1364]},{"content":"Open C:<ph id=\"ph1\">\\\\</ph>Microsoft Dynamics AX70<ph id=\"ph2\">\\\\</ph>RetailSdkOnlineStoreOnlineStore.sln contains all the framework components.","pos":[1369,1477],"source":"Open C:\\\\Microsoft Dynamics AX70\\\\RetailSdkOnlineStoreOnlineStore.sln contains all the framework components."},{"content":"The sample online store is available at C:<ph id=\"ph1\">\\\\</ph>Microsoft Dynamics AX70<ph id=\"ph2\">\\\\</ph>RetailSdkSampleExtensionsOnlineStore.","pos":[1482,1588],"source":"The sample online store is available at C:\\\\Microsoft Dynamics AX70\\\\RetailSdkSampleExtensionsOnlineStore."},{"content":"Compile and Publish the web storefront, from within Visual Studio.","pos":[1593,1659]},{"content":"Update the path of the RetailStorefrontWebSite from IIS Manager.","pos":[1664,1728]},{"content":"Please note RetailStorefrontWebSite created by the default setup points to C:<ph id=\"ph1\">\\\\</ph>Microsoft Dynamics AX70<ph id=\"ph2\">\\\\</ph>Retail Store Front<ph id=\"ph3\">\\\\</ph>Package.","pos":[1737,1869],"source":"Please note RetailStorefrontWebSite created by the default setup points to C:\\\\Microsoft Dynamics AX70\\\\Retail Store Front\\\\Package."},{"content":"However, the publishing of the web storefront from RetailSDK will drop the files at C:<ph id=\"ph1\">\\\\</ph>inetpub<ph id=\"ph2\">\\\\</ph>RetailWeb<ph id=\"ph3\">\\\\</ph>Storefront.","pos":[1878,1997],"source":"However, the publishing of the web storefront from RetailSDK will drop the files at C:\\\\inetpub\\\\RetailWeb\\\\Storefront."},{"content":"Hence, the physical path of the RetailStorefrontWebSite must be updated to point to “C:<ph id=\"ph1\">\\\\</ph>inetpub<ph id=\"ph2\">\\\\</ph>RetailWeb<ph id=\"ph3\">\\\\</ph>Storefront” to access web storefront on the same ports as before.","pos":[2006,2180],"source":"Hence, the physical path of the RetailStorefrontWebSite must be updated to point to “C:\\\\inetpub\\\\RetailWeb\\\\Storefront” to access web storefront on the same ports as before."},{"content":"Another option would be to create a new website and have that point to the inetpub location.","pos":[2181,2273]},{"content":"Browse to http://localhost:55080 or access the https://usnconeboxax1ecom.cloud.onebox.dynamics.com/en/ to see a test asp.net web site.","pos":[2279,2413]},{"pos":[2419,2444],"content":"Enabling anonymous access","linkify":"Enabling anonymous access","nodes":[{"content":"Enabling anonymous access","pos":[0,25]}]},{"content":"E-Commerce websites need to enable anonymous access.","pos":[2446,2498]},{"content":"This is available as a web.config in the Retail Server web.config under app settings.","pos":[2499,2584]},{"content":"Please ensure this is enable to have the web site work.","pos":[2585,2640]},{"content":"<ph id=\"ph1\">&amp;lt;</ph>add key=\"IsAnonymousEnabled\" value=\"true\" /<ph id=\"ph2\">&amp;gt;</ph>","pos":[2641,2692],"source":" &lt;add key=\"IsAnonymousEnabled\" value=\"true\" /&gt;"},{"pos":[2698,2738],"content":"Externally accessing the ASP.net website","linkify":"Externally accessing the ASP.net website","nodes":[{"content":"Externally accessing the ASP.net website","pos":[0,40]}]},{"content":"The following configuration changes will be required if either of these applies:","pos":[2740,2820]},{"content":"if you are accessing web storefront from within a browser that is not on the same box as the Ecommerce server","pos":[2826,2935]},{"content":"if the ecommerce server and retail server are on two different boxes","pos":[2940,3008]},{"content":"You will need to update the “retailServerUrl” inside web.config of the RetailStorefrontWebSite.","pos":[3010,3105]},{"content":"The following two fields will need to be updated to use the machine name instead of local host:","pos":[3106,3201]},{"content":"retailServerUrl=http://localhost:35080/RetailServer/V1","pos":[3207,3261]},{"content":"<ph id=\"ph1\">&amp;lt;</ph>add key=\"RetailServerRoot\" value=\"http://localhost:35080/RetailServer/V1\" /<ph id=\"ph2\">&amp;gt;</ph>","pos":[3266,3349],"source":"&lt;add key=\"RetailServerRoot\" value=\"http://localhost:35080/RetailServer/V1\" /&gt;"},{"content":"If you are accessing the web storefront over https, then you will need to update the above urls to the https equivalent.","pos":[3351,3471]},{"pos":[3477,3516],"content":"Operating unit or channel configuration","linkify":"Operating unit or channel configuration","nodes":[{"content":"Operating unit or channel configuration","pos":[0,39]}]},{"content":"The E-Commerce web site will operate on an operating unit number(channel) specified in the web.config.","pos":[3518,3620]},{"content":"To change it, change the OU <ph id=\"ph1\">\\#</ph> below.","pos":[3621,3658],"source":" To change it, change the OU \\# below."},{"content":"Note that Fabrikam is “077” in the demo data.","pos":[3659,3704]},{"content":"You will need to update the “retailServerUrl” inside web.config of the RetailStorefrontWebSite.","pos":[3705,3800]},{"content":"The following two fields will need to be updated to use the machine name instead of local host:","pos":[3801,3896]},{"pos":[4132,4166],"content":"Configure authentication providers","linkify":"Configure authentication providers","nodes":[{"content":"Configure authentication providers","pos":[0,34]}]},{"pos":[4171,4214],"content":"Authentication providers that you are using","linkify":"Authentication providers that you are using","nodes":[{"content":"Authentication providers that you are using","pos":[0,43]}]},{"content":"The E-Commerce platform uses OpenID as the mechanism for authentication.","pos":[4216,4288]},{"content":"You can register any OpenID provider of your choice to the tables below to make this work.","pos":[4289,4379]},{"content":"You can then login to test as needed.","pos":[4380,4417]},{"content":"Edit the web.config and change it to below.","pos":[4423,4466]},{"content":"The subsequent steps should only be done to register additional providers.","pos":[4591,4665]},{"content":"The Retail Shared Parameters-<ph id=\"ph1\">&amp;gt;</ph> Open ID Providers form can be used to register additional providers.","pos":[4671,4773],"source":"The Retail Shared Parameters-&gt; Open ID Providers form can be used to register additional providers."},{"content":"Run distribution schedule 1110.","pos":[4778,4809]}]}