{"content":"---\n# required metadata\n\ntitle: Install a deployable package\ndescription: This topic walks you through the steps for using the command line to apply either a binary update or an application (AOT) deployable package that was created in your development/build environment.\nauthor: manalidongre\nmanager: AnnBe\nms.date: 06/23/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 24191\nms.assetid: 42d238d6-ff03-41b6-b2d5-c94bcdc37576\nms.search.region: Global\n# ms.search.industry: \nms.author: manado\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Install a deployable package\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic walks you through the steps for using the command line to apply either a binary update or an application (AOT) deployable package that was created in your development/build environment.\n\nThis command line process requires remote access (RDP) to the environments. In most cases, you can apply a deployable package to an environment directly from Dynamics Lifecycle Services (LCS) as described in [Apply a deployable package on a system](apply-deployable-package-system.md), without the need to understand the process described on this page.\n\n## Key concepts\n-   **Deployable package**– A deployable package is a unit of deployment that can be applied in any environment. It can consist of a binary hotfix to the AOS runtime components, an updated application package, or a new application package.\n-   **AXUpdateInstaller**– A deployable package has the installer executable bundled in it. When the package is downloaded to a computer, the installer is available.\n-   **Runbook**– The deployment runbook is a series of steps that is generated for applying the deployable package to the target environment. Some of the steps are automated, and some are manual. AXUpdateInstaller provides the capability to run these steps one by one and in the correct sequence.\n\n## Collect topology configuration data\n1.  In Microsoft Dynamics Lifecycle Services (LCS), open the **Environment** page.\n2.  Click the name of a virtual machine (VM), and establish a Remote Desktop connection to the VM by using the user name and password that are provided on the **Environment** page.\n3.  On the VM, download the zip file for the deployable package from LCS. **Note:** After you download the zip file, right-click it, and then select **Properties**. Then, in the **Properties** dialog box, on the **General** tab, click **Unblock** to unlock the files. Finally, extract the files, and continue with the next step. Also, make sure that the **zip** file is stored in a non-user folder\n4.  In the folder where the deployable package was extracted, find and open the file that is named DefaultTopologyData.xml. You must populate this file with the VM name and installed components.\n    -   To populate the VM name, follow these steps:\n        1.  Open Windows Explorer, right-click **This PC**, and then select **Properties**.\n        2.  In the system properties, find and make a note of the machine name (for example, AOS-950ed2c3e7b).\n        3.  In the DefaultTopologyData.xml file, replace the machine name with the name that you found in the previous step.\n    -   To populate the installed components, follow these steps:\n        1.  Open a Command Prompt window as an administrator.\n        2.  Navigate to the extracted folder, and run the following command to see a list of all the installed components on the computer.\n\n                AXUpdateInstaller.exe list\n\n        3.  Update the DefaultTopologyData.xml with the list of components.\n\n    When you've finished populating the VM name and installed components, the DefaultTopologyData.xml file should resemble the following illustration. ![defaulttopology](./media/defaulttopology.png)\n5.  Repeat steps 2 through 4 for each VM that is listed on the **Environment** page.\n\n## Generate a runbook from the topology\nBased on the topology information in the DefaultTopologyData.xml file, you must generate the runbook file that will provide step-by-step instructions for updating each VM.\n\n-   On any VM, run the following command to generate the runbook.\n\n        AXUpdateInstaller.exe generate -runbookid=[runbookID] -topologyfile=[topologyFile] -servicemodelfile=[serviceModelFile] -runbookfile=[runbookFile]\n\n    Here is an explanation of the parameters that are used in this command:\n\n    -   **\\[runbookID\\]**– A parameter that is specified by the developer who applies the deployable package\n    -   **\\[topologyFile\\]**– The path of the DefaultTopologyData.xml file\n    -   **\\[serviceModelFile\\]**– The path of the DefaultServiceModelData.xml file\n    -   **\\[runbookFile\\]**– The name of the runbook file to generate (for example, AOSRunbook.xml)\n\n### Example\n\n        AXUpdateInstaller.exe generate -runbookid=\"VAL200AA2BMEDIU-runbook\" -topologyfile=\"DefaultTopologyData.xml\" -servicemodelfile=\"DefaultServiceModelData.xml\" -runbookfile=\"VAL200AA2BMEDIU-runbook.xml\"\n\nThe runbook provides the sequence of steps that must be run to update the environment. The following illustration shows an example of a runbook file. Each step in a runbook is associated with an ID, a machine name, and step execution details. [![runbook-steps](./media/runbook-steps-1024x624.jpg)](./media/runbook-steps.jpg)\n\n## Install a deployable package\n1.  Based on the sequence of steps that is specified in the runbook, start with the first machine (VM) that is listed.\n2.  Follow these steps on each VM. For one-box environments like Development, Build, and Demo environments, there is only one VM.\n    1.  Import the runbook by running the following command.\n\n            AXUpdateInstaller.exe import -runbookfile=[runbookFile]\n\n        **Example**\n\n            AXUpdateInstaller.exe import -runbookfile=\"VAL200AA2BMEDIU-runbook.xml\"\n\n    2.  Verify the runbook.\n\n            AXUpdateInstaller.exe list\n\n    3.  Execute the runbook.\n\n            AXUpdateInstaller.exe execute -runbookid=[runbookID]\n\n        **Example**\n\n            AXUpdateInstaller.exe execute -runbookid=\"VAL200AA2BMEDIU-runbook\"\n\n    4.  Export the runbook.\n\n            AXUpdateInstaller.exe export -runbookid=[runbookID] -runbookfile=[runbookFile]\n\n        **Example**\n\n            AXUpdateInstaller.exe export -runbookid=\"VAL200AA2BMEDIU-runbook\" -runbookfile=\"VAL200AA2BMEDIU-runbook.xml\"\n\n3.  AXUpdateInstaller updates the runbook file after each step is run on a VM.\n4.  The runbook also logs information about each step.\n5.  For manual steps, follow the instructions, and then mark the step as completed in the runbook by using the AXUpdateInstaller.\n\n        AXUpdateInstaller.exe execute -runbookID=[runbookID] -setstepcomplete=[stepID]\n\n    **Example**\n\n        AXUpdateInstaller.exe execute -runbookid=\"VAL200AA2BMEDIU-runbook\" -setstepcomplete=2\n\n8.  If errors occur during any step, debug the script/instructions in the step, and update accordingly.\n\n## Verify installation\n1.  Run the following command to verify that the new updates are installed.\n\n        AXUpdateInstaller.exe list\n\n2.  View the runbook to see the completed steps. [![image013](./media/image013-1024x978.png)](./media/image013.png)\n\n## Troubleshooting\n-   After all the steps are completed, export the runbook, and save it outside the computer for future reference. For example, you might have to use the runbook file in these situations:\n    -   You must analyze the downtime requirements for production, and so on.\n    -   You must send the file to Microsoft in the event of failure to install a deployable package.\n-   If any step fails, you can rerun it by running the following command.\n\n        AXUpdateInstaller.exe execute -runbookid=[runbookID] -rerunstep=[stepID]\n\n-   To prevent version mismatch or downgrade, or installation of the same deployable package, run the following command.\n\n        AXUpdateInstaller.exe execute -runbookid=[runbook ID] -versioncheck=true\n\n-   To verify database synchronization, navigate to the aosservce\\\\scripts\\\\ folder and find the dbsync.error.txt file. Find the file, and look for any errors.\n\n\n\n\n","nodes":[{"pos":[4,788],"content":"# required metadata\n\ntitle: Install a deployable package\ndescription: This topic walks you through the steps for using the command line to apply either a binary update or an application (AOT) deployable package that was created in your development/build environment.\nauthor: manalidongre\nmanager: AnnBe\nms.date: 06/23/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 24191\nms.assetid: 42d238d6-ff03-41b6-b2d5-c94bcdc37576\nms.search.region: Global\n# ms.search.industry: \nms.author: manado\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n","nodes":[{"content":"Install a deployable package","nodes":[{"pos":[0,28],"content":"Install a deployable package","nodes":[{"content":"Install a deployable package","pos":[0,28]}]}],"path":["title"]},{"content":"This topic walks you through the steps for using the command line to apply either a binary update or an application (AOT) deployable package that was created in your development/build environment.","nodes":[{"pos":[0,196],"content":"This topic walks you through the steps for using the command line to apply either a binary update or an application (AOT) deployable package that was created in your development/build environment.","nodes":[{"content":"This topic walks you through the steps for using the command line to apply either a binary update or an application (AOT) deployable package that was created in your development/build environment.","pos":[0,196]}]}],"path":["description"]}],"header":"# required metadata\n","yml":true},{"pos":[796,824],"content":"Install a deployable package","linkify":"Install a deployable package","nodes":[{"content":"Install a deployable package","pos":[0,28]}]},{"content":"This topic walks you through the steps for using the command line to apply either a binary update or an application (AOT) deployable package that was created in your development/build environment.","pos":[870,1066]},{"content":"This command line process requires remote access (RDP) to the environments.","pos":[1068,1143]},{"content":"In most cases, you can apply a deployable package to an environment directly from Dynamics Lifecycle Services (LCS) as described in <bpt id=\"p1\">[</bpt>Apply a deployable package on a system<ept id=\"p1\">](apply-deployable-package-system.md)</ept>, without the need to understand the process described on this page.","pos":[1144,1420],"source":" In most cases, you can apply a deployable package to an environment directly from Dynamics Lifecycle Services (LCS) as described in [Apply a deployable package on a system](apply-deployable-package-system.md), without the need to understand the process described on this page."},{"pos":[1425,1437],"content":"Key concepts","linkify":"Key concepts","nodes":[{"content":"Key concepts","pos":[0,12]}]},{"content":"<bpt id=\"p1\">**</bpt>Deployable package<ept id=\"p1\">**</ept>– A deployable package is a unit of deployment that can be applied in any environment.","pos":[1442,1550],"source":"**Deployable package**– A deployable package is a unit of deployment that can be applied in any environment."},{"content":"It can consist of a binary hotfix to the AOS runtime components, an updated application package, or a new application package.","pos":[1551,1677]},{"content":"<bpt id=\"p1\">**</bpt>AXUpdateInstaller<ept id=\"p1\">**</ept>– A deployable package has the installer executable bundled in it.","pos":[1682,1769],"source":"**AXUpdateInstaller**– A deployable package has the installer executable bundled in it."},{"content":"When the package is downloaded to a computer, the installer is available.","pos":[1770,1843]},{"content":"<bpt id=\"p1\">**</bpt>Runbook<ept id=\"p1\">**</ept>– The deployment runbook is a series of steps that is generated for applying the deployable package to the target environment.","pos":[1848,1985],"source":"**Runbook**– The deployment runbook is a series of steps that is generated for applying the deployable package to the target environment."},{"content":"Some of the steps are automated, and some are manual.","pos":[1986,2039]},{"content":"AXUpdateInstaller provides the capability to run these steps one by one and in the correct sequence.","pos":[2040,2140]},{"pos":[2145,2180],"content":"Collect topology configuration data","linkify":"Collect topology configuration data","nodes":[{"content":"Collect topology configuration data","pos":[0,35]}]},{"pos":[2185,2263],"content":"In Microsoft Dynamics Lifecycle Services (LCS), open the <bpt id=\"p1\">**</bpt>Environment<ept id=\"p1\">**</ept> page.","source":"In Microsoft Dynamics Lifecycle Services (LCS), open the **Environment** page."},{"pos":[2268,2444],"content":"Click the name of a virtual machine (VM), and establish a Remote Desktop connection to the VM by using the user name and password that are provided on the <bpt id=\"p1\">**</bpt>Environment<ept id=\"p1\">**</ept> page.","source":"Click the name of a virtual machine (VM), and establish a Remote Desktop connection to the VM by using the user name and password that are provided on the **Environment** page."},{"content":"On the VM, download the zip file for the deployable package from LCS.","pos":[2449,2518]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> After you download the zip file, right-click it, and then select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","pos":[2519,2609],"source":"**Note:** After you download the zip file, right-click it, and then select **Properties**."},{"content":"Then, in the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> dialog box, on the <bpt id=\"p2\">**</bpt>General<ept id=\"p2\">**</ept> tab, click <bpt id=\"p3\">**</bpt>Unblock<ept id=\"p3\">**</ept> to unlock the files.","pos":[2610,2712],"source":" Then, in the **Properties** dialog box, on the **General** tab, click **Unblock** to unlock the files."},{"content":"Finally, extract the files, and continue with the next step.","pos":[2713,2773]},{"content":"Also, make sure that the <bpt id=\"p1\">**</bpt>zip<ept id=\"p1\">**</ept> file is stored in a non-user folder","pos":[2774,2842],"source":" Also, make sure that the **zip** file is stored in a non-user folder"},{"content":"In the folder where the deployable package was extracted, find and open the file that is named DefaultTopologyData.xml.","pos":[2847,2966]},{"content":"You must populate this file with the VM name and installed components.","pos":[2967,3037]},{"content":"To populate the VM name, follow these steps:","pos":[3046,3090]},{"pos":[3103,3182],"content":"Open Windows Explorer, right-click <bpt id=\"p1\">**</bpt>This PC<ept id=\"p1\">**</ept>, and then select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","source":"Open Windows Explorer, right-click **This PC**, and then select **Properties**."},{"content":"In the system properties, find and make a note of the machine name (for example, AOS-950ed2c3e7b).","pos":[3195,3293]},{"content":"In the DefaultTopologyData.xml file, replace the machine name with the name that you found in the previous step.","pos":[3306,3418]},{"content":"To populate the installed components, follow these steps:","pos":[3427,3484]},{"content":"Open a Command Prompt window as an administrator.","pos":[3497,3546]},{"content":"Navigate to the extracted folder, and run the following command to see a list of all the installed components on the computer.","pos":[3559,3685]},{"content":"Update the DefaultTopologyData.xml with the list of components.","pos":[3743,3806]},{"content":"When you've finished populating the VM name and installed components, the DefaultTopologyData.xml file should resemble the following illustration.","pos":[3812,3958]},{"content":"defaulttopology","pos":[3961,3976]},{"pos":[4011,4091],"content":"Repeat steps 2 through 4 for each VM that is listed on the <bpt id=\"p1\">**</bpt>Environment<ept id=\"p1\">**</ept> page.","source":"Repeat steps 2 through 4 for each VM that is listed on the **Environment** page."},{"pos":[4096,4132],"content":"Generate a runbook from the topology","linkify":"Generate a runbook from the topology","nodes":[{"content":"Generate a runbook from the topology","pos":[0,36]}]},{"content":"Based on the topology information in the DefaultTopologyData.xml file, you must generate the runbook file that will provide step-by-step instructions for updating each VM.","pos":[4133,4304]},{"content":"On any VM, run the following command to generate the runbook.","pos":[4310,4371]},{"content":"Here is an explanation of the parameters that are used in this command:","pos":[4533,4604]},{"pos":[4614,4714],"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\[</ph>runbookID<ph id=\"ph2\">\\]</ph><ept id=\"p1\">**</ept>– A parameter that is specified by the developer who applies the deployable package","source":"**\\[runbookID\\]**– A parameter that is specified by the developer who applies the deployable package"},{"pos":[4723,4789],"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\[</ph>topologyFile<ph id=\"ph2\">\\]</ph><ept id=\"p1\">**</ept>– The path of the DefaultTopologyData.xml file","source":"**\\[topologyFile\\]**– The path of the DefaultTopologyData.xml file"},{"pos":[4798,4872],"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\[</ph>serviceModelFile<ph id=\"ph2\">\\]</ph><ept id=\"p1\">**</ept>– The path of the DefaultServiceModelData.xml file","source":"**\\[serviceModelFile\\]**– The path of the DefaultServiceModelData.xml file"},{"pos":[4881,4972],"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\[</ph>runbookFile<ph id=\"ph2\">\\]</ph><ept id=\"p1\">**</ept>– The name of the runbook file to generate (for example, AOSRunbook.xml)","source":"**\\[runbookFile\\]**– The name of the runbook file to generate (for example, AOSRunbook.xml)"},{"pos":[4978,4985],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The runbook provides the sequence of steps that must be run to update the environment.","pos":[5195,5281]},{"content":"The following illustration shows an example of a runbook file.","pos":[5282,5344]},{"content":"Each step in a runbook is associated with an ID, a machine name, and step execution details.","pos":[5345,5437]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>runbook-steps<ept id=\"p1\">](./media/runbook-steps-1024x624.jpg)](./media/runbook-steps.jpg)</ept>","pos":[5438,5519],"source":"[![runbook-steps](./media/runbook-steps-1024x624.jpg)](./media/runbook-steps.jpg)"},{"pos":[5524,5552],"content":"Install a deployable package","linkify":"Install a deployable package","nodes":[{"content":"Install a deployable package","pos":[0,28]}]},{"content":"Based on the sequence of steps that is specified in the runbook, start with the first machine (VM) that is listed.","pos":[5557,5671]},{"content":"Follow these steps on each VM.","pos":[5676,5706]},{"content":"For one-box environments like Development, Build, and Demo environments, there is only one VM.","pos":[5707,5801]},{"content":"Import the runbook by running the following command.","pos":[5810,5862]},{"pos":[5941,5952],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"Verify the runbook.","pos":[6047,6066]},{"content":"Execute the runbook.","pos":[6116,6136]},{"pos":[6212,6223],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"Export the runbook.","pos":[6313,6332]},{"pos":[6434,6445],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"AXUpdateInstaller updates the runbook file after each step is run on a VM.","pos":[6573,6647]},{"content":"The runbook also logs information about each step.","pos":[6652,6702]},{"content":"For manual steps, follow the instructions, and then mark the step as completed in the runbook by using the AXUpdateInstaller.","pos":[6707,6832]},{"pos":[6926,6937],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"If errors occur during any step, debug the script/instructions in the step, and update accordingly.","pos":[7038,7137]},{"pos":[7142,7161],"content":"Verify installation","linkify":"Verify installation","nodes":[{"content":"Verify installation","pos":[0,19]}]},{"content":"Run the following command to verify that the new updates are installed.","pos":[7166,7237]},{"content":"View the runbook to see the completed steps.","pos":[7279,7323]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>image013<ept id=\"p1\">](./media/image013-1024x978.png)](./media/image013.png)</ept>","pos":[7324,7390],"source":"[![image013](./media/image013-1024x978.png)](./media/image013.png)"},{"pos":[7395,7410],"content":"Troubleshooting","linkify":"Troubleshooting","nodes":[{"content":"Troubleshooting","pos":[0,15]}]},{"content":"After all the steps are completed, export the runbook, and save it outside the computer for future reference.","pos":[7415,7524]},{"content":"For example, you might have to use the runbook file in these situations:","pos":[7525,7597]},{"content":"You must analyze the downtime requirements for production, and so on.","pos":[7606,7675]},{"content":"You must send the file to Microsoft in the event of failure to install a deployable package.","pos":[7684,7776]},{"content":"If any step fails, you can rerun it by running the following command.","pos":[7781,7850]},{"content":"To prevent version mismatch or downgrade, or installation of the same deployable package, run the following command.","pos":[7938,8054]},{"content":"To verify database synchronization, navigate to the aosservce<ph id=\"ph1\">\\\\</ph>scripts<ph id=\"ph2\">\\\\</ph> folder and find the dbsync.error.txt file.","pos":[8142,8257],"source":"To verify database synchronization, navigate to the aosservce\\\\scripts\\\\ folder and find the dbsync.error.txt file."},{"content":"Find the file, and look for any errors.","pos":[8258,8297]}]}