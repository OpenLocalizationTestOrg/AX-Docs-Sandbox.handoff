{"content":"---\n# required metadata\n\ntitle: Patch SQL Server Reporting Services in a one-box environment\ndescription: Apply SSRS hotfixes to a one-box development environment. \nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 23661\nms.assetid: 744bd1dc-d109-40df-a5dd-9db8982523a6\nms.search.region: Global\n# ms.search.industry: \nms.author: shailesn\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Patch SQL Server Reporting Services in a one-box environment\n\n[!include[banner](../includes/banner.md)]\n\n\nThe following procedure is for one-box development environments only.\n\nPatch the Reporting Service\n===========================\n\nThe following procedure is for one-box development environments only.\n\n-   Download the patch .zip file from Lifecycle Services (LCS).\n-   If there are any font files in the Reporting Service patch’s data folder, install these to the machine where SQL Server Reporting Services (SSRS) is running. For more information about installing fonts on windows, see <http://www.microsoft.com/en-us/Typography/TrueTypeInstall.aspx>.  Any fonts that have already been installed do not need to be installed again.\n-   Copy the files in the Reporting Services patch scripts folder to the Report plug-in folder located under C:\\\\Packages\\\\Plugins\\\\AxReportVmRoleStartupTask.\n-   Change the directory to the Report plug-in folder where you stored the script files.\n-   Using one of the methods listed below, replace the old instance of reporting extensions.\n    -   Remove/reinstall the reporting extension. The remove/reinstall option requires that redeploy all reports after you have finished the reinstallation..\n    -   Manually copy binaries to the sql server binary folder. If you choose to manually copy the files, then you do not need to redeploy reports.\n\n## Remove/reinstall the reporting extension\nComplete the following procedure as a user in the administrator group for the machine where SSRS is running.\n\n-   Using Windows PowerShell, remove the Dynamics SSRS extension by running the following script:\n    -   PowerShell .\\\\DeploySsrsExtension.ps1 –UninstallOnly\n-   In PowerShell, reinstall the Dynamics SSRS extension by running the following script:\n    -   PowerShell .\\\\DeploySsrsExtension.ps1\n-   Removing the reporting extension removes all the reports. If you have removed and then reinstalled the reporting extension, it is necessary to re-deploy the reports by running the following script:\n    -   Powershell .\\\\DeployAllReportsToSsrs.ps1\n-   This task will take 20 to 30 minutes to complete.\n\n## Manually copy binaries to the SQL Server binary folder\n1.  Stop SQL Server Reporting Services. This can be done either from the **Services management** console or from the **Reporting Services Configuration Manager**. [![Configuration\\_RSHotfix](./media/configuration_rshotfix.png)](./media/configuration_rshotfix.png)\n2.  Find the SQL Server Reporting Services binary folder. This folder is usually located at C:\\\\Program Files\\\\Microsoft SQL Server\\\\MSRS11.MSSQLSERVER\\\\Reporting Services\\\\ReportServer\\\\bin.\n3.  If any of the following files are in the patch, copy them to the SQL Server Reporting Services bin folder.* *\n\n**Note:** Patches can either be full patches, which would contain all of the files used by the service, or incremental patches, which contain only the files that have changed. If you have an incremental patch, then some files may not be included. Files not included in the patch do not need to be replaced.\n\n-   Microsoft.Dynamics.AX.Framework.Services.Platform.Client.dll\n-   Microsoft.Dynamics.Framework.ReportsExtensions.dll\n-   Microsoft.Dynamics.Framework.Reports.dll\n-   Microsoft.Dynamics.ApplicationPlatform.SSRSReportRuntime.Instrumentation.dll\n-   Microsoft.Dynamics.ApplicationPlatform.SSRSReportRuntime.man\n-   Microsoft.Dynamics.Platform.Integration.ClientSdk.Abstraction.dll\n-   Microsoft.Dynamics.AX.Framework.Reports.Shared.dll\n-   Microsoft.Dynamics.AX.Framework.EncryptionEngine.dll\n-   Microsoft.Dynamics.AX.Framework.Utilities.dll\n-   Microsoft.Dynamics.ApplicationSuite.Reporting.BusinessLogic.dll\n-   Microsoft.Dynamics.ApplicationPlatform.Environment.dll\n-   Microsoft.Dynamics.AX.ReportConfiguration.axc\n-   Microsoft.WindowsAzure.ServiceRuntime.dll\n-   Microsoft.IdentityModel.dll\n-   msshrtmi.dll\n\nRestart SQL Server Reporting Services.\n\n## Reporting service installation\nThe following changes are made with the reporting service installation: The following files will be copied into Reporting service bin folder (C:\\\\Program Files\\\\Microsoft SQL Server\\\\MSRS11.MSSQLSERVER\\\\Reporting Services\\\\ReportServer\\\\bin), and the corresponding SSRS config files will be updated so that SSRS is aware of the extension.\n\n-   Dynamics.AX.Framework.Services.Platform.Client.dll\n-   Dynamics.Framework.ReportsExtensions.dll\n-   Dynamics.Framework.Reports.dll\n-   Dynamics.ApplicationPlatform.SSRSReportRuntime.Instrumentation.dll\n-   Dynamics.ApplicationPlatform.SSRSReportRuntime.man\n-   Dynamics.Platform.Integration.ClientSdk.Abstraction.dll\n-   Dynamics.AX.Framework.Reports.Shared.dll\n-   Dynamics.AX.Framework.EncryptionEngine.dll\n-   Dynamics.AX.Framework.Utilities.dll\n-   Dynamics.ApplicationSuite.Reporting.BusinessLogic.dll\n-   Dynamics.ApplicationPlatform.Environment.dll\n-   Dynamics.AX.ReportConfiguration.axc\n-   WindowsAzure.ServiceRuntime.dll\n-   IdentityModel.dll\n-   msshrtmi.dll\n\nAn SSRS service account will be updated to use the local system. A new SSRS catalog database DynamicsAxReportServer and temp database DynamicsAxReportServerTempDB database will be created, and SSRS will be configured to use these two databases. The default catalog database ReportServer and ReportServerTempDBstill exist, but are set to not be used by reporting services. The SSRS service will be updated to use Windows Authentication. An xml configuration file ReportPVMConfiguration.xml will be created in the SSRS bin folder for the report runtime. A report root folder named **Dynamics** and a new security role named **DynamicsBrowser** will be created. Both AOS Web application AppPool identity and batch service account will be added to this custom role. Note that during deployment, the report folder will be deleted and then recreated. Therefore all the previously deployed reports will be deleted from the SSRS server.  After you reinstall the reporting extension, you must redeploy the reports.  \n\n\n\n","nodes":[{"pos":[4,672],"embed":true,"content":"# required metadata\n\ntitle: Patch SQL Server Reporting Services in a one-box environment\ndescription: Apply SSRS hotfixes to a one-box development environment. \nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 23661\nms.assetid: 744bd1dc-d109-40df-a5dd-9db8982523a6\nms.search.region: Global\n# ms.search.industry: \nms.author: shailesn\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n","nodes":[{"content":"Patch SQL Server Reporting Services in a one-box environment","nodes":[{"pos":[0,60],"content":"Patch SQL Server Reporting Services in a one-box environment","nodes":[{"content":"Patch SQL Server Reporting Services in a one-box environment","pos":[0,60]}]}],"path":["title"]},{"content":"Apply SSRS hotfixes to a one-box development environment.","nodes":[{"pos":[0,57],"content":"Apply SSRS hotfixes to a one-box development environment.","nodes":[{"content":"Apply SSRS hotfixes to a one-box development environment.","pos":[0,57]}]}],"path":["description"]}],"header":"# required metadata\n","yml":true},{"pos":[680,740],"content":"Patch SQL Server Reporting Services in a one-box environment","linkify":"Patch SQL Server Reporting Services in a one-box environment","nodes":[{"content":"Patch SQL Server Reporting Services in a one-box environment","pos":[0,60]}]},{"content":"The following procedure is for one-box development environments only.","pos":[786,855]},{"pos":[857,884],"content":"Patch the Reporting Service","linkify":"Patch the Reporting Service","nodes":[{"content":"Patch the Reporting Service","pos":[0,27]}]},{"content":"The following procedure is for one-box development environments only.","pos":[914,983]},{"content":"Download the patch .zip file from Lifecycle Services (LCS).","pos":[989,1048]},{"content":"If there are any font files in the Reporting Service patch’s data folder, install these to the machine where SQL Server Reporting Services (SSRS) is running.","pos":[1053,1210]},{"content":"For more information about installing fonts on windows, see <bpt id=\"p1\">&lt;</bpt>http://www.microsoft.com/en-us/Typography/TrueTypeInstall.aspx<ept id=\"p1\">&gt;</ept>.","pos":[1211,1336],"source":" For more information about installing fonts on windows, see <http://www.microsoft.com/en-us/Typography/TrueTypeInstall.aspx>."},{"content":"Any fonts that have already been installed do not need to be installed again.","pos":[1338,1415]},{"content":"Copy the files in the Reporting Services patch scripts folder to the Report plug-in folder located under C:<ph id=\"ph1\">\\\\</ph>Packages<ph id=\"ph2\">\\\\</ph>Plugins<ph id=\"ph3\">\\\\</ph>AxReportVmRoleStartupTask.","pos":[1420,1574],"source":"Copy the files in the Reporting Services patch scripts folder to the Report plug-in folder located under C:\\\\Packages\\\\Plugins\\\\AxReportVmRoleStartupTask."},{"content":"Change the directory to the Report plug-in folder where you stored the script files.","pos":[1579,1663]},{"content":"Using one of the methods listed below, replace the old instance of reporting extensions.","pos":[1668,1756]},{"content":"Remove/reinstall the reporting extension.","pos":[1765,1806]},{"content":"The remove/reinstall option requires that redeploy all reports after you have finished the reinstallation..","pos":[1807,1914]},{"content":"Manually copy binaries to the sql server binary folder.","pos":[1923,1978]},{"content":"If you choose to manually copy the files, then you do not need to redeploy reports.","pos":[1979,2062]},{"pos":[2067,2107],"content":"Remove/reinstall the reporting extension","linkify":"Remove/reinstall the reporting extension","nodes":[{"content":"Remove/reinstall the reporting extension","pos":[0,40]}]},{"content":"Complete the following procedure as a user in the administrator group for the machine where SSRS is running.","pos":[2108,2216]},{"content":"Using Windows PowerShell, remove the Dynamics SSRS extension by running the following script:","pos":[2222,2315]},{"content":"PowerShell .<ph id=\"ph1\">\\\\</ph>DeploySsrsExtension.ps1 –UninstallOnly","pos":[2324,2376],"source":"PowerShell .\\\\DeploySsrsExtension.ps1 –UninstallOnly"},{"content":"In PowerShell, reinstall the Dynamics SSRS extension by running the following script:","pos":[2381,2466]},{"content":"PowerShell .<ph id=\"ph1\">\\\\</ph>DeploySsrsExtension.ps1","pos":[2475,2512],"source":"PowerShell .\\\\DeploySsrsExtension.ps1"},{"content":"Removing the reporting extension removes all the reports.","pos":[2517,2574]},{"content":"If you have removed and then reinstalled the reporting extension, it is necessary to re-deploy the reports by running the following script:","pos":[2575,2714]},{"content":"Powershell .<ph id=\"ph1\">\\\\</ph>DeployAllReportsToSsrs.ps1","pos":[2723,2763],"source":"Powershell .\\\\DeployAllReportsToSsrs.ps1"},{"content":"This task will take 20 to 30 minutes to complete.","pos":[2768,2817]},{"pos":[2822,2876],"content":"Manually copy binaries to the SQL Server binary folder","linkify":"Manually copy binaries to the SQL Server binary folder","nodes":[{"content":"Manually copy binaries to the SQL Server binary folder","pos":[0,54]}]},{"content":"Stop SQL Server Reporting Services.","pos":[2881,2916]},{"content":"This can be done either from the <bpt id=\"p1\">**</bpt>Services management<ept id=\"p1\">**</ept> console or from the <bpt id=\"p2\">**</bpt>Reporting Services Configuration Manager<ept id=\"p2\">**</ept>.","pos":[2917,3039],"source":" This can be done either from the **Services management** console or from the **Reporting Services Configuration Manager**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Configuration<ph id=\"ph2\">\\_</ph>RSHotfix<ept id=\"p1\">](./media/configuration_rshotfix.png)](./media/configuration_rshotfix.png)</ept>","pos":[3040,3140],"source":"[![Configuration\\_RSHotfix](./media/configuration_rshotfix.png)](./media/configuration_rshotfix.png)"},{"content":"Find the SQL Server Reporting Services binary folder.","pos":[3145,3198]},{"content":"This folder is usually located at C:<ph id=\"ph1\">\\\\</ph>Program Files<ph id=\"ph2\">\\\\</ph>Microsoft SQL Server<ph id=\"ph3\">\\\\</ph>MSRS11.MSSQLSERVER<ph id=\"ph4\">\\\\</ph>Reporting Services<ph id=\"ph5\">\\\\</ph>ReportServer<ph id=\"ph6\">\\\\</ph>bin.","pos":[3199,3332],"source":" This folder is usually located at C:\\\\Program Files\\\\Microsoft SQL Server\\\\MSRS11.MSSQLSERVER\\\\Reporting Services\\\\ReportServer\\\\bin."},{"content":"If any of the following files are in the patch, copy them to the SQL Server Reporting Services bin folder.* *","pos":[3337,3446]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Patches can either be full patches, which would contain all of the files used by the service, or incremental patches, which contain only the files that have changed.","pos":[3448,3623],"source":"**Note:** Patches can either be full patches, which would contain all of the files used by the service, or incremental patches, which contain only the files that have changed."},{"content":"If you have an incremental patch, then some files may not be included.","pos":[3624,3694]},{"content":"Files not included in the patch do not need to be replaced.","pos":[3695,3754]},{"content":"Microsoft.Dynamics.AX.Framework.Services.Platform.Client.dll","pos":[3760,3820]},{"content":"Microsoft.Dynamics.Framework.ReportsExtensions.dll","pos":[3825,3875]},{"content":"Microsoft.Dynamics.Framework.Reports.dll","pos":[3880,3920]},{"content":"Microsoft.Dynamics.ApplicationPlatform.SSRSReportRuntime.Instrumentation.dll","pos":[3925,4001]},{"content":"Microsoft.Dynamics.ApplicationPlatform.SSRSReportRuntime.man","pos":[4006,4066]},{"content":"Microsoft.Dynamics.Platform.Integration.ClientSdk.Abstraction.dll","pos":[4071,4136]},{"content":"Microsoft.Dynamics.AX.Framework.Reports.Shared.dll","pos":[4141,4191]},{"content":"Microsoft.Dynamics.AX.Framework.EncryptionEngine.dll","pos":[4196,4248]},{"content":"Microsoft.Dynamics.AX.Framework.Utilities.dll","pos":[4253,4298]},{"content":"Microsoft.Dynamics.ApplicationSuite.Reporting.BusinessLogic.dll","pos":[4303,4366]},{"content":"Microsoft.Dynamics.ApplicationPlatform.Environment.dll","pos":[4371,4425]},{"content":"Microsoft.Dynamics.AX.ReportConfiguration.axc","pos":[4430,4475]},{"content":"Microsoft.WindowsAzure.ServiceRuntime.dll","pos":[4480,4521]},{"content":"Microsoft.IdentityModel.dll","pos":[4526,4553]},{"content":"msshrtmi.dll","pos":[4558,4570]},{"content":"Restart SQL Server Reporting Services.","pos":[4572,4610]},{"pos":[4615,4645],"content":"Reporting service installation","linkify":"Reporting service installation","nodes":[{"content":"Reporting service installation","pos":[0,30]}]},{"content":"The following changes are made with the reporting service installation: The following files will be copied into Reporting service bin folder (C:<ph id=\"ph1\">\\\\</ph>Program Files<ph id=\"ph2\">\\\\</ph>Microsoft SQL Server<ph id=\"ph3\">\\\\</ph>MSRS11.MSSQLSERVER<ph id=\"ph4\">\\\\</ph>Reporting Services<ph id=\"ph5\">\\\\</ph>ReportServer<ph id=\"ph6\">\\\\</ph>bin), and the corresponding SSRS config files will be updated so that SSRS is aware of the extension.","pos":[4646,4984],"source":"The following changes are made with the reporting service installation: The following files will be copied into Reporting service bin folder (C:\\\\Program Files\\\\Microsoft SQL Server\\\\MSRS11.MSSQLSERVER\\\\Reporting Services\\\\ReportServer\\\\bin), and the corresponding SSRS config files will be updated so that SSRS is aware of the extension."},{"content":"Dynamics.AX.Framework.Services.Platform.Client.dll","pos":[4990,5040]},{"content":"Dynamics.Framework.ReportsExtensions.dll","pos":[5045,5085]},{"content":"Dynamics.Framework.Reports.dll","pos":[5090,5120]},{"content":"Dynamics.ApplicationPlatform.SSRSReportRuntime.Instrumentation.dll","pos":[5125,5191]},{"content":"Dynamics.ApplicationPlatform.SSRSReportRuntime.man","pos":[5196,5246]},{"content":"Dynamics.Platform.Integration.ClientSdk.Abstraction.dll","pos":[5251,5306]},{"content":"Dynamics.AX.Framework.Reports.Shared.dll","pos":[5311,5351]},{"content":"Dynamics.AX.Framework.EncryptionEngine.dll","pos":[5356,5398]},{"content":"Dynamics.AX.Framework.Utilities.dll","pos":[5403,5438]},{"content":"Dynamics.ApplicationSuite.Reporting.BusinessLogic.dll","pos":[5443,5496]},{"content":"Dynamics.ApplicationPlatform.Environment.dll","pos":[5501,5545]},{"content":"Dynamics.AX.ReportConfiguration.axc","pos":[5550,5585]},{"content":"WindowsAzure.ServiceRuntime.dll","pos":[5590,5621]},{"content":"IdentityModel.dll","pos":[5626,5643]},{"content":"msshrtmi.dll","pos":[5648,5660]},{"content":"An SSRS service account will be updated to use the local system.","pos":[5662,5726]},{"content":"A new SSRS catalog database DynamicsAxReportServer and temp database DynamicsAxReportServerTempDB database will be created, and SSRS will be configured to use these two databases.","pos":[5727,5906]},{"content":"The default catalog database ReportServer and ReportServerTempDBstill exist, but are set to not be used by reporting services.","pos":[5907,6033]},{"content":"The SSRS service will be updated to use Windows Authentication.","pos":[6034,6097]},{"content":"An xml configuration file ReportPVMConfiguration.xml will be created in the SSRS bin folder for the report runtime.","pos":[6098,6213]},{"content":"A report root folder named <bpt id=\"p1\">**</bpt>Dynamics<ept id=\"p1\">**</ept> and a new security role named <bpt id=\"p2\">**</bpt>DynamicsBrowser<ept id=\"p2\">**</ept> will be created.","pos":[6214,6320],"source":" A report root folder named **Dynamics** and a new security role named **DynamicsBrowser** will be created."},{"content":"Both AOS Web application AppPool identity and batch service account will be added to this custom role.","pos":[6321,6423]},{"content":"Note that during deployment, the report folder will be deleted and then recreated.","pos":[6424,6506]},{"content":"Therefore all the previously deployed reports will be deleted from the SSRS server.","pos":[6507,6590]},{"content":"After you reinstall the reporting extension, you must redeploy the reports.","pos":[6592,6667]}]}