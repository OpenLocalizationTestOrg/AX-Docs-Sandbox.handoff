{"content":"---\n# required metadata\n\ntitle: POS offline functionality\ndescription: This article provides information about offline mode for Retail Modern POS, in which POS devices automatically switch from the channel database to the offline database if the retail server is unavailable. This article also includes general setup information for offline mode and explains the data synchronization that occurs between the offline database and the channel database.\nauthor: josaw1\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: IT Pro\n# ms.devlang: \nms.reviewer: annbe\nms.search.scope: AX 7.0.0, Operations, Core, Retail\n# ms.tgt_pltfrm: \nms.custom: 27041\nms.assetid: 20b51874-8912-40cf-9296-864df707315a\nms.search.region: Global\nms.search.industry: Retail\nms.author: josaw\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n\n\n---\n\n# POS offline functionality\n\n[!include[banner](includes/banner.md)]\n\n\nThis article provides information about offline mode for Retail Modern POS, in which POS devices automatically switch from the channel database to the offline database if the retail server is unavailable. This article also includes general setup information for offline mode and explains the data synchronization that occurs between the offline database and the channel database.\n\nOverview\n--------\n\nIn Retail Modern POS, a point of sale (POS) device goes into offline mode whenever the retail server is unavailable. Therefore, if the connection with the retail server is lost, Retail Modern POS automatically switches to the offline database. During a sales transaction, if a data request doesn't succeed within the time-out interval that is configured in the offline profile, Retail Modern POS automatically switches to the offline database and continues the sales transaction. While POS device is in offline mode, Retail Modern POS tries to reconnect to the retail server after the reconnection attempt interval that is configured in the offline profile. This reconnection attempt occurs only at the beginning of a transaction.\n\n### Determining the connection mode of Retail Modern POS\n\nThe status header in Retail Modern POS indicates the current connection status, and the **Connection status** window shows the status of the last attempt to sync with the offline database. [![Connection status](./media/status.png)](./media/status.png)\n\n### Creating a button to manually switch between online and offline modes\n\nYou can add a button to Retail Modern POS to manually switch between online and offline modes. Create a button for POS operation **917 – Database connection status**. The name of this button is **Disconnect** when Retail Modern POS is connected to the retail server and **Connect** when it is disconnected. You can use this button to view the connection, and to disconnect from the retail server or connect to it. [![Disconnect button in Retail Modern POS](./media/details-1024x537.png)](./media/details.png)\n\n## Setup\nTo enable offline support for a POS device (register), set the **Support offline** option to **Yes** on the **Register** page. A new channel database entity is created and added to the store's channel data group. Then run all the required distribution schedules to generate the data packages for the offline database. Next, install the offline version of Retail Modern POS. The installation process creates the offline database. Additionally, install Microsoft SQL Server 2014 Express if it is required. Offline data synchronization starts after the first sign-in to Retail Modern POS.\n\n## Data synchronization\nThe Retail scheduler is used to send master data to the offline database. By default, when a distribution schedule is run, data changes are sent to both the channel database and the offline database. Retail Modern POS includes the async sync library, which downloads any available data packages and inserts them into the offline database. If any transactions are created offline, Retail Modern POS uploads them to the retail server, so that they can be inserted into the channel database. Offline data synchronization can occur only if Retail Modern POS is running. [![Offline synchronization](./media/offline-sync-1024x521.png)](./media/offline-sync.png)\n\n\n\n","nodes":[{"content":"POS offline functionality","nodes":[{"pos":[0,25],"content":"POS offline functionality","nodes":[{"content":"POS offline functionality","pos":[0,25]}]}],"pos":[31,57],"yaml":true},{"content":"This article provides information about offline mode for Retail Modern POS, in which POS devices automatically switch from the channel database to the offline database if the retail server is unavailable. This article also includes general setup information for offline mode and explains the data synchronization that occurs between the offline database and the channel database.","nodes":[{"pos":[0,379],"content":"This article provides information about offline mode for Retail Modern POS, in which POS devices automatically switch from the channel database to the offline database if the retail server is unavailable. This article also includes general setup information for offline mode and explains the data synchronization that occurs between the offline database and the channel database.","nodes":[{"content":"This article provides information about offline mode for Retail Modern POS, in which POS devices automatically switch from the channel database to the offline database if the retail server is unavailable. This article also includes general setup information for offline mode and explains the data synchronization that occurs between the offline database and the channel database.","pos":[0,379],"nodes":[{"content":"This article provides information about offline mode for Retail Modern POS, in which POS devices automatically switch from the channel database to the offline database if the retail server is unavailable.","pos":[0,204]},{"content":"This article also includes general setup information for offline mode and explains the data synchronization that occurs between the offline database and the channel database.","pos":[205,379]}]}]}],"pos":[70,450],"yaml":true},{"pos":[983,1008],"content":"POS offline functionality","linkify":"POS offline functionality","nodes":[{"content":"POS offline functionality","pos":[0,25]}]},{"content":"This article provides information about offline mode for Retail Modern POS, in which POS devices automatically switch from the channel database to the offline database if the retail server is unavailable.","pos":[1051,1255]},{"content":"This article also includes general setup information for offline mode and explains the data synchronization that occurs between the offline database and the channel database.","pos":[1256,1430]},{"pos":[1432,1440],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"In Retail Modern POS, a point of sale (POS) device goes into offline mode whenever the retail server is unavailable.","pos":[1451,1567]},{"content":"Therefore, if the connection with the retail server is lost, Retail Modern POS automatically switches to the offline database.","pos":[1568,1694]},{"content":"During a sales transaction, if a data request doesn't succeed within the time-out interval that is configured in the offline profile, Retail Modern POS automatically switches to the offline database and continues the sales transaction.","pos":[1695,1930]},{"content":"While POS device is in offline mode, Retail Modern POS tries to reconnect to the retail server after the reconnection attempt interval that is configured in the offline profile.","pos":[1931,2108]},{"content":"This reconnection attempt occurs only at the beginning of a transaction.","pos":[2109,2181]},{"pos":[2187,2239],"content":"Determining the connection mode of Retail Modern POS","linkify":"Determining the connection mode of Retail Modern POS","nodes":[{"content":"Determining the connection mode of Retail Modern POS","pos":[0,52]}]},{"content":"The status header in Retail Modern POS indicates the current connection status, and the <bpt id=\"p1\">**</bpt>Connection status<ept id=\"p1\">**</ept> window shows the status of the last attempt to sync with the offline database.","pos":[2241,2429],"source":"The status header in Retail Modern POS indicates the current connection status, and the **Connection status** window shows the status of the last attempt to sync with the offline database."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Connection status<ept id=\"p1\">](./media/status.png)](./media/status.png)</ept>","pos":[2430,2492],"source":"[![Connection status](./media/status.png)](./media/status.png)"},{"pos":[2498,2567],"content":"Creating a button to manually switch between online and offline modes","linkify":"Creating a button to manually switch between online and offline modes","nodes":[{"content":"Creating a button to manually switch between online and offline modes","pos":[0,69]}]},{"content":"You can add a button to Retail Modern POS to manually switch between online and offline modes.","pos":[2569,2663]},{"content":"Create a button for POS operation <bpt id=\"p1\">**</bpt>917 – Database connection status<ept id=\"p1\">**</ept>.","pos":[2664,2735],"source":" Create a button for POS operation **917 – Database connection status**."},{"content":"The name of this button is <bpt id=\"p1\">**</bpt>Disconnect<ept id=\"p1\">**</ept> when Retail Modern POS is connected to the retail server and <bpt id=\"p2\">**</bpt>Connect<ept id=\"p2\">**</ept> when it is disconnected.","pos":[2736,2875],"source":" The name of this button is **Disconnect** when Retail Modern POS is connected to the retail server and **Connect** when it is disconnected."},{"content":"You can use this button to view the connection, and to disconnect from the retail server or connect to it.","pos":[2876,2982]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Disconnect button in Retail Modern POS<ept id=\"p1\">](./media/details-1024x537.png)](./media/details.png)</ept>","pos":[2983,3077],"source":"[![Disconnect button in Retail Modern POS](./media/details-1024x537.png)](./media/details.png)"},{"pos":[3082,3087],"content":"Setup","linkify":"Setup","nodes":[{"content":"Setup","pos":[0,5]}]},{"content":"To enable offline support for a POS device (register), set the <bpt id=\"p1\">**</bpt>Support offline<ept id=\"p1\">**</ept> option to <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept> on the <bpt id=\"p3\">**</bpt>Register<ept id=\"p3\">**</ept> page.","pos":[3088,3214],"source":"To enable offline support for a POS device (register), set the **Support offline** option to **Yes** on the **Register** page."},{"content":"A new channel database entity is created and added to the store's channel data group.","pos":[3215,3300]},{"content":"Then run all the required distribution schedules to generate the data packages for the offline database.","pos":[3301,3405]},{"content":"Next, install the offline version of Retail Modern POS.","pos":[3406,3461]},{"content":"The installation process creates the offline database.","pos":[3462,3516]},{"content":"Additionally, install Microsoft SQL Server 2014 Express if it is required.","pos":[3517,3591]},{"content":"Offline data synchronization starts after the first sign-in to Retail Modern POS.","pos":[3592,3673]},{"pos":[3678,3698],"content":"Data synchronization","linkify":"Data synchronization","nodes":[{"content":"Data synchronization","pos":[0,20]}]},{"content":"The Retail scheduler is used to send master data to the offline database.","pos":[3699,3772]},{"content":"By default, when a distribution schedule is run, data changes are sent to both the channel database and the offline database.","pos":[3773,3898]},{"content":"Retail Modern POS includes the async sync library, which downloads any available data packages and inserts them into the offline database.","pos":[3899,4037]},{"content":"If any transactions are created offline, Retail Modern POS uploads them to the retail server, so that they can be inserted into the channel database.","pos":[4038,4187]},{"content":"Offline data synchronization can occur only if Retail Modern POS is running.","pos":[4188,4264]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Offline synchronization<ept id=\"p1\">](./media/offline-sync-1024x521.png)](./media/offline-sync.png)</ept>","pos":[4265,4354],"source":"[![Offline synchronization](./media/offline-sync-1024x521.png)](./media/offline-sync.png)"}]}