{"content":"---\n# required metadata\n\ntitle: Deploy a high-availability environment on Azure (AX 2012)\ndescription: This article explains how to deploy a high availability environment on Microsoft Azure. To deploy the environment, you’ll use the Cloud-hosted environments tool in Microsoft Dynamics Lifecycle Services. \nauthor: kfend\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: dynamics-ax-2012 \nms.service: \nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: AX 2012\n# ms.tgt_pltfrm: \nms.custom: 21231\nms.assetid: c53d7b21-1638-41a8-826b-89105d2e51e8\nms.search.region: Global\n# ms.search.industry: \nms.author: kfend\nms.search.validFrom: \nms.dyn365.ops.version: 2012\n\n---\n\n# Deploy a high-availability environment on Azure (AX 2012)\n\n[!include[banner](../../includes/banner.md)]\n\n\nThis article explains how to deploy a high availability environment on Microsoft Azure. To deploy the environment, you’ll use the Cloud-hosted environments tool in Microsoft Dynamics Lifecycle Services. \n\nPrerequisites\n-------------\n\nBefore you complete the procedures in this article, make sure that the following prerequisites are in place.\n\n|                |                                                                                                                                                                 |\n|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Category**   | **Prerequisite**                                                                                                                                                |\n| Required tasks | [Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure](plan-2012-r3-deployment-azure.md) |\n\n \n\n## 1. Use Azure premium storage\nAzure Premium Storage delivers high-performance, low-latency disk support for I/O intensive workloads running on Azure virtual machines (VMs). With Premium Storage, your applications can have up to 32 TB of storage per VM, achieve 50,000 IOPS (input/output operations per second) per VM, and have extremely low latencies for read operations. Premium Storage is recommended for running AX 2012 R3 in Azure to ensure predictable performance. For more information about using Premium Storage, see [Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure](plan-2012-r3-deployment-azure.md).\n\n## 2. Log on to Lifecycle Services\nMicrosoft Dynamics Lifecycle Services provides a cloud-based collaborative workspace that customers and partners can use to manage Microsoft Dynamics AX projects. You’ll use this website to deploy AX 2012 R3 on Azure. Lifecycle Services is available to customers and partners as part of their support plans. You can access it with your CustomerSource or PartnerSource credentials. [Log on to Lifecycle Services](https://lcs.dynamics.com/en/)\n\n## 3. Create a project\nAfter you log in to Lifecycle Services, open an existing project, or create a new project. Projects are the key organizer of your experience in Lifecycle Services. The methodology associated with a project determines which phases and tasks are included in the project by default.\n\n## 4. Connect the project to your Azure subscription\nConnect the Lifecycle Services project to your Azure subscription. This will enable Lifecycle Services to deploy an AX 2012 R3 environment to the subscription. To connect the project to your Azure subscription, complete the following procedure. Keep in mind that a project can be connected to only one Azure subscription. If you have multiple Azure subscriptions, be sure to identify which subscription you want to use before you complete this procedure.\n\n1.  Click **Cloud-hosted environments**. The **Cloud-hosted environments** page is displayed.\n2.  The **Microsoft Azure setup** panel is displayed on the side of the screen. If it is not displayed, click **Microsoft Azure settings**.\n3.  Enter your Azure subscription ID. If you need to find your subscription ID, complete the following steps:\n    1.  Open another instance of your browser.\n    2.  Log on to the Azure management portal.\n    3.  In the navigation pane on the left, click **Settings**. (You may have to scroll to the bottom of the navigation pane to see the **Settings** link.) The **Settings** page is displayed.\n    4.  Copy your subscription ID, and then paste it into the **Azure subscription ID** field in Lifecycle Services (which is currently displayed in another browser instance).\n\n4.  Click **Next**.\n5.  Click **Download** to download a management certificate. This management certificate enables Lifecycle Services to communicate with Azure on your behalf. By default, the management certificate is saved to the Downloads folder on your computer and is named LifecycleServicesDeployment.cer.\n6.  Upload the management certificate to Azure. To do so, complete the following steps:\n    1.  Open another instance of your browser. (Or, go to the browser instance that you may have opened in step 3.)\n    2.  Log on to the Azure management portal.\n    3.  In the navigation pane on the left, click **Settings**. The **Settings** page is displayed.\n    4.  Click **Management certificates**.\n    5.  Click **Upload** at the bottom of the page.\n    6.  In the **Upload a management certificate** window, browse to the management certificate that you downloaded in step 5. Then click the check mark.\n\n7.  Go back to the browser that displays the **Microsoft Azure setup** panel in Lifecycle Services. Click **Next**.\n8.  Select the region that is closest to you. The AX 2012 R3 environment will be deployed to a datacenter in this region.\n9.  Click **Connect**. The project is now connected to the Azure subscription that you specified. If you discover that you connected the project to the wrong Azure subscription (that is, assuming you have multiple Azure subscriptions), you’ll need to delete the project, create a new project, and then repeat this procedure to connect the new project to the appropriate Azure subscription.\n\n## 5. Connect your corporate network to the Azure virtual network\nThe following sections provide information about how to configure the Azure virtual network and domain so that your corporate users can access AX 2012 R3. It is recommended that if you require login to these systems using corporate credentials that you set up the connectivity before you deploy the environment. This will require using Azure networking capabilities to extend you corporate network to one or more Azure virtual networks. It will additionally require you to deploy an Active Directory into the Azure virtual network, which will be set up for trust to your corporate Active Directory. This Active Directory will be used to manage VM-related resources in the Azure virtual network. This Active Directory will not be used for single sign-on, and should not be set up to sync the corporate directory. Single sign-on capabilities will be provided through the domain trust.\n\n### Create a site-to-site VPN connection\n\nTo enable corporate users to access resources on the virtual machines in the Azure virtual network, you’ll need to create a site-to-site VPN connection between the Azure virtual network and your on-premises, corporate network. For information about how to do this, see:\n\n-   [Virtual network overview](https://msdn.microsoft.com/en-us/library/windowsazure/jj156007.aspx)\n-   [Virtual network configuration tasks](https://msdn.microsoft.com/en-us/library/jj156206.aspx)\n-   [Set up a simulated hybrid cloud environment for testing](http://azure.microsoft.com/en-us/documentation/articles/virtual-networks-setup-simulated-hybrid-cloud-environment-testing/)\n-   [Site-to-site VPN in Azure virtual network using Windows Server 2012 Routing and Remote Access Service (RRAS)](https://msdn.microsoft.com/library/dn636917.aspx)\n-   [Configure a virtual network gateway in the management portal](https://msdn.microsoft.com/en-us/library/azure/jj156210.aspx)\n\n### Create an active directory in Azure\n\nAn Active Directory is required in the Azure virtual network. An Active Directory can be deployed to the Azure virtual network. Please follow [Guidelines for Deploying Windows Server Active Directory on Azure Virtual Machines](https://msdn.microsoft.com/en-us/library/azure/jj156090.aspx). Please note that Active Directory Federation Services is not presently supported with AX 2012 R3. If you are providing the Active Directory, you will need to create the following service accounts within it that can be used by LCS deployment services when you deploy the environment.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td><strong>Account</strong></td>\n<td><strong>Description</strong></td>\n</tr>\n<tr class=\"even\">\n<td>&lt;DomainName&gt;AXServiceUser</td>\n<td>AX 2012 R3 service account</td>\n</tr>\n<tr class=\"odd\">\n<td>&lt;DomainName&gt;AOSServiceUser</td>\n<td>AOS service account</td>\n</tr>\n<tr class=\"even\">\n<td>&lt;DomainName&gt;BCProxyUser</td>\n<td>Business Connector proxy account</td>\n</tr>\n<tr class=\"odd\">\n<td>&lt;DomainName&gt;SPServiceUser</td>\n<td>SharePoint service account</td>\n</tr>\n<tr class=\"even\">\n<td>&lt;DomainName&gt;SqlServiceUser</td>\n<td>SQL Server service account</td>\n</tr>\n<tr class=\"odd\">\n<td>&lt;DomainName&gt;RetailServiceUser</td>\n<td>Retail service account</td>\n</tr>\n<tr class=\"even\">\n<td>&lt;DomainName&gt;DynamicsInstallUser</td>\n<td>AX 2012 R3 installation account<strong>Note:</strong> This account must have permission to join computers to the domain. To give this account permission, complete the following steps:\n<ol>\n<li>Click <strong>Start</strong>, click <strong>Run</strong>, type dsa.msc, and then click <strong>OK</strong>.</li>\n<li>In the task pane, expand the domain node.</li>\n<li>Locate and right-click the organizational unit that you want to modify, and then click <strong>Delegate Control</strong>.</li>\n<li>In the <strong>Delegation of Control</strong> Wizard, click <strong>Next</strong>.</li>\n<li>Click <strong>Add</strong> to add a specific user or a specific group to the list, and then click <strong>Next</strong>.</li>\n<li>In the <strong>Tasks to Delegate</strong> page, click <strong>Create a custom task to delegate</strong>, and then click <strong>Next</strong>.</li>\n<li>Click <strong>Only the following objects in the folder</strong>, and then from the list, click to select the <strong>Computer objects</strong> check box. Then, select the check boxes below the list, <strong>Create selected objects in this folder</strong> and <strong>Delete selected objects in this folder</strong>.</li>\n<li>Click <strong>Next</strong>.</li>\n<li>In the <strong>Permissions</strong> list, click to select the following check boxes:\n<ul>\n<li><strong>Reset Password</strong></li>\n<li><strong>Read and write Account Restrictions</strong></li>\n<li><strong>Validated write to DNS host name</strong></li>\n<li><strong>Validated write to service principal name</strong></li>\n</ul></li>\n<li>Click <strong>Next</strong>, and then click <strong>Finish</strong>.</li>\n<li>Close the <strong>Active Directory Users and Computers MMC</strong> snap-in.</li>\n</ol></td>\n</tr>\n</tbody>\n</table>\n\nYou will need to provide the passwords for these accounts when you deploy the environment.\n\n### Create a domain trust\n\nTo enable corporate users to access resources on the virtual machines in your Azure domain, you must create an Active Directory trust between the domains. For information about how to create a trust, see [Create a Forest Trust](https://technet.microsoft.com/en-us/library/cc754626.aspx). This process is the same process you would use to create a trust between two on-premises domains.\n\n### Give the Administrators group the right to log on as a batch group\n\nLog in to the Active Directory domain controller and complete the following steps to give the built-in Administrators group the right to log on as a batch job.\n\n1.  Click **Start**, click **All Programs**, and then click **Administrative Tools**.\n2.  In the **Administrative Tools** menu, select **Group Policy Management**.\n3.  In the **Group Policy Management console** tree, click **Forest: &lt;ServerName&gt;**, and then click **Domains**.\n4.  Click the name of your server, expand **Domain Controllers**, right-click **Default Domain Controllers Policy**, and then click **Edit**.\n5.  In the G**roup Policy Management Editor**, click **Default Domain Controllers Policy &lt;ServerName&gt; Policy**, expand **Computer Configuration**, and then click **Policies**.\n6.  In the **Policies** tree, expand **Windows Setting**, and then click **Security Settings**.\n7.  In the **Security Settings** tree, expand **Local Policies**, and then click **User Rights Assignment**.\n8.  In the results pane, scroll to and then click **Log on as a batch job**.\n9.  In the **Log on as a batch job Properties** dialog box, click **Add User or Group**.\n10. In the **Add User or Group** dialog box, click **Browse**.\n11. In the **Select Users, Computers, or Groups** dialog box, type Administrators.\n12. Click **Check Names** to verify that the built-in Administrators account appears, and then click **OK** three times.\n\n### Change the default organizational unit\n\nIf you want virtual machines to be added to Active Directory in a custom organizational unit—versus the default organizational unit—you can change the default organizational unit in your Active Directory prior to starting deployment. For more information, click [here](http://pc-addicts.com/server-2012-change-default-ou/).\n\n## 6. Deploy a high availability environment on Azure\nComplete the following procedure to deploy a high availability environment on Azure.\n\n1.  On the **Cloud-hosted environments** page, click the Add (+) icon.\n2.  In the **Select environment topology** panel, select **High availability**.\n3.  Click **High availability**.\n4.  In the **Environment name** field, enter a name for the environment that will be deployed.\n5.  If you’ve created an estimate for a production environment using the Infrastructure estimator tool in Lifecycle Services, you’ll see the **Estimation** list. Select the estimate from this list. The number and size of virtual machines to be deployed will change based on the selected estimate. For more information about how to create an estimate, see [Infrastructure estimator (Lifecycle Services, LCS)](infrastructure-estimator-lcs.md).\n6.  Click **Advanced settings**.\n7.  To customize domain settings, click **Customize domain settings**. Then use the following table to enter information.\n    <table>\n    <colgroup>\n    <col width=\"50%\" />\n    <col width=\"50%\" />\n    </colgroup>\n    <tbody>\n    <tr class=\"odd\">\n    <td><strong>If you want to:</strong></td>\n    <td><strong>Do this:</strong></td>\n    </tr>\n    <tr class=\"even\">\n    <td>Create a new domain in Azure for the environment</td>\n    <td><ol>\n    <li>Click <strong>New domain</strong>.</li>\n    <li>Enter a name for the domain. By default, the domain is named <em>contoso.com</em>.</li>\n    </ol></td>\n    </tr>\n    <tr class=\"odd\">\n    <td>Add the environment to an existing domain in Azure</td>\n    <td><ol>\n    <li>Click <strong>Existing domain</strong>.</li>\n    <li>Enter the name of the domain. For example, <em>contoso.com</em>.</li>\n    </ol></td>\n    </tr>\n    </tbody>\n    </table>\n\n8.  To customize the service accounts that will be created in the domain, click **Customize service accounts**. Service accounts and/or service account passwords may be specified through the **Advanced Settings** option for a deployment. If neither is provided, default accounts are used and random passwords are selected. Use these features when you want to maintain account naming and password rules for your corporation. Account and password rules:\n    -   A valid service name must be less than 20 characters with no special characters.\n    -   A valid password must be more than 8 characters and contain uppercase letters, lowercase letters, numbers, and at least one of the following characters: \\['@', '!', '=', '\\*'\\] You can’t use common passwords, such as: pass@word1\n\n9.  To select the version of AX 2012 R3 that you want use, click **Supported version**. By default, the AX 2012 R3 CU8 version of this environment will be deployed. If you don’t want to use the CU8 version, select **Dynamics ERP 2012 R3 RTM** from the list.\n10. To customize virtual machine names, click **Customize virtual machine names**. In order to support common IT naming guidelines, the ability to name virtual machines is provided through the **Advanced settings** option on most deployment topologies. In addition to defining the name, a starting index can be selected for each virtual machine type. The index is incremented for each instance of the virtual machine type that is deployed. Virtual machine names must be 13 characters or less. The index is separated from the machine name by a hyphen (-), followed by the index that supports a maximum of 2 digits. Example: ACustomVMName-99 When virtual machine instances are added to an environment after the initial deployment, the deployment service will start incrementing the virtual machine name where it left off. For example, if you deployed four AOS virtual machines with a starting index of 2, then the last AOS instance name will be AOS-6. If you add two more AOS instances, they will be AOS-7 and AOS-8. If one of the virtual machine types in your deployment is customized, then all of the virtual machine names must be customized. This is done to ensure that a long deployment does not occur because a virtual machine name was accidentally missed.\n11. To enter SQL Server configuration options, click **Customize SQL Server configuration**. Select the SQL Server image you want to use, as well as the number and size of disks that will be attached to the SQL Server virtual machines. For more information, see [Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure](plan-2012-r3-deployment-azure.md).\n12. If you have selected to deploy a Remote Desktop Services virtual machine, click **Customize remote desktop services** to specify how your users will access AX 2012 R3 via the web. Select one of the following options:\n    -   **Remote Desktop:** This option enables users to login to a full remote desktop.\n    -   **RemoteApp Programs:** This option enables users to login in to AX 2012 R3 directly, without having the experience of a full desktop window. RemoteApp is enabled by default.\n\n    After the environment has been deployed, the following links are available to you on the **Cloud-hosted environments** page:\n    -   **RDS Web Access certificate**: This is a self-signed certificate that is provided to allow secured access to the RDS Web Access site. Click the link and open this certificate and install it into the **Local Machine** &gt; **Trusted Root Certification Authorities** node before attempting to access the RDS Web Access site. It is recommended that before this environment be placed into a production capacity that you install your own certificate to the RDS cluster.\n    -   **RDS Web Access**: This allows users to gain access to the AX 2012 R3 environment over the web. If you chose the **Remote Desktop** option, users will be offered the ability to login to a full remote desktop. If you chose **RemoteApp Programs**, users will be able to log in directly to AX 2012 R3.\n    -   **RDS Farm Access**: This allows users to gain access to the AX 2012 R3 environment over a VPN connected network. This feature is only available if you have:\n        1.  Joined this AX deployment to a VPN connected corporate domain.\n        2.  Configured the RDS Gateway to accept connections from the VPN connected network.\n\n    **Note:** For both **RDS Web Access** and **RDS Farm Access**, when joining a deployment to an existing Active Directory domain you must add the RDS Farm to your AD/DNS with the IP address of the Internal Load Balancer. See the following steps:\n    1.  Get the name of your RDS Farm: This can be obtained from the RDS Farm Access link in LCS. In this case, it should be **RdsFarm0c0fa75**.\n\n        [![MachineName](./media/machinename-300x165.png)](./media/machinename.png)\n\n    2.  Get the IP of the Internal Load Balancer from the Cloud Service dashboard in Azure Portal. Inspect the RDS machine that has an internal IP next to port **3389**. In the below example, the Internal Load Balancer IP is 10.1.3.4.\n\n        [![IP address](./media/ip-address-144x300.png)](./media/ip-address.png)\n\n    3.  Add the RDS Farm as a Computer in your AD, using the information obtained above.\n\n        [![AddToAD](./media/addtoad-300x113.png)](./media/addtoad.png)\n\n    Failure to do these steps results in the following error when going through RD Web Access: *Remote Desktop can't find the computer \"RdsFarm0c0fa75.contoso.com\". This might mean that \" RdsFarm0c0fa75.contoso.com\" does not belong to the specified network. Verify the computer name and domain that you are trying to connect to.*\n13. To customize virtual network settings, click **Customize virtual network**. Then use the following table to enter information.\n    <table>\n    <colgroup>\n    <col width=\"50%\" />\n    <col width=\"50%\" />\n    </colgroup>\n    <tbody>\n    <tr class=\"odd\">\n    <td><strong>If you want to:</strong></td>\n    <td><strong>Do this:</strong></td>\n    </tr>\n    <tr class=\"even\">\n    <td>Create a new virtual network in Azure for the environment</td>\n    <td><ol>\n    <li>Click <strong>New virtual network</strong>.</li>\n    <li>Enter a name for the virtual network.</li>\n    </ol></td>\n    </tr>\n    <tr class=\"odd\">\n    <td>Add the environment to an existing virtual network in Azure</td>\n    <td><ol>\n    <li>Click <strong>Existing virtual network</strong>.</li>\n    <li>In the <strong>Virtual network name</strong> field, select the name of the existing virtual network that you want to use.\n    <table>\n    <colgroup>\n    <col width=\"100%\" />\n    </colgroup>\n    <tbody>\n    <tr class=\"odd\">\n    <td><strong>Note</strong></td>\n    </tr>\n    <tr class=\"even\">\n    <td>To view details about a virtual network, complete the following steps:\n    <ol>\n    <li>Log on to the <a href=\"https://manage.windowsazure.com/\">Azure management portal</a>.</li>\n    <li>In the navigation pane on the left, click <strong>Networks</strong>.</li>\n    <li>Click the name of the virtual network that you want to view details about.</li>\n    <li>Click <strong>Configure</strong>. Details about the virtual network are listed on the page.</li>\n    </ol></td>\n    </tr>\n    </tbody>\n    </table></li>\n    <li>In the <strong>Address space</strong> field, select the appropriate address space for your deployment.</li>\n    <li>In the <strong>Application subnet name</strong> field, select the appropriate address space for application VMs.</li>\n    <li>In the <strong>SQL Server High Availability subnet name</strong> field, select the appropriate address space for SQL Server VMs. <strong>Note</strong> Note the following:\n    <ul>\n    <li>You can select the same address space that you selected in the <strong>Application subnet name</strong> field.</li>\n    <li>This subnet must have 4 IP addresses available in it.</li>\n    </ul></li>\n    <li>In the <strong>Active Directory subnet</strong> field, do the following:\n    <ul>\n    <li>If you chose to create a <strong>new domain</strong> in Azure for your environment: Enter an IP address and subnet mask for the new Active Directory subnet. Lifecycle Services will create this subnet for you.</li>\n    <li>If you chose to add the environment to an <strong>existing domain</strong> in Azure: Enter the IP address of the existing Active Directory subnet. <strong>Note</strong> : This subnet must have 3 IP addresses available in it.</li>\n    </ul></li>\n    </ol></td>\n    </tr>\n    </tbody>\n    </table>\n\n14. Click **Done**. The **Deploy environment** panel is redisplayed.\n15. The number and size of each virtual machine that will be deployed is listed. Change the number and size of the virtual machines, as needed.\n    -   For information about the software installed on each virtual machine in this environment, see the High availability environment section in the article, [Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure](plan-2012-r3-deployment-azure.md).\n    -   For sizing and pricing details about virtual machines, see [Virtual machines pricing details](http://azure.microsoft.com/en-us/pricing/details/virtual-machines/).\n\n16. Click **Software License Terms** to review the licensing terms and conditions. Then select the check box to indicate that you agree to the terms.\n17. Click **Next**.\n18. Click **Deploy to confirm** that you’re ready to deploy the environment. The deployment may take a few hours to complete. When the deployment is done, the **Deployment Status** column on the **Cloud-hosted environments** page will display **Deployed**. (You may need to refresh your browser to see this.) If the deployment fails, you may see an error message right away. If the error occurs later in the deployment process, error details will be displayed in the details pane on the right-side of the page.\n\n## 7. Prepare AX 2012 R3 for use\nNow that the environment has been deployed on Azure, you must set up and configure AX 2012 R3 for use. See the following sections for more information.\n\n### Log on to an AOS virtual machine\n\nLog on to an AOS- virtual machine using the DynamicsInstallUser account. For instructions, see the “How do I log on to a virtual machine?” section of the [Manage your Microsoft Dynamics AX 2012 R3 deployment on Azure](manage-2012-r3-deployment-azure.md) article.\n\n### Compile AX 2012 R3\n\nCompile AX 2012 R3 by using AxBuild.exe. For instructions, see [AxBuild.exe for Parallel Compile on AOS of X++ to p-code](https://technet.microsoft.com/en-us/library/dn528954.aspx).\n\n### Initialize AX 2012 R3\n\nOpen the AX 2012 R3 client and complete the initialization checklists. For instructions, see [Initialization checklists](https://technet.microsoft.com/en-us/library/aa497061.aspx).\n\n### Install sample data\n\nIf you want sample data installed in your environment, complete the following steps.\n\n1.  Log on to a SQL-&lt;GUID&gt; virtual machine. Log on to the virtual machine using the DynamicsInstallUser account. For instructions, see the “How do I log on to a virtual machine?” section of the [Manage your Microsoft Dynamics AX 2012 R3 deployment on Azure](manage-2012-r3-deployment-azure.md) article.\n2.  Go to the following location on the virtual machine: F:TestTransferTool\n3.  Install the Test Data Transfer Tool. For instructions, see [Install the Test Data Transfer Tool (beta) for Microsoft Dynamics AX](install-test-data-transfer-tool-beta.md).\n4.  Open a command prompt and navigate to the following location: C:Program Files (x86)Microsoft Dynamics AX 2012 Test Data Transfer Tool (Beta)\n5.  Run the following command: dp.exe import F:DemoData MicrosoftDynamicsAx\n\n**Note:** The sample data includes trial license keys for AX 2012 R3. If you choose not to install the sample data, you can download trial license keys—for development or testing purposes—from [CustomerSource](https://mbs.microsoft.com/downloads/customer/AX/AXDemoTools/MicrosoftDynamicsAX2012R2v4DemoLicense.zip) or [MSDN](https://msdn.microsoft.com/en-us/subscriptions/securedownloads/hh442898#FileId=57028).\n\n### Give users access\n\nTo enable your users to access AX 2012 R3, complete the following tasks:\n\n-   Add each user’s domain account to the Remote Desktop Users group on the CLI- virtual machine.\n-   Give users access to AX 2012 R3. For instructions, see [Create new users in Microsoft Dynamics AX](https://technet.microsoft.com/en-us/library/aa548139.aspx).\n\n**Note:** If you don’t want to create a VPN connection and a domain trust, you can still give users access to AX 2012 R3. To do so, you’ll need to log on to the virtual machine that serves as the domain controller, and create domain accounts for each user. Then, you’ll need to complete the two tasks mentioned above.\n\n### Set up and configure AX 2012 R3\n\nThe procedures for setting up and configuring AX 2012 R3 on Azure are the same procedures used for setting up and configuring on-premises deployments. See the following resources for more information.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td><strong>Task</strong></td>\n<td><strong>Resources</strong></td>\n</tr>\n<tr class=\"even\">\n<td>See the instructions on TechNet</td>\n<td><ul>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg732218.aspx\">System setup for Microsoft Dynamics AX</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg732158.aspx\">The Microsoft Dynamics AX client</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg731868.aspx\">Application Object Servers</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/ee873263.aspx\">Reporting in Microsoft Dynamics AX</a> <strong>Note:</strong> Be default, reports are deployed to one business intelligence (BI) virtual machine. For each additional BI virtual machine in your environment, you’ll need to:\n<ol>\n<li><a href=\"https://technet.microsoft.com/EN-US/library/dd309703.aspx\">Deploy the default reports.</a></li>\n<li><a href=\"https://technet.microsoft.com/EN-US/library/aa496432.aspx\">Grant users access to the reports.</a></li>\n<li>Open the <a href=\"https://technet.microsoft.com/EN-US/library/aa548504.aspx\">Report servers form</a> to connect each AOS instance with each SSRS instance. To see a step-by-step procedure of how to this is done, see <a href=\"https://technet.microsoft.com/en-us/library/hh389773.aspx\">Connect Microsoft Dynamics AX to the new Reporting Services instance</a>.</li>\n</ol></li>\n<li><a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=5916\">Management Reporter 2012</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/ee873272.aspx\">Analytics in Microsoft Dynamics AX</a> <strong>Note:</strong> To process the cubes that are included with AX 2012 R3, we recommend that you increase the ExternalCommandTimeout value to 7200.</li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg866975.aspx\">Help server</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg751374.aspx\">Enterprise Portal and Role Centers</a> <strong>Note:</strong> Enterprise Portal is configured to run on port 81, so be sure to exclude that port in your firewall settings.</li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg731850.aspx\">Enterprise Search</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg731810.aspx\">Services and Application Integration Framework (AIF)</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/jj710398.aspx\">Microsoft Dynamics AX Retail for IT pros and developers</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/aa834453.aspx\">.NET Business Connector</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg731779.aspx\">Security</a></li>\n</ul></td>\n</tr>\n<tr class=\"odd\">\n<td>View printable guides and white papers</td>\n<td><ul>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg732268.aspx\">Printable guides</a></li>\n<li><a href=\"https://technet.microsoft.com/en-us/library/gg188985.aspx\">White papers for system administrators</a></li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Use the Microsoft Dynamics AX web search tool</td>\n<td><ul>\n<li><a href=\"http://go.microsoft.com/fwlink/?LinkID=212924\">Web search for developers</a></li>\n<li><a href=\"http://go.microsoft.com/fwlink/?LinkID=212925\">Web search for system administrators</a></li>\n<li><a href=\"http://go.microsoft.com/fwlink/?LinkID=212922\">Web search for application users</a></li>\n<li><a href=\"http://go.microsoft.com/fwlink/?LinkID=194311\">Combined web search</a></li>\n</ul></td>\n</tr>\n</tbody>\n</table>\n\n## 8. Prepare the whole environment for use\nThe following sections provide information to help you configure this environment for use.\n\n### Understand the high availability architecture\n\nTo provide redundancy, virtual machines are grouped in *availability sets*. Availability sets ensure that during a planned or unplanned maintenance event, at least one virtual machine in the availability set is running. Each virtual machine in an availability set is assigned an **update domain** and a **fault domain** by the underlying Azure platform.\n\n-   **Update domain:** An update domain defines the group of virtual machines that share a same update schedule.\n-   **Fault domain:** A fault domain defines the group of virtual machines that share a common power source and network switch.\n\nThe high availability environment includes an availability set for each tier of virtual machines. For example, there is an availability set for the domain controllers, the database servers, the AOS servers, and so on.\n\n### Install the data import/export framework and RapidStart Connector\n\nFor high availability, the **Data import/export framework** and the **RapidStart Connector** should be installed on all virtual machines that are AOS servers. You may need to install these components. For instructions, see: • [Install the Data import/export framework (DIXF, DMF)](install-dixf.md) • [Install the RapidStart Connector](https://technet.microsoft.com/en-us/library/hh771574.aspx)\n\n### Configure Microsoft SQL Server Reporting Services for load balancing\n\nThe BI servers in the environment host Microsoft SQL Server Reporting Services. To configure Reporting Services for load balancing, see the [Configure SSRS for load balancing in your Azure deployment](http://blogs.msdn.com/b/axsupport/archive/2015/06/25/configure-ssrs-for-load-balancing-in-your-azure-deployment.aspx) blog post.\n\n### Join Enterprise Portal servers in a single server farm\n\nWhen Lifecycle Services deploys Enterprise Portal servers, each server is deployed into its own server farm. To join all Enterprise Portal servers in a single server farm, see [Join Enterprise Portal servers in a single server farm](join-enterprise-portal-servers-single-server-farm.md).\n\n### Configure the environment for optimal performance\n\nConfigure the environment for optimal performance by completing the following tasks: • [Initialize database files](https://msdn.microsoft.com/en-us/library/ms175935.aspx) • [Enable lock pages](https://technet.microsoft.com/en-us/library/ms190730.aspx) • [Improve client startup times by configuring clients to use roaming profiles](https://technet.microsoft.com/en-us/library/dn479031.aspx)\n\n### Learn more about the high availability configuration\n\nTo learn more about how we’ve configured this environment for high availability, see the following resources:\n\n-   [FSMO placement and optimization on Active Directory domain controllers](http://support.microsoft.com/kb/223346)\n-   [Configure SQL Server and storage settings](https://technet.microsoft.com/en-us/library/dd309734.aspx)\n-   [WSFC Quorum Modes and Voting Configuration](https://msdn.microsoft.com/en-us/library/hh270280.aspx)\n-   [Remote Desktop Cmdlets in Windows PowerShell](https://technet.microsoft.com/en-us/library/jj215451.aspx)\n\n## 9. Learn more about the service accounts for this environment\nThe following sections provide information about the service accounts that were created when you deployed the environment.\n\n### Domain accounts\n\nThe following table lists the domain accounts that were created when you deployed the environment.\n\n| Domain account                  | Description                                                                                                                                                                                         |\n|---------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| <DomainName>AOSServiceUser      | The account used to run the following services: Microsoft Dynamics AX Object Server                                                                                                                 |\n| <DomainName>SQLServiceUser      | The account used to run the following services: SQL Server Analysis Services (MSSQLSERVER)                                                                                                          |\n| <DomainName>DynamicsInstallUser | The account used to install Dynamics AX 2012 R3.                                                                                                                                                    |\n| <DomainName>SPServiceUser       | The account used to run the following services: AppFabric Caching Service, SharePoint Search Host Controller, SharePoint Server Search 15, SharePoint Timer Service, and SharePoint User Code Host. |\n| <DomainName>BCProxyUser         | The account used as the Business Connector proxy.                                                                                                                                                   |\n| <DomainName>AXServiceUser       | The account used to run the following services: Microsoft Dynamics AX Data Import/Export Framework Service and Microsoft Dynamics ERP RapidStart Connector.                                         |\n| <DomainName>RetailServiceUser   | The account used to run the following services: Microsoft Dynamics AX for Retail Commerce Data Exchange Async Client.                                                                               |\n\nNote: The passwords are displayed on the Cloud-hosted environments page in [Lifecycle Services](https://lifecycleservices.dynamics.com/en/).\n\n### Local administrator accounts\n\nEach virtual machine that you deployed has a local administrator account. This account is: builtinaxlocaladmin. The passwords for the local administrator accounts are displayed on the **Cloud-hosted environments** page in Lifecycle Services.\n\n\n\n","nodes":[{"content":"Deploy a high-availability environment on Azure (AX 2012)","nodes":[{"pos":[0,57],"content":"Deploy a high-availability environment on Azure (AX 2012)","nodes":[{"content":"Deploy a high-availability environment on Azure (AX 2012)","pos":[0,57]}]}],"pos":[31,89],"yaml":true},{"content":"This article explains how to deploy a high availability environment on Microsoft Azure. To deploy the environment, you’ll use the Cloud-hosted environments tool in Microsoft Dynamics Lifecycle Services.","nodes":[{"pos":[0,202],"content":"This article explains how to deploy a high availability environment on Microsoft Azure. To deploy the environment, you’ll use the Cloud-hosted environments tool in Microsoft Dynamics Lifecycle Services.","nodes":[{"content":"This article explains how to deploy a high availability environment on Microsoft Azure. To deploy the environment, you’ll use the Cloud-hosted environments tool in Microsoft Dynamics Lifecycle Services.","pos":[0,202],"nodes":[{"content":"This article explains how to deploy a high availability environment on Microsoft Azure.","pos":[0,87]},{"content":"To deploy the environment, you’ll use the Cloud-hosted environments tool in Microsoft Dynamics Lifecycle Services.","pos":[88,202]}]}]}],"pos":[102,305],"yaml":true},{"pos":[776,833],"content":"Deploy a high-availability environment on Azure (AX 2012)","linkify":"Deploy a high-availability environment on Azure (AX 2012)","nodes":[{"content":"Deploy a high-availability environment on Azure (AX 2012)","pos":[0,57]}]},{"content":"This article explains how to deploy a high availability environment on Microsoft Azure.","pos":[882,969]},{"content":"To deploy the environment, you’ll use the Cloud-hosted environments tool in Microsoft Dynamics Lifecycle Services.","pos":[970,1084]},{"pos":[1087,1100],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"Before you complete the procedures in this article, make sure that the following prerequisites are in place.","pos":[1116,1224]},{"pos":[1590,1602],"content":"<bpt id=\"p1\">**</bpt>Category<ept id=\"p1\">**</ept>","source":"**Category**"},{"pos":[1607,1623],"content":"<bpt id=\"p1\">**</bpt>Prerequisite<ept id=\"p1\">**</ept>","source":"**Prerequisite**"},{"content":"Required tasks","pos":[1771,1785]},{"pos":[1788,1883],"content":"<bpt id=\"p1\">[</bpt>Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure<ept id=\"p1\">](plan-2012-r3-deployment-azure.md)</ept>","source":"[Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure](plan-2012-r3-deployment-azure.md)"},{"pos":[1893,1921],"content":"1. Use Azure premium storage","linkify":"1. Use Azure premium storage","nodes":[{"content":"1. Use Azure premium storage","pos":[0,28]}]},{"content":"Azure Premium Storage delivers high-performance, low-latency disk support for I/O intensive workloads running on Azure virtual machines (VMs).","pos":[1922,2064]},{"content":"With Premium Storage, your applications can have up to 32 TB of storage per VM, achieve 50,000 IOPS (input/output operations per second) per VM, and have extremely low latencies for read operations.","pos":[2065,2263]},{"content":"Premium Storage is recommended for running AX 2012 R3 in Azure to ensure predictable performance.","pos":[2264,2361]},{"content":"For more information about using Premium Storage, see <bpt id=\"p1\">[</bpt>Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure<ept id=\"p1\">](plan-2012-r3-deployment-azure.md)</ept>.","pos":[2362,2512],"source":" For more information about using Premium Storage, see [Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure](plan-2012-r3-deployment-azure.md)."},{"pos":[2517,2548],"content":"2. Log on to Lifecycle Services","linkify":"2. Log on to Lifecycle Services","nodes":[{"content":"2. Log on to Lifecycle Services","pos":[0,31]}]},{"content":"Microsoft Dynamics Lifecycle Services provides a cloud-based collaborative workspace that customers and partners can use to manage Microsoft Dynamics AX projects.","pos":[2549,2711]},{"content":"You’ll use this website to deploy AX 2012 R3 on Azure.","pos":[2712,2766]},{"content":"Lifecycle Services is available to customers and partners as part of their support plans.","pos":[2767,2856]},{"content":"You can access it with your CustomerSource or PartnerSource credentials.","pos":[2857,2929]},{"content":"<bpt id=\"p1\">[</bpt>Log on to Lifecycle Services<ept id=\"p1\">](https://lcs.dynamics.com/en/)</ept>","pos":[2930,2990],"source":"[Log on to Lifecycle Services](https://lcs.dynamics.com/en/)"},{"pos":[2995,3014],"content":"3. Create a project","linkify":"3. Create a project","nodes":[{"content":"3. Create a project","pos":[0,19]}]},{"content":"After you log in to Lifecycle Services, open an existing project, or create a new project.","pos":[3015,3105]},{"content":"Projects are the key organizer of your experience in Lifecycle Services.","pos":[3106,3178]},{"content":"The methodology associated with a project determines which phases and tasks are included in the project by default.","pos":[3179,3294]},{"pos":[3299,3348],"content":"4. Connect the project to your Azure subscription","linkify":"4. Connect the project to your Azure subscription","nodes":[{"content":"4. Connect the project to your Azure subscription","pos":[0,49]}]},{"content":"Connect the Lifecycle Services project to your Azure subscription.","pos":[3349,3415]},{"content":"This will enable Lifecycle Services to deploy an AX 2012 R3 environment to the subscription.","pos":[3416,3508]},{"content":"To connect the project to your Azure subscription, complete the following procedure.","pos":[3509,3593]},{"content":"Keep in mind that a project can be connected to only one Azure subscription.","pos":[3594,3670]},{"content":"If you have multiple Azure subscriptions, be sure to identify which subscription you want to use before you complete this procedure.","pos":[3671,3803]},{"content":"Click <bpt id=\"p1\">**</bpt>Cloud-hosted environments<ept id=\"p1\">**</ept>.","pos":[3809,3845],"source":"Click **Cloud-hosted environments**."},{"content":"The <bpt id=\"p1\">**</bpt>Cloud-hosted environments<ept id=\"p1\">**</ept> page is displayed.","pos":[3846,3898],"source":" The **Cloud-hosted environments** page is displayed."},{"content":"The <bpt id=\"p1\">**</bpt>Microsoft Azure setup<ept id=\"p1\">**</ept> panel is displayed on the side of the screen.","pos":[3903,3978],"source":"The **Microsoft Azure setup** panel is displayed on the side of the screen."},{"content":"If it is not displayed, click <bpt id=\"p1\">**</bpt>Microsoft Azure settings<ept id=\"p1\">**</ept>.","pos":[3979,4038],"source":" If it is not displayed, click **Microsoft Azure settings**."},{"content":"Enter your Azure subscription ID.","pos":[4043,4076]},{"content":"If you need to find your subscription ID, complete the following steps:","pos":[4077,4148]},{"content":"Open another instance of your browser.","pos":[4157,4195]},{"content":"Log on to the Azure management portal.","pos":[4204,4242]},{"content":"In the navigation pane on the left, click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept>.","pos":[4251,4306],"source":"In the navigation pane on the left, click **Settings**."},{"content":"(You may have to scroll to the bottom of the navigation pane to see the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> link.) The <bpt id=\"p2\">**</bpt>Settings<ept id=\"p2\">**</ept> page is displayed.","pos":[4307,4434],"source":" (You may have to scroll to the bottom of the navigation pane to see the **Settings** link.) The **Settings** page is displayed."},{"pos":[4443,4610],"content":"Copy your subscription ID, and then paste it into the <bpt id=\"p1\">**</bpt>Azure subscription ID<ept id=\"p1\">**</ept> field in Lifecycle Services (which is currently displayed in another browser instance).","source":"Copy your subscription ID, and then paste it into the **Azure subscription ID** field in Lifecycle Services (which is currently displayed in another browser instance)."},{"pos":[4616,4631],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.","source":"Click **Next**."},{"content":"Click <bpt id=\"p1\">**</bpt>Download<ept id=\"p1\">**</ept> to download a management certificate.","pos":[4636,4692],"source":"Click **Download** to download a management certificate."},{"content":"This management certificate enables Lifecycle Services to communicate with Azure on your behalf.","pos":[4693,4789]},{"content":"By default, the management certificate is saved to the Downloads folder on your computer and is named LifecycleServicesDeployment.cer.","pos":[4790,4924]},{"content":"Upload the management certificate to Azure.","pos":[4929,4972]},{"content":"To do so, complete the following steps:","pos":[4973,5012]},{"content":"Open another instance of your browser.","pos":[5021,5059]},{"content":"(Or, go to the browser instance that you may have opened in step 3.)","pos":[5060,5128]},{"content":"Log on to the Azure management portal.","pos":[5137,5175]},{"content":"In the navigation pane on the left, click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept>.","pos":[5184,5239],"source":"In the navigation pane on the left, click **Settings**."},{"content":"The <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> page is displayed.","pos":[5240,5275],"source":" The **Settings** page is displayed."},{"pos":[5284,5318],"content":"Click <bpt id=\"p1\">**</bpt>Management certificates<ept id=\"p1\">**</ept>.","source":"Click **Management certificates**."},{"pos":[5327,5370],"content":"Click <bpt id=\"p1\">**</bpt>Upload<ept id=\"p1\">**</ept> at the bottom of the page.","source":"Click **Upload** at the bottom of the page."},{"content":"In the <bpt id=\"p1\">**</bpt>Upload a management certificate<ept id=\"p1\">**</ept> window, browse to the management certificate that you downloaded in step 5.","pos":[5379,5497],"source":"In the **Upload a management certificate** window, browse to the management certificate that you downloaded in step 5."},{"content":"Then click the check mark.","pos":[5498,5524]},{"content":"Go back to the browser that displays the <bpt id=\"p1\">**</bpt>Microsoft Azure setup<ept id=\"p1\">**</ept> panel in Lifecycle Services.","pos":[5530,5625],"source":"Go back to the browser that displays the **Microsoft Azure setup** panel in Lifecycle Services."},{"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.","pos":[5626,5641],"source":" Click **Next**."},{"content":"Select the region that is closest to you.","pos":[5646,5687]},{"content":"The AX 2012 R3 environment will be deployed to a datacenter in this region.","pos":[5688,5763]},{"content":"Click <bpt id=\"p1\">**</bpt>Connect<ept id=\"p1\">**</ept>.","pos":[5768,5786],"source":"Click **Connect**."},{"content":"The project is now connected to the Azure subscription that you specified.","pos":[5787,5861]},{"content":"If you discover that you connected the project to the wrong Azure subscription (that is, assuming you have multiple Azure subscriptions), you’ll need to delete the project, create a new project, and then repeat this procedure to connect the new project to the appropriate Azure subscription.","pos":[5862,6153]},{"pos":[6158,6220],"content":"5. Connect your corporate network to the Azure virtual network","linkify":"5. Connect your corporate network to the Azure virtual network","nodes":[{"content":"5. Connect your corporate network to the Azure virtual network","pos":[0,62]}]},{"content":"The following sections provide information about how to configure the Azure virtual network and domain so that your corporate users can access AX 2012 R3.","pos":[6221,6375]},{"content":"It is recommended that if you require login to these systems using corporate credentials that you set up the connectivity before you deploy the environment.","pos":[6376,6532]},{"content":"This will require using Azure networking capabilities to extend you corporate network to one or more Azure virtual networks.","pos":[6533,6657]},{"content":"It will additionally require you to deploy an Active Directory into the Azure virtual network, which will be set up for trust to your corporate Active Directory.","pos":[6658,6819]},{"content":"This Active Directory will be used to manage VM-related resources in the Azure virtual network.","pos":[6820,6915]},{"content":"This Active Directory will not be used for single sign-on, and should not be set up to sync the corporate directory.","pos":[6916,7032]},{"content":"Single sign-on capabilities will be provided through the domain trust.","pos":[7033,7103]},{"pos":[7109,7145],"content":"Create a site-to-site VPN connection","linkify":"Create a site-to-site VPN connection","nodes":[{"content":"Create a site-to-site VPN connection","pos":[0,36]}]},{"content":"To enable corporate users to access resources on the virtual machines in the Azure virtual network, you’ll need to create a site-to-site VPN connection between the Azure virtual network and your on-premises, corporate network.","pos":[7147,7373]},{"content":"For information about how to do this, see:","pos":[7374,7416]},{"pos":[7422,7517],"content":"<bpt id=\"p1\">[</bpt>Virtual network overview<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windowsazure/jj156007.aspx)</ept>","source":"[Virtual network overview](https://msdn.microsoft.com/en-us/library/windowsazure/jj156007.aspx)"},{"pos":[7522,7615],"content":"<bpt id=\"p1\">[</bpt>Virtual network configuration tasks<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/jj156206.aspx)</ept>","source":"[Virtual network configuration tasks](https://msdn.microsoft.com/en-us/library/jj156206.aspx)"},{"pos":[7620,7801],"content":"<bpt id=\"p1\">[</bpt>Set up a simulated hybrid cloud environment for testing<ept id=\"p1\">](http://azure.microsoft.com/en-us/documentation/articles/virtual-networks-setup-simulated-hybrid-cloud-environment-testing/)</ept>","source":"[Set up a simulated hybrid cloud environment for testing](http://azure.microsoft.com/en-us/documentation/articles/virtual-networks-setup-simulated-hybrid-cloud-environment-testing/)"},{"pos":[7806,7966],"content":"<bpt id=\"p1\">[</bpt>Site-to-site VPN in Azure virtual network using Windows Server 2012 Routing and Remote Access Service (RRAS)<ept id=\"p1\">](https://msdn.microsoft.com/library/dn636917.aspx)</ept>","source":"[Site-to-site VPN in Azure virtual network using Windows Server 2012 Routing and Remote Access Service (RRAS)](https://msdn.microsoft.com/library/dn636917.aspx)"},{"pos":[7971,8095],"content":"<bpt id=\"p1\">[</bpt>Configure a virtual network gateway in the management portal<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/azure/jj156210.aspx)</ept>","source":"[Configure a virtual network gateway in the management portal](https://msdn.microsoft.com/en-us/library/azure/jj156210.aspx)"},{"pos":[8101,8136],"content":"Create an active directory in Azure","linkify":"Create an active directory in Azure","nodes":[{"content":"Create an active directory in Azure","pos":[0,35]}]},{"content":"An Active Directory is required in the Azure virtual network.","pos":[8138,8199]},{"content":"An Active Directory can be deployed to the Azure virtual network.","pos":[8200,8265]},{"content":"Please follow <bpt id=\"p1\">[</bpt>Guidelines for Deploying Windows Server Active Directory on Azure Virtual Machines<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/azure/jj156090.aspx)</ept>.","pos":[8266,8427],"source":" Please follow [Guidelines for Deploying Windows Server Active Directory on Azure Virtual Machines](https://msdn.microsoft.com/en-us/library/azure/jj156090.aspx)."},{"content":"Please note that Active Directory Federation Services is not presently supported with AX 2012 R3.","pos":[8428,8525]},{"content":"If you are providing the Active Directory, you will need to create the following service accounts within it that can be used by LCS deployment services when you deploy the environment.","pos":[8526,8710]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Account<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[8812,8836],"source":"<strong>Account</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Description<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[8846,8874],"source":"<strong>Description</strong>"},{"content":"<ph id=\"ph1\">&amp;lt;</ph>DomainName<ph id=\"ph2\">&amp;gt;</ph>AXServiceUser","pos":[8908,8939],"source":"&lt;DomainName&gt;AXServiceUser"},{"content":"AX 2012 R3 service account","pos":[8949,8975]},{"content":"<ph id=\"ph1\">&amp;lt;</ph>DomainName<ph id=\"ph2\">&amp;gt;</ph>AOSServiceUser","pos":[9008,9040],"source":"&lt;DomainName&gt;AOSServiceUser"},{"content":"AOS service account","pos":[9050,9069]},{"content":"<ph id=\"ph1\">&amp;lt;</ph>DomainName<ph id=\"ph2\">&amp;gt;</ph>BCProxyUser","pos":[9103,9132],"source":"&lt;DomainName&gt;BCProxyUser"},{"content":"Business Connector proxy account","pos":[9142,9174]},{"content":"<ph id=\"ph1\">&amp;lt;</ph>DomainName<ph id=\"ph2\">&amp;gt;</ph>SPServiceUser","pos":[9207,9238],"source":"&lt;DomainName&gt;SPServiceUser"},{"content":"SharePoint service account","pos":[9248,9274]},{"content":"<ph id=\"ph1\">&amp;lt;</ph>DomainName<ph id=\"ph2\">&amp;gt;</ph>SqlServiceUser","pos":[9308,9340],"source":"&lt;DomainName&gt;SqlServiceUser"},{"content":"SQL Server service account","pos":[9350,9376]},{"content":"<ph id=\"ph1\">&amp;lt;</ph>DomainName<ph id=\"ph2\">&amp;gt;</ph>RetailServiceUser","pos":[9409,9444],"source":"&lt;DomainName&gt;RetailServiceUser"},{"content":"Retail service account","pos":[9454,9476]},{"content":"<ph id=\"ph1\">&amp;lt;</ph>DomainName<ph id=\"ph2\">&amp;gt;</ph>DynamicsInstallUser","pos":[9510,9547],"source":"&lt;DomainName&gt;DynamicsInstallUser"},{"content":"AX 2012 R3 installation account<bpt id=\"p1\">&lt;strong&gt;</bpt>Note:<ept id=\"p1\">&lt;/strong&gt;</ept> This account must have permission to join computers to the domain.","pos":[9557,9677],"source":"AX 2012 R3 installation account<strong>Note:</strong> This account must have permission to join computers to the domain."},{"content":"To give this account permission, complete the following steps:","pos":[9678,9740],"source":" To give this account permission, complete the following steps:\n"},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>Start<ept id=\"p1\">&lt;/strong&gt;</ept>, click <bpt id=\"p2\">&lt;strong&gt;</bpt>Run<ept id=\"p2\">&lt;/strong&gt;</ept>, type dsa.msc, and then click <bpt id=\"p3\">&lt;strong&gt;</bpt>OK<ept id=\"p3\">&lt;/strong&gt;</ept>.","pos":[9750,9857],"source":"Click <strong>Start</strong>, click <strong>Run</strong>, type dsa.msc, and then click <strong>OK</strong>."},{"content":"In the task pane, expand the domain node.","pos":[9867,9908]},{"content":"Locate and right-click the organizational unit that you want to modify, and then click <bpt id=\"p1\">&lt;strong&gt;</bpt>Delegate Control<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[9918,10039],"source":"Locate and right-click the organizational unit that you want to modify, and then click <strong>Delegate Control</strong>."},{"content":"In the <bpt id=\"p1\">&lt;strong&gt;</bpt>Delegation of Control<ept id=\"p1\">&lt;/strong&gt;</ept> Wizard, click <bpt id=\"p2\">&lt;strong&gt;</bpt>Next<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[10049,10131],"source":"In the <strong>Delegation of Control</strong> Wizard, click <strong>Next</strong>."},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>Add<ept id=\"p1\">&lt;/strong&gt;</ept> to add a specific user or a specific group to the list, and then click <bpt id=\"p2\">&lt;strong&gt;</bpt>Next<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[10141,10261],"source":"Click <strong>Add</strong> to add a specific user or a specific group to the list, and then click <strong>Next</strong>."},{"content":"In the <bpt id=\"p1\">&lt;strong&gt;</bpt>Tasks to Delegate<ept id=\"p1\">&lt;/strong&gt;</ept> page, click <bpt id=\"p2\">&lt;strong&gt;</bpt>Create a custom task to delegate<ept id=\"p2\">&lt;/strong&gt;</ept>, and then click <bpt id=\"p3\">&lt;strong&gt;</bpt>Next<ept id=\"p3\">&lt;/strong&gt;</ept>.","pos":[10271,10413],"source":"In the <strong>Tasks to Delegate</strong> page, click <strong>Create a custom task to delegate</strong>, and then click <strong>Next</strong>."},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>Only the following objects in the folder<ept id=\"p1\">&lt;/strong&gt;</ept>, and then from the list, click to select the <bpt id=\"p2\">&lt;strong&gt;</bpt>Computer objects<ept id=\"p2\">&lt;/strong&gt;</ept> check box.","pos":[10423,10576],"source":"Click <strong>Only the following objects in the folder</strong>, and then from the list, click to select the <strong>Computer objects</strong> check box."},{"content":"Then, select the check boxes below the list, <bpt id=\"p1\">&lt;strong&gt;</bpt>Create selected objects in this folder<ept id=\"p1\">&lt;/strong&gt;</ept> and <bpt id=\"p2\">&lt;strong&gt;</bpt>Delete selected objects in this folder<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[10577,10738],"source":" Then, select the check boxes below the list, <strong>Create selected objects in this folder</strong> and <strong>Delete selected objects in this folder</strong>."},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>Next<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[10748,10776],"source":"Click <strong>Next</strong>."},{"content":"In the <bpt id=\"p1\">&lt;strong&gt;</bpt>Permissions<ept id=\"p1\">&lt;/strong&gt;</ept> list, click to select the following check boxes:","pos":[10786,10870],"source":"In the <strong>Permissions</strong> list, click to select the following check boxes:\n"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Reset Password<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[10880,10911],"source":"<strong>Reset Password</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Read and write Account Restrictions<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[10921,10973],"source":"<strong>Read and write Account Restrictions</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Validated write to DNS host name<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[10983,11032],"source":"<strong>Validated write to DNS host name</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Validated write to service principal name<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[11042,11100],"source":"<strong>Validated write to service principal name</strong>"},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>Next<ept id=\"p1\">&lt;/strong&gt;</ept>, and then click <bpt id=\"p2\">&lt;strong&gt;</bpt>Finish<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[11121,11189],"source":"Click <strong>Next</strong>, and then click <strong>Finish</strong>."},{"content":"Close the <bpt id=\"p1\">&lt;strong&gt;</bpt>Active Directory Users and Computers MMC<ept id=\"p1\">&lt;/strong&gt;</ept> snap-in.","pos":[11199,11275],"source":"Close the <strong>Active Directory Users and Computers MMC</strong> snap-in."},{"content":"You will need to provide the passwords for these accounts when you deploy the environment.","pos":[11317,11407]},{"pos":[11413,11434],"content":"Create a domain trust","linkify":"Create a domain trust","nodes":[{"content":"Create a domain trust","pos":[0,21]}]},{"content":"To enable corporate users to access resources on the virtual machines in your Azure domain, you must create an Active Directory trust between the domains.","pos":[11436,11590]},{"content":"For information about how to create a trust, see <bpt id=\"p1\">[</bpt>Create a Forest Trust<ept id=\"p1\">](https://technet.microsoft.com/en-us/library/cc754626.aspx)</ept>.","pos":[11591,11723],"source":" For information about how to create a trust, see [Create a Forest Trust](https://technet.microsoft.com/en-us/library/cc754626.aspx)."},{"content":"This process is the same process you would use to create a trust between two on-premises domains.","pos":[11724,11821]},{"pos":[11827,11893],"content":"Give the Administrators group the right to log on as a batch group","linkify":"Give the Administrators group the right to log on as a batch group","nodes":[{"content":"Give the Administrators group the right to log on as a batch group","pos":[0,66]}]},{"content":"Log in to the Active Directory domain controller and complete the following steps to give the built-in Administrators group the right to log on as a batch job.","pos":[11895,12054]},{"pos":[12060,12141],"content":"Click <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>All Programs<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Administrative Tools<ept id=\"p3\">**</ept>.","source":"Click **Start**, click **All Programs**, and then click **Administrative Tools**."},{"pos":[12146,12219],"content":"In the <bpt id=\"p1\">**</bpt>Administrative Tools<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>Group Policy Management<ept id=\"p2\">**</ept>.","source":"In the **Administrative Tools** menu, select **Group Policy Management**."},{"pos":[12224,12338],"content":"In the <bpt id=\"p1\">**</bpt>Group Policy Management console<ept id=\"p1\">**</ept> tree, click <bpt id=\"p2\">**</bpt>Forest: <ph id=\"ph1\">&amp;lt;</ph>ServerName<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Domains<ept id=\"p3\">**</ept>.","source":"In the **Group Policy Management console** tree, click **Forest: &lt;ServerName&gt;**, and then click **Domains**."},{"pos":[12343,12480],"content":"Click the name of your server, expand <bpt id=\"p1\">**</bpt>Domain Controllers<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>Default Domain Controllers Policy<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Edit<ept id=\"p3\">**</ept>.","source":"Click the name of your server, expand **Domain Controllers**, right-click **Default Domain Controllers Policy**, and then click **Edit**."},{"pos":[12485,12662],"content":"In the G<bpt id=\"p1\">**</bpt>roup Policy Management Editor<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Default Domain Controllers Policy <ph id=\"ph1\">&amp;lt;</ph>ServerName<ph id=\"ph2\">&amp;gt;</ph> Policy<ept id=\"p2\">**</ept>, expand <bpt id=\"p3\">**</bpt>Computer Configuration<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Policies<ept id=\"p4\">**</ept>.","source":"In the G**roup Policy Management Editor**, click **Default Domain Controllers Policy &lt;ServerName&gt; Policy**, expand **Computer Configuration**, and then click **Policies**."},{"pos":[12667,12758],"content":"In the <bpt id=\"p1\">**</bpt>Policies<ept id=\"p1\">**</ept> tree, expand <bpt id=\"p2\">**</bpt>Windows Setting<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Security Settings<ept id=\"p3\">**</ept>.","source":"In the **Policies** tree, expand **Windows Setting**, and then click **Security Settings**."},{"pos":[12763,12867],"content":"In the <bpt id=\"p1\">**</bpt>Security Settings<ept id=\"p1\">**</ept> tree, expand <bpt id=\"p2\">**</bpt>Local Policies<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>User Rights Assignment<ept id=\"p3\">**</ept>.","source":"In the **Security Settings** tree, expand **Local Policies**, and then click **User Rights Assignment**."},{"pos":[12872,12944],"content":"In the results pane, scroll to and then click <bpt id=\"p1\">**</bpt>Log on as a batch job<ept id=\"p1\">**</ept>.","source":"In the results pane, scroll to and then click **Log on as a batch job**."},{"pos":[12949,13033],"content":"In the <bpt id=\"p1\">**</bpt>Log on as a batch job Properties<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>Add User or Group<ept id=\"p2\">**</ept>.","source":"In the **Log on as a batch job Properties** dialog box, click **Add User or Group**."},{"pos":[13038,13096],"content":"In the <bpt id=\"p1\">**</bpt>Add User or Group<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>Browse<ept id=\"p2\">**</ept>.","source":"In the **Add User or Group** dialog box, click **Browse**."},{"pos":[13101,13179],"content":"In the <bpt id=\"p1\">**</bpt>Select Users, Computers, or Groups<ept id=\"p1\">**</ept> dialog box, type Administrators.","source":"In the **Select Users, Computers, or Groups** dialog box, type Administrators."},{"pos":[13184,13300],"content":"Click <bpt id=\"p1\">**</bpt>Check Names<ept id=\"p1\">**</ept> to verify that the built-in Administrators account appears, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept> three times.","source":"Click **Check Names** to verify that the built-in Administrators account appears, and then click **OK** three times."},{"pos":[13306,13344],"content":"Change the default organizational unit","linkify":"Change the default organizational unit","nodes":[{"content":"Change the default organizational unit","pos":[0,38]}]},{"content":"If you want virtual machines to be added to Active Directory in a custom organizational unit—versus the default organizational unit—you can change the default organizational unit in your Active Directory prior to starting deployment.","pos":[13346,13579]},{"content":"For more information, click <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](http://pc-addicts.com/server-2012-change-default-ou/)</ept>.","pos":[13580,13669],"source":" For more information, click [here](http://pc-addicts.com/server-2012-change-default-ou/)."},{"pos":[13674,13724],"content":"6. Deploy a high availability environment on Azure","linkify":"6. Deploy a high availability environment on Azure","nodes":[{"content":"6. Deploy a high availability environment on Azure","pos":[0,50]}]},{"content":"Complete the following procedure to deploy a high availability environment on Azure.","pos":[13725,13809]},{"pos":[13815,13881],"content":"On the <bpt id=\"p1\">**</bpt>Cloud-hosted environments<ept id=\"p1\">**</ept> page, click the Add (+) icon.","source":"On the **Cloud-hosted environments** page, click the Add (+) icon."},{"pos":[13886,13961],"content":"In the <bpt id=\"p1\">**</bpt>Select environment topology<ept id=\"p1\">**</ept> panel, select <bpt id=\"p2\">**</bpt>High availability<ept id=\"p2\">**</ept>.","source":"In the **Select environment topology** panel, select **High availability**."},{"pos":[13966,13994],"content":"Click <bpt id=\"p1\">**</bpt>High availability<ept id=\"p1\">**</ept>.","source":"Click **High availability**."},{"pos":[13999,14089],"content":"In the <bpt id=\"p1\">**</bpt>Environment name<ept id=\"p1\">**</ept> field, enter a name for the environment that will be deployed.","source":"In the **Environment name** field, enter a name for the environment that will be deployed."},{"content":"If you’ve created an estimate for a production environment using the Infrastructure estimator tool in Lifecycle Services, you’ll see the <bpt id=\"p1\">**</bpt>Estimation<ept id=\"p1\">**</ept> list.","pos":[14094,14251],"source":"If you’ve created an estimate for a production environment using the Infrastructure estimator tool in Lifecycle Services, you’ll see the **Estimation** list."},{"content":"Select the estimate from this list.","pos":[14252,14287]},{"content":"The number and size of virtual machines to be deployed will change based on the selected estimate.","pos":[14288,14386]},{"content":"For more information about how to create an estimate, see <bpt id=\"p1\">[</bpt>Infrastructure estimator (Lifecycle Services, LCS)<ept id=\"p1\">](infrastructure-estimator-lcs.md)</ept>.","pos":[14387,14531],"source":" For more information about how to create an estimate, see [Infrastructure estimator (Lifecycle Services, LCS)](infrastructure-estimator-lcs.md)."},{"pos":[14536,14564],"content":"Click <bpt id=\"p1\">**</bpt>Advanced settings<ept id=\"p1\">**</ept>.","source":"Click **Advanced settings**."},{"content":"To customize domain settings, click <bpt id=\"p1\">**</bpt>Customize domain settings<ept id=\"p1\">**</ept>.","pos":[14569,14635],"source":"To customize domain settings, click **Customize domain settings**."},{"content":"Then use the following table to enter information.","pos":[14636,14686]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>If you want to:<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[14819,14851],"source":"<strong>If you want to:</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Do this:<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[14865,14890],"source":"<strong>Do this:</strong>"},{"content":"Create a new domain in Azure for the environment","pos":[14936,14984]},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>New domain<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[15011,15045],"source":"Click <strong>New domain</strong>."},{"content":"Enter a name for the domain.","pos":[15059,15087]},{"content":"By default, the domain is named <bpt id=\"p1\">&lt;em&gt;</bpt>contoso.com<ept id=\"p1\">&lt;/em&gt;</ept>.","pos":[15088,15141],"source":" By default, the domain is named <em>contoso.com</em>."},{"content":"Add the environment to an existing domain in Azure","pos":[15201,15251]},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>Existing domain<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[15278,15317],"source":"Click <strong>Existing domain</strong>."},{"content":"Enter the name of the domain.","pos":[15331,15360]},{"content":"For example, <bpt id=\"p1\">&lt;em&gt;</bpt>contoso.com<ept id=\"p1\">&lt;/em&gt;</ept>.","pos":[15361,15395],"source":" For example, <em>contoso.com</em>."},{"content":"To customize the service accounts that will be created in the domain, click <bpt id=\"p1\">**</bpt>Customize service accounts<ept id=\"p1\">**</ept>.","pos":[15457,15564],"source":"To customize the service accounts that will be created in the domain, click **Customize service accounts**."},{"content":"Service accounts and/or service account passwords may be specified through the <bpt id=\"p1\">**</bpt>Advanced Settings<ept id=\"p1\">**</ept> option for a deployment.","pos":[15565,15690],"source":" Service accounts and/or service account passwords may be specified through the **Advanced Settings** option for a deployment."},{"content":"If neither is provided, default accounts are used and random passwords are selected.","pos":[15691,15775]},{"content":"Use these features when you want to maintain account naming and password rules for your corporation.","pos":[15776,15876]},{"content":"Account and password rules:","pos":[15877,15904]},{"content":"A valid service name must be less than 20 characters with no special characters.","pos":[15913,15993]},{"content":"A valid password must be more than 8 characters and contain uppercase letters, lowercase letters, numbers, and at least one of the following characters: <ph id=\"ph1\">\\[</ph>'@', '!', '=', '<ph id=\"ph2\">\\*</ph>'<ph id=\"ph3\">\\]</ph> You can’t use common passwords, such as: <ph id=\"ph4\">pass@word1</ph>","pos":[16002,16230],"source":"A valid password must be more than 8 characters and contain uppercase letters, lowercase letters, numbers, and at least one of the following characters: \\['@', '!', '=', '\\*'\\] You can’t use common passwords, such as: pass@word1"},{"content":"To select the version of AX 2012 R3 that you want use, click <bpt id=\"p1\">**</bpt>Supported version<ept id=\"p1\">**</ept>.","pos":[16236,16319],"source":"To select the version of AX 2012 R3 that you want use, click **Supported version**."},{"content":"By default, the AX 2012 R3 CU8 version of this environment will be deployed.","pos":[16320,16396]},{"content":"If you don’t want to use the CU8 version, select <bpt id=\"p1\">**</bpt>Dynamics ERP 2012 R3 RTM<ept id=\"p1\">**</ept> from the list.","pos":[16397,16489],"source":" If you don’t want to use the CU8 version, select **Dynamics ERP 2012 R3 RTM** from the list."},{"content":"To customize virtual machine names, click <bpt id=\"p1\">**</bpt>Customize virtual machine names<ept id=\"p1\">**</ept>.","pos":[16494,16572],"source":"To customize virtual machine names, click **Customize virtual machine names**."},{"content":"In order to support common IT naming guidelines, the ability to name virtual machines is provided through the <bpt id=\"p1\">**</bpt>Advanced settings<ept id=\"p1\">**</ept> option on most deployment topologies.","pos":[16573,16742],"source":" In order to support common IT naming guidelines, the ability to name virtual machines is provided through the **Advanced settings** option on most deployment topologies."},{"content":"In addition to defining the name, a starting index can be selected for each virtual machine type.","pos":[16743,16840]},{"content":"The index is incremented for each instance of the virtual machine type that is deployed.","pos":[16841,16929]},{"content":"Virtual machine names must be 13 characters or less.","pos":[16930,16982]},{"content":"The index is separated from the machine name by a hyphen (-), followed by the index that supports a maximum of 2 digits.","pos":[16983,17103]},{"content":"Example: ACustomVMName-99 When virtual machine instances are added to an environment after the initial deployment, the deployment service will start incrementing the virtual machine name where it left off.","pos":[17104,17309]},{"content":"For example, if you deployed four AOS virtual machines with a starting index of 2, then the last AOS instance name will be AOS-6.","pos":[17310,17439]},{"content":"If you add two more AOS instances, they will be AOS-7 and AOS-8.","pos":[17440,17504]},{"content":"If one of the virtual machine types in your deployment is customized, then all of the virtual machine names must be customized.","pos":[17505,17632]},{"content":"This is done to ensure that a long deployment does not occur because a virtual machine name was accidentally missed.","pos":[17633,17749]},{"content":"To enter SQL Server configuration options, click <bpt id=\"p1\">**</bpt>Customize SQL Server configuration<ept id=\"p1\">**</ept>.","pos":[17754,17842],"source":"To enter SQL Server configuration options, click **Customize SQL Server configuration**."},{"content":"Select the SQL Server image you want to use, as well as the number and size of disks that will be attached to the SQL Server virtual machines.","pos":[17843,17985]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure<ept id=\"p1\">](plan-2012-r3-deployment-azure.md)</ept>.","pos":[17986,18108],"source":" For more information, see [Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure](plan-2012-r3-deployment-azure.md)."},{"content":"If you have selected to deploy a Remote Desktop Services virtual machine, click <bpt id=\"p1\">**</bpt>Customize remote desktop services<ept id=\"p1\">**</ept> to specify how your users will access AX 2012 R3 via the web.","pos":[18113,18292],"source":"If you have selected to deploy a Remote Desktop Services virtual machine, click **Customize remote desktop services** to specify how your users will access AX 2012 R3 via the web."},{"content":"Select one of the following options:","pos":[18293,18329]},{"pos":[18338,18418],"content":"<bpt id=\"p1\">**</bpt>Remote Desktop:<ept id=\"p1\">**</ept> This option enables users to login to a full remote desktop.","source":"**Remote Desktop:** This option enables users to login to a full remote desktop."},{"content":"<bpt id=\"p1\">**</bpt>RemoteApp Programs:<ept id=\"p1\">**</ept> This option enables users to login in to AX 2012 R3 directly, without having the experience of a full desktop window.","pos":[18427,18568],"source":"**RemoteApp Programs:** This option enables users to login in to AX 2012 R3 directly, without having the experience of a full desktop window."},{"content":"RemoteApp is enabled by default.","pos":[18569,18601]},{"pos":[18607,18731],"content":"After the environment has been deployed, the following links are available to you on the <bpt id=\"p1\">**</bpt>Cloud-hosted environments<ept id=\"p1\">**</ept> page:","source":"After the environment has been deployed, the following links are available to you on the **Cloud-hosted environments** page:"},{"content":"<bpt id=\"p1\">**</bpt>RDS Web Access certificate<ept id=\"p1\">**</ept>: This is a self-signed certificate that is provided to allow secured access to the RDS Web Access site.","pos":[18740,18874],"source":"**RDS Web Access certificate**: This is a self-signed certificate that is provided to allow secured access to the RDS Web Access site."},{"content":"Click the link and open this certificate and install it into the <bpt id=\"p1\">**</bpt>Local Machine<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Trusted Root Certification Authorities<ept id=\"p2\">**</ept> node before attempting to access the RDS Web Access site.","pos":[18875,19063],"source":" Click the link and open this certificate and install it into the **Local Machine** &gt; **Trusted Root Certification Authorities** node before attempting to access the RDS Web Access site."},{"content":"It is recommended that before this environment be placed into a production capacity that you install your own certificate to the RDS cluster.","pos":[19064,19205]},{"content":"<bpt id=\"p1\">**</bpt>RDS Web Access<ept id=\"p1\">**</ept>: This allows users to gain access to the AX 2012 R3 environment over the web.","pos":[19214,19310],"source":"**RDS Web Access**: This allows users to gain access to the AX 2012 R3 environment over the web."},{"content":"If you chose the <bpt id=\"p1\">**</bpt>Remote Desktop<ept id=\"p1\">**</ept> option, users will be offered the ability to login to a full remote desktop.","pos":[19311,19423],"source":" If you chose the **Remote Desktop** option, users will be offered the ability to login to a full remote desktop."},{"content":"If you chose <bpt id=\"p1\">**</bpt>RemoteApp Programs<ept id=\"p1\">**</ept>, users will be able to log in directly to AX 2012 R3.","pos":[19424,19513],"source":" If you chose **RemoteApp Programs**, users will be able to log in directly to AX 2012 R3."},{"content":"<bpt id=\"p1\">**</bpt>RDS Farm Access<ept id=\"p1\">**</ept>: This allows users to gain access to the AX 2012 R3 environment over a VPN connected network.","pos":[19522,19635],"source":"**RDS Farm Access**: This allows users to gain access to the AX 2012 R3 environment over a VPN connected network."},{"content":"This feature is only available if you have:","pos":[19636,19679]},{"content":"Joined this AX deployment to a VPN connected corporate domain.","pos":[19692,19754]},{"content":"Configured the RDS Gateway to accept connections from the VPN connected network.","pos":[19767,19847]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> For both <bpt id=\"p2\">**</bpt>RDS Web Access<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>RDS Farm Access<ept id=\"p3\">**</ept>, when joining a deployment to an existing Active Directory domain you must add the RDS Farm to your AD/DNS with the IP address of the Internal Load Balancer.","pos":[19853,20072],"source":"**Note:** For both **RDS Web Access** and **RDS Farm Access**, when joining a deployment to an existing Active Directory domain you must add the RDS Farm to your AD/DNS with the IP address of the Internal Load Balancer."},{"content":"See the following steps:","pos":[20073,20097]},{"content":"Get the name of your RDS Farm: This can be obtained from the RDS Farm Access link in LCS.","pos":[20106,20195]},{"content":"In this case, it should be <bpt id=\"p1\">**</bpt>RdsFarm0c0fa75<ept id=\"p1\">**</ept>.","pos":[20196,20242],"source":" In this case, it should be **RdsFarm0c0fa75**."},{"pos":[20252,20326],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>MachineName<ept id=\"p1\">](./media/machinename-300x165.png)](./media/machinename.png)</ept>","source":"[![MachineName](./media/machinename-300x165.png)](./media/machinename.png)"},{"content":"Get the IP of the Internal Load Balancer from the Cloud Service dashboard in Azure Portal.","pos":[20336,20426]},{"content":"Inspect the RDS machine that has an internal IP next to port <bpt id=\"p1\">**</bpt>3389<ept id=\"p1\">**</ept>.","pos":[20427,20497],"source":" Inspect the RDS machine that has an internal IP next to port **3389**."},{"content":"In the below example, the Internal Load Balancer IP is 10.1.3.4.","pos":[20498,20562]},{"pos":[20572,20643],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>IP address<ept id=\"p1\">](./media/ip-address-144x300.png)](./media/ip-address.png)</ept>","source":"[![IP address](./media/ip-address-144x300.png)](./media/ip-address.png)"},{"content":"Add the RDS Farm as a Computer in your AD, using the information obtained above.","pos":[20653,20733]},{"pos":[20743,20805],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>AddToAD<ept id=\"p1\">](./media/addtoad-300x113.png)](./media/addtoad.png)</ept>","source":"[![AddToAD](./media/addtoad-300x113.png)](./media/addtoad.png)"},{"pos":[20811,21136],"content":"Failure to do these steps results in the following error when going through RD Web Access: <bpt id=\"p1\">*</bpt>Remote Desktop can't find the computer \"RdsFarm0c0fa75.contoso.com\". This might mean that \" RdsFarm0c0fa75.contoso.com\" does not belong to the specified network. Verify the computer name and domain that you are trying to connect to.<ept id=\"p1\">*</ept>","source":"Failure to do these steps results in the following error when going through RD Web Access: *Remote Desktop can't find the computer \"RdsFarm0c0fa75.contoso.com\". This might mean that \" RdsFarm0c0fa75.contoso.com\" does not belong to the specified network. Verify the computer name and domain that you are trying to connect to.*"},{"content":"To customize virtual network settings, click <bpt id=\"p1\">**</bpt>Customize virtual network<ept id=\"p1\">**</ept>.","pos":[21141,21216],"source":"To customize virtual network settings, click **Customize virtual network**."},{"content":"Then use the following table to enter information.","pos":[21217,21267]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>If you want to:<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[21400,21432],"source":"<strong>If you want to:</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Do this:<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[21446,21471],"source":"<strong>Do this:</strong>"},{"content":"Create a new virtual network in Azure for the environment","pos":[21517,21574]},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>New virtual network<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[21601,21644],"source":"Click <strong>New virtual network</strong>."},{"content":"Enter a name for the virtual network.","pos":[21658,21695]},{"content":"Add the environment to an existing virtual network in Azure","pos":[21755,21814]},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>Existing virtual network<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[21841,21889],"source":"Click <strong>Existing virtual network</strong>."},{"content":"In the <bpt id=\"p1\">&lt;strong&gt;</bpt>Virtual network name<ept id=\"p1\">&lt;/strong&gt;</ept> field, select the name of the existing virtual network that you want to use.","pos":[21903,22024],"source":"In the <strong>Virtual network name</strong> field, select the name of the existing virtual network that you want to use."},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Note<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[22134,22155],"source":"<strong>Note</strong>"},{"content":"To view details about a virtual network, complete the following steps:","pos":[22201,22275],"source":"To view details about a virtual network, complete the following steps:\n    "},{"content":"Log on to the <bpt id=\"p1\">&lt;a href=\"https://manage.windowsazure.com/\"&gt;</bpt>Azure management portal<ept id=\"p1\">&lt;/a&gt;</ept>.","pos":[22289,22374],"source":"Log on to the <a href=\"https://manage.windowsazure.com/\">Azure management portal</a>."},{"content":"In the navigation pane on the left, click <bpt id=\"p1\">&lt;strong&gt;</bpt>Networks<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[22388,22456],"source":"In the navigation pane on the left, click <strong>Networks</strong>."},{"content":"Click the name of the virtual network that you want to view details about.","pos":[22470,22544]},{"content":"Click <bpt id=\"p1\">&lt;strong&gt;</bpt>Configure<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[22558,22591],"source":"Click <strong>Configure</strong>."},{"content":"Details about the virtual network are listed on the page.","pos":[22592,22649]},{"content":"In the <bpt id=\"p1\">&lt;strong&gt;</bpt>Address space<ept id=\"p1\">&lt;/strong&gt;</ept> field, select the appropriate address space for your deployment.","pos":[22719,22821],"source":"In the <strong>Address space</strong> field, select the appropriate address space for your deployment."},{"content":"In the <bpt id=\"p1\">&lt;strong&gt;</bpt>Application subnet name<ept id=\"p1\">&lt;/strong&gt;</ept> field, select the appropriate address space for application VMs.","pos":[22835,22947],"source":"In the <strong>Application subnet name</strong> field, select the appropriate address space for application VMs."},{"content":"In the <bpt id=\"p1\">&lt;strong&gt;</bpt>SQL Server High Availability subnet name<ept id=\"p1\">&lt;/strong&gt;</ept> field, select the appropriate address space for SQL Server VMs.","pos":[22961,23089],"source":"In the <strong>SQL Server High Availability subnet name</strong> field, select the appropriate address space for SQL Server VMs."},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Note<ept id=\"p1\">&lt;/strong&gt;</ept> Note the following:","pos":[23090,23135],"source":"<strong>Note</strong> Note the following:\n    "},{"content":"You can select the same address space that you selected in the <bpt id=\"p1\">&lt;strong&gt;</bpt>Application subnet name<ept id=\"p1\">&lt;/strong&gt;</ept> field.","pos":[23149,23259],"source":"You can select the same address space that you selected in the <strong>Application subnet name</strong> field."},{"content":"This subnet must have 4 IP addresses available in it.","pos":[23273,23326]},{"content":"In the <bpt id=\"p1\">&lt;strong&gt;</bpt>Active Directory subnet<ept id=\"p1\">&lt;/strong&gt;</ept> field, do the following:","pos":[23355,23431],"source":"In the <strong>Active Directory subnet</strong> field, do the following:\n    "},{"content":"If you chose to create a <bpt id=\"p1\">&lt;strong&gt;</bpt>new domain<ept id=\"p1\">&lt;/strong&gt;</ept> in Azure for your environment: Enter an IP address and subnet mask for the new Active Directory subnet.","pos":[23445,23601],"source":"If you chose to create a <strong>new domain</strong> in Azure for your environment: Enter an IP address and subnet mask for the new Active Directory subnet."},{"content":"Lifecycle Services will create this subnet for you.","pos":[23602,23653]},{"content":"If you chose to add the environment to an <bpt id=\"p1\">&lt;strong&gt;</bpt>existing domain<ept id=\"p1\">&lt;/strong&gt;</ept> in Azure: Enter the IP address of the existing Active Directory subnet.","pos":[23667,23813],"source":"If you chose to add the environment to an <strong>existing domain</strong> in Azure: Enter the IP address of the existing Active Directory subnet."},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Note<ept id=\"p1\">&lt;/strong&gt;</ept> : This subnet must have 3 IP addresses available in it.","pos":[23814,23891],"source":"<strong>Note</strong> : This subnet must have 3 IP addresses available in it."},{"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept>.","pos":[23968,23983],"source":"Click **Done**."},{"content":"The <bpt id=\"p1\">**</bpt>Deploy environment<ept id=\"p1\">**</ept> panel is redisplayed.","pos":[23984,24032],"source":" The **Deploy environment** panel is redisplayed."},{"content":"The number and size of each virtual machine that will be deployed is listed.","pos":[24037,24113]},{"content":"Change the number and size of the virtual machines, as needed.","pos":[24114,24176]},{"pos":[24185,24433],"content":"For information about the software installed on each virtual machine in this environment, see the High availability environment section in the article, <bpt id=\"p1\">[</bpt>Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure<ept id=\"p1\">](plan-2012-r3-deployment-azure.md)</ept>.","source":"For information about the software installed on each virtual machine in this environment, see the High availability environment section in the article, [Plan your Microsoft Dynamics AX 2012 R3 deployment on Azure](plan-2012-r3-deployment-azure.md)."},{"pos":[24442,24604],"content":"For sizing and pricing details about virtual machines, see <bpt id=\"p1\">[</bpt>Virtual machines pricing details<ept id=\"p1\">](http://azure.microsoft.com/en-us/pricing/details/virtual-machines/)</ept>.","source":"For sizing and pricing details about virtual machines, see [Virtual machines pricing details](http://azure.microsoft.com/en-us/pricing/details/virtual-machines/)."},{"content":"Click <bpt id=\"p1\">**</bpt>Software License Terms<ept id=\"p1\">**</ept> to review the licensing terms and conditions.","pos":[24610,24688],"source":"Click **Software License Terms** to review the licensing terms and conditions."},{"content":"Then select the check box to indicate that you agree to the terms.","pos":[24689,24755]},{"pos":[24760,24775],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.","source":"Click **Next**."},{"content":"Click <bpt id=\"p1\">**</bpt>Deploy to confirm<ept id=\"p1\">**</ept> that you’re ready to deploy the environment.","pos":[24780,24852],"source":"Click **Deploy to confirm** that you’re ready to deploy the environment."},{"content":"The deployment may take a few hours to complete.","pos":[24853,24901]},{"content":"When the deployment is done, the <bpt id=\"p1\">**</bpt>Deployment Status<ept id=\"p1\">**</ept> column on the <bpt id=\"p2\">**</bpt>Cloud-hosted environments<ept id=\"p2\">**</ept> page will display <bpt id=\"p3\">**</bpt>Deployed<ept id=\"p3\">**</ept>.","pos":[24902,25032],"source":" When the deployment is done, the **Deployment Status** column on the **Cloud-hosted environments** page will display **Deployed**."},{"content":"(You may need to refresh your browser to see this.) If the deployment fails, you may see an error message right away.","pos":[25033,25150]},{"content":"If the error occurs later in the deployment process, error details will be displayed in the details pane on the right-side of the page.","pos":[25151,25286]},{"pos":[25291,25320],"content":"7. Prepare AX 2012 R3 for use","linkify":"7. Prepare AX 2012 R3 for use","nodes":[{"content":"7. Prepare AX 2012 R3 for use","pos":[0,29]}]},{"content":"Now that the environment has been deployed on Azure, you must set up and configure AX 2012 R3 for use.","pos":[25321,25423]},{"content":"See the following sections for more information.","pos":[25424,25472]},{"pos":[25478,25510],"content":"Log on to an AOS virtual machine","linkify":"Log on to an AOS virtual machine","nodes":[{"content":"Log on to an AOS virtual machine","pos":[0,32]}]},{"content":"Log on to an AOS- virtual machine using the DynamicsInstallUser account.","pos":[25512,25584]},{"content":"For instructions, see the “How do I log on to a virtual machine?”","pos":[25585,25650]},{"content":"section of the <bpt id=\"p1\">[</bpt>Manage your Microsoft Dynamics AX 2012 R3 deployment on Azure<ept id=\"p1\">](manage-2012-r3-deployment-azure.md)</ept> article.","pos":[25651,25774],"source":" section of the [Manage your Microsoft Dynamics AX 2012 R3 deployment on Azure](manage-2012-r3-deployment-azure.md) article."},{"pos":[25780,25798],"content":"Compile AX 2012 R3","linkify":"Compile AX 2012 R3","nodes":[{"content":"Compile AX 2012 R3","pos":[0,18]}]},{"content":"Compile AX 2012 R3 by using AxBuild.exe.","pos":[25800,25840]},{"content":"For instructions, see <bpt id=\"p1\">[</bpt>AxBuild.exe for Parallel Compile on AOS of X++ to p-code<ept id=\"p1\">](https://technet.microsoft.com/en-us/library/dn528954.aspx)</ept>.","pos":[25841,25981],"source":" For instructions, see [AxBuild.exe for Parallel Compile on AOS of X++ to p-code](https://technet.microsoft.com/en-us/library/dn528954.aspx)."},{"pos":[25987,26008],"content":"Initialize AX 2012 R3","linkify":"Initialize AX 2012 R3","nodes":[{"content":"Initialize AX 2012 R3","pos":[0,21]}]},{"content":"Open the AX 2012 R3 client and complete the initialization checklists.","pos":[26010,26080]},{"content":"For instructions, see <bpt id=\"p1\">[</bpt>Initialization checklists<ept id=\"p1\">](https://technet.microsoft.com/en-us/library/aa497061.aspx)</ept>.","pos":[26081,26190],"source":" For instructions, see [Initialization checklists](https://technet.microsoft.com/en-us/library/aa497061.aspx)."},{"pos":[26196,26215],"content":"Install sample data","linkify":"Install sample data","nodes":[{"content":"Install sample data","pos":[0,19]}]},{"content":"If you want sample data installed in your environment, complete the following steps.","pos":[26217,26301]},{"content":"Log on to a SQL-<ph id=\"ph1\">&amp;lt;</ph>GUID<ph id=\"ph2\">&amp;gt;</ph> virtual machine.","pos":[26307,26352],"source":"Log on to a SQL-&lt;GUID&gt; virtual machine."},{"content":"Log on to the virtual machine using the DynamicsInstallUser account.","pos":[26353,26421]},{"content":"For instructions, see the “How do I log on to a virtual machine?”","pos":[26422,26487]},{"content":"section of the <bpt id=\"p1\">[</bpt>Manage your Microsoft Dynamics AX 2012 R3 deployment on Azure<ept id=\"p1\">](manage-2012-r3-deployment-azure.md)</ept> article.","pos":[26488,26611],"source":" section of the [Manage your Microsoft Dynamics AX 2012 R3 deployment on Azure](manage-2012-r3-deployment-azure.md) article."},{"content":"Go to the following location on the virtual machine: F:TestTransferTool","pos":[26616,26687]},{"content":"Install the Test Data Transfer Tool.","pos":[26692,26728]},{"content":"For instructions, see <bpt id=\"p1\">[</bpt>Install the Test Data Transfer Tool (beta) for Microsoft Dynamics AX<ept id=\"p1\">](install-test-data-transfer-tool-beta.md)</ept>.","pos":[26729,26863],"source":" For instructions, see [Install the Test Data Transfer Tool (beta) for Microsoft Dynamics AX](install-test-data-transfer-tool-beta.md)."},{"content":"Open a command prompt and navigate to the following location: C:Program Files (x86)Microsoft Dynamics AX 2012 Test Data Transfer Tool (Beta)","pos":[26868,27008]},{"content":"Run the following command: dp.exe import F:DemoData MicrosoftDynamicsAx","pos":[27013,27084]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The sample data includes trial license keys for AX 2012 R3.","pos":[27086,27155],"source":"**Note:** The sample data includes trial license keys for AX 2012 R3."},{"content":"If you choose not to install the sample data, you can download trial license keys—for development or testing purposes—from <bpt id=\"p1\">[</bpt>CustomerSource<ept id=\"p1\">](https://mbs.microsoft.com/downloads/customer/AX/AXDemoTools/MicrosoftDynamicsAX2012R2v4DemoLicense.zip)</ept> or <bpt id=\"p2\">[</bpt>MSDN<ept id=\"p2\">](https://msdn.microsoft.com/en-us/subscriptions/securedownloads/hh442898#FileId=57028)</ept>.","pos":[27156,27496],"source":" If you choose not to install the sample data, you can download trial license keys—for development or testing purposes—from [CustomerSource](https://mbs.microsoft.com/downloads/customer/AX/AXDemoTools/MicrosoftDynamicsAX2012R2v4DemoLicense.zip) or [MSDN](https://msdn.microsoft.com/en-us/subscriptions/securedownloads/hh442898#FileId=57028)."},{"pos":[27502,27519],"content":"Give users access","linkify":"Give users access","nodes":[{"content":"Give users access","pos":[0,17]}]},{"content":"To enable your users to access AX 2012 R3, complete the following tasks:","pos":[27521,27593]},{"content":"Add each user’s domain account to the Remote Desktop Users group on the CLI- virtual machine.","pos":[27599,27692]},{"content":"Give users access to AX 2012 R3.","pos":[27697,27729]},{"content":"For instructions, see <bpt id=\"p1\">[</bpt>Create new users in Microsoft Dynamics AX<ept id=\"p1\">](https://technet.microsoft.com/en-us/library/aa548139.aspx)</ept>.","pos":[27730,27855],"source":" For instructions, see [Create new users in Microsoft Dynamics AX](https://technet.microsoft.com/en-us/library/aa548139.aspx)."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If you don’t want to create a VPN connection and a domain trust, you can still give users access to AX 2012 R3.","pos":[27857,27978],"source":"**Note:** If you don’t want to create a VPN connection and a domain trust, you can still give users access to AX 2012 R3."},{"content":"To do so, you’ll need to log on to the virtual machine that serves as the domain controller, and create domain accounts for each user.","pos":[27979,28113]},{"content":"Then, you’ll need to complete the two tasks mentioned above.","pos":[28114,28174]},{"pos":[28180,28211],"content":"Set up and configure AX 2012 R3","linkify":"Set up and configure AX 2012 R3","nodes":[{"content":"Set up and configure AX 2012 R3","pos":[0,31]}]},{"content":"The procedures for setting up and configuring AX 2012 R3 on Azure are the same procedures used for setting up and configuring on-premises deployments.","pos":[28213,28363]},{"content":"See the following resources for more information.","pos":[28364,28413]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Task<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[28515,28536],"source":"<strong>Task</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Resources<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[28546,28572],"source":"<strong>Resources</strong>"},{"content":"See the instructions on TechNet","pos":[28606,28637]},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg732218.aspx\"&gt;</bpt>System setup for Microsoft Dynamics AX<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[28656,28766],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg732218.aspx\">System setup for Microsoft Dynamics AX</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg732158.aspx\"&gt;</bpt>The Microsoft Dynamics AX client<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[28776,28880],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg732158.aspx\">The Microsoft Dynamics AX client</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg731868.aspx\"&gt;</bpt>Application Object Servers<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[28890,28988],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg731868.aspx\">Application Object Servers</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/ee873263.aspx\"&gt;</bpt>Reporting in Microsoft Dynamics AX<ept id=\"p1\">&lt;/a&gt;</ept><bpt id=\"p2\"> &lt;strong&gt;</bpt>Note:<ept id=\"p2\">&lt;/strong&gt;</ept> Be default, reports are deployed to one business intelligence (BI) virtual machine.","pos":[28998,29211],"source":"<a href=\"https://technet.microsoft.com/en-us/library/ee873263.aspx\">Reporting in Microsoft Dynamics AX</a> <strong>Note:</strong> Be default, reports are deployed to one business intelligence (BI) virtual machine."},{"content":"For each additional BI virtual machine in your environment, you’ll need to:","pos":[29212,29287],"source":" For each additional BI virtual machine in your environment, you’ll need to:\n"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/EN-US/library/dd309703.aspx\"&gt;</bpt>Deploy the default reports.<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[29297,29396],"source":"<a href=\"https://technet.microsoft.com/EN-US/library/dd309703.aspx\">Deploy the default reports.</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/EN-US/library/aa496432.aspx\"&gt;</bpt>Grant users access to the reports.<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[29406,29512],"source":"<a href=\"https://technet.microsoft.com/EN-US/library/aa496432.aspx\">Grant users access to the reports.</a>"},{"content":"Open the <bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/EN-US/library/aa548504.aspx\"&gt;</bpt>Report servers form<ept id=\"p1\">&lt;/a&gt;</ept> to connect each AOS instance with each SSRS instance.","pos":[29522,29676],"source":"Open the <a href=\"https://technet.microsoft.com/EN-US/library/aa548504.aspx\">Report servers form</a> to connect each AOS instance with each SSRS instance."},{"content":"To see a step-by-step procedure of how to this is done, see <bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/hh389773.aspx\"&gt;</bpt>Connect Microsoft Dynamics AX to the new Reporting Services instance<ept id=\"p1\">&lt;/a&gt;</ept>.","pos":[29677,29878],"source":" To see a step-by-step procedure of how to this is done, see <a href=\"https://technet.microsoft.com/en-us/library/hh389773.aspx\">Connect Microsoft Dynamics AX to the new Reporting Services instance</a>."},{"content":"<bpt id=\"p1\">&lt;a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=5916\"&gt;</bpt>Management Reporter 2012<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[29899,29999],"source":"<a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=5916\">Management Reporter 2012</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/ee873272.aspx\"&gt;</bpt>Analytics in Microsoft Dynamics AX<ept id=\"p1\">&lt;/a&gt;</ept><bpt id=\"p2\"> &lt;strong&gt;</bpt>Note:<ept id=\"p2\">&lt;/strong&gt;</ept> To process the cubes that are included with AX 2012 R3, we recommend that you increase the ExternalCommandTimeout value to 7200.","pos":[30009,30267],"source":"<a href=\"https://technet.microsoft.com/en-us/library/ee873272.aspx\">Analytics in Microsoft Dynamics AX</a> <strong>Note:</strong> To process the cubes that are included with AX 2012 R3, we recommend that you increase the ExternalCommandTimeout value to 7200."},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg866975.aspx\"&gt;</bpt>Help server<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[30277,30360],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg866975.aspx\">Help server</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg751374.aspx\"&gt;</bpt>Enterprise Portal and Role Centers<ept id=\"p1\">&lt;/a&gt;</ept><bpt id=\"p2\"> &lt;strong&gt;</bpt>Note:<ept id=\"p2\">&lt;/strong&gt;</ept> Enterprise Portal is configured to run on port 81, so be sure to exclude that port in your firewall settings.","pos":[30370,30609],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg751374.aspx\">Enterprise Portal and Role Centers</a> <strong>Note:</strong> Enterprise Portal is configured to run on port 81, so be sure to exclude that port in your firewall settings."},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg731850.aspx\"&gt;</bpt>Enterprise Search<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[30619,30708],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg731850.aspx\">Enterprise Search</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg731810.aspx\"&gt;</bpt>Services and Application Integration Framework (AIF)<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[30718,30842],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg731810.aspx\">Services and Application Integration Framework (AIF)</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/jj710398.aspx\"&gt;</bpt>Microsoft Dynamics AX Retail for IT pros and developers<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[30852,30979],"source":"<a href=\"https://technet.microsoft.com/en-us/library/jj710398.aspx\">Microsoft Dynamics AX Retail for IT pros and developers</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/aa834453.aspx\"&gt;</bpt>.NET Business Connector<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[30989,31084],"source":"<a href=\"https://technet.microsoft.com/en-us/library/aa834453.aspx\">.NET Business Connector</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg731779.aspx\"&gt;</bpt>Security<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[31094,31174],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg731779.aspx\">Security</a>"},{"content":"View printable guides and white papers","pos":[31218,31256]},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg732268.aspx\"&gt;</bpt>Printable guides<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[31275,31363],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg732268.aspx\">Printable guides</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"https://technet.microsoft.com/en-us/library/gg188985.aspx\"&gt;</bpt>White papers for system administrators<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[31373,31483],"source":"<a href=\"https://technet.microsoft.com/en-us/library/gg188985.aspx\">White papers for system administrators</a>"},{"content":"Use the Microsoft Dynamics AX web search tool","pos":[31528,31573]},{"content":"<bpt id=\"p1\">&lt;a href=\"http://go.microsoft.com/fwlink/?LinkID=212924\"&gt;</bpt>Web search for developers<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[31592,31677],"source":"<a href=\"http://go.microsoft.com/fwlink/?LinkID=212924\">Web search for developers</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"http://go.microsoft.com/fwlink/?LinkID=212925\"&gt;</bpt>Web search for system administrators<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[31687,31783],"source":"<a href=\"http://go.microsoft.com/fwlink/?LinkID=212925\">Web search for system administrators</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"http://go.microsoft.com/fwlink/?LinkID=212922\"&gt;</bpt>Web search for application users<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[31793,31885],"source":"<a href=\"http://go.microsoft.com/fwlink/?LinkID=212922\">Web search for application users</a>"},{"content":"<bpt id=\"p1\">&lt;a href=\"http://go.microsoft.com/fwlink/?LinkID=194311\"&gt;</bpt>Combined web search<ept id=\"p1\">&lt;/a&gt;</ept>","pos":[31895,31974],"source":"<a href=\"http://go.microsoft.com/fwlink/?LinkID=194311\">Combined web search</a>"},{"pos":[32019,32059],"content":"8. Prepare the whole environment for use","linkify":"8. Prepare the whole environment for use","nodes":[{"content":"8. Prepare the whole environment for use","pos":[0,40]}]},{"content":"The following sections provide information to help you configure this environment for use.","pos":[32060,32150]},{"pos":[32156,32201],"content":"Understand the high availability architecture","linkify":"Understand the high availability architecture","nodes":[{"content":"Understand the high availability architecture","pos":[0,45]}]},{"content":"To provide redundancy, virtual machines are grouped in <bpt id=\"p1\">*</bpt>availability sets<ept id=\"p1\">*</ept>.","pos":[32203,32278],"source":"To provide redundancy, virtual machines are grouped in *availability sets*."},{"content":"Availability sets ensure that during a planned or unplanned maintenance event, at least one virtual machine in the availability set is running.","pos":[32279,32422]},{"content":"Each virtual machine in an availability set is assigned an <bpt id=\"p1\">**</bpt>update domain<ept id=\"p1\">**</ept> and a <bpt id=\"p2\">**</bpt>fault domain<ept id=\"p2\">**</ept> by the underlying Azure platform.","pos":[32423,32556],"source":" Each virtual machine in an availability set is assigned an **update domain** and a **fault domain** by the underlying Azure platform."},{"pos":[32562,32670],"content":"<bpt id=\"p1\">**</bpt>Update domain:<ept id=\"p1\">**</ept> An update domain defines the group of virtual machines that share a same update schedule.","source":"**Update domain:** An update domain defines the group of virtual machines that share a same update schedule."},{"pos":[32675,32798],"content":"<bpt id=\"p1\">**</bpt>Fault domain:<ept id=\"p1\">**</ept> A fault domain defines the group of virtual machines that share a common power source and network switch.","source":"**Fault domain:** A fault domain defines the group of virtual machines that share a common power source and network switch."},{"content":"The high availability environment includes an availability set for each tier of virtual machines.","pos":[32800,32897]},{"content":"For example, there is an availability set for the domain controllers, the database servers, the AOS servers, and so on.","pos":[32898,33017]},{"pos":[33023,33088],"content":"Install the data import/export framework and RapidStart Connector","linkify":"Install the data import/export framework and RapidStart Connector","nodes":[{"content":"Install the data import/export framework and RapidStart Connector","pos":[0,65]}]},{"content":"For high availability, the <bpt id=\"p1\">**</bpt>Data import/export framework<ept id=\"p1\">**</ept> and the <bpt id=\"p2\">**</bpt>RapidStart Connector<ept id=\"p2\">**</ept> should be installed on all virtual machines that are AOS servers.","pos":[33090,33248],"source":"For high availability, the **Data import/export framework** and the **RapidStart Connector** should be installed on all virtual machines that are AOS servers."},{"content":"You may need to install these components.","pos":[33249,33290]},{"content":"For instructions, see: • <bpt id=\"p1\">[</bpt>Install the Data import/export framework (DIXF, DMF)<ept id=\"p1\">](install-dixf.md)</ept> • <bpt id=\"p2\">[</bpt>Install the RapidStart Connector<ept id=\"p2\">](https://technet.microsoft.com/en-us/library/hh771574.aspx)</ept>","pos":[33291,33483],"source":" For instructions, see: • [Install the Data import/export framework (DIXF, DMF)](install-dixf.md) • [Install the RapidStart Connector](https://technet.microsoft.com/en-us/library/hh771574.aspx)"},{"pos":[33489,33557],"content":"Configure Microsoft SQL Server Reporting Services for load balancing","linkify":"Configure Microsoft SQL Server Reporting Services for load balancing","nodes":[{"content":"Configure Microsoft SQL Server Reporting Services for load balancing","pos":[0,68]}]},{"content":"The BI servers in the environment host Microsoft SQL Server Reporting Services.","pos":[33559,33638]},{"content":"To configure Reporting Services for load balancing, see the <bpt id=\"p1\">[</bpt>Configure SSRS for load balancing in your Azure deployment<ept id=\"p1\">](http://blogs.msdn.com/b/axsupport/archive/2015/06/25/configure-ssrs-for-load-balancing-in-your-azure-deployment.aspx)</ept> blog post.","pos":[33639,33888],"source":" To configure Reporting Services for load balancing, see the [Configure SSRS for load balancing in your Azure deployment](http://blogs.msdn.com/b/axsupport/archive/2015/06/25/configure-ssrs-for-load-balancing-in-your-azure-deployment.aspx) blog post."},{"pos":[33894,33948],"content":"Join Enterprise Portal servers in a single server farm","linkify":"Join Enterprise Portal servers in a single server farm","nodes":[{"content":"Join Enterprise Portal servers in a single server farm","pos":[0,54]}]},{"content":"When Lifecycle Services deploys Enterprise Portal servers, each server is deployed into its own server farm.","pos":[33950,34058]},{"content":"To join all Enterprise Portal servers in a single server farm, see <bpt id=\"p1\">[</bpt>Join Enterprise Portal servers in a single server farm<ept id=\"p1\">](join-enterprise-portal-servers-single-server-farm.md)</ept>.","pos":[34059,34237],"source":" To join all Enterprise Portal servers in a single server farm, see [Join Enterprise Portal servers in a single server farm](join-enterprise-portal-servers-single-server-farm.md)."},{"pos":[34243,34292],"content":"Configure the environment for optimal performance","linkify":"Configure the environment for optimal performance","nodes":[{"content":"Configure the environment for optimal performance","pos":[0,49]}]},{"pos":[34294,34684],"content":"Configure the environment for optimal performance by completing the following tasks: • <bpt id=\"p1\">[</bpt>Initialize database files<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/ms175935.aspx)</ept> • <bpt id=\"p2\">[</bpt>Enable lock pages<ept id=\"p2\">](https://technet.microsoft.com/en-us/library/ms190730.aspx)</ept> • <bpt id=\"p3\">[</bpt>Improve client startup times by configuring clients to use roaming profiles<ept id=\"p3\">](https://technet.microsoft.com/en-us/library/dn479031.aspx)</ept>","source":"Configure the environment for optimal performance by completing the following tasks: • [Initialize database files](https://msdn.microsoft.com/en-us/library/ms175935.aspx) • [Enable lock pages](https://technet.microsoft.com/en-us/library/ms190730.aspx) • [Improve client startup times by configuring clients to use roaming profiles](https://technet.microsoft.com/en-us/library/dn479031.aspx)"},{"pos":[34690,34742],"content":"Learn more about the high availability configuration","linkify":"Learn more about the high availability configuration","nodes":[{"content":"Learn more about the high availability configuration","pos":[0,52]}]},{"content":"To learn more about how we’ve configured this environment for high availability, see the following resources:","pos":[34744,34853]},{"pos":[34859,34971],"content":"<bpt id=\"p1\">[</bpt>FSMO placement and optimization on Active Directory domain controllers<ept id=\"p1\">](http://support.microsoft.com/kb/223346)</ept>","source":"[FSMO placement and optimization on Active Directory domain controllers](http://support.microsoft.com/kb/223346)"},{"pos":[34976,35078],"content":"<bpt id=\"p1\">[</bpt>Configure SQL Server and storage settings<ept id=\"p1\">](https://technet.microsoft.com/en-us/library/dd309734.aspx)</ept>","source":"[Configure SQL Server and storage settings](https://technet.microsoft.com/en-us/library/dd309734.aspx)"},{"pos":[35083,35183],"content":"<bpt id=\"p1\">[</bpt>WSFC Quorum Modes and Voting Configuration<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/hh270280.aspx)</ept>","source":"[WSFC Quorum Modes and Voting Configuration](https://msdn.microsoft.com/en-us/library/hh270280.aspx)"},{"pos":[35188,35293],"content":"<bpt id=\"p1\">[</bpt>Remote Desktop Cmdlets in Windows PowerShell<ept id=\"p1\">](https://technet.microsoft.com/en-us/library/jj215451.aspx)</ept>","source":"[Remote Desktop Cmdlets in Windows PowerShell](https://technet.microsoft.com/en-us/library/jj215451.aspx)"},{"pos":[35298,35359],"content":"9. Learn more about the service accounts for this environment","linkify":"9. Learn more about the service accounts for this environment","nodes":[{"content":"9. Learn more about the service accounts for this environment","pos":[0,61]}]},{"content":"The following sections provide information about the service accounts that were created when you deployed the environment.","pos":[35360,35482]},{"pos":[35488,35503],"content":"Domain accounts","linkify":"Domain accounts","nodes":[{"content":"Domain accounts","pos":[0,15]}]},{"content":"The following table lists the domain accounts that were created when you deployed the environment.","pos":[35505,35603]},{"content":"Domain account","pos":[35607,35621]},{"content":"Description","pos":[35641,35652]},{"pos":[36075,36101],"content":"<ph id=\"ph1\">&lt;DomainName&gt;</ph>AOSServiceUser","source":"<DomainName>AOSServiceUser"},{"content":"The account used to run the following services: Microsoft Dynamics AX Object Server","pos":[36109,36192]},{"pos":[36309,36335],"content":"<ph id=\"ph1\">&lt;DomainName&gt;</ph>SQLServiceUser","source":"<DomainName>SQLServiceUser"},{"content":"The account used to run the following services: SQL Server Analysis Services (MSSQLSERVER)","pos":[36343,36433]},{"pos":[36543,36574],"content":"<ph id=\"ph1\">&lt;DomainName&gt;</ph>DynamicsInstallUser","source":"<DomainName>DynamicsInstallUser"},{"content":"The account used to install Dynamics AX 2012 R3.","pos":[36577,36625]},{"pos":[36777,36802],"content":"<ph id=\"ph1\">&lt;DomainName&gt;</ph>SPServiceUser","source":"<DomainName>SPServiceUser"},{"content":"The account used to run the following services: AppFabric Caching Service, SharePoint Search Host Controller, SharePoint Server Search 15, SharePoint Timer Service, and SharePoint User Code Host.","pos":[36811,37006]},{"pos":[37011,37034],"content":"<ph id=\"ph1\">&lt;DomainName&gt;</ph>BCProxyUser","source":"<DomainName>BCProxyUser"},{"content":"The account used as the Business Connector proxy.","pos":[37045,37094]},{"pos":[37245,37270],"content":"<ph id=\"ph1\">&lt;DomainName&gt;</ph>AXServiceUser","source":"<DomainName>AXServiceUser"},{"content":"The account used to run the following services: Microsoft Dynamics AX Data Import/Export Framework Service and Microsoft Dynamics ERP RapidStart Connector.","pos":[37279,37434]},{"pos":[37479,37508],"content":"<ph id=\"ph1\">&lt;DomainName&gt;</ph>RetailServiceUser","source":"<DomainName>RetailServiceUser"},{"content":"The account used to run the following services: Microsoft Dynamics AX for Retail Commerce Data Exchange Async Client.","pos":[37513,37630]},{"pos":[37712,37852],"content":"Note: The passwords are displayed on the Cloud-hosted environments page in <bpt id=\"p1\">[</bpt>Lifecycle Services<ept id=\"p1\">](https://lifecycleservices.dynamics.com/en/)</ept>.","source":"Note: The passwords are displayed on the Cloud-hosted environments page in [Lifecycle Services](https://lifecycleservices.dynamics.com/en/)."},{"pos":[37858,37886],"content":"Local administrator accounts","linkify":"Local administrator accounts","nodes":[{"content":"Local administrator accounts","pos":[0,28]}]},{"content":"Each virtual machine that you deployed has a local administrator account.","pos":[37888,37961]},{"content":"This account is: builtinaxlocaladmin.","pos":[37962,37999]},{"content":"The passwords for the local administrator accounts are displayed on the <bpt id=\"p1\">**</bpt>Cloud-hosted environments<ept id=\"p1\">**</ept> page in Lifecycle Services.","pos":[38000,38129],"source":" The passwords for the local administrator accounts are displayed on the **Cloud-hosted environments** page in Lifecycle Services."}]}