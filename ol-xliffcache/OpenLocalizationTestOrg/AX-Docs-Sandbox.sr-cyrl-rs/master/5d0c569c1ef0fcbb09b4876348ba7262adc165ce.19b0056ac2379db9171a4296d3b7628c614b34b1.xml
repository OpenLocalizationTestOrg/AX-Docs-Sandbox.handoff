{"content":"---\n# required metadata\n\ntitle: Data upgrade from AX 2012 to Dynamics 365 for Finance and Operations in a development environment\ndescription: This topic explains the end-to-end process for upgrading from Microsoft Dynamics AX 2012 to Microsoft Dynamics 365 for Finance and Operations in a development environment\nauthor: tariqbell\nmanager: AnnBe\nms.date: 05/30/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: margoc\nms.search.scope: Operations, Platform, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 106163\nms.assetid: \nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2017-05-31\nms.dyn365.ops.version: Platform update 8\n\n---\n\n# Data upgrade from AX 2012 to Dynamics 365 for Finance and Operations in a development environment\n\n[!include[banner](../includes/banner.md)]\n\nThis is an exciting moment in the upgrade project. The output of this task  provides the first upgraded dataset from Microsoft Dynamics AX 2012 in Microsoft Dynamics 365 for Finance and Operations.\n\nBefore you run this process in a shared sandbox environment, we recommend that you run it in a development environment. There are two main reasons for this approach:\n\n- It provides local data that developers can write and test their custom data upgrade scripts against.\n- It helps reduce the overall time that is spent on iterations of the data upgrade process. In a development environment, an issue can be debugged immediately, code can be adjusted, and the upgrade can be rerun within minutes. However, larger sandbox environments don’t allow for this level of agility. In those environments, a minimum of several hours will be required to debug and remediate issues, update code, deploy the updated code, and rerun the upgrade.\n\n## End-to-end data upgrade process\n\n![Data upgrade process](media/endToEndDataUpgradeProcess.png)\n\n### Back up your AX 2012 database\n\nTo back up your AX 2012 database, use the standard Microsoft SQL Server process to produce a *.bak file. If you use the compression option when you create the backup, the file size will be smaller, and less time is required in order upload it to and download it from Microsoft Azure Storage.\n\n### Upload the backup to Azure Storage\n\nUpload your backup to Azure Storage. For more information, see UsingStorageExplorer.docx TODO\n\n### Download and restore the backup to the development environment\n\nWhen you restore the backup to your Dynamics 365 for Finance and Operations development environment, don’t overwrite the existing AXDB database. Instead, restore the AX 2012 database next to the original databases. You might also consider using drive D for the data and log files, to help improve performance. However, there is a potential downside to using drive D. If the underlying virtual machine (VM) is deallocated in Azure and then reallocated, drive D will be wiped. In practice, this scenario rarely occurs. Therefore, you might find that the risk is acceptable. To learn more about how to use drive D, see [Understanding the temporary drive on Windows Azure Virtual Machines](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).\n\nTo speed up the database restore process, you can change the SQL Server service account to **axlocaladmin**. The restore process can then use instant file initialization. For more information, see [Database Instant File Initialization](https://docs.microsoft.com/en-us/sql/relational-databases/databases/database-instant-file-initialization).\n\nAfter the database is restored, stop the following services:\n\n- World wide web publishing service\n- Dynamics 365 for Finance and Operations Batch Management service\n- Management Reporter 2012 Process service\n\nNext, rename the original AXDB database **AXDB_orig**. This database might be useful as reference later, when you develop code.\n\nFinally, rename the newly restored AX 2012 database **AXDB**.\n\n### Run the data upgrade\n\nRun the data upgrade deployable package as described in [Upgrade data in development, demo, or sandbox environments](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update).\n\n## Troubleshooting data upgrade script errors\n\nThere are options that you let you resume the data upgrade where it last stopped. You can also record any data upgrade script errors with call stacks to a table in the database. For development scenarios, you can skip failed scripts and continue to run the upgrade.\n\nFor more details, see the [main data upgrade topic](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update#troubleshoot-upgrade-script-errors).\n\n### Recommendation for the first data upgrade run\n\nWhen you run the data upgrade against your dataset for the first time, and especially when there many customizations or many custom data upgrade scripts, you might find the [feature to skip failed scripts](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update) useful. By using this feature, you gain visibility into as many errors as possible in one run. Otherwise, only one critical issue is discovered per run. Be aware that, because dependencies exist between scripts, you might receive errors in related child scripts if you skip the parent script. These errors occur only because the parent wasn’t run correctly. They will be resolved when the issue in the parent script is resolved.\n","nodes":[{"content":"Data upgrade from AX 2012 to Dynamics 365 for Finance and Operations in a development environment","nodes":[{"pos":[0,97],"content":"Data upgrade from AX 2012 to Dynamics 365 for Finance and Operations in a development environment","nodes":[{"content":"Data upgrade from AX 2012 to Dynamics 365 for Finance and Operations in a development environment","pos":[0,97]}]}],"pos":[31,129],"yaml":true},{"content":"This topic explains the end-to-end process for upgrading from Microsoft Dynamics AX 2012 to Microsoft Dynamics 365 for Finance and Operations in a development environment","nodes":[{"pos":[0,170],"content":"This topic explains the end-to-end process for upgrading from Microsoft Dynamics AX 2012 to Microsoft Dynamics 365 for Finance and Operations in a development environment","nodes":[{"content":"This topic explains the end-to-end process for upgrading from Microsoft Dynamics AX 2012 to Microsoft Dynamics 365 for Finance and Operations in a development environment","pos":[0,170]}]}],"pos":[142,313],"yaml":true},{"pos":[798,895],"content":"Data upgrade from AX 2012 to Dynamics 365 for Finance and Operations in a development environment","linkify":"Data upgrade from AX 2012 to Dynamics 365 for Finance and Operations in a development environment","nodes":[{"content":"Data upgrade from AX 2012 to Dynamics 365 for Finance and Operations in a development environment","pos":[0,97]}]},{"content":"This is an exciting moment in the upgrade project.","pos":[940,990]},{"content":"The output of this task  provides the first upgraded dataset from Microsoft Dynamics AX 2012 in Microsoft Dynamics 365 for Finance and Operations.","pos":[991,1137]},{"content":"Before you run this process in a shared sandbox environment, we recommend that you run it in a development environment.","pos":[1139,1258]},{"content":"There are two main reasons for this approach:","pos":[1259,1304]},{"content":"It provides local data that developers can write and test their custom data upgrade scripts against.","pos":[1308,1408]},{"content":"It helps reduce the overall time that is spent on iterations of the data upgrade process.","pos":[1411,1500]},{"content":"In a development environment, an issue can be debugged immediately, code can be adjusted, and the upgrade can be rerun within minutes.","pos":[1501,1635]},{"content":"However, larger sandbox environments don’t allow for this level of agility.","pos":[1636,1711]},{"content":"In those environments, a minimum of several hours will be required to debug and remediate issues, update code, deploy the updated code, and rerun the upgrade.","pos":[1712,1870]},{"pos":[1875,1906],"content":"End-to-end data upgrade process","linkify":"End-to-end data upgrade process","nodes":[{"content":"End-to-end data upgrade process","pos":[0,31]}]},{"content":"Data upgrade process","pos":[1910,1930]},{"pos":[1975,2004],"content":"Back up your AX 2012 database","linkify":"Back up your AX 2012 database","nodes":[{"content":"Back up your AX 2012 database","pos":[0,29]}]},{"content":"To back up your AX 2012 database, use the standard Microsoft SQL Server process to produce a *.bak file.","pos":[2006,2110]},{"content":"If you use the compression option when you create the backup, the file size will be smaller, and less time is required in order upload it to and download it from Microsoft Azure Storage.","pos":[2111,2297]},{"pos":[2303,2337],"content":"Upload the backup to Azure Storage","linkify":"Upload the backup to Azure Storage","nodes":[{"content":"Upload the backup to Azure Storage","pos":[0,34]}]},{"content":"Upload your backup to Azure Storage.","pos":[2339,2375]},{"content":"For more information, see UsingStorageExplorer.docx TODO","pos":[2376,2432]},{"pos":[2438,2500],"content":"Download and restore the backup to the development environment","linkify":"Download and restore the backup to the development environment","nodes":[{"content":"Download and restore the backup to the development environment","pos":[0,62]}]},{"content":"When you restore the backup to your Dynamics 365 for Finance and Operations development environment, don’t overwrite the existing AXDB database.","pos":[2502,2646]},{"content":"Instead, restore the AX 2012 database next to the original databases.","pos":[2647,2716]},{"content":"You might also consider using drive D for the data and log files, to help improve performance.","pos":[2717,2811]},{"content":"However, there is a potential downside to using drive D. If the underlying virtual machine (VM) is deallocated in Azure and then reallocated, drive D will be wiped.","pos":[2812,2976]},{"content":"In practice, this scenario rarely occurs.","pos":[2977,3018]},{"content":"Therefore, you might find that the risk is acceptable.","pos":[3019,3073]},{"content":"To learn more about how to use drive D, see <bpt id=\"p1\">[</bpt>Understanding the temporary drive on Windows Azure Virtual Machines<ept id=\"p1\">](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/)</ept>.","pos":[3074,3307],"source":" To learn more about how to use drive D, see [Understanding the temporary drive on Windows Azure Virtual Machines](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/)."},{"content":"To speed up the database restore process, you can change the SQL Server service account to <bpt id=\"p1\">**</bpt>axlocaladmin<ept id=\"p1\">**</ept>.","pos":[3309,3417],"source":"To speed up the database restore process, you can change the SQL Server service account to **axlocaladmin**."},{"content":"The restore process can then use instant file initialization.","pos":[3418,3479]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Database Instant File Initialization<ept id=\"p1\">](https://docs.microsoft.com/en-us/sql/relational-databases/databases/database-instant-file-initialization)</ept>.","pos":[3480,3651],"source":" For more information, see [Database Instant File Initialization](https://docs.microsoft.com/en-us/sql/relational-databases/databases/database-instant-file-initialization)."},{"content":"After the database is restored, stop the following services:","pos":[3653,3713]},{"content":"World wide web publishing service","pos":[3717,3750]},{"content":"Dynamics 365 for Finance and Operations Batch Management service","pos":[3753,3817]},{"content":"Management Reporter 2012 Process service","pos":[3820,3860]},{"content":"Next, rename the original AXDB database <bpt id=\"p1\">**</bpt>AXDB_orig<ept id=\"p1\">**</ept>.","pos":[3862,3916],"source":"Next, rename the original AXDB database **AXDB_orig**."},{"content":"This database might be useful as reference later, when you develop code.","pos":[3917,3989]},{"pos":[3991,4052],"content":"Finally, rename the newly restored AX 2012 database <bpt id=\"p1\">**</bpt>AXDB<ept id=\"p1\">**</ept>.","source":"Finally, rename the newly restored AX 2012 database **AXDB**."},{"pos":[4058,4078],"content":"Run the data upgrade","linkify":"Run the data upgrade","nodes":[{"content":"Run the data upgrade","pos":[0,20]}]},{"pos":[4080,4312],"content":"Run the data upgrade deployable package as described in <bpt id=\"p1\">[</bpt>Upgrade data in development, demo, or sandbox environments<ept id=\"p1\">](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update)</ept>.","source":"Run the data upgrade deployable package as described in [Upgrade data in development, demo, or sandbox environments](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update)."},{"pos":[4317,4359],"content":"Troubleshooting data upgrade script errors","linkify":"Troubleshooting data upgrade script errors","nodes":[{"content":"Troubleshooting data upgrade script errors","pos":[0,42]}]},{"content":"There are options that you let you resume the data upgrade where it last stopped.","pos":[4361,4442]},{"content":"You can also record any data upgrade script errors with call stacks to a table in the database.","pos":[4443,4538]},{"content":"For development scenarios, you can skip failed scripts and continue to run the upgrade.","pos":[4539,4626]},{"pos":[4628,4830],"content":"For more details, see the <bpt id=\"p1\">[</bpt>main data upgrade topic<ept id=\"p1\">](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update#troubleshoot-upgrade-script-errors)</ept>.","source":"For more details, see the [main data upgrade topic](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update#troubleshoot-upgrade-script-errors)."},{"pos":[4836,4881],"content":"Recommendation for the first data upgrade run","linkify":"Recommendation for the first data upgrade run","nodes":[{"content":"Recommendation for the first data upgrade run","pos":[0,45]}]},{"content":"When you run the data upgrade against your dataset for the first time, and especially when there many customizations or many custom data upgrade scripts, you might find the <bpt id=\"p1\">[</bpt>feature to skip failed scripts<ept id=\"p1\">](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update)</ept> useful.","pos":[4883,5211],"source":"When you run the data upgrade against your dataset for the first time, and especially when there many customizations or many custom data upgrade scripts, you might find the [feature to skip failed scripts](https://docs.microsoft.com/en-gb/dynamics365/operations/dev-itpro/migration-upgrade/upgrade-data-to-latest-update) useful."},{"content":"By using this feature, you gain visibility into as many errors as possible in one run.","pos":[5212,5298]},{"content":"Otherwise, only one critical issue is discovered per run.","pos":[5299,5356]},{"content":"Be aware that, because dependencies exist between scripts, you might receive errors in related child scripts if you skip the parent script.","pos":[5357,5496]},{"content":"These errors occur only because the parent wasn’t run correctly.","pos":[5497,5561]},{"content":"They will be resolved when the issue in the parent script is resolved.","pos":[5562,5632]}]}