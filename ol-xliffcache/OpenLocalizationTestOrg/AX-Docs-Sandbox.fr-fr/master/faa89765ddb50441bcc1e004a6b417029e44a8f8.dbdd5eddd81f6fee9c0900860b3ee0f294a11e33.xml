{"nodes":[{"pos":[32,76],"content":"Build an extensible control | Microsoft Docs","needQuote":true,"needEscape":true,"nodes":[{"content":"Build an extensible control | Microsoft Docs","pos":[0,44]}]},{"pos":[90,229],"content":"This wiki describes how to create new application controls that have a property sheet in Visual Studio and have server-side business logic.","needQuote":true,"needEscape":true,"nodes":[{"content":"This wiki describes how to create new application controls that have a property sheet in Visual Studio and have server-side business logic.","pos":[0,139]}]},{"pos":[651,678],"content":"Build an extensible control","linkify":"Build an extensible control","nodes":[{"content":"Build an extensible control","pos":[0,27]}]},{"content":"This wiki describes how to create new application controls that have a property sheet in Visual Studio and have server-side business logic.","pos":[680,819]},{"pos":[821,834],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"For this tutorial, you must access the environment by using Remote Desktop, and you must be provisioned as an administrator on the instance.","pos":[850,990]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Access development instances<ept id=\"p1\">](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2)</ept>.","pos":[991,1168],"source":" For more information, see [Access development instances](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2)."},{"pos":[1173,1181],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"The Control Extensibility Framework lets you create new application controls.","pos":[1182,1259]},{"content":"You can use the same tools that Microsoft uses to build controls that are already present in the program, such as the chart control.","pos":[1260,1392]},{"content":"Three important artifacts are involved in the process of developing an extensible control:","pos":[1393,1483]},{"content":"<bpt id=\"p1\">**</bpt>The X++ build class<ept id=\"p1\">**</ept> – The build class lets a developer define the properties that appear in the Microsoft Visual Studio property sheet for the control.","pos":[1489,1644],"source":"**The X++ build class** – The build class lets a developer define the properties that appear in the Microsoft Visual Studio property sheet for the control."},{"content":"The developer can also define the modeling behavior for the control when it's used in the form designer.","pos":[1645,1749]},{"content":"The build class is consumed by the run-time class to initialize the state of the control based on the value of properties in the property sheet.","pos":[1750,1894]},{"content":"<bpt id=\"p1\">**</bpt>The X++ run-time class<ept id=\"p1\">**</ept> – The run-time class lets a developer define server-side business logic and data access patterns for an extensible control.","pos":[1899,2049],"source":"**The X++ run-time class** – The run-time class lets a developer define server-side business logic and data access patterns for an extensible control."},{"content":"Two concepts that are specific to building extensible controls are the <bpt id=\"p1\">*</bpt>properties<ept id=\"p1\">*</ept> and <bpt id=\"p2\">*</bpt>commands<ept id=\"p2\">*</ept> that the X++ class defines.","pos":[2050,2176],"source":" Two concepts that are specific to building extensible controls are the *properties* and *commands* that the X++ class defines."},{"content":"Each property and command that is defined is serialized into a JavaScript view model at run time, and can be consumed by the client parts of the extensible control (the HTML and JavaScript).","pos":[2177,2367]},{"content":"These properties and commands are the main channels for moving information between the server-side and client-side parts of the control.","pos":[2368,2504]},{"content":"<bpt id=\"p1\">**</bpt>The control HTML and JavaScript<ept id=\"p1\">**</ept> – Each control uses HTML, JavaScript, and CSS files to define control visualization and client-side interaction patterns.","pos":[2509,2666],"source":"**The control HTML and JavaScript** – Each control uses HTML, JavaScript, and CSS files to define control visualization and client-side interaction patterns."},{"content":"By using the Microsoft Dynamics HTML binding syntax together with jQuery, a developer can consume the properties and commands that are defined in X++ to design powerful data-driven UI.","pos":[2667,2851]},{"content":"All three artifacts of extensible control development are explained in more detail in the following sections.","pos":[2853,2962]},{"pos":[2967,2979],"content":"Key concepts","linkify":"Key concepts","nodes":[{"content":"Key concepts","pos":[0,12]}]},{"content":"Defining an extensible control's design-time behavior","pos":[2984,3037]},{"content":"Defining an extensible control's run-time behavior","pos":[3042,3092]},{"content":"Defining an extensible control's view by using HTML and CSS","pos":[3097,3156]},{"content":"Defining an extensible control's view model by using JavaScript","pos":[3161,3224]},{"pos":[3229,3234],"content":"Setup","linkify":"Setup","nodes":[{"content":"Setup","pos":[0,5]}]},{"pos":[3239,3289],"content":"Import the tutorial project and transactional data","linkify":"Import the tutorial project and transactional data","nodes":[{"content":"Import the tutorial project and transactional data","pos":[0,50]}]},{"content":"Use Visual Studio to import the tutorial project.","pos":[3291,3340]},{"content":"The tutorial project includes the artifacts that you will use to complete this tutorial.","pos":[3341,3429]},{"content":"Use Visual Studio to open the FMTutorial project and load the data for the tutorial.","pos":[3430,3514]},{"content":"You will use the <bpt id=\"p1\">**</bpt>FMTDataHelper<ept id=\"p1\">**</ept> class to load data for the Fleet Management tutorial.","pos":[3515,3603],"source":" You will use the **FMTDataHelper** class to load data for the Fleet Management tutorial."},{"pos":[3609,3721],"content":"Download the Fleet Management sample from <bpt id=\"p1\">&lt;</bpt>https://github.com/Microsoft/FMLab<ept id=\"p1\">&gt;</ept>, save it to <bpt id=\"p2\">**</bpt>C:<ept id=\"p2\">**</ept>, and unzip it.","source":"Download the Fleet Management sample from <https://github.com/Microsoft/FMLab>, save it to **C:**, and unzip it."},{"content":"On the desktop, double-click the Visual Studio shortcut to open the development environment.","pos":[3726,3818]},{"pos":[3823,3878],"content":"On the <bpt id=\"p1\">**</bpt>Dynamics 365 <ept id=\"p1\">**</ept>menu, click <bpt id=\"p2\">**</bpt>Import Project<ept id=\"p2\">**</ept>.","source":"On the **Dynamics 365 **menu, click **Import Project**."},{"pos":[3883,3989],"content":"In the <bpt id=\"p1\">**</bpt>Import Project<ept id=\"p1\">**</ept> dialog box, next to the <bpt id=\"p2\">**</bpt>File name<ept id=\"p2\">**</ept> text box, click the ellipsis button (...).","source":"In the **Import Project** dialog box, next to the **File name** text box, click the ellipsis button (...)."},{"pos":[3994,4128],"content":"In the <bpt id=\"p1\">**</bpt>Select the file to import<ept id=\"p1\">**</ept> dialog box, browse to <bpt id=\"p2\">**</bpt>C:<ph id=\"ph1\">\\\\</ph>FMLab<ept id=\"p2\">**</ept>, click <bpt id=\"p3\">**</bpt>FMTutorialDataModel.axpp<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Open<ept id=\"p4\">**</ept>.","source":"In the **Select the file to import** dialog box, browse to **C:\\\\FMLab**, click **FMTutorialDataModel.axpp**, and then click **Open**."},{"pos":[4133,4193],"content":"In the <bpt id=\"p1\">**</bpt>Project file location<ept id=\"p1\">**</ept> field, enter <bpt id=\"p2\">**</bpt>C:<ph id=\"ph1\">\\\\</ph>FMLab<ept id=\"p2\">**</ept>.","source":"In the **Project file location** field, enter **C:\\\\FMLab**."},{"content":"Select the <bpt id=\"p1\">**</bpt>Overwrite Elements<ept id=\"p1\">**</ept> check box and the <bpt id=\"p2\">**</bpt>Current solution<ept id=\"p2\">**</ept> option.","pos":[4198,4278],"source":"Select the **Overwrite Elements** check box and the **Current solution** option."},{"content":"The following screen shot shows the completed <bpt id=\"p1\">**</bpt>Import Project<ept id=\"p1\">**</ept> dialog box.","pos":[4279,4355],"source":" The following screen shot shows the completed **Import Project** dialog box."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Ext1<ept id=\"p1\">](./media/ext1.png)](./media/ext1.png)</ept>","pos":[4356,4401],"source":"[![Ext1](./media/ext1.png)](./media/ext1.png)"},{"pos":[4406,4419],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","source":"Click **OK**."},{"pos":[4424,4499],"content":"In Solution Explorer, under the <bpt id=\"p1\">**</bpt>FMTutorial<ept id=\"p1\">**</ept> project, expand <bpt id=\"p2\">**</bpt>Classes<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, under the **FMTutorial** project, expand **Classes**."},{"pos":[4504,4576],"content":"Right-click <bpt id=\"p1\">**</bpt>FMTDataHelper<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Set as Startup Object<ept id=\"p2\">**</ept>.","source":"Right-click **FMTDataHelper**, and then click **Set as Startup Object**."},{"content":"On the <bpt id=\"p1\">**</bpt>BUILD<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Rebuild Solution<ept id=\"p2\">**</ept>.","pos":[4581,4631],"source":"On the **BUILD** menu, click **Rebuild Solution**."},{"content":"You use the rebuild to make sure that all the files in the project are built, regardless of timestamps.","pos":[4632,4735]},{"content":"You can view the build progress in the <bpt id=\"p1\">**</bpt>Output<ept id=\"p1\">**</ept> window.","pos":[4736,4793],"source":" You can view the build progress in the **Output** window."},{"content":"After the build is completed, press Ctrl+F5 to run the project.","pos":[4798,4861]},{"content":"The <bpt id=\"p1\">**</bpt>Login<ept id=\"p1\">**</ept> form closes when authentication succeeds, and then the data is loaded.","pos":[4862,4946],"source":" The **Login** form closes when authentication succeeds, and then the data is loaded."},{"pos":[4952,4973],"content":"Set up aggregate data","linkify":"Set up aggregate data","nodes":[{"content":"Set up aggregate data","pos":[0,21]}]},{"content":"Use FMTAggregateMeasurements to populate the Microsoft SQL Server Analysis Services database with aggregate data.","pos":[4975,5088]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> These steps must be completed immediately after you use the <bpt id=\"p2\">**</bpt>FMTDataHelper<ept id=\"p2\">**</ept> class to import data.","pos":[5089,5198],"source":"**Note:** These steps must be completed immediately after you use the **FMTDataHelper** class to import data."},{"content":"You may <bpt id=\"p1\">**</bpt>NOT<ept id=\"p1\">**</ept> need to do these steps if the <bpt id=\"p2\">[</bpt>aggregate measure is \"InMemoryRealTime\"<ept id=\"p2\">](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/modeling-and-using-aggregate-data)</ept>, depending on what tutorial files you have.","pos":[5199,5454],"source":" You may **NOT** need to do these steps if the [aggregate measure is \"InMemoryRealTime\"](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/modeling-and-using-aggregate-data), depending on what tutorial files you have."},{"pos":[5460,5544],"content":"In Solution Explorer, under <bpt id=\"p1\">**</bpt>Analytics<ept id=\"p1\">**</ept>, double-click <bpt id=\"p2\">**</bpt>FMTAggregateMeasurement<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, under **Analytics**, double-click **FMTAggregateMeasurement**."},{"pos":[5549,5645],"content":"In the designer, right-click <bpt id=\"p1\">**</bpt>FMTAggregateMeasurement<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Deploy and Process<ept id=\"p2\">**</ept>.","source":"In the designer, right-click **FMTAggregateMeasurement**, and then click **Deploy and Process**."},{"pos":[5650,5677],"content":"Preview the clerk workspace","linkify":"Preview the clerk workspace","nodes":[{"content":"Preview the clerk workspace","pos":[0,27]}]},{"content":"Before you begin to build the contact control, look at the appearance of the current implementation.","pos":[5678,5778]},{"content":"In the following sections, you will use the Control Extensibility Framework to enrich the visualization of the controls and the form.","pos":[5779,5912]},{"pos":[5918,6034],"content":"In Solution Explorer, expand <bpt id=\"p1\">**</bpt>Forms<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>FMTClerkWorkspace<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Set as Startup Object<ept id=\"p3\">**</ept>.","source":"In Solution Explorer, expand **Forms**, right-click **FMTClerkWorkspace**, and then click **Set as Startup Object**."},{"content":"Press Ctrl+F5 to open the <bpt id=\"p1\">**</bpt>Fleet management clerk<ept id=\"p1\">**</ept> page in Internet Explorer.","pos":[6039,6118],"source":"Press Ctrl+F5 to open the **Fleet management clerk** page in Internet Explorer."},{"content":"As the following screen shot shows, the data on this page appears as a simple grid in a list style that contains several string and date controls.","pos":[6119,6265]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Ext2<ept id=\"p1\">](./media/ext2-1024x515.png)](./media/ext2.png)</ept>","pos":[6266,6320],"source":"[![Ext2](./media/ext2-1024x515.png)](./media/ext2.png)"},{"content":"Exit Internet Explorer.","pos":[6325,6348]},{"pos":[6353,6399],"content":"Modify the build class for the contact control","linkify":"Modify the build class for the contact control","nodes":[{"content":"Modify the build class for the contact control","pos":[0,46]}]},{"content":"To save time, you will work on a partially completed extensible control that is named the contact control.","pos":[6400,6506]},{"content":"You will extend the contact control to complete its design, run-time, and visualization behaviors.","pos":[6507,6605]},{"content":"The partially completed contact control already supports multiple title fields, subfields, and action buttons.","pos":[6606,6716]},{"content":"However, it doesn't currently support an image.","pos":[6717,6764]},{"content":"To add image support, you must extend the design experience for the contact control.","pos":[6765,6849]},{"content":"You will add a data field that can specify image data.","pos":[6850,6904]},{"pos":[6910,6928],"content":"Technical overview","linkify":"Technical overview","nodes":[{"content":"Technical overview","pos":[0,18]}]},{"content":"To see an example of a build class, in Solution Explorer, expand <bpt id=\"p1\">**</bpt>Classes<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>FMTBuildContactControl<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>View Code<ept id=\"p3\">**</ept>.","pos":[6930,7077],"source":"To see an example of a build class, in Solution Explorer, expand **Classes**, right-click **FMTBuildContactControl**, and then click **View Code**."},{"content":"The class code appears in the code editor.","pos":[7078,7120]},{"content":"<bpt id=\"p1\">**</bpt>FMTBuildContactControl<ept id=\"p1\">**</ept> is the build class for the contact control.","pos":[7121,7191],"source":"**FMTBuildContactControl** is the build class for the contact control."},{"content":"For each extensible control, the build class defines the properties that the control shows in the property sheet.","pos":[7192,7305]},{"content":"The build class also defines the modeling experience for the control in the Visual Studio form designer.","pos":[7306,7410]},{"content":"There are three primary design-time behaviors that you can define for an extensible control.","pos":[7411,7503]},{"content":"Each behavior is declaratively defined by using a <bpt id=\"p1\">**</bpt>FormDesign<ept id=\"p1\">**</ept> attribute.","pos":[7504,7579],"source":" Each behavior is declaratively defined by using a **FormDesign** attribute."},{"content":"Here are the design-time behaviors that you can define:","pos":[7580,7635]},{"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> – You can specify the control name that appears in the form designer when you add the control to a form.","pos":[7641,7754],"source":"**Name** – You can specify the control name that appears in the form designer when you add the control to a form."},{"content":"To specify the name, add a <bpt id=\"p1\">**</bpt>FormDesignControlAttribute<ept id=\"p1\">**</ept> attribute to the build class declaration of the extensible control.","pos":[7755,7880],"source":" To specify the name, add a **FormDesignControlAttribute** attribute to the build class declaration of the extensible control."},{"content":"For example, the following declaration of the <bpt id=\"p1\">**</bpt>FMTBuildContactControl<ept id=\"p1\">**</ept> class shows the attribute.","pos":[7881,7980],"source":" For example, the following declaration of the **FMTBuildContactControl** class shows the attribute."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x1<ept id=\"p1\">](./media/x1.png)](./media/x1.png)</ept>","pos":[7981,8020],"source":"[![x1](./media/x1.png)](./media/x1.png)"},{"content":"<bpt id=\"p1\">**</bpt>Designer properties<ept id=\"p1\">**</ept> – These are the properties that you see in the property sheet when you add the control to a form.","pos":[8025,8146],"source":"**Designer properties** – These are the properties that you see in the property sheet when you add the control to a form."},{"content":"There are several attributes that let you add various types of designer properties.","pos":[8147,8230]},{"content":"For example, the <bpt id=\"p1\">**</bpt>FormDesignPropertyAttribute<ept id=\"p1\">**</ept> attribute adds a property to the property sheet, and the property name and the section are supplied as arguments to the attribute.","pos":[8231,8410],"source":" For example, the **FormDesignPropertyAttribute** attribute adds a property to the property sheet, and the property name and the section are supplied as arguments to the attribute."},{"content":"For example, the following code adds the <bpt id=\"p1\">**</bpt>Action Name<ept id=\"p1\">**</ept> property to the <bpt id=\"p2\">**</bpt>FMTContactControlAction<ept id=\"p2\">**</ept> class.","pos":[8411,8518],"source":" For example, the following code adds the **Action Name** property to the **FMTContactControlAction** class."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x2<ept id=\"p1\">](./media/x2.png)](./media/x2.png)</ept>The following screen shot shows how this property appears in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane in Visual Studio.","pos":[8519,8660],"source":"[![x2](./media/x2.png)](./media/x2.png)The following screen shot shows how this property appears in the **Properties** pane in Visual Studio."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Ext3<ept id=\"p1\">](./media/ext3.png)](./media/ext3.png)</ept>","pos":[8661,8706],"source":"[![Ext3](./media/ext3.png)](./media/ext3.png)"},{"content":"<bpt id=\"p1\">**</bpt>Child design components<ept id=\"p1\">**</ept> – These are child nodes that you see after you add the control to a form.","pos":[8711,8812],"source":"**Child design components** – These are child nodes that you see after you add the control to a form."},{"content":"There are two types of child design components: leaf and leaf collection.","pos":[8813,8886]},{"content":"A leaf is defined by using a <bpt id=\"p1\">**</bpt>FormDesignComponentAttribute<ept id=\"p1\">**</ept> attribute on an X++ method that accepts or returns another build class.","pos":[8895,9028],"source":"A leaf is defined by using a **FormDesignComponentAttribute** attribute on an X++ method that accepts or returns another build class."},{"content":"The build class determines the properties that the leaf has in the property sheet.","pos":[9029,9111]},{"content":"A leaf collection is defined by using a <bpt id=\"p1\">**</bpt>FormDesignComponentCollectionAttribute<ept id=\"p1\">**</ept> attribute.","pos":[9120,9213],"source":"A leaf collection is defined by using a **FormDesignComponentCollectionAttribute** attribute."},{"content":"The allowable leaf types for the collection are defined by using <bpt id=\"p1\">**</bpt>FormDesignComponentValidChildAttribute<ept id=\"p1\">**</ept> attributes.","pos":[9214,9333],"source":" The allowable leaf types for the collection are defined by using **FormDesignComponentValidChildAttribute** attributes."},{"content":"For example, the following code adds a leaf collection that is named <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> for the <bpt id=\"p2\">**</bpt>FMTBuildContactControl<ept id=\"p2\">**</ept> class.","pos":[9339,9461],"source":"For example, the following code adds a leaf collection that is named **Actions** for the **FMTBuildContactControl** class."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x3<ept id=\"p1\">](./media/x3.png)](./media/x3.png)</ept> The following screen shot shows how the specified child design component appears when you add the control to a form.","pos":[9462,9618],"source":"[![x3](./media/x3.png)](./media/x3.png) The following screen shot shows how the specified child design component appears when you add the control to a form."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Ext4<ept id=\"p1\">](./media/ext4.png)](./media/ext4.png)</ept>","pos":[9619,9664],"source":"[![Ext4](./media/ext4.png)](./media/ext4.png)"},{"pos":[9670,9684],"content":"Tutorial steps","linkify":"Tutorial steps","nodes":[{"content":"Tutorial steps","pos":[0,14]}]},{"content":"Check that the code for the <bpt id=\"p1\">**</bpt>FMTBuildContactControl<ept id=\"p1\">**</ept> class appears in the code editor.","pos":[9690,9778],"source":"Check that the code for the **FMTBuildContactControl** class appears in the code editor."},{"content":"If it doesn't, in Solution Explorer, expand <bpt id=\"p1\">**</bpt>Classes<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>FMTBuildContactControl<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>View Code<ept id=\"p3\">**</ept>.","pos":[9779,9905],"source":" If it doesn't, in Solution Explorer, expand **Classes**, right-click **FMTBuildContactControl**, and then click **View Code**."},{"content":"Add a child design component to the FMTBuildContactControl class.","pos":[9910,9975]},{"content":"A child design component lets a developer who places the control in a form to specify the image that appears on the control.","pos":[9976,10100]},{"content":"In this step, you will add the <bpt id=\"p1\">**</bpt>FormDesignComponentAttribute<ept id=\"p1\">**</ept> attribute to create a new entry in the property sheet.","pos":[10101,10219],"source":" In this step, you will add the **FormDesignComponentAttribute** attribute to create a new entry in the property sheet."},{"content":"You will then add the <bpt id=\"p1\">**</bpt>FormDesignPropertyDataFieldAttribute<ept id=\"p1\">**</ept> attribute, which indicates that the new designer property enables the selection of a data field.","pos":[10220,10379],"source":" You will then add the **FormDesignPropertyDataFieldAttribute** attribute, which indicates that the new designer property enables the selection of a data field."},{"content":"Add the highlighted code that follows to the declarations for the class.","pos":[10388,10460]},{"content":"This code adds the <bpt id=\"p1\">**</bpt>FormBindingDataField<ept id=\"p1\">**</ept> field to the X++ that the <bpt id=\"p2\">**</bpt>FMTBuildContactControl<ept id=\"p2\">**</ept> class is using.","pos":[10461,10573],"source":" This code adds the **FormBindingDataField** field to the X++ that the **FMTBuildContactControl** class is using."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x4<ept id=\"p1\">](./media/x4.png)](./media/x4.png)</ept>","pos":[10574,10613],"source":"[![x4](./media/x4.png)](./media/x4.png)"},{"content":"Add the following code to the <bpt id=\"p1\">**</bpt>FMTBuildContactControl<ept id=\"p1\">**</ept> class.","pos":[10622,10685],"source":"Add the following code to the **FMTBuildContactControl** class."},{"content":"Add this method after the designer property for the data source.","pos":[10686,10750]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x5<ept id=\"p1\">](./media/x5.png)](./media/x5.png)</ept><bpt id=\"p2\">**</bpt>Note:<ept id=\"p2\">**</ept> The child design component will show the properties that are available on the <bpt id=\"p3\">**</bpt>FormBindingDataField<ept id=\"p3\">**</ept> build class.","pos":[10751,10915],"source":"[![x5](./media/x5.png)](./media/x5.png)**Note:** The child design component will show the properties that are available on the **FormBindingDataField** build class."},{"content":"This is appropriate, because you want to enable image data binding to a data field and data source.","pos":[10916,11015]},{"content":"This is all that is required to add a designer property to the build class of the contact control.","pos":[11016,11114]},{"content":"Press Ctrl+S to save your changes, and then close the code editor.","pos":[11120,11186]},{"pos":[11191,11266],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>FMTutorial<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Build<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **FMTutorial**, and then click **Build**."},{"content":"If the <bpt id=\"p1\">**</bpt>FMTPickingUpTodayPart<ept id=\"p1\">**</ept> form isn't already open, expand <bpt id=\"p2\">**</bpt>Forms<ept id=\"p2\">**</ept>, and then double-click <bpt id=\"p3\">**</bpt>FMTPickingUpTodayPart<ept id=\"p3\">**</ept>.","pos":[11271,11395],"source":"If the **FMTPickingUpTodayPart** form isn't already open, expand **Forms**, and then double-click **FMTPickingUpTodayPart**."},{"content":"The form opens in the form designer.","pos":[11396,11432]},{"pos":[11437,11580],"content":"In the form designer, expand <bpt id=\"p1\">**</bpt>Design<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>PickingUpTodayGrid<ept id=\"p2\">**</ept>, and then select and delete the controls that currently appear in the grid.","source":"In the form designer, expand **Design** &gt; **PickingUpTodayGrid**, and then select and delete the controls that currently appear in the grid."},{"content":"Right-click <bpt id=\"p1\">**</bpt>PickingUpTodayGrid<ept id=\"p1\">**</ept>, point to <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>FMTContactControl<ept id=\"p3\">**</ept>.","pos":[11585,11676],"source":"Right-click **PickingUpTodayGrid**, point to **New**, and then click **FMTContactControl**."},{"content":"Expand the <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept> node, and notice that <bpt id=\"p2\">**</bpt>Image<ept id=\"p2\">**</ept> appears as a new child design component.","pos":[11677,11782],"source":" Expand the **FMTContactControl** node, and notice that **Image** appears as a new child design component."},{"content":"The following illustration shows the contact control in the form designer.","pos":[11783,11857]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Ext5<ept id=\"p1\">](./media/ext5.png)](./media/ext5.png)</ept> You must also update the run-time class for the contact control to consume the design-time changes.","pos":[11858,12003],"source":"[![Ext5](./media/ext5.png)](./media/ext5.png) You must also update the run-time class for the contact control to consume the design-time changes."},{"content":"You will revisit adding the control to the form and specifying data bindings and property values later.","pos":[12004,12107]},{"content":"Press Ctrl+S to save your changes, and then close the form designer.","pos":[12112,12180]},{"pos":[12185,12233],"content":"Modify the runtime class for the contact control","linkify":"Modify the runtime class for the contact control","nodes":[{"content":"Modify the runtime class for the contact control","pos":[0,48]}]},{"content":"Next, you must modify the run-time class to read the data source and data field for the image from the build class.","pos":[12234,12349]},{"content":"You must also create a run-time property, so that the image data is available to the control's client HTML and JavaScript.","pos":[12350,12472]},{"pos":[12478,12496],"content":"Technical overview","linkify":"Technical overview","nodes":[{"content":"Technical overview","pos":[0,18]}]},{"content":"To see an example of the run-time class, in Solution Explorer, expand <bpt id=\"p1\">**</bpt>Classes<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>FMTContactControl<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>View Code<ept id=\"p3\">**</ept>.","pos":[12498,12645],"source":"To see an example of the run-time class, in Solution Explorer, expand **Classes**, right-click **FMTContactControl**, and then click **View Code**."},{"content":"The class opens in the code editor.","pos":[12646,12681]},{"content":"<bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept> is the run-time class for the contact control.","pos":[12682,12750],"source":"**FMTContactControl** is the run-time class for the contact control."},{"content":"The class defines the run-time behavior of the contact control.","pos":[12751,12814]},{"content":"The run-time class typically contains X++ for data access or business logic.","pos":[12815,12891]},{"content":"In addition, there are two primary run-time behaviors that are related to extensible controls that you define in the run-time class.","pos":[12892,13024]},{"content":"Each behavior is declaratively defined by using an attribute.","pos":[13025,13086]},{"pos":[13092,13170],"content":"<bpt id=\"p1\">**</bpt>Run-time properties of the control<ept id=\"p1\">**</ept> – These properties can be of two types:","source":"**Run-time properties of the control** – These properties can be of two types:"},{"pos":[13179,13275],"content":"<bpt id=\"p1\">*</bpt>Static properties<ept id=\"p1\">*</ept>, which are set via code or initialized with values from designer properties.","source":"*Static properties*, which are set via code or initialized with values from designer properties."},{"pos":[13284,13407],"content":"<bpt id=\"p1\">*</bpt>Bindable properties<ept id=\"p1\">*</ept>, for which the run-time value is determined by a binding to a data source and data field combination.","source":"*Bindable properties*, for which the run-time value is determined by a binding to a data source and data field combination."},{"content":"Run-time properties are declared by using <bpt id=\"p1\">**</bpt>FormPropertyAttribute<ept id=\"p1\">**</ept> attributes.","pos":[13413,13492],"source":"Run-time properties are declared by using **FormPropertyAttribute** attributes."},{"content":"The following example shows a property declaration in <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept>.","pos":[13493,13569],"source":" The following example shows a property declaration in **FMTContactControl**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x6<ept id=\"p1\">](./media/x6.png)](./media/x6.png)</ept>The <bpt id=\"p2\">**</bpt>FormPropertyAttribute<ept id=\"p2\">**</ept> attribute accepts two arguments:","pos":[13570,13671],"source":"[![x6](./media/x6.png)](./media/x6.png)The **FormPropertyAttribute** attribute accepts two arguments:"},{"content":"The first argument indicates to the framework the kind of JavaScript view model property to create.","pos":[13680,13779]},{"content":"If you supply <bpt id=\"p1\">**</bpt>BindableValue<ept id=\"p1\">**</ept>, a <bpt id=\"p2\">**</bpt>ReferenceProperty<ept id=\"p2\">**</ept> is generated in the JavaScript view model.","pos":[13792,13891],"source":"If you supply **BindableValue**, a **ReferenceProperty** is generated in the JavaScript view model."},{"content":"A <bpt id=\"p1\">**</bpt>ReferenceProperty<ept id=\"p1\">**</ept> updates itself when data changes in the data source.","pos":[13892,13968],"source":" A **ReferenceProperty** updates itself when data changes in the data source."},{"content":"If you supply <bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>, a <bpt id=\"p2\">**</bpt>ValueProperty<ept id=\"p2\">**</ept> is generated in the JavaScript view model.","pos":[13981,14068],"source":"If you supply **Value**, a **ValueProperty** is generated in the JavaScript view model."},{"content":"A developer must write code to update the value of a <bpt id=\"p1\">**</bpt>ValueProperty<ept id=\"p1\">**</ept>.","pos":[14069,14140],"source":" A developer must write code to update the value of a **ValueProperty**."},{"content":"The second argument of the attribute sets the name for the property as it will be defined in the JavaScript view model.","pos":[14149,14268]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Don't be concerned if <bpt id=\"p2\">**</bpt>TitleFields<ept id=\"p2\">**</ept> don't seem to be bound to data because the example uses a <bpt id=\"p3\">**</bpt>Value<ept id=\"p3\">**</ept> property.","pos":[14274,14399],"source":"**Note:** Don't be concerned if **TitleFields** don't seem to be bound to data because the example uses a **Value** property."},{"content":"The <bpt id=\"p1\">**</bpt>TitleFields<ept id=\"p1\">**</ept> property returns a List that contains <bpt id=\"p2\">**</bpt>FormBindingDataFields<ept id=\"p2\">**</ept>, each of which is data-bound.","pos":[14400,14513],"source":" The **TitleFields** property returns a List that contains **FormBindingDataFields**, each of which is data-bound."},{"content":"The X++ method that has the <bpt id=\"p1\">**</bpt>FormPropertyAttribute<ept id=\"p1\">**</ept> attribute is a simple getter/setter that uses a <bpt id=\"p2\">**</bpt>FormProperty<ept id=\"p2\">**</ept> as the backing field.","pos":[14514,14654],"source":" The X++ method that has the **FormPropertyAttribute** attribute is a simple getter/setter that uses a **FormProperty** as the backing field."},{"content":"The <bpt id=\"p1\">**</bpt>FormProperty<ept id=\"p1\">**</ept> contains the logic for updating the property, based on value or data source changes.","pos":[14655,14760],"source":" The **FormProperty** contains the logic for updating the property, based on value or data source changes."},{"content":"It also serves as the backing field for the property.","pos":[14761,14814]},{"content":"<bpt id=\"p1\">**</bpt>Run-time commands for the control<ept id=\"p1\">**</ept> – Commands enable the client parts of the control to trigger X++ logic, based on client-side user interactions.","pos":[14819,14968],"source":"**Run-time commands for the control** – Commands enable the client parts of the control to trigger X++ logic, based on client-side user interactions."},{"content":"Commands are declared by using a <bpt id=\"p1\">**</bpt>FormCommandAttribute<ept id=\"p1\">**</ept> attribute.","pos":[14969,15037],"source":" Commands are declared by using a **FormCommandAttribute** attribute."},{"content":"The single argument specifies the name of the command as it will appear in the JavaScript view model.","pos":[15038,15139]},{"content":"The following example shows a command declaration in <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept>.","pos":[15140,15215],"source":" The following example shows a command declaration in **FMTContactControl**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x7<ept id=\"p1\">](./media/x7.png)](./media/x7.png)</ept>","pos":[15216,15255],"source":"[![x7](./media/x7.png)](./media/x7.png)"},{"pos":[15261,15275],"content":"Tutorial steps","linkify":"Tutorial steps","nodes":[{"content":"Tutorial steps","pos":[0,14]}]},{"content":"Verify that the <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept> class is open in the code editor.","pos":[15281,15352],"source":"Verify that the **FMTContactControl** class is open in the code editor."},{"content":"If it isn't, in Solution Explorer, expand <bpt id=\"p1\">**</bpt>Classes<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>FMTContactControl<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>View Code<ept id=\"p3\">**</ept>.","pos":[15353,15472],"source":" If it isn't, in Solution Explorer, expand **Classes**, right-click **FMTContactControl**, and then click **View Code**."},{"content":"Add a run-time property for the image data to <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept>.","pos":[15477,15545],"source":"Add a run-time property for the image data to **FMTContactControl**."},{"content":"In the <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept> class, declare a <bpt id=\"p2\">**</bpt>FormProperty<ept id=\"p2\">**</ept> that is named <bpt id=\"p3\">**</bpt>imageFieldProperty<ept id=\"p3\">**</ept>, as shown by the highlighted line in the following example.","pos":[15546,15705],"source":" In the **FMTContactControl** class, declare a **FormProperty** that is named **imageFieldProperty**, as shown by the highlighted line in the following example."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x8<ept id=\"p1\">](./media/x8.png)](./media/x8.png)</ept>","pos":[15706,15745],"source":"[![x8](./media/x8.png)](./media/x8.png)"},{"content":"Add the following X++ method after the <bpt id=\"p1\">**</bpt>parmDataSource<ept id=\"p1\">**</ept> X++ method.","pos":[15750,15819],"source":"Add the following X++ method after the **parmDataSource** X++ method."},{"content":"The new method will serve as the getter/setter for <bpt id=\"p1\">**</bpt>imageFieldProperty<ept id=\"p1\">**</ept>.","pos":[15820,15894],"source":" The new method will serve as the getter/setter for **imageFieldProperty**."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> You don't return the value of the image data here, because the framework will let you bind to the data in the client, as you will see later.","pos":[15895,16045],"source":"**Note:** You don't return the value of the image data here, because the framework will let you bind to the data in the client, as you will see later."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x9<ept id=\"p1\">](./media/x9.png)](./media/x9.png)</ept>","pos":[16046,16085],"source":"[![x9](./media/x9.png)](./media/x9.png)"},{"content":"Initialize <bpt id=\"p1\">**</bpt>imageFieldProperty<ept id=\"p1\">**</ept> by adding the highlighted line in the following example to the new method of <bpt id=\"p2\">**</bpt>FMTContactControl<ept id=\"p2\">**</ept>.","pos":[16090,16223],"source":"Initialize **imageFieldProperty** by adding the highlighted line in the following example to the new method of **FMTContactControl**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x10<ept id=\"p1\">](./media/x10.png)](./media/x10.png)</ept>","pos":[16224,16266],"source":"[![x10](./media/x10.png)](./media/x10.png)"},{"content":"Now supply the binding to <bpt id=\"p1\">**</bpt>imageFieldProperty<ept id=\"p1\">**</ept> by adding the highlighted line in the following example to the <bpt id=\"p2\">**</bpt>applyBuild<ept id=\"p2\">**</ept> method of <bpt id=\"p3\">**</bpt>FMTContactControl<ept id=\"p3\">**</ept>.","pos":[16271,16430],"source":"Now supply the binding to **imageFieldProperty** by adding the highlighted line in the following example to the **applyBuild** method of **FMTContactControl**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x11<ept id=\"p1\">](./media/x11.png)](./media/x11.png)</ept>","pos":[16431,16473],"source":"[![x11](./media/x11.png)](./media/x11.png)"},{"content":"Press Ctrl+S to save the changes.","pos":[16478,16511]},{"content":"You've now finished modifying the run-time class.","pos":[16512,16561]},{"content":"Next, you will update the HTML view to display the image.","pos":[16562,16619]},{"pos":[16624,16663],"content":"Modify the HTML for the contact control","linkify":"Modify the HTML for the contact control","nodes":[{"content":"Modify the HTML for the contact control","pos":[0,39]}]},{"content":"The HTML of the contact control is where you add UI elements, such as text boxes, images, and buttons, that interact with the properties and commands that are defined in the run-time class.","pos":[16664,16853]},{"content":"Extensible controls use a declarative HTML-based binding syntax to bind HTML element behaviors to properties, commands, JavaScript expressions, and JavaScript functions.","pos":[16854,17023]},{"content":"These bindings are parsed at run time, and the resulting HTML is injected into the DOM.","pos":[17024,17111]},{"content":"The following section explains a few of the bindings that are used in FMTContactControl.htm to add an image to the control.","pos":[17112,17235]},{"pos":[17241,17259],"content":"Technical overview","linkify":"Technical overview","nodes":[{"content":"Technical overview","pos":[0,18]}]},{"content":"The <bpt id=\"p1\">**</bpt>bind<ept id=\"p1\">**</ept> attribute, together with the <bpt id=\"p2\">**</bpt>text<ept id=\"p2\">**</ept> binding handler enables binding to the <bpt id=\"p3\">**</bpt>text<ept id=\"p3\">**</ept> property of an HTML element.","pos":[17261,17388],"source":"The **bind** attribute, together with the **text** binding handler enables binding to the **text** property of an HTML element."},{"content":"For example, the following HTML uses the <bpt id=\"p1\">**</bpt>bind<ept id=\"p1\">**</ept> attribute and the <bpt id=\"p2\">**</bpt>text<ept id=\"p2\">**</ept> binding handler.","pos":[17389,17482],"source":" For example, the following HTML uses the **bind** attribute and the **text** binding handler."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x12<ept id=\"p1\">](./media/x12.png)](./media/x12.png)</ept> The preceding HTML is equivalent to the following HTML.","pos":[17483,17581],"source":"[![x12](./media/x12.png)](./media/x12.png) The preceding HTML is equivalent to the following HTML."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x13<ept id=\"p1\">](./media/x13.png)](./media/x13.png)</ept> You will see the benefits of the binding when you bind to properties or commands.","pos":[17582,17706],"source":"[![x13](./media/x13.png)](./media/x13.png) You will see the benefits of the binding when you bind to properties or commands."},{"content":"For example, if you have a view model property that is named <bpt id=\"p1\">**</bpt>FirstName<ept id=\"p1\">**</ept>, you can bind to it as shown in the following example.","pos":[17707,17836],"source":" For example, if you have a view model property that is named **FirstName**, you can bind to it as shown in the following example."},{"content":"Here, <bpt id=\"p1\">**</bpt>$data<ept id=\"p1\">**</ept> is the object that contains the view model properties and commands.","pos":[17837,17920],"source":" Here, **$data** is the object that contains the view model properties and commands."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x14<ept id=\"p1\">](./media/x14.png)](./media/x14.png)</ept> The HTML output changes, based on the current value of <bpt id=\"p2\">**</bpt>FirstName<ept id=\"p2\">**</ept>.","pos":[17921,18033],"source":"[![x14](./media/x14.png)](./media/x14.png) The HTML output changes, based on the current value of **FirstName**."},{"content":"The following example shows the output if <bpt id=\"p1\">**</bpt>FirstName<ept id=\"p1\">**</ept> has a value of <bpt id=\"p2\">**</bpt>John<ept id=\"p2\">**</ept>.","pos":[18034,18114],"source":" The following example shows the output if **FirstName** has a value of **John**."},{"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt><ph id=\"ph1\">![</ph>x15<ept id=\"p2\">](./media/x15.png)**</ept><ept id=\"p1\">](./media/x15.png)</ept> If the value of the <bpt id=\"p3\">**</bpt>FirstName<ept id=\"p3\">**</ept> property changes for some reason (for example, X++ or JavaScript was run to update the property), the binding is automatically reevaluated, and the HTML output immediately reflects the change.","pos":[18115,18388],"source":"[**![x15](./media/x15.png)**](./media/x15.png) If the value of the **FirstName** property changes for some reason (for example, X++ or JavaScript was run to update the property), the binding is automatically reevaluated, and the HTML output immediately reflects the change."},{"content":"All binding handlers follow this pattern of automatic reevaluation when the binding value changes.","pos":[18389,18487]},{"content":"The <bpt id=\"p1\">**</bpt>if<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>foreach<ept id=\"p2\">**</ept> binding handlers are unique in that they perform DOM manipulation based on the binding values.","pos":[18488,18609],"source":" The **if** and **foreach** binding handlers are unique in that they perform DOM manipulation based on the binding values."},{"content":"To conditionally add an element to the DOM, use the <bpt id=\"p1\">**</bpt>if<ept id=\"p1\">**</ept> binding handler and supply the condition under which the element should be added.","pos":[18615,18755],"source":"To conditionally add an element to the DOM, use the **if** binding handler and supply the condition under which the element should be added."},{"content":"If the condition is false, the element isn't added to or removed from the DOM, and no bindings that are associated with the element are evaluated.","pos":[18756,18902]},{"content":"Of course, if the binding value that is supplied to <bpt id=\"p1\">**</bpt>if<ept id=\"p1\">**</ept> changes, an element that was removed will be added to the DOM again, and the bindings will be evaluated.","pos":[18903,19066],"source":" Of course, if the binding value that is supplied to **if** changes, an element that was removed will be added to the DOM again, and the bindings will be evaluated."},{"content":"To iterate over an array of elements, use the <bpt id=\"p1\">**</bpt>foreach<ept id=\"p1\">**</ept> binding.","pos":[19071,19137],"source":"To iterate over an array of elements, use the **foreach** binding."},{"content":"This is useful when nearly identical HTML elements must be displayed.","pos":[19138,19207]},{"content":"The following table shows some of the other binding handlers.","pos":[19209,19270]},{"content":"Binding handler","pos":[19274,19289]},{"content":"Description","pos":[19292,19303]},{"content":"css","pos":[19424,19427]},{"content":"Specify a CSS class, based on a condition.","pos":[19442,19484]},{"content":"style","pos":[19499,19504]},{"content":"Apply CSS styles, and bind the values to properties.","pos":[19517,19569]},{"content":"attr","pos":[19574,19578]},{"content":"Bind an HTML attribute.","pos":[19592,19615]},{"content":"In addition to using HTML elements inside the HTML for your control, you can also add framework controls such as CheckBox, Group, Tile, SectionContainer, Label, and List to your control.","pos":[19648,19834]},{"content":"Instead of binding handlers, each framework control enables binding values to be passed to its view model properties.","pos":[19835,19952]},{"content":"For example, a <bpt id=\"p1\">**</bpt>CommandButton<ept id=\"p1\">**</ept> is added by using the <bpt id=\"p2\">**</bpt>role<ept id=\"p2\">**</ept> attribute.","pos":[19953,20027],"source":" For example, a **CommandButton** is added by using the **role** attribute."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x16<ept id=\"p1\">](./media/x16.png)](./media/x16.png)</ept> In this case, <bpt id=\"p2\">**</bpt>ActionCommand<ept id=\"p2\">**</ept> can be supplied with a JavaScript function.","pos":[20028,20146],"source":"[![x16](./media/x16.png)](./media/x16.png) In this case, **ActionCommand** can be supplied with a JavaScript function."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x17<ept id=\"p1\">](./media/x17.png)](./media/x17.png)</ept> One additional feature of the HTML binding syntax is the context-aware nature of bindings.","pos":[20147,20280],"source":"[![x17](./media/x17.png)](./media/x17.png) One additional feature of the HTML binding syntax is the context-aware nature of bindings."},{"content":"By default, the context of all HTML elements is set to the JavaScript view model for the control.","pos":[20281,20378]},{"content":"However, the context changes in certain circumstances.","pos":[20379,20433]},{"content":"For example, for a <bpt id=\"p1\">**</bpt>foreach<ept id=\"p1\">**</ept> binding, every child element that is nested inside the hosting element (the element that has the <bpt id=\"p2\">**</bpt>foreach<ept id=\"p2\">**</ept> binding) obtains the current item in the loop as the context.","pos":[20434,20635],"source":" For example, for a **foreach** binding, every child element that is nested inside the hosting element (the element that has the **foreach** binding) obtains the current item in the loop as the context."},{"content":"To access the context of the parent element when you're inside of a <bpt id=\"p1\">**</bpt>foreach<ept id=\"p1\">**</ept> binding, use the <bpt id=\"p2\">**</bpt>$parent<ept id=\"p2\">**</ept> object.","pos":[20636,20752],"source":" To access the context of the parent element when you're inside of a **foreach** binding, use the **$parent** object."},{"content":"The following example from FTMContactControl.htm will help make this point clearer.","pos":[20753,20836]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x18<ept id=\"p1\">](./media/x18.png)](./media/x18.png)</ept> <bpt id=\"p2\">**</bpt>Actions<ept id=\"p2\">**</ept> is a List property that is available on the control's JavaScript view model.","pos":[20837,20968],"source":"[![x18](./media/x18.png)](./media/x18.png) **Actions** is a List property that is available on the control's JavaScript view model."},{"content":"This property was defined in the <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept> run-time class.","pos":[20969,21039],"source":" This property was defined in the **FMTContactControl** run-time class."},{"content":"Each action in the <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> list has <bpt id=\"p2\">**</bpt>Data Source<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Data Field<ept id=\"p3\">**</ept>, and <bpt id=\"p4\">**</bpt>Action Name<ept id=\"p4\">**</ept> properties.","pos":[21040,21144],"source":" Each action in the **Actions** list has **Data Source**, **Data Field**, and **Action Name** properties."},{"content":"Within the <bpt id=\"p1\">**</bpt>foreach<ept id=\"p1\">**</ept> loop, <bpt id=\"p2\">**</bpt>$data<ept id=\"p2\">**</ept> refers to the current action, and <bpt id=\"p3\">**</bpt>$data.ActionName<ept id=\"p3\">**</ept> cam retrieve the <bpt id=\"p4\">**</bpt>ActionName<ept id=\"p4\">**</ept> property from the current action in the loop.","pos":[21145,21316],"source":" Within the **foreach** loop, **$data** refers to the current action, and **$data.ActionName** cam retrieve the **ActionName** property from the current action in the loop."},{"content":"Within the loop, view model properties on the control aren't accessible via <bpt id=\"p1\">**</bpt>$data<ept id=\"p1\">**</ept>.","pos":[21317,21403],"source":" Within the loop, view model properties on the control aren't accessible via **$data**."},{"content":"Instead, <bpt id=\"p1\">**</bpt>$parent<ept id=\"p1\">**</ept> can be used to retrieve the view model properties.","pos":[21404,21475],"source":" Instead, **$parent** can be used to retrieve the view model properties."},{"pos":[21481,21495],"content":"Tutorial steps","linkify":"Tutorial steps","nodes":[{"content":"Tutorial steps","pos":[0,14]}]},{"pos":[21497,21581],"content":"Add the HTML for the <bpt id=\"p1\">**</bpt>ImageField<ept id=\"p1\">**</ept> property that you created in the run-time class.","source":"Add the HTML for the **ImageField** property that you created in the run-time class."},{"content":"In Solution Explorer, expand the <bpt id=\"p1\">**</bpt>Resources<ept id=\"p1\">**</ept> folder under the <bpt id=\"p2\">**</bpt>FMTutorial<ept id=\"p2\">**</ept> project, and double-click <bpt id=\"p3\">**</bpt>FMTContactControlHTM<ept id=\"p3\">**</ept>.","pos":[21587,21717],"source":"In Solution Explorer, expand the **Resources** folder under the **FMTutorial** project, and double-click **FMTContactControlHTM**."},{"content":"The FMTContactControl.htm file opens in the HTML editor.","pos":[21718,21774]},{"content":"Add the following HTML to the FMTContactControl.htm HTML.","pos":[21779,21836]},{"content":"The gray text is shown just for placement context.","pos":[21837,21887]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x19<ept id=\"p1\">](./media/x19.png)](./media/x19.png)</ept>","pos":[21888,21930],"source":"[![x19](./media/x19.png)](./media/x19.png)"},{"content":"Press Ctrl+S to save the changes to FMTContactControl.htm.","pos":[21935,21993]},{"content":"In the preceding example, you use the framework image control to render the image.","pos":[21995,22077]},{"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept> is a property that is defined on the Image control.","pos":[22078,22139],"source":"**Value** is a property that is defined on the Image control."},{"content":"This property lets you specify the value for the image data.","pos":[22140,22200]},{"content":"The image control supports several kinds of image types, but for this example, you’re concerned with only two possible types: URLs and Base64 strings.","pos":[22201,22351]},{"content":"Because the image type depends on data that is known only at run time, you will use a property that derives this information, <bpt id=\"p1\">**</bpt>ImageValue<ept id=\"p1\">**</ept>.","pos":[22352,22493],"source":" Because the image type depends on data that is known only at run time, you will use a property that derives this information, **ImageValue**."},{"content":"You might notice that no such property is defined in the run-time class for <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept>.","pos":[22494,22592],"source":" You might notice that no such property is defined in the run-time class for **FMTContactControl**."},{"content":"Therefore, this property isn't part of the automatically generated JavaScript view model for that control, and it also isn't defined on <bpt id=\"p1\">**</bpt>$data<ept id=\"p1\">**</ept>.","pos":[22593,22739],"source":" Therefore, this property isn't part of the automatically generated JavaScript view model for that control, and it also isn't defined on **$data**."},{"content":"To make the <bpt id=\"p1\">**</bpt>ImageValue<ept id=\"p1\">**</ept> property accessible via <bpt id=\"p2\">**</bpt>$data<ept id=\"p2\">**</ept>, you must extend the automatically generated JavaScript view model to add the property.","pos":[22740,22888],"source":" To make the **ImageValue** property accessible via **$data**, you must extend the automatically generated JavaScript view model to add the property."},{"pos":[22893,22938],"content":"Review the JavaScript for the contact control","linkify":"Review the JavaScript for the contact control","nodes":[{"content":"Review the JavaScript for the contact control","pos":[0,45]}]},{"content":"As was mentioned earlier, for every X++ method that has either a <bpt id=\"p1\">**</bpt>FormPropertyAttribute<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>FormCommandAttribute<ept id=\"p2\">**</ept> attribute, a JavaScript property or command is generated and made accessible to an extensible control's HTML via the view model.","pos":[22939,23186],"source":"As was mentioned earlier, for every X++ method that has either a **FormPropertyAttribute** or **FormCommandAttribute** attribute, a JavaScript property or command is generated and made accessible to an extensible control's HTML via the view model."},{"content":"You can extend this view model with additional properties and commands that are defined only on the client.","pos":[23187,23294]},{"content":"In other words, the properties and commands have no associated X++ methods.","pos":[23295,23370]},{"content":"After you extend the view model, the additional client-only properties and commands can be used in bindings via the <bpt id=\"p1\">**</bpt>$data<ept id=\"p1\">**</ept> object.","pos":[23371,23504],"source":" After you extend the view model, the additional client-only properties and commands can be used in bindings via the **$data** object."},{"pos":[23510,23528],"content":"Technical overview","linkify":"Technical overview","nodes":[{"content":"Technical overview","pos":[0,18]}]},{"content":"The Control Extensibility Framework offers many functions that help with data bindings and data access.","pos":[23530,23633]},{"content":"Some of the functions that are used in FMTContactControl.htm, such as <bpt id=\"p1\">**</bpt>$field<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>$model<ept id=\"p2\">**</ept>, make it easy to access the data source and its fields from the HTML bindings.","pos":[23634,23807],"source":" Some of the functions that are used in FMTContactControl.htm, such as **$field** or **$model**, make it easy to access the data source and its fields from the HTML bindings."},{"content":"These functions are functional aliases that are used in the HTML bindings for JavaScript functions that are defined by the framework.","pos":[23808,23941]},{"content":"Within the extended JavaScript view model, the equivalent, non-aliased functions are <bpt id=\"p1\">**</bpt>$dyn.getField<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>$dyn.getModel<ept id=\"p2\">**</ept>.","pos":[23942,24067],"source":" Within the extended JavaScript view model, the equivalent, non-aliased functions are **$dyn.getField** and **$dyn.getModel**."},{"content":"You can also use jQuery within the extended JavaScript view model by using the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">$</ph><ept id=\"p1\">**</ept> symbol.","pos":[24068,24160],"source":" You can also use jQuery within the extended JavaScript view model by using the **$** symbol."},{"content":"The following example shows the standard pattern that is used to define a constructor for the extended JavaScript view model.","pos":[24161,24286]},{"content":"In this example, you save a reference to <bpt id=\"p1\">**</bpt>this<ept id=\"p1\">**</ept>, apply the base <bpt id=\"p2\">**</bpt>Control<ept id=\"p2\">**</ept> class behaviors, and then combine the automatically generated properties and commands with the properties and command from the extended view model.","pos":[24287,24512],"source":" In this example, you save a reference to **this**, apply the base **Control** class behaviors, and then combine the automatically generated properties and commands with the properties and command from the extended view model."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x20<ept id=\"p1\">](./media/x20.png)](./media/x20.png)</ept> The <bpt id=\"p2\">**</bpt>self<ept id=\"p2\">**</ept> variable now contains all properties and commands that are generated from the X++ run-time class.","pos":[24513,24666],"source":"[![x20](./media/x20.png)](./media/x20.png) The **self** variable now contains all properties and commands that are generated from the X++ run-time class."},{"content":"The following example shows how to add a client-only property to extend the view model.","pos":[24667,24754]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>x21<ept id=\"p1\">](./media/x21.png)](./media/x21.png)</ept> The <bpt id=\"p2\">**</bpt>self<ept id=\"p2\">**</ept> variable will then contain all the properties and commands that are generated from the X++ run-time class, and also the <bpt id=\"p3\">**</bpt>ActionTypes<ept id=\"p3\">**</ept> property that was added as a client-only property.","pos":[24755,24997],"source":"[![x21](./media/x21.png)](./media/x21.png) The **self** variable will then contain all the properties and commands that are generated from the X++ run-time class, and also the **ActionTypes** property that was added as a client-only property."},{"content":"There are many more topics that are related to building view models for controls, but they are outside the scope of this tutorial.","pos":[24998,25128]},{"content":"For this tutorial, we don’t need to make any changes to the view model for <bpt id=\"p1\">**</bpt>FMTContactControl<ept id=\"p1\">**</ept>.","pos":[25129,25226],"source":" For this tutorial, we don’t need to make any changes to the view model for **FMTContactControl**."},{"content":"Therefore, you can close the FMTContactControl.js file and proceed to the next section.","pos":[25227,25314]},{"pos":[25319,25379],"content":"Add the extensible control to the Fleet Management workspace","linkify":"Add the extensible control to the Fleet Management workspace","nodes":[{"content":"Add the extensible control to the Fleet Management workspace","pos":[0,60]}]},{"pos":[25380,25501],"content":"You will now update the <bpt id=\"p1\">**</bpt>Fleet Management Clerk<ept id=\"p1\">**</ept> workspace so that it uses the contact control that you just completed.","source":"You will now update the **Fleet Management Clerk** workspace so that it uses the contact control that you just completed."},{"content":"In Solution Explorer, expand <bpt id=\"p1\">**</bpt>Forms<ept id=\"p1\">**</ept>, and then double-click <bpt id=\"p2\">**</bpt>FMTPickingUpTodayPart<ept id=\"p2\">**</ept>.","pos":[25507,25595],"source":"In Solution Explorer, expand **Forms**, and then double-click **FMTPickingUpTodayPart**."},{"content":"The form opens in the form designer.","pos":[25596,25632]},{"pos":[25637,25705],"content":"In the form designer, expand <bpt id=\"p1\">**</bpt>Design<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>PickingUpTodayGrid<ept id=\"p2\">**</ept>.","source":"In the form designer, expand **Design** &gt; **PickingUpTodayGrid**."},{"content":"If there is an existing contact control, delete it.","pos":[25710,25761]},{"content":"You must remove and then re-add the control, so that the form designer picks up the X++ changes that you made.","pos":[25762,25872]},{"content":"Right-click the existing control, and then click <bpt id=\"p1\">**</bpt>Delete<ept id=\"p1\">**</ept>.","pos":[25873,25933],"source":" Right-click the existing control, and then click **Delete**."},{"pos":[25938,26031],"content":"Right-click <bpt id=\"p1\">**</bpt>PickingUpTodayGrid<ept id=\"p1\">**</ept>, point to <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>FMT Contact Control<ept id=\"p3\">**</ept>.","source":"Right-click **PickingUpTodayGrid**, point to **New**, and then click **FMT Contact Control**."},{"pos":[26036,26150],"content":"Click the <bpt id=\"p1\">**</bpt>FMTContactControl1<ept id=\"p1\">**</ept> node that you just added, and set the <bpt id=\"p2\">**</bpt>Data Souce<ept id=\"p2\">**</ept> property to <bpt id=\"p3\">**</bpt>FMTCustomer<ept id=\"p3\">**</ept>.","source":"Click the **FMTContactControl1** node that you just added, and set the **Data Souce** property to **FMTCustomer**."},{"pos":[26155,26279],"content":"Expand the <bpt id=\"p1\">**</bpt>FMTContactControl1<ept id=\"p1\">**</ept> node, click <bpt id=\"p2\">**</bpt>Image<ept id=\"p2\">**</ept>, and then, in the <bpt id=\"p3\">**</bpt>Properties<ept id=\"p3\">**</ept> pane, set the following properties.","source":"Expand the **FMTContactControl1** node, click **Image**, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[26286,26294]},{"content":"Value","pos":[26300,26305]},{"content":"Data Source","pos":[26354,26365]},{"content":"FMTCustomer","pos":[26368,26379]},{"content":"Data Field","pos":[26388,26398]},{"content":"Image","pos":[26402,26407]},{"content":"Create new title fields:","pos":[26421,26445]},{"pos":[26454,26519],"content":"Right-click <bpt id=\"p1\">**</bpt>Title Fields<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Title Field<ept id=\"p2\">**</ept>.","source":"Right-click **Title Fields**, and then click **New Title Field**."},{"pos":[26528,26649],"content":"Click the <bpt id=\"p1\">**</bpt>Title Field<ept id=\"p1\">**</ept> node that you just created, and then, in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane, set the following properties.","source":"Click the **Title Field** node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[26660,26668]},{"content":"Value","pos":[26674,26679]},{"content":"Name","pos":[26736,26740]},{"content":"FirstName","pos":[26750,26759]},{"content":"Data Source","pos":[26774,26785]},{"content":"FMTCustomer","pos":[26788,26799]},{"content":"Data Field","pos":[26812,26822]},{"content":"FirstName","pos":[26826,26835]},{"pos":[26849,26920],"content":"Right-click <bpt id=\"p1\">**</bpt>Title Fields<ept id=\"p1\">**</ept> again, and then click <bpt id=\"p2\">**</bpt>New Title Field<ept id=\"p2\">**</ept>.","source":"Right-click **Title Fields** again, and then click **New Title Field**."},{"pos":[26929,27050],"content":"Click the <bpt id=\"p1\">**</bpt>Title Field<ept id=\"p1\">**</ept> node that you just created, and then, in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane, set the following properties.","source":"Click the **Title Field** node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[27061,27069]},{"content":"Value","pos":[27075,27080]},{"content":"Name","pos":[27137,27141]},{"content":"LastName","pos":[27151,27159]},{"content":"Data Source","pos":[27175,27186]},{"content":"FMTCustomer","pos":[27189,27200]},{"content":"Data Field","pos":[27213,27223]},{"content":"LastName","pos":[27227,27235]},{"content":"Create new subtitle fields:","pos":[27246,27273]},{"pos":[27282,27353],"content":"Right-click <bpt id=\"p1\">**</bpt>Subtitle Fields<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Subtitle Field<ept id=\"p2\">**</ept>.","source":"Right-click **Subtitle Fields**, and then click **New Subtitle Field**."},{"pos":[27362,27486],"content":"Click the <bpt id=\"p1\">**</bpt>Subtitle Field<ept id=\"p1\">**</ept> node that you just created, and then, in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane, set the following properties.","source":"Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[27497,27505]},{"content":"Value","pos":[27521,27526]},{"content":"Name","pos":[27591,27595]},{"content":"StartDate","pos":[27615,27624]},{"content":"Data Source","pos":[27638,27649]},{"content":"FMTRental","pos":[27662,27671]},{"content":"Data Field","pos":[27685,27695]},{"content":"StartDate","pos":[27709,27718]},{"content":"Formatting Expression","pos":[27732,27753]},{"content":"Pickup {0}","pos":[27756,27766]},{"pos":[27778,27863],"content":"Right-click ****Subtitle Fields**** again, and then click ****New Subtitle Field<bpt id=\"p1\">**</bpt>.<ept id=\"p1\">**</ept>","source":"Right-click ****Subtitle Fields**** again, and then click ****New Subtitle Field**.**"},{"pos":[27872,27996],"content":"Click the <bpt id=\"p1\">**</bpt>Subtitle Field<ept id=\"p1\">**</ept> node that you just created, and then, in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane, set the following properties.","source":"Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[28007,28015]},{"content":"Value","pos":[28031,28036]},{"content":"Name","pos":[28101,28105]},{"content":"EndDate","pos":[28125,28132]},{"content":"Data Source","pos":[28148,28159]},{"content":"FMTRental","pos":[28172,28181]},{"content":"Data Field","pos":[28195,28205]},{"content":"EndDate","pos":[28219,28226]},{"content":"Formatting Expression","pos":[28242,28263]},{"content":"Return {0}","pos":[28266,28276]},{"pos":[28288,28365],"content":"Right-click <bpt id=\"p1\">**</bpt>Subtitle Fields<ept id=\"p1\">**</ept> again, and then click <bpt id=\"p2\">**</bpt>New Subtitle Field<ept id=\"p2\">**</ept>.","source":"Right-click **Subtitle Fields** again, and then click **New Subtitle Field**."},{"pos":[28374,28498],"content":"Click the <bpt id=\"p1\">**</bpt>Subtitle Field<ept id=\"p1\">**</ept> node that you just created, and then, in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane, set the following properties.","source":"Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[28509,28517]},{"content":"Value","pos":[28523,28528]},{"content":"Name","pos":[28599,28603]},{"content":"VehicleDescription","pos":[28613,28631]},{"content":"Data Source","pos":[28644,28655]},{"content":"FMTVehicle","pos":[28658,28668]},{"content":"Data Field","pos":[28689,28699]},{"content":"Description","pos":[28703,28714]},{"content":"Press Ctrl+S to save your changes.","pos":[28733,28767]},{"pos":[28773,28853],"content":"Copy <bpt id=\"p1\">**</bpt>PickingUpTodayGrid<ept id=\"p1\">**</ept> by right-clicking in the grid and clicking <bpt id=\"p2\">**</bpt>Copy<ept id=\"p2\">**</ept>.","source":"Copy **PickingUpTodayGrid** by right-clicking in the grid and clicking **Copy**."},{"content":"In Solution Explorer, click <bpt id=\"p1\">**</bpt>Forms<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>FMTReturningTodayPart<ept id=\"p2\">**</ept>, and then double-click <bpt id=\"p3\">**</bpt>FMTReturningTodayPart<ept id=\"p3\">**</ept>.","pos":[28858,28976],"source":"In Solution Explorer, click **Forms** &gt; **FMTReturningTodayPart**, and then double-click **FMTReturningTodayPart**."},{"content":"The form opens in the form designer.","pos":[28977,29013]},{"pos":[29018,29099],"content":"Expand <bpt id=\"p1\">**</bpt>Design<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>ReturningTodayGrid<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Delete<ept id=\"p3\">**</ept>.","source":"Expand **Design**, right-click **ReturningTodayGrid**, and then click **Delete**."},{"pos":[29104,29153],"content":"Right-click <bpt id=\"p1\">**</bpt>Design<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Paste<ept id=\"p2\">**</ept>.","source":"Right-click **Design**, and then click **Paste**."},{"content":"Select the <bpt id=\"p1\">**</bpt>PickingUpTodayGrid<ept id=\"p1\">**</ept> grid that you just added to the <bpt id=\"p2\">**</bpt>FMTReturningTodayPart<ept id=\"p2\">**</ept> form.","pos":[29158,29255],"source":"Select the **PickingUpTodayGrid** grid that you just added to the **FMTReturningTodayPart** form."},{"content":"Set the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> property to <bpt id=\"p2\">**</bpt>ReturningTodayGrid<ept id=\"p2\">**</ept>, and then press Ctrl+S to save the changes to the <bpt id=\"p3\">**</bpt>EMTReturningTodayPart<ept id=\"p3\">**</ept> form.","pos":[29256,29389],"source":" Set the **Name** property to **ReturningTodayGrid**, and then press Ctrl+S to save the changes to the **EMTReturningTodayPart** form."},{"content":"In Solution Explorer, find the <bpt id=\"p1\">**</bpt>FMTRentalRatesPart<ept id=\"p1\">**</ept> form.","pos":[29394,29453],"source":"In Solution Explorer, find the **FMTRentalRatesPart** form."},{"content":"Double-click the form to open it in the form designer, and then click <bpt id=\"p1\">**</bpt>Design<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>RentalRatesGrid<ept id=\"p2\">**</ept>.","pos":[29454,29560],"source":" Double-click the form to open it in the form designer, and then click **Design** &gt; **RentalRatesGrid**."},{"content":"Delete each field from <bpt id=\"p1\">**</bpt>RentalRatesGrid<ept id=\"p1\">**</ept>.","pos":[29565,29608],"source":"Delete each field from **RentalRatesGrid**."},{"content":"To remove the fields, click the first field, hold down the Shift key while you click the last field, and then press Delete.","pos":[29609,29732]},{"pos":[29737,29819],"content":"Right-click in the grid, point to <bpt id=\"p1\">**</bpt>New<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>FMT Contact Control<ept id=\"p2\">**</ept>.","source":"Right-click in the grid, point to **New**, and then click **FMT Contact Control**."},{"pos":[29824,29939],"content":"Expand <bpt id=\"p1\">**</bpt>FMTContactControl1<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Image<ept id=\"p2\">**</ept>, and then, in the <bpt id=\"p3\">**</bpt>Properties<ept id=\"p3\">**</ept> pane, set the following properties.","source":"Expand **FMTContactControl1**, click **Image**, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[29946,29954]},{"content":"Value","pos":[29960,29965]},{"content":"Data Source","pos":[30022,30033]},{"content":"FMTVehicleModel","pos":[30036,30051]},{"content":"Data Field","pos":[30060,30070]},{"content":"Image","pos":[30074,30079]},{"pos":[30097,30162],"content":"Right-click <bpt id=\"p1\">**</bpt>Title Fields<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Title Field<ept id=\"p2\">**</ept>.","source":"Right-click **Title Fields**, and then click **New Title Field**."},{"pos":[30167,30284],"content":"Click the title field node that you just created, and then, in the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> pane, set the following properties.","source":"Click the title field node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[30291,30299]},{"content":"Value","pos":[30305,30310]},{"content":"Name","pos":[30367,30371]},{"content":"VehicleModel","pos":[30381,30393]},{"content":"Data Source","pos":[30405,30416]},{"content":"FMTVehicleModel","pos":[30419,30434]},{"content":"Data Field","pos":[30443,30453]},{"content":"Model","pos":[30457,30462]},{"pos":[30480,30551],"content":"Right-click <bpt id=\"p1\">**</bpt>Subtitle Fields<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Subtitle Field<ept id=\"p2\">**</ept>.","source":"Right-click **Subtitle Fields**, and then click **New Subtitle Field**."},{"pos":[30556,30680],"content":"Click the <bpt id=\"p1\">**</bpt>Subtitle Field<ept id=\"p1\">**</ept> node that you just created, and then, in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane, set the following properties.","source":"Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[30687,30695]},{"content":"Value","pos":[30701,30706]},{"content":"Name","pos":[30761,30765]},{"content":"VehicleMake","pos":[30775,30786]},{"content":"Data Source","pos":[30798,30809]},{"content":"FMTVehicleMake","pos":[30812,30826]},{"content":"Data Field","pos":[30835,30845]},{"content":"Make","pos":[30849,30853]},{"pos":[30871,30942],"content":"Right-click <bpt id=\"p1\">**</bpt>Subtitle Fields<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Subtitle Field<ept id=\"p2\">**</ept>.","source":"Right-click **Subtitle Fields**, and then click **New Subtitle Field**."},{"pos":[30947,31071],"content":"Click the <bpt id=\"p1\">**</bpt>Subtitle Field<ept id=\"p1\">**</ept> node that you just created, and then, in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane, set the following properties.","source":"Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[31078,31086]},{"content":"Value","pos":[31102,31107]},{"content":"Name","pos":[31496,31500]},{"content":"RatePerDay","pos":[31520,31530]},{"content":"Data Source","pos":[31705,31716]},{"content":"FMTModelRate","pos":[31729,31741]},{"content":"Data Field","pos":[31914,31924]},{"content":"RaterPerDay<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The <bpt id=\"p2\">**</bpt>Data Field<ept id=\"p2\">**</ept> value must match the table field name.","pos":[31938,32016],"source":"RaterPerDay**Note:** The **Data Field** value must match the table field name."},{"content":"If you correct the spelling error, the values won't match, and you will receive a run-time error.","pos":[32017,32114]},{"content":"Formatting Expression","pos":[32123,32144]},{"content":"${0} per day","pos":[32147,32159]},{"pos":[32331,32402],"content":"Right-click <bpt id=\"p1\">**</bpt>Subtitle Fields<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Subtitle Field<ept id=\"p2\">**</ept>.","source":"Right-click **Subtitle Fields**, and then click **New Subtitle Field**."},{"pos":[32407,32531],"content":"Click the <bpt id=\"p1\">**</bpt>Subtitle Field<ept id=\"p1\">**</ept> node that you just created, and then, in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> pane, set the following properties.","source":"Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties."},{"content":"Property","pos":[32538,32546]},{"content":"Value","pos":[32562,32567]},{"content":"Name","pos":[32630,32634]},{"content":"RatePerWeek","pos":[32654,32665]},{"content":"Data Source","pos":[32676,32687]},{"content":"FMTModelRate","pos":[32700,32712]},{"content":"Data Field","pos":[32722,32732]},{"content":"RatePerWeek","pos":[32746,32757]},{"content":"Formatting Expression","pos":[32768,32789]},{"content":"${0} per week","pos":[32792,32805]},{"pos":[32813,32873],"content":"Press Ctrl+S to save your changes to <bpt id=\"p1\">**</bpt>FMTRentalRatesPart<ept id=\"p1\">**</ept>.","source":"Press Ctrl+S to save your changes to **FMTRentalRatesPart**."},{"pos":[32878,32985],"content":"In Solution Explorer, right-click the <bpt id=\"p1\">**</bpt>FMTClerkWorkspace<ept id=\"p1\">**</ept> form, and then click <bpt id=\"p2\">**</bpt>Set as Startup Object<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click the **FMTClerkWorkspace** form, and then click **Set as Startup Object**."},{"content":"Press Ctrl+F5 to open the updated contact control in Internet Explorer.","pos":[32990,33061]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If you receive a JavaScript error, you might have to clear the Internet Explorer cache, so that the browser loads the new JavaScript file:","pos":[33062,33210],"source":"**Note:** If you receive a JavaScript error, you might have to clear the Internet Explorer cache, so that the browser loads the new JavaScript file:"},{"pos":[33219,33275],"content":"When you're prompted to open the debugger, click <bpt id=\"p1\">**</bpt>No<ept id=\"p1\">**</ept>.","source":"When you're prompted to open the debugger, click **No**."},{"pos":[33284,33403],"content":"While Internet Explorer is open, press F12 (or click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>F12 Developer Tools<ept id=\"p2\">**</ept>), and then press Ctrl+R.","source":"While Internet Explorer is open, press F12 (or click **Settings** &gt; **F12 Developer Tools**), and then press Ctrl+R."},{"pos":[33412,33469],"content":"In the <bpt id=\"p1\">**</bpt>Clear Browser Cache<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept>.","source":"In the **Clear Browser Cache** dialog box, click **Yes**."},{"content":"Reload the page by pressing Ctrl+F5.","pos":[33478,33514]},{"pos":[33520,33574],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Ext6<ept id=\"p1\">](./media/ext6-1024x428.png)](./media/ext6.png)</ept>","source":"[![Ext6](./media/ext6-1024x428.png)](./media/ext6.png)"},{"content":"In this tutorial, you've seen how you can use X++ when you define the design-time and server-side behaviors for a control, and how you can consume a powerful HTML-based and JavaScript-based framework when you design the UI and user interaction patterns.","pos":[33576,33829]},{"content":"The Control Extensibility Framework helps provide a separation between the modeled behavior of a control and its physical manifestation.","pos":[33830,33966]},{"content":"As a best practice, you should try to maintain this loose coupling between data, metadata, and UI when you build extensible controls.","pos":[33967,34100]},{"pos":[34105,34141],"content":"Bidirectional or righttoleft support","linkify":"Bidirectional or righttoleft support","nodes":[{"content":"Bidirectional or righttoleft support","pos":[0,36]}]},{"content":"To validate right-to-left (RTL) support for your extensible control, you simply need to set the <bpt id=\"p1\">**</bpt>dir<ept id=\"p1\">**</ept> (direction) attribute on the HTML document.","pos":[34142,34289],"source":"To validate right-to-left (RTL) support for your extensible control, you simply need to set the **dir** (direction) attribute on the HTML document."},{"content":"When this attribute is changed, the browser will automatically change the layout direction of your control.","pos":[34290,34397]},{"content":"You should make sure that your control doesn’t implement any styling which interferes with this layout.","pos":[34398,34501]},{"content":"Instead of setting this attribute manually, you can also validate by placing your control on a form, and then selecting a RTL language.","pos":[34502,34637]},{"content":"Selecting a RTL language will cause the client to also update the <bpt id=\"p1\">**</bpt>dir<ept id=\"p1\">**</ept> attribute appropriately.","pos":[34638,34736],"source":" Selecting a RTL language will cause the client to also update the **dir** attribute appropriately."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>dir attribute<ept id=\"p1\">](http://www.w3.org/TR/html5/dom.html#the-dir-attribute)</ept> in the HTML standards.","pos":[34737,34856],"source":" For more information, see [dir attribute](http://www.w3.org/TR/html5/dom.html#the-dir-attribute) in the HTML standards."}],"content":"---\n# required metadata\n\ntitle: Build an extensible control | Microsoft Docs\ndescription: This wiki describes how to create new application controls that have a property sheet in Visual Studio and have server-side business logic.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 2015-12-11 23:52:52\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# keywords: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: 61\nms.suite: Released- Dynamics AX 7.0.0\n# ms.tgt_pltfrm: \nms.custom: 24291\nms.assetid: 5640fb63-c7ee-4bb5-9f47-6adab4a6dbea\nms.region: Global\n# ms.industry: \nms.author: shshabazz\n\n---\n\n# Build an extensible control\n\nThis wiki describes how to create new application controls that have a property sheet in Visual Studio and have server-side business logic.\n\nPrerequisites\n-------------\n\nFor this tutorial, you must access the environment by using Remote Desktop, and you must be provisioned as an administrator on the instance. For more information, see [Access development instances](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2).\n\n## Overview\nThe Control Extensibility Framework lets you create new application controls. You can use the same tools that Microsoft uses to build controls that are already present in the program, such as the chart control. Three important artifacts are involved in the process of developing an extensible control:\n\n-   **The X++ build class** – The build class lets a developer define the properties that appear in the Microsoft Visual Studio property sheet for the control. The developer can also define the modeling behavior for the control when it's used in the form designer. The build class is consumed by the run-time class to initialize the state of the control based on the value of properties in the property sheet.\n-   **The X++ run-time class** – The run-time class lets a developer define server-side business logic and data access patterns for an extensible control. Two concepts that are specific to building extensible controls are the *properties* and *commands* that the X++ class defines. Each property and command that is defined is serialized into a JavaScript view model at run time, and can be consumed by the client parts of the extensible control (the HTML and JavaScript). These properties and commands are the main channels for moving information between the server-side and client-side parts of the control.\n-   **The control HTML and JavaScript** – Each control uses HTML, JavaScript, and CSS files to define control visualization and client-side interaction patterns. By using the Microsoft Dynamics HTML binding syntax together with jQuery, a developer can consume the properties and commands that are defined in X++ to design powerful data-driven UI.\n\nAll three artifacts of extensible control development are explained in more detail in the following sections.\n\n## Key concepts\n-   Defining an extensible control's design-time behavior\n-   Defining an extensible control's run-time behavior\n-   Defining an extensible control's view by using HTML and CSS\n-   Defining an extensible control's view model by using JavaScript\n\n## Setup\n### Import the tutorial project and transactional data\n\nUse Visual Studio to import the tutorial project. The tutorial project includes the artifacts that you will use to complete this tutorial. Use Visual Studio to open the FMTutorial project and load the data for the tutorial. You will use the **FMTDataHelper** class to load data for the Fleet Management tutorial.\n\n1.  Download the Fleet Management sample from <https://github.com/Microsoft/FMLab>, save it to **C:**, and unzip it.\n2.  On the desktop, double-click the Visual Studio shortcut to open the development environment.\n3.  On the **Dynamics 365 **menu, click **Import Project**.\n4.  In the **Import Project** dialog box, next to the **File name** text box, click the ellipsis button (...).\n5.  In the **Select the file to import** dialog box, browse to **C:\\\\FMLab**, click **FMTutorialDataModel.axpp**, and then click **Open**.\n6.  In the **Project file location** field, enter **C:\\\\FMLab**.\n7.  Select the **Overwrite Elements** check box and the **Current solution** option. The following screen shot shows the completed **Import Project** dialog box. [![Ext1](./media/ext1.png)](./media/ext1.png)\n8.  Click **OK**.\n9.  In Solution Explorer, under the **FMTutorial** project, expand **Classes**.\n10. Right-click **FMTDataHelper**, and then click **Set as Startup Object**.\n11. On the **BUILD** menu, click **Rebuild Solution**. You use the rebuild to make sure that all the files in the project are built, regardless of timestamps. You can view the build progress in the **Output** window.\n12. After the build is completed, press Ctrl+F5 to run the project. The **Login** form closes when authentication succeeds, and then the data is loaded.\n\n### Set up aggregate data\n\nUse FMTAggregateMeasurements to populate the Microsoft SQL Server Analysis Services database with aggregate data. **Note:** These steps must be completed immediately after you use the **FMTDataHelper** class to import data. You may **NOT** need to do these steps if the [aggregate measure is \"InMemoryRealTime\"](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/analytics-bi-reporting/modeling-and-using-aggregate-data), depending on what tutorial files you have.\n\n1.  In Solution Explorer, under **Analytics**, double-click **FMTAggregateMeasurement**.\n2.  In the designer, right-click **FMTAggregateMeasurement**, and then click **Deploy and Process**.\n\n## Preview the clerk workspace\nBefore you begin to build the contact control, look at the appearance of the current implementation. In the following sections, you will use the Control Extensibility Framework to enrich the visualization of the controls and the form.\n\n1.  In Solution Explorer, expand **Forms**, right-click **FMTClerkWorkspace**, and then click **Set as Startup Object**.\n2.  Press Ctrl+F5 to open the **Fleet management clerk** page in Internet Explorer. As the following screen shot shows, the data on this page appears as a simple grid in a list style that contains several string and date controls. [![Ext2](./media/ext2-1024x515.png)](./media/ext2.png)\n3.  Exit Internet Explorer.\n\n## Modify the build class for the contact control\nTo save time, you will work on a partially completed extensible control that is named the contact control. You will extend the contact control to complete its design, run-time, and visualization behaviors. The partially completed contact control already supports multiple title fields, subfields, and action buttons. However, it doesn't currently support an image. To add image support, you must extend the design experience for the contact control. You will add a data field that can specify image data.\n\n### Technical overview\n\nTo see an example of a build class, in Solution Explorer, expand **Classes**, right-click **FMTBuildContactControl**, and then click **View Code**. The class code appears in the code editor. **FMTBuildContactControl** is the build class for the contact control. For each extensible control, the build class defines the properties that the control shows in the property sheet. The build class also defines the modeling experience for the control in the Visual Studio form designer. There are three primary design-time behaviors that you can define for an extensible control. Each behavior is declaratively defined by using a **FormDesign** attribute. Here are the design-time behaviors that you can define:\n\n-   **Name** – You can specify the control name that appears in the form designer when you add the control to a form. To specify the name, add a **FormDesignControlAttribute** attribute to the build class declaration of the extensible control. For example, the following declaration of the **FMTBuildContactControl** class shows the attribute. [![x1](./media/x1.png)](./media/x1.png)\n-   **Designer properties** – These are the properties that you see in the property sheet when you add the control to a form. There are several attributes that let you add various types of designer properties. For example, the **FormDesignPropertyAttribute** attribute adds a property to the property sheet, and the property name and the section are supplied as arguments to the attribute. For example, the following code adds the **Action Name** property to the **FMTContactControlAction** class. [![x2](./media/x2.png)](./media/x2.png)The following screen shot shows how this property appears in the **Properties** pane in Visual Studio. [![Ext3](./media/ext3.png)](./media/ext3.png)\n-   **Child design components** – These are child nodes that you see after you add the control to a form. There are two types of child design components: leaf and leaf collection.\n    -   A leaf is defined by using a **FormDesignComponentAttribute** attribute on an X++ method that accepts or returns another build class. The build class determines the properties that the leaf has in the property sheet.\n    -   A leaf collection is defined by using a **FormDesignComponentCollectionAttribute** attribute. The allowable leaf types for the collection are defined by using **FormDesignComponentValidChildAttribute** attributes.\n\n    For example, the following code adds a leaf collection that is named **Actions** for the **FMTBuildContactControl** class. [![x3](./media/x3.png)](./media/x3.png) The following screen shot shows how the specified child design component appears when you add the control to a form. [![Ext4](./media/ext4.png)](./media/ext4.png)\n\n### Tutorial steps\n\n1.  Check that the code for the **FMTBuildContactControl** class appears in the code editor. If it doesn't, in Solution Explorer, expand **Classes**, right-click **FMTBuildContactControl**, and then click **View Code**.\n2.  Add a child design component to the FMTBuildContactControl class. A child design component lets a developer who places the control in a form to specify the image that appears on the control. In this step, you will add the **FormDesignComponentAttribute** attribute to create a new entry in the property sheet. You will then add the **FormDesignPropertyDataFieldAttribute** attribute, which indicates that the new designer property enables the selection of a data field.\n    1.  Add the highlighted code that follows to the declarations for the class. This code adds the **FormBindingDataField** field to the X++ that the **FMTBuildContactControl** class is using. [![x4](./media/x4.png)](./media/x4.png)\n    2.  Add the following code to the **FMTBuildContactControl** class. Add this method after the designer property for the data source. [![x5](./media/x5.png)](./media/x5.png)**Note:** The child design component will show the properties that are available on the **FormBindingDataField** build class. This is appropriate, because you want to enable image data binding to a data field and data source. This is all that is required to add a designer property to the build class of the contact control.\n\n3.  Press Ctrl+S to save your changes, and then close the code editor.\n4.  In Solution Explorer, right-click **FMTutorial**, and then click **Build**.\n5.  If the **FMTPickingUpTodayPart** form isn't already open, expand **Forms**, and then double-click **FMTPickingUpTodayPart**. The form opens in the form designer.\n6.  In the form designer, expand **Design** &gt; **PickingUpTodayGrid**, and then select and delete the controls that currently appear in the grid.\n7.  Right-click **PickingUpTodayGrid**, point to **New**, and then click **FMTContactControl**. Expand the **FMTContactControl** node, and notice that **Image** appears as a new child design component. The following illustration shows the contact control in the form designer. [![Ext5](./media/ext5.png)](./media/ext5.png) You must also update the run-time class for the contact control to consume the design-time changes. You will revisit adding the control to the form and specifying data bindings and property values later.\n8.  Press Ctrl+S to save your changes, and then close the form designer.\n\n## Modify the runtime class for the contact control\nNext, you must modify the run-time class to read the data source and data field for the image from the build class. You must also create a run-time property, so that the image data is available to the control's client HTML and JavaScript.\n\n### Technical overview\n\nTo see an example of the run-time class, in Solution Explorer, expand **Classes**, right-click **FMTContactControl**, and then click **View Code**. The class opens in the code editor. **FMTContactControl** is the run-time class for the contact control. The class defines the run-time behavior of the contact control. The run-time class typically contains X++ for data access or business logic. In addition, there are two primary run-time behaviors that are related to extensible controls that you define in the run-time class. Each behavior is declaratively defined by using an attribute.\n\n-   **Run-time properties of the control** – These properties can be of two types:\n    -   *Static properties*, which are set via code or initialized with values from designer properties.\n    -   *Bindable properties*, for which the run-time value is determined by a binding to a data source and data field combination.\n\n    Run-time properties are declared by using **FormPropertyAttribute** attributes. The following example shows a property declaration in **FMTContactControl**. [![x6](./media/x6.png)](./media/x6.png)The **FormPropertyAttribute** attribute accepts two arguments:\n    -   The first argument indicates to the framework the kind of JavaScript view model property to create.\n        -   If you supply **BindableValue**, a **ReferenceProperty** is generated in the JavaScript view model. A **ReferenceProperty** updates itself when data changes in the data source.\n        -   If you supply **Value**, a **ValueProperty** is generated in the JavaScript view model. A developer must write code to update the value of a **ValueProperty**.\n    -   The second argument of the attribute sets the name for the property as it will be defined in the JavaScript view model.\n\n    **Note:** Don't be concerned if **TitleFields** don't seem to be bound to data because the example uses a **Value** property. The **TitleFields** property returns a List that contains **FormBindingDataFields**, each of which is data-bound. The X++ method that has the **FormPropertyAttribute** attribute is a simple getter/setter that uses a **FormProperty** as the backing field. The **FormProperty** contains the logic for updating the property, based on value or data source changes. It also serves as the backing field for the property.\n-   **Run-time commands for the control** – Commands enable the client parts of the control to trigger X++ logic, based on client-side user interactions. Commands are declared by using a **FormCommandAttribute** attribute. The single argument specifies the name of the command as it will appear in the JavaScript view model. The following example shows a command declaration in **FMTContactControl**. [![x7](./media/x7.png)](./media/x7.png)\n\n### Tutorial steps\n\n1.  Verify that the **FMTContactControl** class is open in the code editor. If it isn't, in Solution Explorer, expand **Classes**, right-click **FMTContactControl**, and then click **View Code**.\n2.  Add a run-time property for the image data to **FMTContactControl**. In the **FMTContactControl** class, declare a **FormProperty** that is named **imageFieldProperty**, as shown by the highlighted line in the following example. [![x8](./media/x8.png)](./media/x8.png)\n3.  Add the following X++ method after the **parmDataSource** X++ method. The new method will serve as the getter/setter for **imageFieldProperty**. **Note:** You don't return the value of the image data here, because the framework will let you bind to the data in the client, as you will see later. [![x9](./media/x9.png)](./media/x9.png)\n4.  Initialize **imageFieldProperty** by adding the highlighted line in the following example to the new method of **FMTContactControl**. [![x10](./media/x10.png)](./media/x10.png)\n5.  Now supply the binding to **imageFieldProperty** by adding the highlighted line in the following example to the **applyBuild** method of **FMTContactControl**. [![x11](./media/x11.png)](./media/x11.png)\n6.  Press Ctrl+S to save the changes. You've now finished modifying the run-time class. Next, you will update the HTML view to display the image.\n\n## Modify the HTML for the contact control\nThe HTML of the contact control is where you add UI elements, such as text boxes, images, and buttons, that interact with the properties and commands that are defined in the run-time class. Extensible controls use a declarative HTML-based binding syntax to bind HTML element behaviors to properties, commands, JavaScript expressions, and JavaScript functions. These bindings are parsed at run time, and the resulting HTML is injected into the DOM. The following section explains a few of the bindings that are used in FMTContactControl.htm to add an image to the control.\n\n### Technical overview\n\nThe **bind** attribute, together with the **text** binding handler enables binding to the **text** property of an HTML element. For example, the following HTML uses the **bind** attribute and the **text** binding handler. [![x12](./media/x12.png)](./media/x12.png) The preceding HTML is equivalent to the following HTML. [![x13](./media/x13.png)](./media/x13.png) You will see the benefits of the binding when you bind to properties or commands. For example, if you have a view model property that is named **FirstName**, you can bind to it as shown in the following example. Here, **$data** is the object that contains the view model properties and commands. [![x14](./media/x14.png)](./media/x14.png) The HTML output changes, based on the current value of **FirstName**. The following example shows the output if **FirstName** has a value of **John**. [**![x15](./media/x15.png)**](./media/x15.png) If the value of the **FirstName** property changes for some reason (for example, X++ or JavaScript was run to update the property), the binding is automatically reevaluated, and the HTML output immediately reflects the change. All binding handlers follow this pattern of automatic reevaluation when the binding value changes. The **if** and **foreach** binding handlers are unique in that they perform DOM manipulation based on the binding values.\n\n-   To conditionally add an element to the DOM, use the **if** binding handler and supply the condition under which the element should be added. If the condition is false, the element isn't added to or removed from the DOM, and no bindings that are associated with the element are evaluated. Of course, if the binding value that is supplied to **if** changes, an element that was removed will be added to the DOM again, and the bindings will be evaluated.\n-   To iterate over an array of elements, use the **foreach** binding. This is useful when nearly identical HTML elements must be displayed.\n\nThe following table shows some of the other binding handlers.\n\n| Binding handler | Description                                          |\n|-----------------|------------------------------------------------------|\n| css             | Specify a CSS class, based on a condition.           |\n| style           | Apply CSS styles, and bind the values to properties. |\n| attr            | Bind an HTML attribute.                              |\n\nIn addition to using HTML elements inside the HTML for your control, you can also add framework controls such as CheckBox, Group, Tile, SectionContainer, Label, and List to your control. Instead of binding handlers, each framework control enables binding values to be passed to its view model properties. For example, a **CommandButton** is added by using the **role** attribute. [![x16](./media/x16.png)](./media/x16.png) In this case, **ActionCommand** can be supplied with a JavaScript function. [![x17](./media/x17.png)](./media/x17.png) One additional feature of the HTML binding syntax is the context-aware nature of bindings. By default, the context of all HTML elements is set to the JavaScript view model for the control. However, the context changes in certain circumstances. For example, for a **foreach** binding, every child element that is nested inside the hosting element (the element that has the **foreach** binding) obtains the current item in the loop as the context. To access the context of the parent element when you're inside of a **foreach** binding, use the **$parent** object. The following example from FTMContactControl.htm will help make this point clearer. [![x18](./media/x18.png)](./media/x18.png) **Actions** is a List property that is available on the control's JavaScript view model. This property was defined in the **FMTContactControl** run-time class. Each action in the **Actions** list has **Data Source**, **Data Field**, and **Action Name** properties. Within the **foreach** loop, **$data** refers to the current action, and **$data.ActionName** cam retrieve the **ActionName** property from the current action in the loop. Within the loop, view model properties on the control aren't accessible via **$data**. Instead, **$parent** can be used to retrieve the view model properties.\n\n### Tutorial steps\n\nAdd the HTML for the **ImageField** property that you created in the run-time class.\n\n1.  In Solution Explorer, expand the **Resources** folder under the **FMTutorial** project, and double-click **FMTContactControlHTM**. The FMTContactControl.htm file opens in the HTML editor.\n2.  Add the following HTML to the FMTContactControl.htm HTML. The gray text is shown just for placement context. [![x19](./media/x19.png)](./media/x19.png)\n3.  Press Ctrl+S to save the changes to FMTContactControl.htm.\n\nIn the preceding example, you use the framework image control to render the image. **Value** is a property that is defined on the Image control. This property lets you specify the value for the image data. The image control supports several kinds of image types, but for this example, you’re concerned with only two possible types: URLs and Base64 strings. Because the image type depends on data that is known only at run time, you will use a property that derives this information, **ImageValue**. You might notice that no such property is defined in the run-time class for **FMTContactControl**. Therefore, this property isn't part of the automatically generated JavaScript view model for that control, and it also isn't defined on **$data**. To make the **ImageValue** property accessible via **$data**, you must extend the automatically generated JavaScript view model to add the property.\n\n## Review the JavaScript for the contact control\nAs was mentioned earlier, for every X++ method that has either a **FormPropertyAttribute** or **FormCommandAttribute** attribute, a JavaScript property or command is generated and made accessible to an extensible control's HTML via the view model. You can extend this view model with additional properties and commands that are defined only on the client. In other words, the properties and commands have no associated X++ methods. After you extend the view model, the additional client-only properties and commands can be used in bindings via the **$data** object.\n\n### Technical overview\n\nThe Control Extensibility Framework offers many functions that help with data bindings and data access. Some of the functions that are used in FMTContactControl.htm, such as **$field** or **$model**, make it easy to access the data source and its fields from the HTML bindings. These functions are functional aliases that are used in the HTML bindings for JavaScript functions that are defined by the framework. Within the extended JavaScript view model, the equivalent, non-aliased functions are **$dyn.getField** and **$dyn.getModel**. You can also use jQuery within the extended JavaScript view model by using the **$** symbol. The following example shows the standard pattern that is used to define a constructor for the extended JavaScript view model. In this example, you save a reference to **this**, apply the base **Control** class behaviors, and then combine the automatically generated properties and commands with the properties and command from the extended view model. [![x20](./media/x20.png)](./media/x20.png) The **self** variable now contains all properties and commands that are generated from the X++ run-time class. The following example shows how to add a client-only property to extend the view model. [![x21](./media/x21.png)](./media/x21.png) The **self** variable will then contain all the properties and commands that are generated from the X++ run-time class, and also the **ActionTypes** property that was added as a client-only property. There are many more topics that are related to building view models for controls, but they are outside the scope of this tutorial. For this tutorial, we don’t need to make any changes to the view model for **FMTContactControl**. Therefore, you can close the FMTContactControl.js file and proceed to the next section.\n\n## Add the extensible control to the Fleet Management workspace\nYou will now update the **Fleet Management Clerk** workspace so that it uses the contact control that you just completed.\n\n1.  In Solution Explorer, expand **Forms**, and then double-click **FMTPickingUpTodayPart**. The form opens in the form designer.\n2.  In the form designer, expand **Design** &gt; **PickingUpTodayGrid**.\n3.  If there is an existing contact control, delete it. You must remove and then re-add the control, so that the form designer picks up the X++ changes that you made. Right-click the existing control, and then click **Delete**.\n4.  Right-click **PickingUpTodayGrid**, point to **New**, and then click **FMT Contact Control**.\n5.  Click the **FMTContactControl1** node that you just added, and set the **Data Souce** property to **FMTCustomer**.\n6.  Expand the **FMTContactControl1** node, click **Image**, and then, in the **Properties** pane, set the following properties.\n    | Property    | Value       |\n    |-------------|-------------|\n    | Data Source | FMTCustomer |\n    | Data Field  | Image       |\n\n7.  Create new title fields:\n    1.  Right-click **Title Fields**, and then click **New Title Field**.\n    2.  Click the **Title Field** node that you just created, and then, in the **Properties** pane, set the following properties.\n        | Property    | Value       |\n        |-------------|-------------|\n        | Name        | FirstName   |\n        | Data Source | FMTCustomer |\n        | Data Field  | FirstName   |\n\n    3.  Right-click **Title Fields** again, and then click **New Title Field**.\n    4.  Click the **Title Field** node that you just created, and then, in the **Properties** pane, set the following properties.\n        | Property    | Value       |\n        |-------------|-------------|\n        | Name        | LastName    |\n        | Data Source | FMTCustomer |\n        | Data Field  | LastName    |\n\n8.  Create new subtitle fields:\n    1.  Right-click **Subtitle Fields**, and then click **New Subtitle Field**.\n    2.  Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties.\n        | Property              | Value      |\n        |-----------------------|------------|\n        | Name                  | StartDate  |\n        | Data Source           | FMTRental  |\n        | Data Field            | StartDate  |\n        | Formatting Expression | Pickup {0} |\n\n    3.  Right-click ****Subtitle Fields**** again, and then click ****New Subtitle Field**.**\n    4.  Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties.\n        | Property              | Value      |\n        |-----------------------|------------|\n        | Name                  | EndDate    |\n        | Data Source           | FMTRental  |\n        | Data Field            | EndDate    |\n        | Formatting Expression | Return {0} |\n\n    5.  Right-click **Subtitle Fields** again, and then click **New Subtitle Field**.\n    6.  Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties.\n        | Property    | Value              |\n        |-------------|--------------------|\n        | Name        | VehicleDescription |\n        | Data Source | FMTVehicle         |\n        | Data Field  | Description        |\n\n    7.  Press Ctrl+S to save your changes.\n\n9.  Copy **PickingUpTodayGrid** by right-clicking in the grid and clicking **Copy**.\n10. In Solution Explorer, click **Forms** &gt; **FMTReturningTodayPart**, and then double-click **FMTReturningTodayPart**. The form opens in the form designer.\n11. Expand **Design**, right-click **ReturningTodayGrid**, and then click **Delete**.\n12. Right-click **Design**, and then click **Paste**.\n13. Select the **PickingUpTodayGrid** grid that you just added to the **FMTReturningTodayPart** form. Set the **Name** property to **ReturningTodayGrid**, and then press Ctrl+S to save the changes to the **EMTReturningTodayPart** form.\n14. In Solution Explorer, find the **FMTRentalRatesPart** form. Double-click the form to open it in the form designer, and then click **Design** &gt; **RentalRatesGrid**.\n15. Delete each field from **RentalRatesGrid**. To remove the fields, click the first field, hold down the Shift key while you click the last field, and then press Delete.\n16. Right-click in the grid, point to **New**, and then click **FMT Contact Control**.\n17. Expand **FMTContactControl1**, click **Image**, and then, in the **Properties** pane, set the following properties.\n    | Property    | Value           |\n    |-------------|-----------------|\n    | Data Source | FMTVehicleModel |\n    | Data Field  | Image           |\n\n18. Right-click **Title Fields**, and then click **New Title Field**.\n19. Click the title field node that you just created, and then, in the **Properties** pane, set the following properties.\n    | Property    | Value           |\n    |-------------|-----------------|\n    | Name        | VehicleModel    |\n    | Data Source | FMTVehicleModel |\n    | Data Field  | Model           |\n\n20. Right-click **Subtitle Fields**, and then click **New Subtitle Field**.\n21. Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties.\n    | Property    | Value          |\n    |-------------|----------------|\n    | Name        | VehicleMake    |\n    | Data Source | FMTVehicleMake |\n    | Data Field  | Make           |\n\n22. Right-click **Subtitle Fields**, and then click **New Subtitle Field**.\n23. Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties.\n    | Property              | Value                                                                                                                                                                            |\n    |-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n    | Name                  | RatePerDay                                                                                                                                                                       |\n    | Data Source           | FMTModelRate                                                                                                                                                                     |\n    | Data Field            | RaterPerDay**Note:** The **Data Field** value must match the table field name. If you correct the spelling error, the values won't match, and you will receive a run-time error. |\n    | Formatting Expression | ${0} per day                                                                                                                                                                     |\n\n24. Right-click **Subtitle Fields**, and then click **New Subtitle Field**.\n25. Click the **Subtitle Field** node that you just created, and then, in the **Properties** pane, set the following properties.\n    | Property              | Value         |\n    |-----------------------|---------------|\n    | Name                  | RatePerWeek   |\n    | Data Source           | FMTModelRate  |\n    | Data Field            | RatePerWeek   |\n    | Formatting Expression | ${0} per week |\n\n26. Press Ctrl+S to save your changes to **FMTRentalRatesPart**.\n27. In Solution Explorer, right-click the **FMTClerkWorkspace** form, and then click **Set as Startup Object**.\n28. Press Ctrl+F5 to open the updated contact control in Internet Explorer. **Note:** If you receive a JavaScript error, you might have to clear the Internet Explorer cache, so that the browser loads the new JavaScript file:\n    1.  When you're prompted to open the debugger, click **No**.\n    2.  While Internet Explorer is open, press F12 (or click **Settings** &gt; **F12 Developer Tools**), and then press Ctrl+R.\n    3.  In the **Clear Browser Cache** dialog box, click **Yes**.\n    4.  Reload the page by pressing Ctrl+F5.\n\n    [![Ext6](./media/ext6-1024x428.png)](./media/ext6.png)\n\nIn this tutorial, you've seen how you can use X++ when you define the design-time and server-side behaviors for a control, and how you can consume a powerful HTML-based and JavaScript-based framework when you design the UI and user interaction patterns. The Control Extensibility Framework helps provide a separation between the modeled behavior of a control and its physical manifestation. As a best practice, you should try to maintain this loose coupling between data, metadata, and UI when you build extensible controls.\n\n## Bidirectional or righttoleft support\nTo validate right-to-left (RTL) support for your extensible control, you simply need to set the **dir** (direction) attribute on the HTML document. When this attribute is changed, the browser will automatically change the layout direction of your control. You should make sure that your control doesn’t implement any styling which interferes with this layout. Instead of setting this attribute manually, you can also validate by placing your control on a form, and then selecting a RTL language. Selecting a RTL language will cause the client to also update the **dir** attribute appropriately. For more information, see [dir attribute](http://www.w3.org/TR/html5/dom.html#the-dir-attribute) in the HTML standards.\n\n"}