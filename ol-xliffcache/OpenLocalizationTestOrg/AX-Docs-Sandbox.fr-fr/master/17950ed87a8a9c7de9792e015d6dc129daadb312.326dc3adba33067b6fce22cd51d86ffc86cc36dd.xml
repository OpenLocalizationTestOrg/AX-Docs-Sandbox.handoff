{"content":"---\n# required metadata\n\ntitle: Process for upgrading a sandbox environment\ndescription: This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment. \nauthor: MargoC\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \n# ms.reviewer: 11\nms.search.scope: Operations, Platform\n# ms.tgt_pltfrm: \nms.custom: 269234\nms.assetid: feb8ca24-e86d-4101-b77f-c04137e176d0\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Platform update 3\n\n---\n\n# Process for upgrading a sandbox environment\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment. \n\nThis topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment. You do not need to follow this procedure for default sandbox environments that are tied to live production environments. Microsoft will upgrade the default sandbox environments for production sandboxes. For more information see the end to end upgrade process here: [Overview of moving to the latest update of Microsoft Dynamics 365 for Finance and Operations](upgrade-latest-update.md).\n\n## Prerequisites\nIf you have any customizations or ISV solutions you must have already completed [code upgrade](upgrade-latest-update.md#scenario-2-upgrade-your-custom-code) and have your upgraded deployable packages ready in your asset library in Lifecycle Services. We strongly recommend that you perform the data upgrade on a development environment before upgrading in a sandbox environment. It is much faster to make corrections and re-run the process in a development environment, so you can reduce the overall time to upgrade by working in a development environment first.\n\n## Export the database\nFollow the steps in this article to export the database to a bacpac file from the existing sandbox environment you wish to upgrade: [Copy a Finance and Operations database to restore later](../database/copy-operations-database.md).\n\n#### Additional steps for Management Reporter\n\nExport your report designs, known as building block groups, from the Report Designer. Transfer the exported file to a secure location so that you can use it later to reimport the report definitions. Detailed instructions for exporting: [Building block](https://msdn.microsoft.com/en-us/library/dn464326.aspx#Exportabuildingblockgroup). You can take this file and copy or upload it to secure location such that it may be imported into a different environment at another time. See [Upload the file to an Azure storage account, by using the AzCopy Command-Line Utility.](https://azure.microsoft.com/en-gb/documentation/articles/storage-use-azcopy/) **Note:** Microsoft doesn’t provide a storage account as part of your Finance and Operations agreement. You must either purchase a storage account or use a storage account from a separate Azure subscription. **Important:** Be aware of the behavior of the D drive on Azure Virtual Machines, do not keep your exported building block groups here permanently unless you are prepared to lose them. For details see: [Understanding the temporary drive on Windows Azure virtual machines (blog post)](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).\n\n## Redeploy sandbox environment\nIn your Lifecycle Services implementation project:\n\n1.  Locate the sandbox environment that you wish to upgrade and delete it.\n    1.  Click Deallocate on the toolbar in the Environment page. After a few minutes the environment status will change to Deallocated\n    2.  Click Delete on the toolbar and type the environment name to confirm deletion. After a few minutes the environment will be deleted\n\n2.  In the main LCS Project page, in the Environments pane, the deleted environment will display the options to request a deployment – click and request the environment to be deployed with the new version and select your upgraded custom deployable packages from your asset library to be deployed to the environment.\n\n## Import the database\nFollow the steps in this article to import the database from a bacpac file into the newly redeployed sandbox environment: [Copy a Finance and Operations database to restore later](../database/copy-operations-database.md).\n\n## Run the data upgrade package\nExecute the data upgrade as described in this article: [Upgrade data in development, demo or sandbox environments.](upgrade-data-to-latest-update.md)\n\n## Update additional components\nThere may be additional components in use in your environment which require further steps to upgrade.\n\n#### Additional steps for Management Reporter\n\nReset the management reporter database by following the steps in this topic [Resetting the financial reporting data mart after restoring a database](../analytics/reset-financial-reporting-datamart-after-restore.md) and then reimport the building block groups you exported in an earlier step.\n\n## Limitations\nExisting document handling documents which are stored in Azure blob storage will be lost during this upgrade process. If you have custom code which utilises the X++ class FileUpload to place files in blob storage, these documents will also be lost.\n\n\n\n","nodes":[{"pos":[32,75],"content":"Process for upgrading a sandbox environment","needQuote":true,"needEscape":true,"nodes":[{"content":"Process for upgrading a sandbox environment","pos":[0,43]}]},{"pos":[89,208],"content":"This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment.","pos":[0,119]}]},{"pos":[720,763],"content":"Process for upgrading a sandbox environment","linkify":"Process for upgrading a sandbox environment","nodes":[{"content":"Process for upgrading a sandbox environment","pos":[0,43]}]},{"content":"This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment.","pos":[809,928]},{"content":"This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment.","pos":[931,1050]},{"content":"You do not need to follow this procedure for default sandbox environments that are tied to live production environments.","pos":[1051,1171]},{"content":"Microsoft will upgrade the default sandbox environments for production sandboxes.","pos":[1172,1253]},{"content":"For more information see the end to end upgrade process here: <bpt id=\"p1\">[</bpt>Overview of moving to the latest update of Microsoft Dynamics 365 for Finance and Operations<ept id=\"p1\">](upgrade-latest-update.md)</ept>.","pos":[1254,1437],"source":" For more information see the end to end upgrade process here: [Overview of moving to the latest update of Microsoft Dynamics 365 for Finance and Operations](upgrade-latest-update.md)."},{"pos":[1442,1455],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"If you have any customizations or ISV solutions you must have already completed <bpt id=\"p1\">[</bpt>code upgrade<ept id=\"p1\">](upgrade-latest-update.md#scenario-2-upgrade-your-custom-code)</ept> and have your upgraded deployable packages ready in your asset library in Lifecycle Services.","pos":[1456,1706],"source":"If you have any customizations or ISV solutions you must have already completed [code upgrade](upgrade-latest-update.md#scenario-2-upgrade-your-custom-code) and have your upgraded deployable packages ready in your asset library in Lifecycle Services."},{"content":"We strongly recommend that you perform the data upgrade on a development environment before upgrading in a sandbox environment.","pos":[1707,1834]},{"content":"It is much faster to make corrections and re-run the process in a development environment, so you can reduce the overall time to upgrade by working in a development environment first.","pos":[1835,2018]},{"pos":[2023,2042],"content":"Export the database","linkify":"Export the database","nodes":[{"content":"Export the database","pos":[0,19]}]},{"pos":[2043,2274],"content":"Follow the steps in this article to export the database to a bacpac file from the existing sandbox environment you wish to upgrade: <bpt id=\"p1\">[</bpt>Copy a Finance and Operations database to restore later<ept id=\"p1\">](../database/copy-operations-database.md)</ept>.","source":"Follow the steps in this article to export the database to a bacpac file from the existing sandbox environment you wish to upgrade: [Copy a Finance and Operations database to restore later](../database/copy-operations-database.md)."},{"pos":[2281,2321],"content":"Additional steps for Management Reporter","linkify":"Additional steps for Management Reporter","nodes":[{"content":"Additional steps for Management Reporter","pos":[0,40]}]},{"content":"Export your report designs, known as building block groups, from the Report Designer.","pos":[2323,2408]},{"content":"Transfer the exported file to a secure location so that you can use it later to reimport the report definitions.","pos":[2409,2521]},{"content":"Detailed instructions for exporting: <bpt id=\"p1\">[</bpt>Building block<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/dn464326.aspx#Exportabuildingblockgroup)</ept>.","pos":[2522,2658],"source":" Detailed instructions for exporting: [Building block](https://msdn.microsoft.com/en-us/library/dn464326.aspx#Exportabuildingblockgroup)."},{"content":"You can take this file and copy or upload it to secure location such that it may be imported into a different environment at another time.","pos":[2659,2797]},{"content":"See <bpt id=\"p1\">[</bpt>Upload the file to an Azure storage account, by using the AzCopy Command-Line Utility.<ept id=\"p1\">](https://azure.microsoft.com/en-gb/documentation/articles/storage-use-azcopy/)</ept>","pos":[2798,2968],"source":" See [Upload the file to an Azure storage account, by using the AzCopy Command-Line Utility.](https://azure.microsoft.com/en-gb/documentation/articles/storage-use-azcopy/)"},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Microsoft doesn’t provide a storage account as part of your Finance and Operations agreement.","pos":[2969,3072],"source":"**Note:** Microsoft doesn’t provide a storage account as part of your Finance and Operations agreement."},{"content":"You must either purchase a storage account or use a storage account from a separate Azure subscription.","pos":[3073,3176]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> Be aware of the behavior of the D drive on Azure Virtual Machines, do not keep your exported building block groups here permanently unless you are prepared to lose them.","pos":[3177,3361],"source":"**Important:** Be aware of the behavior of the D drive on Azure Virtual Machines, do not keep your exported building block groups here permanently unless you are prepared to lose them."},{"content":"For details see: <bpt id=\"p1\">[</bpt>Understanding the temporary drive on Windows Azure virtual machines (blog post)<ept id=\"p1\">](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/)</ept>.","pos":[3362,3580],"source":" For details see: [Understanding the temporary drive on Windows Azure virtual machines (blog post)](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/)."},{"pos":[3585,3613],"content":"Redeploy sandbox environment","linkify":"Redeploy sandbox environment","nodes":[{"content":"Redeploy sandbox environment","pos":[0,28]}]},{"content":"In your Lifecycle Services implementation project:","pos":[3614,3664]},{"content":"Locate the sandbox environment that you wish to upgrade and delete it.","pos":[3670,3740]},{"content":"Click Deallocate on the toolbar in the Environment page.","pos":[3749,3805]},{"content":"After a few minutes the environment status will change to Deallocated","pos":[3806,3875]},{"content":"Click Delete on the toolbar and type the environment name to confirm deletion.","pos":[3884,3962]},{"content":"After a few minutes the environment will be deleted","pos":[3963,4014]},{"content":"In the main LCS Project page, in the Environments pane, the deleted environment will display the options to request a deployment – click and request the environment to be deployed with the new version and select your upgraded custom deployable packages from your asset library to be deployed to the environment.","pos":[4020,4331]},{"pos":[4336,4355],"content":"Import the database","linkify":"Import the database","nodes":[{"content":"Import the database","pos":[0,19]}]},{"pos":[4356,4577],"content":"Follow the steps in this article to import the database from a bacpac file into the newly redeployed sandbox environment: <bpt id=\"p1\">[</bpt>Copy a Finance and Operations database to restore later<ept id=\"p1\">](../database/copy-operations-database.md)</ept>.","source":"Follow the steps in this article to import the database from a bacpac file into the newly redeployed sandbox environment: [Copy a Finance and Operations database to restore later](../database/copy-operations-database.md)."},{"pos":[4582,4610],"content":"Run the data upgrade package","linkify":"Run the data upgrade package","nodes":[{"content":"Run the data upgrade package","pos":[0,28]}]},{"pos":[4611,4760],"content":"Execute the data upgrade as described in this article: <bpt id=\"p1\">[</bpt>Upgrade data in development, demo or sandbox environments.<ept id=\"p1\">](upgrade-data-to-latest-update.md)</ept>","source":"Execute the data upgrade as described in this article: [Upgrade data in development, demo or sandbox environments.](upgrade-data-to-latest-update.md)"},{"pos":[4765,4793],"content":"Update additional components","linkify":"Update additional components","nodes":[{"content":"Update additional components","pos":[0,28]}]},{"content":"There may be additional components in use in your environment which require further steps to upgrade.","pos":[4794,4895]},{"pos":[4902,4942],"content":"Additional steps for Management Reporter","linkify":"Additional steps for Management Reporter","nodes":[{"content":"Additional steps for Management Reporter","pos":[0,40]}]},{"pos":[4944,5235],"content":"Reset the management reporter database by following the steps in this topic <bpt id=\"p1\">[</bpt>Resetting the financial reporting data mart after restoring a database<ept id=\"p1\">](../analytics/reset-financial-reporting-datamart-after-restore.md)</ept> and then reimport the building block groups you exported in an earlier step.","source":"Reset the management reporter database by following the steps in this topic [Resetting the financial reporting data mart after restoring a database](../analytics/reset-financial-reporting-datamart-after-restore.md) and then reimport the building block groups you exported in an earlier step."},{"pos":[5240,5251],"content":"Limitations","linkify":"Limitations","nodes":[{"content":"Limitations","pos":[0,11]}]},{"content":"Existing document handling documents which are stored in Azure blob storage will be lost during this upgrade process.","pos":[5252,5369]},{"content":"If you have custom code which utilises the X++ class FileUpload to place files in blob storage, these documents will also be lost.","pos":[5370,5500]}]}