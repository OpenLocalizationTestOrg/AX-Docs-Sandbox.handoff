{"content":"---\n# required metadata\n\ntitle: Configure the code upgrade service in Lifecycle Services\ndescription: This topic explains how to configure the <strong>Code upgrade </strong>tile in Lifecycle Services (LCS) to migrate your solution to the latest version of Finance and Operations.\nauthor: MargoC\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations\n# ms.tgt_pltfrm: \nms.custom: 265594\nms.assetid: 964b5a15-9b9c-434c-a4c2-e14406ebfaeb\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Configure the code upgrade service in Lifecycle Services\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic explains how to configure the <strong>Code upgrade </strong>tile in Lifecycle Services (LCS) to migrate your solution to the latest version of Finance and Operations.\n\nOverview\n--------\n\nThe code upgrade tool operates by connecting to Visual Studio Team Services (VSTS), locating your Trunk\\\\Main branch, branching to a new branch, and then performing the code upgrade there. After this process is complete you can synchronize your Dynamics 365 for Operation developer environment to this new branch and resolve conflicts. When you compile and test your upgraded code you can merge the new branch back into Trunk\\\\Main, and the process is complete.\n\n## Process\n### To create a personal access token\n\nTo connect to a VSTS project, LCS is authenticated using a personal access token. Use the following steps to create a personal access token in VSTS. If you have already configured your LCS project to connect to your VSTS project, you can skip this section.\n\n1.  Sign in to visualstudio.com and locate your VSTS project.\n2.  In the top right corner, hover over your name, a menu appears, select **Security**.\n3.  Click **Add** to create a new personal access token, give it a name, and then enter the amount of time that you want the token to last for. Click **Create Token**. [![codeupgrademaketoken](./media/codeupgrademaketoken.png)](./media/codeupgrademaketoken.png)\n4.  Copy the token to your clipboard. You will not be able to find the token details after this step is completed, so be sure that you have copied the token before navigating away from this page.\n\n### Configure your Lifecycle Services project to connect to VSTS\n\n1.  In your LCS project, go to the **Project settings** tile, select **Visual Studio Team Services**, and then select the **Setup Visual Studio Team Services** button. This configuration is needed by many LCS tools, if you have already configured LCS to connect to your VSTS project, you can skip this section. [![lcs\\_vsts\\_setup](./media/lcs_vsts_setup.png)](./media/lcs_vsts_setup.png)\n2.  Enter the root URL for your VSTS account and the access token created earlier, and then click **Continue**.[![lcstoken](./media/lcstoken.png)](./media/lcstoken.png)\n3.  Select the project within your VSTS account that you want to connect to, and select **Continue**. [![lcs\\_selectproject](./media/lcs_selectproject.png)](./media/lcs_selectproject.png)\n4.  On the **Review and save** page, click **Save**.\n\n### Create an ax7.version file\n\nThe code upgrade tile in LCS automatically finds the version of Finance and Operations that you are migrating from, by reading the ax7.version file under the Main folder in your source control. You must create this file manually, either in Visual Studio or through the VSTS portal, as shown below. This file is not needed if you migrated your code from Dynamics AX 2012 R3 or an earlier version. The version number entered here must be the application version (not the platform version). \n\n[![ax7\\_versionfile](./media/ax7_versionfile.png)](./media/ax7_versionfile.png) \n\nFor more information about how to identify which application version you have, see [Overview of Microsoft Dynamics AX build numbers](https://blogs.msdn.microsoft.com/axsupport/2012/03/29/overview-of-microsoft-dynamics-ax-build-numbers/).\n\n### Execute the code upgrade tile\n\n1.  In your LCS project, select the **Code upgrade** tile. \n\n[![codeupgradetile](./media/codeupgradetile.png)](./media/codeupgradetile.png)\n\n2.  In the bottom left corner of the screen, click **Add**, and then enter a name and description. Select the version you are upgrading from as Microsoft Dynamics AX 7, and then click **Create**.\n    -   If you are upgrading your code from Dynamics AX 2012 R3, select the version you are upgrading from. You will be prompted to upload a zipped version of your Dynamics AX 2012 R3 model store file.\n    -   If the **Estimation Only** check box is selected, the tool only generates a report and does not check in or create a new code branch in VSTS for you. You should use this option if you want to evaluate the potential size of the work involved in upgrading before you commit to the actual upgrade.\n\n    [![codeupgrade\\_new](./media/codeupgrade_new.png)](./media/codeupgrade_new.png)\n3.  Click **Analyze code** in the bottom right corner. The code upgrade process will start. This typically takes 40 minutes for a large solution to complete. When complete, return to the **Code upgrade** tile in LCS to view the results.\n4.  The code upgrade service creates a new branch and checks in the upgraded code to your VSTS project. After the upgrade process is complete, your code will exist in a new branch under the **Releases** folder. The branch name is suffixed with the date and time of the upgrade. \n\n[![codeupgradebranch](./media/codeupgradebranch-300x192.png)](./media/codeupgradebranch.png)\n\n\n\n\n","nodes":[{"pos":[32,88],"content":"Configure the code upgrade service in Lifecycle Services","needQuote":true,"needEscape":true,"nodes":[{"content":"Configure the code upgrade service in Lifecycle Services","pos":[0,56]}]},{"pos":[102,279],"content":"This topic explains how to configure the <bpt id=\"p1\">&lt;strong&gt;</bpt>Code upgrade <ept id=\"p1\">&lt;/strong&gt;</ept>tile in Lifecycle Services (LCS) to migrate your solution to the latest version of Finance and Operations.","needQuote":true,"needEscape":true,"source":"This topic explains how to configure the <strong>Code upgrade </strong>tile in Lifecycle Services (LCS) to migrate your solution to the latest version of Finance and Operations."},{"pos":[781,837],"content":"Configure the code upgrade service in Lifecycle Services","linkify":"Configure the code upgrade service in Lifecycle Services","nodes":[{"content":"Configure the code upgrade service in Lifecycle Services","pos":[0,56]}]},{"pos":[883,1060],"content":"This topic explains how to configure the <bpt id=\"p1\">&lt;strong&gt;</bpt>Code upgrade <ept id=\"p1\">&lt;/strong&gt;</ept>tile in Lifecycle Services (LCS) to migrate your solution to the latest version of Finance and Operations.","source":"This topic explains how to configure the <strong>Code upgrade </strong>tile in Lifecycle Services (LCS) to migrate your solution to the latest version of Finance and Operations."},{"pos":[1062,1070],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"The code upgrade tool operates by connecting to Visual Studio Team Services (VSTS), locating your Trunk<ph id=\"ph1\">\\\\</ph>Main branch, branching to a new branch, and then performing the code upgrade there.","pos":[1081,1269],"source":"The code upgrade tool operates by connecting to Visual Studio Team Services (VSTS), locating your Trunk\\\\Main branch, branching to a new branch, and then performing the code upgrade there."},{"content":"After this process is complete you can synchronize your Dynamics 365 for Operation developer environment to this new branch and resolve conflicts.","pos":[1270,1416]},{"content":"When you compile and test your upgraded code you can merge the new branch back into Trunk<ph id=\"ph1\">\\\\</ph>Main, and the process is complete.","pos":[1417,1542],"source":" When you compile and test your upgraded code you can merge the new branch back into Trunk\\\\Main, and the process is complete."},{"pos":[1547,1554],"content":"Process","linkify":"Process","nodes":[{"content":"Process","pos":[0,7]}]},{"pos":[1559,1592],"content":"To create a personal access token","linkify":"To create a personal access token","nodes":[{"content":"To create a personal access token","pos":[0,33]}]},{"content":"To connect to a VSTS project, LCS is authenticated using a personal access token.","pos":[1594,1675]},{"content":"Use the following steps to create a personal access token in VSTS.","pos":[1676,1742]},{"content":"If you have already configured your LCS project to connect to your VSTS project, you can skip this section.","pos":[1743,1850]},{"content":"Sign in to visualstudio.com and locate your VSTS project.","pos":[1856,1913]},{"pos":[1918,2001],"content":"In the top right corner, hover over your name, a menu appears, select <bpt id=\"p1\">**</bpt>Security<ept id=\"p1\">**</ept>.","source":"In the top right corner, hover over your name, a menu appears, select **Security**."},{"content":"Click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> to create a new personal access token, give it a name, and then enter the amount of time that you want the token to last for.","pos":[2006,2145],"source":"Click **Add** to create a new personal access token, give it a name, and then enter the amount of time that you want the token to last for."},{"content":"Click <bpt id=\"p1\">**</bpt>Create Token<ept id=\"p1\">**</ept>.","pos":[2146,2169],"source":" Click **Create Token**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>codeupgrademaketoken<ept id=\"p1\">](./media/codeupgrademaketoken.png)](./media/codeupgrademaketoken.png)</ept>","pos":[2170,2263],"source":"[![codeupgrademaketoken](./media/codeupgrademaketoken.png)](./media/codeupgrademaketoken.png)"},{"content":"Copy the token to your clipboard.","pos":[2268,2301]},{"content":"You will not be able to find the token details after this step is completed, so be sure that you have copied the token before navigating away from this page.","pos":[2302,2459]},{"pos":[2465,2525],"content":"Configure your Lifecycle Services project to connect to VSTS","linkify":"Configure your Lifecycle Services project to connect to VSTS","nodes":[{"content":"Configure your Lifecycle Services project to connect to VSTS","pos":[0,60]}]},{"content":"In your LCS project, go to the <bpt id=\"p1\">**</bpt>Project settings<ept id=\"p1\">**</ept> tile, select <bpt id=\"p2\">**</bpt>Visual Studio Team Services<ept id=\"p2\">**</ept>, and then select the <bpt id=\"p3\">**</bpt>Setup Visual Studio Team Services<ept id=\"p3\">**</ept> button.","pos":[2531,2694],"source":"In your LCS project, go to the **Project settings** tile, select **Visual Studio Team Services**, and then select the **Setup Visual Studio Team Services** button."},{"content":"This configuration is needed by many LCS tools, if you have already configured LCS to connect to your VSTS project, you can skip this section.","pos":[2695,2837]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>lcs<ph id=\"ph2\">\\_</ph>vsts<ph id=\"ph3\">\\_</ph>setup<ept id=\"p1\">](./media/lcs_vsts_setup.png)](./media/lcs_vsts_setup.png)</ept>","pos":[2838,2915],"source":"[![lcs\\_vsts\\_setup](./media/lcs_vsts_setup.png)](./media/lcs_vsts_setup.png)"},{"pos":[2920,3084],"content":"Enter the root URL for your VSTS account and the access token created earlier, and then click <bpt id=\"p1\">**</bpt>Continue<ept id=\"p1\">**</ept>.<bpt id=\"p2\">[</bpt><ph id=\"ph1\">![</ph>lcstoken<ept id=\"p2\">](./media/lcstoken.png)](./media/lcstoken.png)</ept>","source":"Enter the root URL for your VSTS account and the access token created earlier, and then click **Continue**.[![lcstoken](./media/lcstoken.png)](./media/lcstoken.png)"},{"content":"Select the project within your VSTS account that you want to connect to, and select <bpt id=\"p1\">**</bpt>Continue<ept id=\"p1\">**</ept>.","pos":[3089,3186],"source":"Select the project within your VSTS account that you want to connect to, and select **Continue**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>lcs<ph id=\"ph2\">\\_</ph>selectproject<ept id=\"p1\">](./media/lcs_selectproject.png)](./media/lcs_selectproject.png)</ept>","pos":[3187,3272],"source":"[![lcs\\_selectproject](./media/lcs_selectproject.png)](./media/lcs_selectproject.png)"},{"pos":[3277,3325],"content":"On the <bpt id=\"p1\">**</bpt>Review and save<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>.","source":"On the **Review and save** page, click **Save**."},{"pos":[3331,3357],"content":"Create an ax7.version file","linkify":"Create an ax7.version file","nodes":[{"content":"Create an ax7.version file","pos":[0,26]}]},{"content":"The code upgrade tile in LCS automatically finds the version of Finance and Operations that you are migrating from, by reading the ax7.version file under the Main folder in your source control.","pos":[3359,3552]},{"content":"You must create this file manually, either in Visual Studio or through the VSTS portal, as shown below.","pos":[3553,3656]},{"content":"This file is not needed if you migrated your code from Dynamics AX 2012 R3 or an earlier version.","pos":[3657,3754]},{"content":"The version number entered here must be the application version (not the platform version).","pos":[3755,3846]},{"pos":[3849,3928],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>ax7<ph id=\"ph2\">\\_</ph>versionfile<ept id=\"p1\">](./media/ax7_versionfile.png)](./media/ax7_versionfile.png)</ept>","source":"[![ax7\\_versionfile](./media/ax7_versionfile.png)](./media/ax7_versionfile.png)"},{"pos":[3931,4168],"content":"For more information about how to identify which application version you have, see <bpt id=\"p1\">[</bpt>Overview of Microsoft Dynamics AX build numbers<ept id=\"p1\">](https://blogs.msdn.microsoft.com/axsupport/2012/03/29/overview-of-microsoft-dynamics-ax-build-numbers/)</ept>.","source":"For more information about how to identify which application version you have, see [Overview of Microsoft Dynamics AX build numbers](https://blogs.msdn.microsoft.com/axsupport/2012/03/29/overview-of-microsoft-dynamics-ax-build-numbers/)."},{"pos":[4174,4203],"content":"Execute the code upgrade tile","linkify":"Execute the code upgrade tile","nodes":[{"content":"Execute the code upgrade tile","pos":[0,29]}]},{"pos":[4209,4263],"content":"In your LCS project, select the <bpt id=\"p1\">**</bpt>Code upgrade<ept id=\"p1\">**</ept> tile.","source":"In your LCS project, select the **Code upgrade** tile."},{"pos":[4266,4344],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>codeupgradetile<ept id=\"p1\">](./media/codeupgradetile.png)](./media/codeupgradetile.png)</ept>","source":"[![codeupgradetile](./media/codeupgradetile.png)](./media/codeupgradetile.png)"},{"content":"In the bottom left corner of the screen, click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>, and then enter a name and description.","pos":[4350,4444],"source":"In the bottom left corner of the screen, click **Add**, and then enter a name and description."},{"content":"Select the version you are upgrading from as Microsoft Dynamics AX 7, and then click <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>.","pos":[4445,4541],"source":" Select the version you are upgrading from as Microsoft Dynamics AX 7, and then click **Create**."},{"content":"If you are upgrading your code from Dynamics AX 2012 R3, select the version you are upgrading from.","pos":[4550,4649]},{"content":"You will be prompted to upload a zipped version of your Dynamics AX 2012 R3 model store file.","pos":[4650,4743]},{"content":"If the <bpt id=\"p1\">**</bpt>Estimation Only<ept id=\"p1\">**</ept> check box is selected, the tool only generates a report and does not check in or create a new code branch in VSTS for you.","pos":[4752,4901],"source":"If the **Estimation Only** check box is selected, the tool only generates a report and does not check in or create a new code branch in VSTS for you."},{"content":"You should use this option if you want to evaluate the potential size of the work involved in upgrading before you commit to the actual upgrade.","pos":[4902,5046]},{"pos":[5052,5131],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>codeupgrade<ph id=\"ph2\">\\_</ph>new<ept id=\"p1\">](./media/codeupgrade_new.png)](./media/codeupgrade_new.png)</ept>","source":"[![codeupgrade\\_new](./media/codeupgrade_new.png)](./media/codeupgrade_new.png)"},{"content":"Click <bpt id=\"p1\">**</bpt>Analyze code<ept id=\"p1\">**</ept> in the bottom right corner.","pos":[5136,5186],"source":"Click **Analyze code** in the bottom right corner."},{"content":"The code upgrade process will start.","pos":[5187,5223]},{"content":"This typically takes 40 minutes for a large solution to complete.","pos":[5224,5289]},{"content":"When complete, return to the <bpt id=\"p1\">**</bpt>Code upgrade<ept id=\"p1\">**</ept> tile in LCS to view the results.","pos":[5290,5368],"source":" When complete, return to the **Code upgrade** tile in LCS to view the results."},{"content":"The code upgrade service creates a new branch and checks in the upgraded code to your VSTS project.","pos":[5373,5472]},{"content":"After the upgrade process is complete, your code will exist in a new branch under the <bpt id=\"p1\">**</bpt>Releases<ept id=\"p1\">**</ept> folder.","pos":[5473,5579],"source":" After the upgrade process is complete, your code will exist in a new branch under the **Releases** folder."},{"content":"The branch name is suffixed with the date and time of the upgrade.","pos":[5580,5646]},{"pos":[5649,5741],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>codeupgradebranch<ept id=\"p1\">](./media/codeupgradebranch-300x192.png)](./media/codeupgradebranch.png)</ept>","source":"[![codeupgradebranch](./media/codeupgradebranch-300x192.png)](./media/codeupgradebranch.png)"}]}