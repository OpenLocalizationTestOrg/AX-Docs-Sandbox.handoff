{"content":"---\n# required metadata\n\ntitle: Overview of Power BI integration with Entity store\ndescription: Entity store is an operational data store that is included with Microsoft Dynamics 365 for Operations. This topic describes how Entity store enables Power BI integration with Dynamics 365 for Operations.\nauthor: sericks007\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: IT Pro\n# ms.devlang: \n# ms.reviewer: 71\nms.search.scope: Operations, Platform, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 265974\nms.assetid: 434b5d9f-9877-4769-ad96-d4e8d460a7fa\nms.search.region: Global\n# ms.search.industry: \nms.author: milindav\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: Platform update 1\n\n---\n\n# Overview of Power BI integration with Entity store\n\n[!include[banner](../includes/banner.md)]\n\n\nEntity store is an operational data store that is included with Microsoft Dynamics 365 for Operations. This topic describes how Entity store enables Power BI integration with Dynamics 365 for Operations.\n\nEntity store is an operational data store that is included with Microsoft Dynamics 365 for Operations. The Entity store feature was introduced in the Microsoft Dynamics AX platform update 1 (May 2016) release. This feature lets an administrator or power user stage aggregate measurements in a dedicated data store for reporting and analytics. (Aggregate measurements are a star schema that is modeled by using entities.) We call this data store Entity store. It’s a database that is optimized for reporting purposes. Entity store uses the in-memory, clustered columnstore index (CCI) functionality that is built into Microsoft SQL Server to optimize reporting and queries. Customers can use Microsoft Power BI DirectQuery models together with Entity store to enable high-volume, near-real-time analytical reporting over large volumes of data.\n\n## Power BI DirectQuery mode\nIn the February 2016 release of Microsoft Dynamics AX, you could create Power BI reports by using OData endpoints that are exposed via data entities (both aggregate data entities and detailed or regular data entities). Although this approach is still supported in Dynamics 365 for Operations, Entity store also lets power users create Power BI DirectQuery reports.\n\n[![DirectQuery mode](./media/entity-store-architecture-1024x587.jpg)](./media/entity-store-architecture.jpg) \n\nAs the preceding illustration shows, DirectQuery is a reporting mode that runs reports directly on Entity store. In this reporting mode, data isn't staged in Power BI caches. This mode provides two immediate benefits:\n\n-   You can create Power BI reports over large data volumes.\n-   Reports don't have to be updated by using Power BI. When Entity store is updated, reports reflect the latest data.\n\nAdditionally, data doesn't leave your Dynamics 365 for Operations environment, because no data is cached in the Power BI service.\n\n## Stage aggregate measurements in Entity store\nAggregate measurements are a star schema that is modeled for analytical scenarios. In the February 2016 release, we enabled real-time, in-memory aggregate measurements. By using real-time aggregate measurements, you can enable embedded charts and key performance indicators (KPIs) that react to real-time operations on data. For information, see [In-memory, real-time aggregate models replace SSAS cubes](..\\migration-upgrade\\in-memory-real-time-aggregate-models.md). Real-time aggregate measurements take advantage of the in-memory, non-clustered columnstore index (NCCI) technology. Visuals and aggregate calculations that are built over real-time aggregate measurements reflect transactions within seconds. In the platform update 1 (May 2016) release, we enabled aggregate measurements that can be staged in Entity store. Aggregate measurements that are staged in Entity store can be used for near-real-time analytical scenarios where large volumes of data must be explored by using Power BI. As a developer, you learned how to model an aggregate measurement for real-time analytics in [Modeling and using aggregate data](model-aggregate-data.md). In the platform update 1 (May 2016) release, we also added the capability to model aggregate measurements that can be staged in Entity store. In Microsoft Visual Studio, you can specify **StagedEntityStore** as the usage property of an aggregate measurement. This new property was added in May 2016. Previously, **InMemoryRealTime** was available as the usage property. \n\n[![New StagedEntityStore usage property in Visual Studio](https://msdnshared.blob.core.windows.net/media/2016/06/New-usage-property-in-VS-300x242.png)](https://msdnshared.blob.core.windows.net/media/2016/06/New-usage-property-in-VS.png) \n\nHowever, you might wonder why you would model an aggregate measurement so that it can be staged? Why wouldn’t you use in-memory real-time aggregate measurements all the time? There are several reasons for using the **StagedEntityStore** pattern:\n\n-   There might be large amounts of data that must be explored and analyzed.\n-   You might have Analysis projects (that is, cubes) that you migrated from Microsoft Dynamics AX 2012 R3 as part of the code upgrade process to Dynamics 365 for Operations. Because of the complex views and joins that are present in the schema, query response times might not be acceptable for embedded visuals. However, you might not want to refactor the visuals to take advantage of NCCI technology immediately.\n-   Unlike the operational database schema, the schema in Entity store is modeled specifically for reporting. Therefore, it's much easier to build new reports from the schema in Entity store.\n-   Your scenario might not require that analytical data be updated within seconds of an operation. Most Power BI reports that are built to enable data exploration fall into this category. If data freshness of approximately 10 minutes is acceptable for your scenario, you might want to use the staged pattern.\n\nIf one of the preceding reasons covers your situation, you should stage your aggregate measurement in Entity store and it use for Power BI integration.\n\n## Update Entity store\nIn the client, you can find the **Entity Store** page at **Systems administration** &gt; **Setup** &gt; **Entity Store**. \n\n[![Entity Store page](./media/entity-store-form-1024x548.jpg)](./media/entity-store-form.jpg) \n\nThis page includes a list of aggregate measurements. You can stage any of these aggregate measurements in Entity store. If you're a developer and are familiar with the aggregate measurements that are available in the Application Object Tree (AOT), you might wonder why some aggregate measurements aren't shown here. If you have aggregate measurements that you migrated from AX 2012 R3 (that is, SQL Server Analysis Services projects that were migrated as part of the upgrade process), they can't be deployed until a developer changes the usage property to **StagedEntityStore**. This behavior is intentional. We have enabled best practice warnings and errors that are intended to capture some of the common upgrade issues that affect aggregate measurements. You should fix best practice errors and warnings if you plan to use near-real-time (NCCI) mode. As of the May 2016 update, the administrator must schedule a periodic update by clicking **Refresh** on the **Entity Store** page. You can use the **Refresh** button for a one-time update (that is, demo) or to schedule periodic updates, as shown in the following illustration. \n\n[![Configure refresh dialog box](./media/retail-cube-refresh-1024x548.jpg)](./media/retail-cube-refresh.jpg) \n\nThe batch framework is used for scheduling. Therefore, refresh jobs can be monitored, load balanced, and prioritized by using the capabilities of the batch framework. As of the May 2016 update, we support only full updates. However, we will enable incremental updates soon. Eventually, in a future update, the system will update Entity store based on actual usage patterns. Therefore, as an administrator, you will have to use the **Configure refresh** dialog box only as an exception.\n\n\n\n","nodes":[{"pos":[32,82],"content":"Overview of Power BI integration with Entity store","needQuote":true,"needEscape":true,"nodes":[{"content":"Overview of Power BI integration with Entity store","pos":[0,50]}]},{"pos":[96,299],"content":"Entity store is an operational data store that is included with Microsoft Dynamics 365 for Operations. This topic describes how Entity store enables Power BI integration with Dynamics 365 for Operations.","needQuote":true,"needEscape":true,"nodes":[{"content":"Entity store is an operational data store that is included with Microsoft Dynamics 365 for Operations. This topic describes how Entity store enables Power BI integration with Dynamics 365 for Operations.","pos":[0,203],"nodes":[{"content":"Entity store is an operational data store that is included with Microsoft Dynamics 365 for Operations.","pos":[0,102]},{"content":"This topic describes how Entity store enables Power BI integration with Dynamics 365 for Operations.","pos":[103,203]}]}]},{"pos":[819,869],"content":"Overview of Power BI integration with Entity store","linkify":"Overview of Power BI integration with Entity store","nodes":[{"content":"Overview of Power BI integration with Entity store","pos":[0,50]}]},{"content":"Entity store is an operational data store that is included with Microsoft Dynamics 365 for Operations.","pos":[915,1017]},{"content":"This topic describes how Entity store enables Power BI integration with Dynamics 365 for Operations.","pos":[1018,1118]},{"content":"Entity store is an operational data store that is included with Microsoft Dynamics 365 for Operations.","pos":[1120,1222]},{"content":"The Entity store feature was introduced in the Microsoft Dynamics AX platform update 1 (May 2016) release.","pos":[1223,1329]},{"content":"This feature lets an administrator or power user stage aggregate measurements in a dedicated data store for reporting and analytics.","pos":[1330,1462]},{"content":"(Aggregate measurements are a star schema that is modeled by using entities.) We call this data store Entity store.","pos":[1463,1578]},{"content":"It’s a database that is optimized for reporting purposes.","pos":[1579,1636]},{"content":"Entity store uses the in-memory, clustered columnstore index (CCI) functionality that is built into Microsoft SQL Server to optimize reporting and queries.","pos":[1637,1792]},{"content":"Customers can use Microsoft Power BI DirectQuery models together with Entity store to enable high-volume, near-real-time analytical reporting over large volumes of data.","pos":[1793,1962]},{"pos":[1967,1992],"content":"Power BI DirectQuery mode","linkify":"Power BI DirectQuery mode","nodes":[{"content":"Power BI DirectQuery mode","pos":[0,25]}]},{"content":"In the February 2016 release of Microsoft Dynamics AX, you could create Power BI reports by using OData endpoints that are exposed via data entities (both aggregate data entities and detailed or regular data entities).","pos":[1993,2211]},{"content":"Although this approach is still supported in Dynamics 365 for Operations, Entity store also lets power users create Power BI DirectQuery reports.","pos":[2212,2357]},{"pos":[2359,2467],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>DirectQuery mode<ept id=\"p1\">](./media/entity-store-architecture-1024x587.jpg)](./media/entity-store-architecture.jpg)</ept>","source":"[![DirectQuery mode](./media/entity-store-architecture-1024x587.jpg)](./media/entity-store-architecture.jpg)"},{"content":"As the preceding illustration shows, DirectQuery is a reporting mode that runs reports directly on Entity store.","pos":[2470,2582]},{"content":"In this reporting mode, data isn't staged in Power BI caches.","pos":[2583,2644]},{"content":"This mode provides two immediate benefits:","pos":[2645,2687]},{"content":"You can create Power BI reports over large data volumes.","pos":[2693,2749]},{"content":"Reports don't have to be updated by using Power BI.","pos":[2754,2805]},{"content":"When Entity store is updated, reports reflect the latest data.","pos":[2806,2868]},{"content":"Additionally, data doesn't leave your Dynamics 365 for Operations environment, because no data is cached in the Power BI service.","pos":[2870,2999]},{"pos":[3004,3048],"content":"Stage aggregate measurements in Entity store","linkify":"Stage aggregate measurements in Entity store","nodes":[{"content":"Stage aggregate measurements in Entity store","pos":[0,44]}]},{"content":"Aggregate measurements are a star schema that is modeled for analytical scenarios.","pos":[3049,3131]},{"content":"In the February 2016 release, we enabled real-time, in-memory aggregate measurements.","pos":[3132,3217]},{"content":"By using real-time aggregate measurements, you can enable embedded charts and key performance indicators (KPIs) that react to real-time operations on data.","pos":[3218,3373]},{"content":"For information, see <bpt id=\"p1\">[</bpt>In-memory, real-time aggregate models replace SSAS cubes<ept id=\"p1\">](..\\migration-upgrade\\in-memory-real-time-aggregate-models.md)</ept>.","pos":[3374,3516],"source":" For information, see [In-memory, real-time aggregate models replace SSAS cubes](..\\migration-upgrade\\in-memory-real-time-aggregate-models.md)."},{"content":"Real-time aggregate measurements take advantage of the in-memory, non-clustered columnstore index (NCCI) technology.","pos":[3517,3633]},{"content":"Visuals and aggregate calculations that are built over real-time aggregate measurements reflect transactions within seconds.","pos":[3634,3758]},{"content":"In the platform update 1 (May 2016) release, we enabled aggregate measurements that can be staged in Entity store.","pos":[3759,3873]},{"content":"Aggregate measurements that are staged in Entity store can be used for near-real-time analytical scenarios where large volumes of data must be explored by using Power BI.","pos":[3874,4044]},{"content":"As a developer, you learned how to model an aggregate measurement for real-time analytics in <bpt id=\"p1\">[</bpt>Modeling and using aggregate data<ept id=\"p1\">](model-aggregate-data.md)</ept>.","pos":[4045,4199],"source":" As a developer, you learned how to model an aggregate measurement for real-time analytics in [Modeling and using aggregate data](model-aggregate-data.md)."},{"content":"In the platform update 1 (May 2016) release, we also added the capability to model aggregate measurements that can be staged in Entity store.","pos":[4200,4341]},{"content":"In Microsoft Visual Studio, you can specify <bpt id=\"p1\">**</bpt>StagedEntityStore<ept id=\"p1\">**</ept> as the usage property of an aggregate measurement.","pos":[4342,4458],"source":" In Microsoft Visual Studio, you can specify **StagedEntityStore** as the usage property of an aggregate measurement."},{"content":"This new property was added in May 2016.","pos":[4459,4499]},{"content":"Previously, <bpt id=\"p1\">**</bpt>InMemoryRealTime<ept id=\"p1\">**</ept> was available as the usage property.","pos":[4500,4569],"source":" Previously, **InMemoryRealTime** was available as the usage property."},{"pos":[4572,4808],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>New StagedEntityStore usage property in Visual Studio<ept id=\"p1\">](https://msdnshared.blob.core.windows.net/media/2016/06/New-usage-property-in-VS-300x242.png)](https://msdnshared.blob.core.windows.net/media/2016/06/New-usage-property-in-VS.png)</ept>","source":"[![New StagedEntityStore usage property in Visual Studio](https://msdnshared.blob.core.windows.net/media/2016/06/New-usage-property-in-VS-300x242.png)](https://msdnshared.blob.core.windows.net/media/2016/06/New-usage-property-in-VS.png)"},{"content":"However, you might wonder why you would model an aggregate measurement so that it can be staged?","pos":[4811,4907]},{"content":"Why wouldn’t you use in-memory real-time aggregate measurements all the time?","pos":[4908,4985]},{"content":"There are several reasons for using the <bpt id=\"p1\">**</bpt>StagedEntityStore<ept id=\"p1\">**</ept> pattern:","pos":[4986,5056],"source":" There are several reasons for using the **StagedEntityStore** pattern:"},{"content":"There might be large amounts of data that must be explored and analyzed.","pos":[5062,5134]},{"content":"You might have Analysis projects (that is, cubes) that you migrated from Microsoft Dynamics AX 2012 R3 as part of the code upgrade process to Dynamics 365 for Operations.","pos":[5139,5309]},{"content":"Because of the complex views and joins that are present in the schema, query response times might not be acceptable for embedded visuals.","pos":[5310,5447]},{"content":"However, you might not want to refactor the visuals to take advantage of NCCI technology immediately.","pos":[5448,5549]},{"content":"Unlike the operational database schema, the schema in Entity store is modeled specifically for reporting.","pos":[5554,5659]},{"content":"Therefore, it's much easier to build new reports from the schema in Entity store.","pos":[5660,5741]},{"content":"Your scenario might not require that analytical data be updated within seconds of an operation.","pos":[5746,5841]},{"content":"Most Power BI reports that are built to enable data exploration fall into this category.","pos":[5842,5930]},{"content":"If data freshness of approximately 10 minutes is acceptable for your scenario, you might want to use the staged pattern.","pos":[5931,6051]},{"content":"If one of the preceding reasons covers your situation, you should stage your aggregate measurement in Entity store and it use for Power BI integration.","pos":[6053,6204]},{"pos":[6209,6228],"content":"Update Entity store","linkify":"Update Entity store","nodes":[{"content":"Update Entity store","pos":[0,19]}]},{"pos":[6229,6350],"content":"In the client, you can find the <bpt id=\"p1\">**</bpt>Entity Store<ept id=\"p1\">**</ept> page at <bpt id=\"p2\">**</bpt>Systems administration<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Setup<ept id=\"p3\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Entity Store<ept id=\"p4\">**</ept>.","source":"In the client, you can find the **Entity Store** page at **Systems administration** &gt; **Setup** &gt; **Entity Store**."},{"pos":[6353,6446],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Entity Store page<ept id=\"p1\">](./media/entity-store-form-1024x548.jpg)](./media/entity-store-form.jpg)</ept>","source":"[![Entity Store page](./media/entity-store-form-1024x548.jpg)](./media/entity-store-form.jpg)"},{"content":"This page includes a list of aggregate measurements.","pos":[6449,6501]},{"content":"You can stage any of these aggregate measurements in Entity store.","pos":[6502,6568]},{"content":"If you're a developer and are familiar with the aggregate measurements that are available in the Application Object Tree (AOT), you might wonder why some aggregate measurements aren't shown here.","pos":[6569,6764]},{"content":"If you have aggregate measurements that you migrated from AX 2012 R3 (that is, SQL Server Analysis Services projects that were migrated as part of the upgrade process), they can't be deployed until a developer changes the usage property to <bpt id=\"p1\">**</bpt>StagedEntityStore<ept id=\"p1\">**</ept>.","pos":[6765,7027],"source":" If you have aggregate measurements that you migrated from AX 2012 R3 (that is, SQL Server Analysis Services projects that were migrated as part of the upgrade process), they can't be deployed until a developer changes the usage property to **StagedEntityStore**."},{"content":"This behavior is intentional.","pos":[7028,7057]},{"content":"We have enabled best practice warnings and errors that are intended to capture some of the common upgrade issues that affect aggregate measurements.","pos":[7058,7206]},{"content":"You should fix best practice errors and warnings if you plan to use near-real-time (NCCI) mode.","pos":[7207,7302]},{"content":"As of the May 2016 update, the administrator must schedule a periodic update by clicking <bpt id=\"p1\">**</bpt>Refresh<ept id=\"p1\">**</ept> on the <bpt id=\"p2\">**</bpt>Entity Store<ept id=\"p2\">**</ept> page.","pos":[7303,7433],"source":" As of the May 2016 update, the administrator must schedule a periodic update by clicking **Refresh** on the **Entity Store** page."},{"content":"You can use the <bpt id=\"p1\">**</bpt>Refresh<ept id=\"p1\">**</ept> button for a one-time update (that is, demo) or to schedule periodic updates, as shown in the following illustration.","pos":[7434,7579],"source":" You can use the **Refresh** button for a one-time update (that is, demo) or to schedule periodic updates, as shown in the following illustration."},{"pos":[7582,7690],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Configure refresh dialog box<ept id=\"p1\">](./media/retail-cube-refresh-1024x548.jpg)](./media/retail-cube-refresh.jpg)</ept>","source":"[![Configure refresh dialog box](./media/retail-cube-refresh-1024x548.jpg)](./media/retail-cube-refresh.jpg)"},{"content":"The batch framework is used for scheduling.","pos":[7693,7736]},{"content":"Therefore, refresh jobs can be monitored, load balanced, and prioritized by using the capabilities of the batch framework.","pos":[7737,7859]},{"content":"As of the May 2016 update, we support only full updates.","pos":[7860,7916]},{"content":"However, we will enable incremental updates soon.","pos":[7917,7966]},{"content":"Eventually, in a future update, the system will update Entity store based on actual usage patterns.","pos":[7967,8066]},{"content":"Therefore, as an administrator, you will have to use the <bpt id=\"p1\">**</bpt>Configure refresh<ept id=\"p1\">**</ept> dialog box only as an exception.","pos":[8067,8178],"source":" Therefore, as an administrator, you will have to use the **Configure refresh** dialog box only as an exception."}]}