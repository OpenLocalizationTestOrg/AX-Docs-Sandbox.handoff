{"nodes":[{"pos":[32,79],"content":"Dimension Entry control uptake | Microsoft Docs","needQuote":true,"needEscape":true,"nodes":[{"content":"Dimension Entry control uptake | Microsoft Docs","pos":[0,47]}]},{"pos":[93,165],"content":"Describes the Dimension Entry control and associated Controller classes.","needQuote":true,"needEscape":true,"nodes":[{"content":"Describes the Dimension Entry control and associated Controller classes.","pos":[0,72]}]},{"pos":[576,606],"content":"Dimension Entry control uptake","linkify":"Dimension Entry control uptake","nodes":[{"content":"Dimension Entry control uptake","pos":[0,30]}]},{"pos":[608,624],"content":"General approach","linkify":"General approach","nodes":[{"content":"General approach","pos":[0,16]}]},{"content":"The design goal is to encapsulate the control implementation and not require the form to interact with the classes backing the control.","pos":[643,778]},{"content":"In alignment with this design, <bpt id=\"p1\">**</bpt>all forms should interact only with the Dimension Entry control instance API and not directly with the controller classes<ept id=\"p1\">**</ept>, like LedgerDimensionEntryController, LedgerDefaultDimensionEntryController, etc. Any property that was manipulated or any method that was called on the controller would now need to be called on the control.","pos":[779,1143],"source":" In alignment with this design, **all forms should interact only with the Dimension Entry control instance API and not directly with the controller classes**, like LedgerDimensionEntryController, LedgerDefaultDimensionEntryController, etc. Any property that was manipulated or any method that was called on the controller would now need to be called on the control."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>","pos":[1144,1153],"source":"**Note:**"},{"content":"The upgrade script only handles Dimension Entry controls constructed with the constructInGroupWithValues() and constructInTabWithValues() methods.","pos":[1159,1305]},{"content":"Other controls will need to be upgraded manually.","pos":[1306,1355]},{"content":"The upgrade script will not handle any Dimension Entry controls sent as parameters to helper methods.","pos":[1360,1461]},{"content":"This code will need to be manually upgraded.","pos":[1462,1506]},{"content":"In Dynamics AX 2012, the container for the default dimension control may have been defined as a securable control by setting ‘Needed Permission’ = Manual.","pos":[1511,1665]},{"content":"Access to the control was granted in the security model so view and maintain access worked correctly.","pos":[1666,1767]},{"content":"The default dimension control is now a design-time experience.","pos":[1768,1830]},{"content":"Therefore forms no longer need to define the container of the control as a securable control.","pos":[1831,1924]},{"content":"In most cases, forms that control metadata should be updated to remove the Manual setting and the references to the control in the security model need to be removed.","pos":[1925,2090]},{"content":"The setting can be left as Manual if it is used to maintain fine-grained security control over the Dimension Entry control.","pos":[2091,2214]},{"content":"In Dynamics AX 2012, parmAttributeSetDataSource and parmAttributeValueSetDataSource were used to set the datasource and datasource field associated with the Default Dimensions control.","pos":[2219,2403]},{"content":"Typically these were set in the init method of the form, immediately after constructing the DimensionDefaultingController instance.","pos":[2405,2536]},{"content":"All calls to parmAttributeSetDataSource and parmAttributeValueSetDataSource will be removed after upgrade.","pos":[2538,2644]},{"content":"The values from these calls are used to populate metadata on the upgraded control.","pos":[2646,2728]},{"content":"After upgrade the form should be checked to verify that it is working as expected after the removal of all these calls.","pos":[2730,2849]},{"content":"Dimension Entry controls are now modelled on form design.","pos":[2854,2911]},{"content":"To find a Dimension Entry control, expand the design elements or search for “DimensionEntry” on the form design.","pos":[2912,3024]},{"content":"Here is what the new control will look like at design time.","pos":[3025,3084]},{"content":"![1]","pos":[3086,3090]},{"pos":[3095,3105],"content":"Properties","linkify":"Properties","nodes":[{"content":"Properties","pos":[0,10]}]},{"content":"The custom properties for the Dimension Entry control are found under the <bpt id=\"p1\">**</bpt>Controller<ept id=\"p1\">**</ept> group.","pos":[3106,3201],"source":"The custom properties for the Dimension Entry control are found under the **Controller** group."},{"content":"![Capture1]","pos":[3202,3213]},{"pos":[3220,3245],"content":"Details on the properties","linkify":"Details on the properties","nodes":[{"content":"Details on the properties","pos":[0,25]}]},{"pos":[3803,3815],"content":"<bpt id=\"p1\">**</bpt>Property<ept id=\"p1\">**</ept>","source":"**Property**"},{"pos":[3822,3838],"content":"<bpt id=\"p1\">**</bpt>Valid Values<ept id=\"p1\">**</ept>","source":"**Valid Values**"},{"pos":[3913,3922],"content":"<bpt id=\"p1\">**</bpt>Usage<ept id=\"p1\">**</ept>","source":"**Usage**"},{"content":"Caption Text","pos":[4080,4092]},{"content":"Any label","pos":[4099,4108]},{"content":"Caption for the control.","pos":[4190,4214]},{"content":"Controller Class","pos":[4357,4373]},{"content":"One of the 8 Controller classes.","pos":[4376,4408]},{"content":"For example, LedgerDefaultDimensionEntryController","pos":[4409,4459]},{"content":"Determines the behavior of the Dimension Entry control.","pos":[4467,4522]},{"content":"More information about this property is provided below.","pos":[4523,4578]},{"content":"Data Source","pos":[4634,4645]},{"content":"Any data source in the form data source list","pos":[4653,4697]},{"content":"The data source specified here should be pointed to the table that holds the field specified in the Value Data Field property and/or the Enum Data Field property.","pos":[4744,4906]},{"content":"Enum Data Field","pos":[4911,4926]},{"content":"A field in the table referenced by the data source provided in the Data Source property.","pos":[4930,5018]},{"content":"This is the field that the enumeration values will be stored in.","pos":[5021,5085]},{"content":"This property shouldn’t be specified if the control is not using an enumeration.","pos":[5086,5166]},{"content":"Enumeration","pos":[5188,5199]},{"content":"Any enumeration.","pos":[5207,5223]},{"content":"For example, NoYes","pos":[5224,5242]},{"content":"The enumeration used by the control.","pos":[5298,5334]},{"content":"The enumeration will be used by the control instead of Dimension values.","pos":[5335,5407]},{"content":"Value Data Field","pos":[5465,5481]},{"content":"A field in the table referenced by the data source provided in the Data Source property.","pos":[5484,5572]},{"content":"This is the field that the Dimension Entry control is bound to.","pos":[5575,5638]},{"pos":[5744,5769],"content":"Controller class property","linkify":"Controller class property","nodes":[{"content":"Controller class property","pos":[0,25]}]},{"content":"The table provided below gives details about each controller.","pos":[5770,5831]},{"pos":[6569,6583],"content":"<bpt id=\"p1\">**</bpt>Controller<ept id=\"p1\">**</ept>","source":"**Controller**"},{"pos":[6618,6629],"content":"<bpt id=\"p1\">**</bpt>Details<ept id=\"p1\">**</ept>","source":"**Details**"},{"content":"BudgetDefaultDimensionValueSet","pos":[6936,6966]},{"content":"This controller provides budget based support for default value data entry in the Dimension Entry control.","pos":[6985,7091]},{"content":"Budget Default Dimensions require a Main Account Dimension.","pos":[7092,7151]},{"content":"PurchReqDefaultDimensionValueSet","pos":[7303,7335]},{"content":"This controller provides PurchReq based support for default value data entry in the Dimension Entry control.","pos":[7352,7460]},{"content":"PurchReq Default Dimensions require a Main Account Dimension.","pos":[7461,7522]},{"content":"LedgerDefaultDimensionValueSet","pos":[7670,7700]},{"content":"This controller provides ledger based support for default value data entry in the Dimension Entry control.","pos":[7719,7825]},{"content":"Default Dimensions require the phrase “No default” to appear in the name column of any row that doesn’t have a value specified.","pos":[7826,7953]},{"content":"This controller is typically used with setup, master data, and header records.","pos":[7954,8032]},{"content":"LedgerDimensionValueSet","pos":[8037,8060]},{"content":"This controller provides ledger based support for data entry in the Dimension Entry control.","pos":[8086,8178]},{"content":"This controller is typically used with line item or transactional data.","pos":[8179,8250]},{"content":"InventSiteLockedDimensionValueSet","pos":[8404,8437]},{"content":"This controller provides support for data entry in the Dimension Entry control specifically for the InventSite form.","pos":[8453,8569]},{"content":"InventSiteLinkedDimensionValueSet","pos":[8771,8804]},{"content":"This controller provides support for data entry in the Dimension Entry control for the behavior mandated by the Inventory Dimension Link setup.","pos":[8820,8963]},{"content":"This controller updates the control in a special way when the company is changed.","pos":[8964,9045]},{"content":"InventSiteSMAItemDimensionValueSet","pos":[9138,9172]},{"content":"This controller provides support for data entry in the Dimension Entry control for the behavior mandated by the Inventory Dimension Link setup.","pos":[9187,9330]},{"content":"InventSiteTmpLedgerBaseLinkedDimensionValueSet","pos":[9505,9551]},{"content":"This controller provides support for data entry in the Dimension Entry control for the behavior mandated by the Inventory Dimension Link setup.","pos":[9554,9697]},{"content":"This controller specifically works with the DefaultDimension field on the TmpLedgerBase table.","pos":[9698,9792]},{"content":"Some Dimension Entry controls might not have the controller property set.","pos":[9871,9944]},{"content":"The controller is inferred from the EDT of the control’s Value Data Field in these cases.","pos":[9945,10034]},{"content":"A set of Dimension Entry control specific properties is provided below.","pos":[10035,10106]},{"content":"These properties are for the Dimension Entry control selected in the General Approach section above (DimensionEntryControlHeader) on the PurchTable form.","pos":[10107,10260]},{"content":"This Dimension Entry control is using the DefaultDimension field on the PurchTable table.","pos":[10261,10350]},{"content":"The Extended Data Type property of the DefaultDimension field on PurchTable is set to LedgerDefaultDimensionValueSet (shown below).","pos":[10351,10482]},{"content":"At runtime, this EDT will be mapped to the LedgerDefaultDimensionEntryController.","pos":[10483,10564]},{"content":"So the DimensionEntryControlHeader control uses the LedgerDefaultDimensionEntryController in this case.","pos":[10565,10668]},{"content":"The following example shows the EDTs and the controllers they are mapped to.","pos":[10669,10745]},{"content":"![3] ![4]","pos":[10746,10755]},{"pos":[10762,10820],"content":"Extended data types and the controllers they are mapped to","linkify":"Extended data types and the controllers they are mapped to","nodes":[{"content":"Extended data types and the controllers they are mapped to","pos":[0,58]}]},{"pos":[11038,11060],"content":"<bpt id=\"p1\">**</bpt>Extended data type<ept id=\"p1\">**</ept>","source":"**Extended data type**"},{"pos":[11087,11101],"content":"<bpt id=\"p1\">**</bpt>Controller<ept id=\"p1\">**</ept>","source":"**Controller**"},{"content":"BudgetDefaultDimensionValueSet","pos":[11145,11175]},{"content":"BudgetDefaultDimensionEntryController","pos":[11194,11231]},{"content":"PurchReqDefaultDimensionValueSet","pos":[11252,11284]},{"content":"PurchReqDefaultDimensionEntryController","pos":[11301,11340]},{"content":"LedgerDefaultDimensionValueSet","pos":[11359,11389]},{"content":"LedgerDefaultDimensionEntryController","pos":[11408,11445]},{"content":"LedgerDimensionValueSet","pos":[11466,11489]},{"content":"LedgerDimensionEntryController","pos":[11515,11545]},{"content":"InventSiteLockedDimensionValueSet","pos":[11573,11606]},{"content":"InventSiteLockedDimensionEntryController","pos":[11622,11662]},{"content":"InventSiteLinkedDimensionValueSet","pos":[11680,11713]},{"content":"InventSiteLinkedDimensionEntryController","pos":[11729,11769]},{"content":"InventSiteSMAItemDimensionValueSet","pos":[11787,11821]},{"content":"InventSiteSMAItemDimensionEntryController","pos":[11836,11877]},{"content":"InventSiteTmpLedgerBaseLinkedDimensionValueSet","pos":[11894,11940]},{"content":"InventSiteTmpLedgerBaseLinkedDimensionEntryController","pos":[11943,11996]},{"pos":[12003,12023],"content":"Upgrade Script TODOs","linkify":"Upgrade Script TODOs","nodes":[{"content":"Upgrade Script TODOs","pos":[0,20]}]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Old<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[12124,12144],"source":"<strong>Old</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>New<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[12154,12174],"source":"<strong>New</strong>"},{"content":"The reactivate method refreshes the Dimension Entry control with current settings.","pos":[12377,12459]},{"content":"The method only refreshes the control if the company or displayed dimension list changes.","pos":[12460,12549]},{"content":"This call can be removed if neither of these are changed before it.","pos":[12550,12617]},{"content":"Otherwise leave the call as is.","pos":[12618,12649]},{"content":"If parmCompany() is called immediately before reactivate(), and it is the only DEC API called before reactivate(), and the method it resides in is called during the active() of the datasource; an optimization can be manually made to improve performance and reduce code uptake:","pos":[12650,12926],"source":" If parmCompany() is called immediately before reactivate(), and it is the only DEC API called before reactivate(), and the method it resides in is called during the active() of the datasource; an optimization can be manually made to improve performance and reduce code uptake:\n"},{"content":"<ph id=\"ph1\">1)</ph> Remove the parmCompany() and reactivate() calls during the datasource active process.","pos":[12930,13018],"source":"1) Remove the parmCompany() and reactivate() calls during the datasource active process."},{"content":"<ph id=\"ph1\">2)</ph> In the form init(), run(), datasource init(), or similar methods called before initial user interaction with the form, add the following line of code:","pos":[13026,13179],"source":"2) In the form init(), run(), datasource init(), or similar methods called before initial user interaction with the form, add the following line of code:"},{"content":"This change will allow the DEC to automatically find the company field reference that is updated when the active record changes and refresh the list of dimensions accordingly.","pos":[13302,13477],"source":"\nThis change will allow the DEC to automatically find the company field reference that is updated when the active record changes and refresh the list of dimensions accordingly."},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Note:<ept id=\"p1\">&lt;/strong&gt;</ept> This should not be combined with the use of parmDisplayedDimensionSet() otherwise the list of dimensions may not be the ones expected.","pos":[13478,13635],"source":"<strong>Note:</strong> This should not be combined with the use of parmDisplayedDimensionSet() otherwise the list of dimensions may not be the ones expected."},{"content":"In all other locations, such as the modified method of a company selection field, parmCompany() must be called to immediately reflect the change in company as the datasource is not in the process of being read at that time.","pos":[13636,13859]},{"content":"If a specific editable dimension set is needed, replace this call with:","pos":[14072,14143],"source":"If a specific editable dimension set is needed, replace this call with:\n"},{"content":"<bpt id=\"p1\">\n&lt;strong&gt;</bpt>Note<ept id=\"p1\">&lt;/strong&gt;</ept>: The editableDimensionSet parameter is of type DimensionEnumeration.","pos":[14242,14333],"source":"\n<strong>Note</strong>: The editableDimensionSet parameter is of type DimensionEnumeration."},{"content":"If this call is made within the pageActivated method of the Dimension Entry control’s parent control or the form init method, it can be removed.","pos":[14569,14713]},{"content":"The intent of this method call outside the above mentioned locations isn’t clear.","pos":[14714,14795]},{"content":"Remove the call and test the control.","pos":[14796,14833]},{"content":"A TODO will be left for a call to deleted() that is not inside a data source delete method.","pos":[15032,15123]},{"content":"These calls are only expected to be in data source delete methods, and there is no replacement.","pos":[15124,15219]},{"content":"Try to remove the call and test the control.","pos":[15220,15264]},{"content":"The Dimension Entry control framework will save values.","pos":[15475,15530]},{"content":"Remove the call and test the control.","pos":[15531,15568]},{"content":"To find the entity, the getEntityInstance method needs to be called from the DimensionAttributeValue.","pos":[15794,15895]},{"content":"Replace this call with something similar to the following:","pos":[15896,15954],"source":" Replace this call with something similar to the following:\n"},{"content":"Since the updateValues() method is only called with one parameter here, the call can be replaced with a call to allowEdit().","pos":[16450,16574]},{"content":"Since the call to updateValues() has two parameters in this case, it needs to be replaced with a call to allowEdit() to change the editability of the control and a call to loadAttributeValueSet() to clear the control’s values.","pos":[16902,17128]},{"content":"<bpt id=\"p1\">\n&lt;strong&gt;</bpt>Note:<ept id=\"p1\">&lt;/strong&gt;</ept>If the first parameter in the updateValues method call was NoYesUnchanged::Unchanged, then the new call to allowEdit is not needed.","pos":[17270,17424],"source":"\n<strong>Note:</strong>If the first parameter in the updateValues method call was NoYesUnchanged::Unchanged, then the new call to allowEdit is not needed."},{"content":"Similarly, if the second parameter in the updateValues method call was false, then the call to loadAttributeValueSet is not needed.","pos":[17425,17556]},{"pos":[17590,17623],"content":"<bpt id=\"p1\">**</bpt>Methods to potentially remove<ept id=\"p1\">**</ept>","linkify":"**Methods to potentially remove**","source":"**Methods to potentially remove**"},{"content":"Any leftover methods on the datasource or tabpage/group that holds the Dimension Entry control can be removed if there is no custom logic.","pos":[17624,17762]},{"content":"The following table shows examples of methods without customizations which should be deleted.","pos":[17763,17856]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Old<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[17958,17978],"source":"<strong>Old</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>New<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[17988,18008],"source":"<strong>New</strong>"},{"content":"This method will be on the data source.","pos":[18130,18169]},{"content":"It can be removed if there is no custom logic.","pos":[18170,18216]},{"content":"This method will be on the data source.","pos":[18313,18352]},{"content":"It can be removed if there is no custom logic.","pos":[18353,18399]},{"content":"This method will be on the data source.","pos":[18498,18537]},{"content":"It can be removed if there is no custom logic.","pos":[18538,18584]},{"content":"This method will be on the data source.","pos":[18683,18722]},{"content":"It can be removed if there is no custom logic.","pos":[18723,18769]},{"content":"This method will be on the data source.","pos":[18907,18946]},{"content":"It can be removed if there is no custom logic.","pos":[18947,18993]},{"content":"This method will be on the data source.","pos":[19089,19128]},{"content":"It can be removed if there is no custom logic.","pos":[19129,19175]},{"content":"This method will be on the data source.","pos":[19274,19313]},{"content":"It can be removed if there is no custom logic.","pos":[19314,19360]},{"content":"This method will be on the data source.","pos":[19458,19497]},{"content":"It can be removed if there is no custom logic.","pos":[19498,19544]},{"content":"This method will be on the data source.","pos":[19681,19720]},{"content":"It can be removed if there is no custom logic.","pos":[19721,19767]},{"content":"This method will be on the tabpage or group that holds the Dimension Entry control.","pos":[20058,20141]},{"content":"If there is no custom logic, the method can be deleted.","pos":[20142,20197]},{"pos":[20231,20249],"content":"<bpt id=\"p1\">**</bpt>Compile Errors<ept id=\"p1\">**</ept>","linkify":"**Compile Errors**","source":"**Compile Errors**"},{"content":"This section will go through how to address common compile errors that may be left behind.","pos":[20250,20340]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Old<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[20442,20462],"source":"<strong>Old</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>New<ept id=\"p1\">&lt;/strong&gt;</ept>","pos":[20472,20492],"source":"<strong>New</strong>"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>On the form (PurchTable):<ept id=\"p1\">&lt;/strong&gt;</ept><ph id=\"ph1\">\n</ph>","pos":[20526,20569],"source":"<strong>On the form (PurchTable):</strong>\n"},{"content":"<bpt id=\"p1\">\n&lt;strong&gt;</bpt>In the class (PurchTableForm):<ept id=\"p1\">&lt;/strong&gt;</ept><ph id=\"ph1\">\n</ph>","pos":[20690,20739],"source":"\n<strong>In the class (PurchTableForm):</strong>\n"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>On the form (PurchTable):<ept id=\"p1\">&lt;/strong&gt;</ept><ph id=\"ph1\">\n</ph>","pos":[21116,21159],"source":"<strong>On the form (PurchTable):</strong>\n"},{"content":"<bpt id=\"p1\">\n&lt;strong&gt;</bpt>In the class (PurchTableForm):<ept id=\"p1\">&lt;/strong&gt;</ept><ph id=\"ph1\">\n</ph>","pos":[21264,21313],"source":"\n<strong>In the class (PurchTableForm):</strong>\n"},{"pos":[21651,21659],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[21670,21790],"content":"<bpt id=\"p1\">[</bpt>Dimension Entry control migration walkthrough<ept id=\"p1\">](https://ax.help.dynamics.com/en/wiki/dimension-entry-control-migration/)</ept>","source":"[Dimension Entry control migration walkthrough](https://ax.help.dynamics.com/en/wiki/dimension-entry-control-migration/)"},{"pos":[21792,21910],"content":"<bpt id=\"p1\">[</bpt>Dimension Entry control dialog support<ept id=\"p1\">](https://ax.help.dynamics.com/en/wiki/dimension-entry-control-dialog-support/)</ept>","source":"[Dimension Entry control dialog support](https://ax.help.dynamics.com/en/wiki/dimension-entry-control-dialog-support/)"}],"content":"---\n# required metadata\n\ntitle: Dimension Entry control uptake | Microsoft Docs\ndescription: Describes the Dimension Entry control and associated Controller classes.\nauthor: annbe\nmanager: AnnBe\nms.date: 2015-12-12 20:44:35\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# keywords: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: 61\nms.suite: Released- Dynamics AX 7.0.0\n# ms.tgt_pltfrm: \nms.custom: 25551\nms.assetid: 232cc8c6-19d1-47c7-8899-a76fe8759058\n# ms.region: \n# ms.industry: \nms.author: annbe\n\n---\n\n# Dimension Entry control uptake\n\nGeneral approach\n----------------\n\nThe design goal is to encapsulate the control implementation and not require the form to interact with the classes backing the control. In alignment with this design, **all forms should interact only with the Dimension Entry control instance API and not directly with the controller classes**, like LedgerDimensionEntryController, LedgerDefaultDimensionEntryController, etc. Any property that was manipulated or any method that was called on the controller would now need to be called on the control. **Note:**\n\n-   The upgrade script only handles Dimension Entry controls constructed with the constructInGroupWithValues() and constructInTabWithValues() methods. Other controls will need to be upgraded manually.\n-   The upgrade script will not handle any Dimension Entry controls sent as parameters to helper methods. This code will need to be manually upgraded.\n-   In Dynamics AX 2012, the container for the default dimension control may have been defined as a securable control by setting ‘Needed Permission’ = Manual. Access to the control was granted in the security model so view and maintain access worked correctly. The default dimension control is now a design-time experience. Therefore forms no longer need to define the container of the control as a securable control. In most cases, forms that control metadata should be updated to remove the Manual setting and the references to the control in the security model need to be removed. The setting can be left as Manual if it is used to maintain fine-grained security control over the Dimension Entry control.\n-   In Dynamics AX 2012, parmAttributeSetDataSource and parmAttributeValueSetDataSource were used to set the datasource and datasource field associated with the Default Dimensions control.  Typically these were set in the init method of the form, immediately after constructing the DimensionDefaultingController instance.  All calls to parmAttributeSetDataSource and parmAttributeValueSetDataSource will be removed after upgrade.  The values from these calls are used to populate metadata on the upgraded control.  After upgrade the form should be checked to verify that it is working as expected after the removal of all these calls.\n-   Dimension Entry controls are now modelled on form design. To find a Dimension Entry control, expand the design elements or search for “DimensionEntry” on the form design. Here is what the new control will look like at design time.\n\n![1]\n\n## Properties\nThe custom properties for the Dimension Entry control are found under the **Controller** group. ![Capture1]\n\n#### Details on the properties\n\n|                  |                                                                                          |                                                                                                                                                                    |\n|------------------|------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Property**     | **Valid Values**                                                                         | **Usage**                                                                                                                                                          |\n| Caption Text     | Any label                                                                                | Caption for the control.                                                                                                                                           |\n| Controller Class | One of the 8 Controller classes. For example, LedgerDefaultDimensionEntryController      | Determines the behavior of the Dimension Entry control. More information about this property is provided below.                                                    |\n| Data Source      | Any data source in the form data source list                                             | The data source specified here should be pointed to the table that holds the field specified in the Value Data Field property and/or the Enum Data Field property. |\n| Enum Data Field  | A field in the table referenced by the data source provided in the Data Source property. | This is the field that the enumeration values will be stored in. This property shouldn’t be specified if the control is not using an enumeration.                  |\n| Enumeration      | Any enumeration. For example, NoYes                                                      | The enumeration used by the control. The enumeration will be used by the control instead of Dimension values.                                                      |\n| Value Data Field | A field in the table referenced by the data source provided in the Data Source property. | This is the field that the Dimension Entry control is bound to.                                                                                                    |\n\n## Controller class property\nThe table provided below gives details about each controller.\n\n|                                                |                                                                                                                                                                                                                                                                                                                           |\n|------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Controller**                                 | **Details**                                                                                                                                                                                                                                                                                                               |\n| BudgetDefaultDimensionValueSet                 | This controller provides budget based support for default value data entry in the Dimension Entry control. Budget Default Dimensions require a Main Account Dimension.                                                                                                                                                    |\n| PurchReqDefaultDimensionValueSet               | This controller provides PurchReq based support for default value data entry in the Dimension Entry control. PurchReq Default Dimensions require a Main Account Dimension.                                                                                                                                                |\n| LedgerDefaultDimensionValueSet                 | This controller provides ledger based support for default value data entry in the Dimension Entry control. Default Dimensions require the phrase “No default” to appear in the name column of any row that doesn’t have a value specified. This controller is typically used with setup, master data, and header records. |\n| LedgerDimensionValueSet                        | This controller provides ledger based support for data entry in the Dimension Entry control. This controller is typically used with line item or transactional data.                                                                                                                                                      |\n| InventSiteLockedDimensionValueSet              | This controller provides support for data entry in the Dimension Entry control specifically for the InventSite form.                                                                                                                                                                                                      |\n| InventSiteLinkedDimensionValueSet              | This controller provides support for data entry in the Dimension Entry control for the behavior mandated by the Inventory Dimension Link setup. This controller updates the control in a special way when the company is changed.                                                                                         |\n| InventSiteSMAItemDimensionValueSet             | This controller provides support for data entry in the Dimension Entry control for the behavior mandated by the Inventory Dimension Link setup.                                                                                                                                                                           |\n| InventSiteTmpLedgerBaseLinkedDimensionValueSet | This controller provides support for data entry in the Dimension Entry control for the behavior mandated by the Inventory Dimension Link setup. This controller specifically works with the DefaultDimension field on the TmpLedgerBase table.                                                                            |\n\nSome Dimension Entry controls might not have the controller property set. The controller is inferred from the EDT of the control’s Value Data Field in these cases. A set of Dimension Entry control specific properties is provided below. These properties are for the Dimension Entry control selected in the General Approach section above (DimensionEntryControlHeader) on the PurchTable form. This Dimension Entry control is using the DefaultDimension field on the PurchTable table. The Extended Data Type property of the DefaultDimension field on PurchTable is set to LedgerDefaultDimensionValueSet (shown below). At runtime, this EDT will be mapped to the LedgerDefaultDimensionEntryController. So the DimensionEntryControlHeader control uses the LedgerDefaultDimensionEntryController in this case. The following example shows the EDTs and the controllers they are mapped to. ![3] ![4]\n\n#### Extended data types and the controllers they are mapped to\n\n|                                                |                                                       |\n|------------------------------------------------|-------------------------------------------------------|\n| **Extended data type**                         | **Controller**                                        |\n| BudgetDefaultDimensionValueSet                 | BudgetDefaultDimensionEntryController                 |\n| PurchReqDefaultDimensionValueSet               | PurchReqDefaultDimensionEntryController               |\n| LedgerDefaultDimensionValueSet                 | LedgerDefaultDimensionEntryController                 |\n| LedgerDimensionValueSet                        | LedgerDimensionEntryController                        |\n| InventSiteLockedDimensionValueSet              | InventSiteLockedDimensionEntryController              |\n| InventSiteLinkedDimensionValueSet              | InventSiteLinkedDimensionEntryController              |\n| InventSiteSMAItemDimensionValueSet             | InventSiteSMAItemDimensionEntryController             |\n| InventSiteTmpLedgerBaseLinkedDimensionValueSet | InventSiteTmpLedgerBaseLinkedDimensionEntryController |\n\n## Upgrade Script TODOs\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td><strong>Old</strong></td>\n<td><strong>New</strong></td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>/* TODO: (Code Upgrade) [Dimension entry control] \nReplace this based on the migration guidance. */\nDimensionEntryControl.reactivate();</code></pre></td>\n<td>The reactivate method refreshes the Dimension Entry control with current settings. The method only refreshes the control if the company or displayed dimension list changes. This call can be removed if neither of these are changed before it. Otherwise leave the call as is. If parmCompany() is called immediately before reactivate(), and it is the only DEC API called before reactivate(), and the method it resides in is called during the active() of the datasource; an optimization can be manually made to improve performance and reduce code uptake:\n<p>1) Remove the parmCompany() and reactivate() calls during the datasource active process.</p>\n<p>2) In the form init(), run(), datasource init(), or similar methods called before initial user interaction with the form, add the following line of code:</p>\n<pre><code>DimensionEntryControl.parmCompanyReference(\n    fieldStr([myTable], [myCompanyContextField]);</code></pre>\nThis change will allow the DEC to automatically find the company field reference that is updated when the active record changes and refresh the list of dimensions accordingly. <strong>Note:</strong> This should not be combined with the use of parmDisplayedDimensionSet() otherwise the list of dimensions may not be the ones expected. In all other locations, such as the modified method of a company selection field, parmCompany() must be called to immediately reflect the change in company as the datasource is not in the process of being read at that time.</td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>/* TODO: (Code Upgrade) [Dimension entry control] \nReplace this based on the migration guidance. */\nDimensionEntryControl.setEditability(true, 0);</code></pre></td>\n<td>If a specific editable dimension set is needed, replace this call with:\n<pre><code>DimensionEntryControl.parmEditableDimensionSet(\n    editableDimensionSet);</code></pre>\n<strong>Note</strong>: The editableDimensionSet parameter is of type DimensionEnumeration.</td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>/* TODO: (Code Upgrade) [Dimension entry control] \nThis method can be removed if there is \nno custom implementation */\n// dimensionDefaultingController.pageActivated();</code></pre></td>\n<td>If this call is made within the pageActivated method of the Dimension Entry control’s parent control or the form init method, it can be removed. The intent of this method call outside the above mentioned locations isn’t clear. Remove the call and test the control.</td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>/* TODO: (Code Upgrade) [Dimension entry control] \nReplace this based on the migration guidance. */\nDimensionEntryControl.deleted();</code></pre></td>\n<td>A TODO will be left for a call to deleted() that is not inside a data source delete method. These calls are only expected to be in data source delete methods, and there is no replacement. Try to remove the call and test the control.</td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>/* TODO: (Code Upgrade) [Dimension entry control] \nReplace this based on the migration guidance. */\n// dimensionDefaultingController.writing();</code></pre></td>\n<td>The Dimension Entry control framework will save values. Remove the call and test the control.</td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>/* TODO: (Code Upgrade) [Dimension entry control] \nReplace this based on the migration guidance. */\ndimensionDefaultingController::findBackingEntityInstance();</code></pre></td>\n<td>To find the entity, the getEntityInstance method needs to be called from the DimensionAttributeValue. Replace this call with something similar to the following:\n<pre><code>DimensionAttributeValue dimAttrValue = \n    DimensionAttributeValue::\n        findByDimensionAttributeAndValueNoError(\n            dimensionAttributeTable, dimensionValue);\nif (dimAttrValue) {\n    common = dimAttrValue.getEntityInstance();\n}</code></pre></td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>/* TODO: (Code Upgrade) [Dimension entry control] \nReplace this based on the migration guidance. */\nDimensionEntryControlHeader.updateValues(NoYesUnchanged::Yes);</code></pre></td>\n<td>Since the updateValues() method is only called with one parameter here, the call can be replaced with a call to allowEdit().\n<pre><code>DimensionEntryControlHeader.allowEdit(\n    NoYesUnchanged::Yes);</code></pre></td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>/* TODO: (Code Upgrade) [Dimension entry control] \nReplace this based on the migration guidance. */\nDimensionEntryControlHeader.updateValues(\n    NoYesUnchanged::No, true);</code></pre></td>\n<td>Since the call to updateValues() has two parameters in this case, it needs to be replaced with a call to allowEdit() to change the editability of the control and a call to loadAttributeValueSet() to clear the control’s values.\n<pre><code>DimensionEntryControlHeader.allowEdit(\n    NoYesUnchanged::No);\nDimensionEntryControlHeader.loadAttributeValueSet(0);</code></pre>\n<strong>Note:</strong>If the first parameter in the updateValues method call was NoYesUnchanged::Unchanged, then the new call to allowEdit is not needed. Similarly, if the second parameter in the updateValues method call was false, then the call to loadAttributeValueSet is not needed.</td>\n</tr>\n</tbody>\n</table>\n\n## **Methods to potentially remove**\nAny leftover methods on the datasource or tabpage/group that holds the Dimension Entry control can be removed if there is no custom logic. The following table shows examples of methods without customizations which should be deleted.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td><strong>Old</strong></td>\n<td><strong>New</strong></td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>public int active(){int ret;ret = super();return ret;}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>public void delete(){super();}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>public void deleted(){super();}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>public void deleting(){super();}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>public boolean validateDelete(){boolean ret;ret = super();return ret;}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>public void write(){super();}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>public void writing(){super();}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>public void written(){super();}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"even\">\n<td><pre><code>public boolean validateWrite(){boolean ret;ret = super();return ret;}</code></pre></td>\n<td>This method will be on the data source. It can be removed if there is no custom logic.</td>\n</tr>\n<tr class=\"odd\">\n<td><pre><code>public void pageActivated()\n{\n    super();\n    /* TODO: (Code Upgrade) [Dimension entry control] This method can be removed if \n    there is no custom implementation */\n    // dimensionDefaultingController.pageActivated();\n}</code></pre></td>\n<td>This method will be on the tabpage or group that holds the Dimension Entry control. If there is no custom logic, the method can be deleted.</td>\n</tr>\n</tbody>\n</table>\n\n## **Compile Errors**\nThis section will go through how to address common compile errors that may be left behind.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td><strong>Old</strong></td>\n<td><strong>New</strong></td>\n</tr>\n<tr class=\"even\">\n<td><strong>On the form (PurchTable):</strong>\n<pre><code>purchTableForm.parmDimensionDefaultingControllerHeader(\n    dimensionDefaultingControllerHeader);</code></pre>\n<strong>In the class (PurchTableForm):</strong>\n<pre><code>public DimensionDefaultingController \nparmDimensionDefaultingControllerHeader(\n    DimensionDefaultingController \n        _dimensionDefaultingControllerHeader = \n        dimensionDefaultingControllerHeader)\n{\n   dimensionDefaultingControllerHeader =\n       _dimensionDefaultingControllerHeader;\n   return dimensionDefaultingControllerHeader;\n}</code></pre></td>\n<td><strong>On the form (PurchTable):</strong>\n<pre><code>purchTableForm.parmDimensionEntryControlHeader(\n    DimensionEntryControlHeader);</code></pre>\n<strong>In the class (PurchTableForm):</strong>\n<pre><code>public DimensionEntryControl \nparmDimensionEntryControlHeader(\n    DimensionEntryControl \n       _dimensionEntryControlHeader = \n       dimensionEntryControlHeader)\n\n{\n    dimensionEntryControlHeader =\n        _dimensionEntryControlHeader;\n    return dimensionEntryControlHeader;\n}</code></pre></td>\n</tr>\n</tbody>\n</table>\n\n\n\nSee also\n--------\n\n[Dimension Entry control migration walkthrough](https://ax.help.dynamics.com/en/wiki/dimension-entry-control-migration/)\n\n[Dimension Entry control dialog support](https://ax.help.dynamics.com/en/wiki/dimension-entry-control-dialog-support/)\n\n"}