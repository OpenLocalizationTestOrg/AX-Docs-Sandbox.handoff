{"nodes":[{"pos":[32,56],"content":"Mobile invoice approvals","needQuote":true,"needEscape":true,"nodes":[{"content":"Mobile invoice approvals","pos":[0,24]}]},{"pos":[70,698],"content":"Mobile capabilities in Microsoft Dynamics 365 for Operations let a business user design mobile experiences. For advanced scenarios, the platform also lets developers extend the capabilities as they desire. The most effective way to learn some of the new concepts on mobile is to go through the process of designing a few scenarios. This topic is intended to provide a practical approach to designing mobile scenarios by taking vendor invoice approvals for mobile as a use case. This topic should help you design other variations of the scenarios and can also be applied to other scenarios that aren’t related to vendor invoices.","needQuote":true,"needEscape":true,"nodes":[{"content":"Mobile capabilities in Microsoft Dynamics 365 for Operations let a business user design mobile experiences. For advanced scenarios, the platform also lets developers extend the capabilities as they desire. The most effective way to learn some of the new concepts on mobile is to go through the process of designing a few scenarios. This topic is intended to provide a practical approach to designing mobile scenarios by taking vendor invoice approvals for mobile as a use case. This topic should help you design other variations of the scenarios and can also be applied to other scenarios that aren’t related to vendor invoices.","pos":[0,628],"nodes":[{"content":"Mobile capabilities in Microsoft Dynamics 365 for Operations let a business user design mobile experiences.","pos":[0,107]},{"content":"For advanced scenarios, the platform also lets developers extend the capabilities as they desire.","pos":[108,205]},{"content":"The most effective way to learn some of the new concepts on mobile is to go through the process of designing a few scenarios.","pos":[206,331]},{"content":"This topic is intended to provide a practical approach to designing mobile scenarios by taking vendor invoice approvals for mobile as a use case.","pos":[332,477]},{"content":"This topic should help you design other variations of the scenarios and can also be applied to other scenarios that aren’t related to vendor invoices.","pos":[478,628]}]}]},{"pos":[1225,1249],"content":"Mobile invoice approvals","linkify":"Mobile invoice approvals","nodes":[{"content":"Mobile invoice approvals","pos":[0,24]}]},{"content":"Mobile capabilities in Microsoft Dynamics 365 for Operations let a business user design mobile experiences.","pos":[1251,1358]},{"content":"For advanced scenarios, the platform also lets developers extend the capabilities as they desire.","pos":[1359,1456]},{"content":"The most effective way to learn some of the new concepts on mobile is to go through the process of designing a few scenarios.","pos":[1457,1582]},{"content":"This topic is intended to provide a practical approach to designing mobile scenarios by taking vendor invoice approvals for mobile as a use case.","pos":[1583,1728]},{"content":"This topic should help you design other variations of the scenarios and can also be applied to other scenarios that aren’t related to vendor invoices.","pos":[1729,1879]},{"pos":[1881,1894],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"Prerequisite","pos":[1912,1924]},{"content":"Description","pos":[2018,2029]},{"content":"Mobile handbook pre-read","pos":[2462,2486]},{"content":"(/dev-itpro/mobile-apps/mobile-platform.md)","pos":[2567,2610]},{"content":"Dynamics 365 for Operations","pos":[2712,2739]},{"content":"An environment that has Microsoft Dynamics 365 for Operations version 1611 and Microsoft Dynamics for Operations platform update 3 (November 2016)","pos":[2818,2964]},{"content":"Install hotfix KB 3204341.","pos":[2987,3013]},{"content":"Task recorder can erroneously record two Close commands for dropdown dialogs this is included in Dynamics 365 for Operation platform update 3 (November 2016 update)","pos":[3093,3257]},{"content":"Install hotfix KB 3207800.","pos":[3262,3288]},{"content":"This hotfix enables attachments to be viewed on the mobile client this is included in Dynamics 365 for Operation platform update 3 (November 2016 update).","pos":[3368,3522]},{"content":"Install hotfix KB 3208224.","pos":[3537,3563]},{"content":"Application code for the mobile vendor invoice approval application this is included in Microsoft Dynamics AX application 7.0.1 (May 2016).","pos":[3643,3782]},{"content":"An Android or iOS or a Windows device that has the mobile app installed for Dynamics 365 for Operations","pos":[3812,3915]},{"content":"Search for the app in the appropriate app store.","pos":[3918,3966]},{"pos":[4089,4101],"content":"Introduction","linkify":"Introduction","nodes":[{"content":"Introduction","pos":[0,12]}]},{"content":"Mobile approvals for vendor invoices require the three hotfixes that are mentioned in the “Prerequisites” section.","pos":[4102,4216]},{"content":"These hotfixes don’t provide a workspace for the invoice approvals.","pos":[4217,4284]},{"content":"To learn what a workspace is in the context of mobile, read the mobile handbook that is mentioned in the “Prerequisites” section.","pos":[4285,4414]},{"content":"The invoice approvals workspace must be designed.","pos":[4415,4464]},{"content":"Every organization orchestrates and defines its business process for vendor invoices differently.","pos":[4467,4564]},{"content":"Before you design a mobile experience for vendor invoice approvals, you should consider the following aspects of the business process.","pos":[4565,4699]},{"content":"The idea is to use these data points as much as possible to optimize the user experience on the device.","pos":[4700,4803]},{"content":"What fields from the invoice header will the user want to see in the mobile experience, and in what order?","pos":[4809,4915]},{"content":"What fields from the invoice lines will the user want to see in the mobile experience, and in what order?","pos":[4920,5025]},{"content":"How many invoice lines are there in an invoice?","pos":[5030,5077]},{"content":"Apply the 80-20 rule here, and optimize for the 80 percent.","pos":[5078,5137]},{"content":"Will users want to see accounting distributions (invoice coding) on the mobile device during reviews?","pos":[5142,5243]},{"content":"If the answer to this question is yes, consider the following questions:","pos":[5244,5316]},{"content":"How many accounting distributions (extended price, sales tax, charges, splits, and so on) are there for an invoice line?","pos":[5325,5445]},{"content":"Again, apply the 80-20 rule.","pos":[5446,5474]},{"content":"Do the invoices also have accounting distributions on the invoice header?","pos":[5483,5556]},{"content":"If so, should these accounting distributions be available on the device?","pos":[5557,5629]},{"pos":[5633,5782],"content":"[!NOTE]\nThis topic doesn’t explain how to edit accounting distributions, because this functionality isn’t currently supported for mobile scenarios.","leadings":["","> "],"nodes":[{"content":"This topic doesn’t explain how to edit accounting distributions, because this functionality isn’t currently supported for mobile scenarios.","pos":[8,147]}]},{"content":"Will users want to see attachments for the invoice on the device?","pos":[5788,5853]},{"content":"The design of the mobile experience for invoice approvals will differ, depending on the answers to these questions.","pos":[5855,5970]},{"content":"The objective is to optimize the user experience for the business process on mobile in an organization.","pos":[5971,6074]},{"content":"In the rest of this topic, we will look at two scenario variations that are based on different answers to the preceding questions.","pos":[6075,6205]},{"content":"As a general guidance, when working with the mobile designer, make sure to 'publish' the changes to prevent losing the updates.","pos":[6208,6335]},{"pos":[6340,6396],"content":"Designing a simple invoice approval scenario for Contoso","linkify":"Designing a simple invoice approval scenario for Contoso","nodes":[{"content":"Designing a simple invoice approval scenario for Contoso","pos":[0,56]}]},{"content":"Scenario attribute","pos":[6500,6518]},{"content":"Answer","pos":[6528,6534]},{"content":"What fields from the invoice header will the user want to see in the mobile experience, and in what order?","pos":[6584,6690]},{"content":"Vendor name","pos":[6709,6720]},{"content":"Invoice total","pos":[6730,6743]},{"content":"Invoice account","pos":[6753,6768]},{"content":"Invoice number","pos":[6778,6792]},{"content":"Invoice date","pos":[6802,6814]},{"content":"Invoice description","pos":[6824,6843]},{"content":"Due date","pos":[6853,6861]},{"content":"Invoice currency","pos":[6871,6887]},{"content":"What fields from the invoice lines will the user want to see in the mobile experience, and in what order?","pos":[6932,7037]},{"content":"Procurement category","pos":[7056,7076]},{"content":"Quantity","pos":[7086,7094]},{"content":"Unit price","pos":[7104,7114]},{"content":"Line net amount","pos":[7124,7139]},{"content":"1099 amount","pos":[7149,7160]},{"content":"How many invoice lines are there in an invoice?","pos":[7204,7251]},{"content":"Apply the 80-20 rule here, and optimize for the 80 percent.","pos":[7252,7311]},{"content":"1","pos":[7321,7322]},{"content":"Will users want to see accounting distributions (invoice coding) on the mobile device during reviews?","pos":[7356,7457]},{"content":"Yes","pos":[7467,7470]},{"content":"How many accounting distributions (extended price, sales tax, charges, and so on) are there for an invoice line?","pos":[7503,7615]},{"content":"Again, apply the 80-20 rule.","pos":[7616,7644]},{"content":"Extended price: 2 Sales tax: 0 Charges: 0","pos":[7654,7695]},{"content":"Do the invoices also have accounting distributions on the invoice header?","pos":[7729,7802]},{"content":"If so, should these accounting distributions be available on the device?","pos":[7803,7875]},{"content":"Not used","pos":[7885,7893]},{"content":"Will users want to see attachments for the invoice on the device?","pos":[7926,7991]},{"content":"Yes","pos":[8001,8004]},{"pos":[8039,8059],"content":"Create the workspace","linkify":"Create the workspace","nodes":[{"content":"Create the workspace","pos":[0,20]}]},{"content":"In a browser, open Dynamics 365 for Operations, and sign in.","pos":[8065,8125]},{"pos":[8130,8315],"content":"After you’ve signed in, append <bpt id=\"p1\">**</bpt>&amp;mode=mobile<ept id=\"p1\">**</ept> to the URL as shown in the following example, and refresh the page: https://<ph id=\"ph1\">&amp;lt;</ph>yoururl<ph id=\"ph2\">&amp;gt;</ph>/?cmp=usmf&amp;mi=DefaultDashboard<bpt id=\"p2\">**</bpt>&amp;mode=mobile<ept id=\"p2\">**</ept>","source":"After you’ve signed in, append **&mode=mobile** to the URL as shown in the following example, and refresh the page: https://&lt;yoururl&gt;/?cmp=usmf&mi=DefaultDashboard**&mode=mobile**"},{"content":"Click the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> (gear) button in the upper right of the page, and then click <bpt id=\"p2\">**</bpt>Mobile app<ept id=\"p2\">**</ept>.","pos":[8320,8419],"source":"Click the **Settings** (gear) button in the upper right of the page, and then click **Mobile app**."},{"content":"The mobile app designer must show up just as Task recorder shows up.","pos":[8420,8488]},{"content":"Click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> to create a new workspace.","pos":[8493,8533],"source":"Click **Add** to create a new workspace."},{"content":"For this example, name the workspace <bpt id=\"p1\">**</bpt>My approvals<ept id=\"p1\">**</ept>.","pos":[8534,8588],"source":" For this example, name the workspace **My approvals**."},{"content":"Enter a description.","pos":[8593,8613]},{"content":"Select a workspace color.","pos":[8618,8643]},{"content":"The workspace color will be used for the overall style of the mobile experience for this workspace.","pos":[8644,8743]},{"content":"Select an icon for the workspace.","pos":[8748,8781]},{"pos":[8786,8800],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept>","source":"Click **Done**"},{"pos":[8805,8852],"content":"Click <bpt id=\"p1\">**</bpt>Publish workspace<ept id=\"p1\">**</ept> to save the changes","source":"Click **Publish workspace** to save the changes"},{"pos":[8858,8888],"content":"Vendor invoices assigned to me","linkify":"Vendor invoices assigned to me","nodes":[{"content":"Vendor invoices assigned to me","pos":[0,30]}]},{"content":"The first mobile page that you should design is the list of invoices that are assigned to the user for review.","pos":[8890,9000]},{"content":"To design this mobile page, use the <bpt id=\"p1\">**</bpt>VendMobileInvoiceAssignedToMeListPage<ept id=\"p1\">**</ept> page in Dynamics 365 for Operations.","pos":[9001,9115],"source":" To design this mobile page, use the **VendMobileInvoiceAssignedToMeListPage** page in Dynamics 365 for Operations."},{"content":"Before you complete this procedure, make sure that at least one vendor invoice is assigned to you for review, and that the invoice line has two distributions.","pos":[9116,9274]},{"content":"This setup meets the requirements for this scenario.","pos":[9275,9327]},{"content":"In the Dynamics 365 for Operations URL, replace the name of the menu item with <bpt id=\"p1\">**</bpt>VendMobileInvoiceAssignedToMeListPage<ept id=\"p1\">**</ept> to open the mobile version of the <bpt id=\"p2\">**</bpt>Pending vendor invoices assigned to me<ept id=\"p2\">**</ept> list page in the <bpt id=\"p3\">**</bpt>Accounts payable<ept id=\"p3\">**</ept> module.","pos":[9333,9576],"source":"In the Dynamics 365 for Operations URL, replace the name of the menu item with **VendMobileInvoiceAssignedToMeListPage** to open the mobile version of the **Pending vendor invoices assigned to me** list page in the **Accounts payable** module."},{"content":"Depending on the number of invoices that you have in your system assigned to you, this page will show those invoices.","pos":[9577,9694]},{"content":"To find a specific invoice, you can use the filter on the left.","pos":[9695,9758]},{"content":"However, we don’t require a specific invoice for this example.","pos":[9759,9821]},{"content":"We just require some invoice assigned to you which is going to allow you to design the mobile page.","pos":[9822,9921]},{"content":"The new pages that are available have been designed specifically for developing mobile scenarios for vendor invoice.","pos":[9922,10038]},{"content":"Therefore, you must use these pages.","pos":[10039,10075]},{"content":"The URL should resemble the following URL, and after you enter it, the page that is shown in the illustration must appear: https://<ph id=\"ph1\">&amp;lt;</ph>yourURL<ph id=\"ph2\">&amp;gt;</ph>/?cmp=usmf&amp;mi=<bpt id=\"p1\">**</bpt>VendMobileInvoiceAssignedToMeListPage<ept id=\"p1\">**</ept>&amp;mode=mobile <bpt id=\"p2\">[</bpt><ph id=\"ph3\">![</ph>Pending vendor invoices assigned to me page<ept id=\"p2\">](./media/mobile-invoice-approvals01-1024x281.png)](./media/mobile-invoice-approvals01.png)</ept>","pos":[10076,10427],"source":" The URL should resemble the following URL, and after you enter it, the page that is shown in the illustration must appear: https://&lt;yourURL&gt;/?cmp=usmf&mi=**VendMobileInvoiceAssignedToMeListPage**&mode=mobile [![Pending vendor invoices assigned to me page](./media/mobile-invoice-approvals01-1024x281.png)](./media/mobile-invoice-approvals01.png)"},{"pos":[10432,10530],"content":"Click the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> (gear) button in the upper right of the page, and then click <bpt id=\"p2\">**</bpt>Mobile app<ept id=\"p2\">**</ept>","source":"Click the **Settings** (gear) button in the upper right of the page, and then click **Mobile app**"},{"pos":[10535,10575],"content":"Select your workspace and click <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept>","source":"Select your workspace and click **Edit**"},{"pos":[10580,10631],"content":"Click <bpt id=\"p1\">**</bpt>Add page<ept id=\"p1\">**</ept> to create the first mobile page.","source":"Click **Add page** to create the first mobile page."},{"pos":[10636,10755],"content":"Enter a name, such as <bpt id=\"p1\">**</bpt>My vendor invoices<ept id=\"p1\">**</ept>, and a description, such as <bpt id=\"p2\">**</bpt>Vendor invoices assigned to me for review<ept id=\"p2\">**</ept>.","source":"Enter a name, such as **My vendor invoices**, and a description, such as **Vendor invoices assigned to me for review**."},{"pos":[10760,10775],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept>.","source":"Click **Done**."},{"content":"In the mobile designer, on the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> tab, click <bpt id=\"p2\">**</bpt>Select fields<ept id=\"p2\">**</ept>.","pos":[10780,10851],"source":"In the mobile designer, on the **Fields** tab, click **Select fields**."},{"content":"The columns on the list page must resemble the following illustration.","pos":[10852,10922]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Columns on the Pending vendor invoices assigned to me page<ept id=\"p1\">](./media/mobile-invoice-approvals02-1024x117.png)](./media/mobile-invoice-approvals02.png)</ept>","pos":[10923,11075],"source":"[![Columns on the Pending vendor invoices assigned to me page](./media/mobile-invoice-approvals02-1024x117.png)](./media/mobile-invoice-approvals02.png)"},{"content":"Add the required columns from the list page that must be shown to the users in the mobile page.","pos":[11080,11175]},{"content":"The order in which you add is the order in which the fields will be displayed to the end user.","pos":[11176,11270]},{"content":"The only way to change the ordering of the fields will be by re-selecting all the fields.","pos":[11271,11360]},{"content":"Based on the requirements for this scenario, the following eight fields are required.","pos":[11361,11446]},{"content":"However, some users might consider eight fields too much information to have on a mobile device.","pos":[11447,11543]},{"content":"Therefore, we will show only the most important fields in the mobile list view.","pos":[11544,11623]},{"content":"The remaining fields will appear in the details view that we will design later.","pos":[11624,11703]},{"content":"For now, we will add the following fields.","pos":[11704,11746]},{"content":"Click the plus sign (<bpt id=\"p1\">**</bpt><ph id=\"ph1\">+</ph><ept id=\"p1\">**</ept>) in these columns to add to the mobile page.","pos":[11747,11818],"source":" Click the plus sign (**+**) in these columns to add to the mobile page."},{"content":"Vendor name","pos":[11827,11838]},{"content":"Invoice total","pos":[11847,11860]},{"content":"Invoice account","pos":[11869,11884]},{"content":"Invoice number","pos":[11893,11907]},{"content":"Invoice date","pos":[11916,11928]},{"content":"After the fields are added, the mobile page must resemble the following illustration.","pos":[11934,12019]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Page after fields are added<ept id=\"p1\">](./media/mobile-invoice-approvals03.png)](./media/mobile-invoice-approvals03.png)</ept>","pos":[12020,12132],"source":"[![Page after fields are added](./media/mobile-invoice-approvals03.png)](./media/mobile-invoice-approvals03.png)"},{"content":"You must also add the following columns now, so that we can enable workflow actions later.","pos":[12137,12227]},{"content":"Show complete task","pos":[12236,12254]},{"content":"Show delegate task","pos":[12263,12281]},{"content":"Show recall task","pos":[12290,12306]},{"content":"Show reject task","pos":[12315,12331]},{"content":"Show request completion task","pos":[12340,12368]},{"content":"Show resubmit task","pos":[12377,12395]},{"pos":[12401,12434],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to exit edit mode.","source":"Click **Done** to exit edit mode."},{"pos":[12439,12493],"content":"Click <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> and then <bpt id=\"p2\">**</bpt>Done<ept id=\"p2\">**</ept> to exit the workspace","source":"Click **Back** and then **Done** to exit the workspace"},{"pos":[12498,12544],"content":"Click <bpt id=\"p1\">**</bpt>Publish workspace<ept id=\"p1\">**</ept> to save your work.","source":"Click **Publish workspace** to save your work."},{"content":"Enable <bpt id=\"p1\">**</bpt>Display invoice total on pending vendor invoices list<ept id=\"p1\">**</ept> in accounts payable parameters form under <bpt id=\"p2\">**</bpt>Invoice<ept id=\"p2\">**</ept>.","pos":[12549,12668],"source":"Enable **Display invoice total on pending vendor invoices list** in accounts payable parameters form under **Invoice**."},{"content":"Note that, only by enabling this parameter, invoice totals will be calculated to be displayed on the pending vendor invoices list page.","pos":[12669,12804]},{"content":"This is a new capability as part of the pre-requisite hot fix 3208224.","pos":[12805,12875]},{"pos":[12881,12903],"content":"Vendor invoice details","linkify":"Vendor invoice details","nodes":[{"content":"Vendor invoice details","pos":[0,22]}]},{"content":"To design the invoice details page for mobile, use the <bpt id=\"p1\">**</bpt>VendMobileInvoiceHeaderDetails<ept id=\"p1\">**</ept> page in Dynamics 365 for Operations.","pos":[12905,13031],"source":"To design the invoice details page for mobile, use the **VendMobileInvoiceHeaderDetails** page in Dynamics 365 for Operations."},{"content":"Note that, depending on the number of invoices that you have in your system, this page shows the oldest invoice (the invoice that was created first).","pos":[13032,13181]},{"content":"To find a specific invoice, you can use the filter on the left.","pos":[13182,13245]},{"content":"However, we don’t require a specific invoice for this example.","pos":[13246,13308]},{"content":"We just require some invoice data so that we can design the mobile page.","pos":[13309,13381]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Workflow page<ept id=\"p1\">](./media/mobile-invoice-approvals04-1024x425.png)](./media/mobile-invoice-approvals04.png)</ept>","pos":[13382,13489],"source":"[![Workflow page](./media/mobile-invoice-approvals04-1024x425.png)](./media/mobile-invoice-approvals04.png)"},{"pos":[13495,13625],"content":"In the Dynamics 365 for Operations URL, replace the name of the menu item with <bpt id=\"p1\">**</bpt>VendMobileInvoiceHeaderDetails<ept id=\"p1\">**</ept> to open the form","source":"In the Dynamics 365 for Operations URL, replace the name of the menu item with **VendMobileInvoiceHeaderDetails** to open the form"},{"pos":[13630,13691],"content":"Open the mobile designer from the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> (gear) button.","source":"Open the mobile designer from the **Settings** (gear) button."},{"pos":[13696,13758],"content":"Click the <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept> button to start edit mode in the workspace.","source":"Click the **Edit** button to start edit mode in the workspace."},{"pos":[13763,13852],"content":"Select the <bpt id=\"p1\">**</bpt>My vendor invoices <ept id=\"p1\">**</ept>page that you created earlier, and then click <bpt id=\"p2\">**</bpt>Edit<ept id=\"p2\">**</ept>.","source":"Select the **My vendor invoices **page that you created earlier, and then click **Edit**."},{"pos":[13857,13914],"content":"On the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> tab, click the <bpt id=\"p2\">**</bpt>Grid<ept id=\"p2\">**</ept> column heading.","source":"On the **Fields** tab, click the **Grid** column heading."},{"content":"Click <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Add page<ept id=\"p2\">**</ept>.","pos":[13919,13958],"source":"Click **Properties** &gt; **Add page**."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> When you click the <bpt id=\"p2\">**</bpt>Grid<ept id=\"p2\">**</ept> heading and add a page, the relationship with the details page is established automatically.","pos":[13959,14089],"source":"**Note:** When you click the **Grid** heading and add a page, the relationship with the details page is established automatically."},{"pos":[14094,14211],"content":"Enter a page title, such as <bpt id=\"p1\">**</bpt>Invoice details<ept id=\"p1\">**</ept>, and a description, such as <bpt id=\"p2\">**</bpt>View invoice header and line details<ept id=\"p2\">**</ept>.","source":"Enter a page title, such as **Invoice details**, and a description, such as **View invoice header and line details**."},{"content":"Click <bpt id=\"p1\">**</bpt>Select fields<ept id=\"p1\">**</ept>.","pos":[14216,14240],"source":"Click **Select fields**."},{"content":"Note that, the order in which you add is the order in which the fields will be displayed to the end user.","pos":[14241,14346]},{"content":"The only way to change the ordering of the fields will be by re-selecting all the fields.","pos":[14347,14436]},{"content":"Add the following fields from the header, based on the requirements for this scenario:","pos":[14441,14527]},{"content":"Vendor name","pos":[14536,14547]},{"content":"Invoice total","pos":[14556,14569]},{"content":"Invoice account","pos":[14578,14593]},{"content":"Invoice number","pos":[14602,14616]},{"content":"Invoice date","pos":[14625,14637]},{"content":"Invoice description","pos":[14646,14665]},{"content":"Due date","pos":[14674,14682]},{"content":"Invoice currency","pos":[14691,14707]},{"content":"Add the following fields from the lines grid on the page:","pos":[14713,14770]},{"content":"Procurement category","pos":[14779,14799]},{"content":"Quantity","pos":[14808,14816]},{"content":"Unit price","pos":[14825,14835]},{"content":"Line net amount","pos":[14844,14859]},{"content":"1099 amount","pos":[14868,14879]},{"content":"After all the fields from the previous two steps have been added, click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept>.","pos":[14885,14966],"source":"After all the fields from the previous two steps have been added, click **Done**."},{"content":"The page must resemble the following illustration.","pos":[14967,15017]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Page after fields are added<ept id=\"p1\">](./media/mobile-invoice-approvals05.png)](./media/mobile-invoice-approvals05.png)</ept>","pos":[15018,15130],"source":"[![Page after fields are added](./media/mobile-invoice-approvals05.png)](./media/mobile-invoice-approvals05.png)"},{"pos":[15135,15168],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to exit edit mode.","source":"Click **Done** to exit edit mode."},{"pos":[15173,15227],"content":"Click <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> and then <bpt id=\"p2\">**</bpt>Done<ept id=\"p2\">**</ept> to exit the workspace","source":"Click **Back** and then **Done** to exit the workspace"},{"pos":[15232,15277],"content":"Click <bpt id=\"p1\">**</bpt>Publish workspace<ept id=\"p1\">**</ept> to save your work","source":"Click **Publish workspace** to save your work"},{"pos":[15283,15299],"content":"Workflow actions","linkify":"Workflow actions","nodes":[{"content":"Workflow actions","pos":[0,16]}]},{"content":"To add workflow actions, use the <bpt id=\"p1\">**</bpt>VendMobileInvoiceHeaderDetails<ept id=\"p1\">**</ept> page in Dynamics 365 for Operations.","pos":[15301,15405],"source":"To add workflow actions, use the **VendMobileInvoiceHeaderDetails** page in Dynamics 365 for Operations."},{"content":"To open this page, replace the name of the menu item in the URL, as you did earlier.","pos":[15406,15490]},{"content":"Then open the mobile designer from the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> (gear) button.","pos":[15491,15557],"source":" Then open the mobile designer from the **Settings** (gear) button."},{"content":"Follow these steps to add workflow actions on the details page.","pos":[15558,15621]},{"pos":[15627,15689],"content":"Click the <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept> button to start edit mode in the workspace.","source":"Click the **Edit** button to start edit mode in the workspace."},{"pos":[15694,15780],"content":"Select the <bpt id=\"p1\">**</bpt>Invoice details<ept id=\"p1\">**</ept> page that you created earlier, and then click <bpt id=\"p2\">**</bpt>Edit<ept id=\"p2\">**</ept>.","source":"Select the **Invoice details** page that you created earlier, and then click **Edit**."},{"pos":[15785,15830],"content":"On the <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> tab, click <bpt id=\"p2\">**</bpt>Add action<ept id=\"p2\">**</ept>.","source":"On the **Actions** tab, click **Add action**."},{"content":"Enter an action title, such as <bpt id=\"p1\">**</bpt>Approve<ept id=\"p1\">**</ept>, and a description, such as <bpt id=\"p2\">**</bpt>Approve invoice<ept id=\"p2\">**</ept>.","pos":[15835,15926],"source":"Enter an action title, such as **Approve**, and a description, such as **Approve invoice**."},{"content":"Note that the action title that you enter here becomes the name of the action that is shown to the user in the mobile app.","pos":[15927,16049]},{"pos":[16054,16069],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept>.","source":"Click **Done**."},{"pos":[16074,16098],"content":"Click <bpt id=\"p1\">**</bpt>Select fields<ept id=\"p1\">**</ept>.","source":"Click **Select fields**."},{"content":"Go through the workflow process on the <bpt id=\"p1\">**</bpt>VendMobileInvoiceHeaderDetails<ept id=\"p1\">**</ept> page, and complete the action that you wanted to record.","pos":[16103,16233],"source":"Go through the workflow process on the **VendMobileInvoiceHeaderDetails** page, and complete the action that you wanted to record."},{"content":"Make sure that you enter workflow comments during this process, so that a comments field is also included in the mobile experience.","pos":[16234,16365]},{"pos":[16370,16454],"content":"After the workflow action is run, click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to complete the Select fields task.","source":"After the workflow action is run, click **Done** to complete the Select fields task."},{"pos":[16459,16492],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to exit edit mode.","source":"Click **Done** to exit edit mode."},{"pos":[16497,16551],"content":"Click <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> and then <bpt id=\"p2\">**</bpt>Done<ept id=\"p2\">**</ept> to exit the workspace","source":"Click **Back** and then **Done** to exit the workspace"},{"pos":[16556,16601],"content":"Click <bpt id=\"p1\">**</bpt>Publish workspace<ept id=\"p1\">**</ept> to save your work","source":"Click **Publish workspace** to save your work"},{"content":"Repeat the steps 3 through 11 to record all the required workflow actions.","pos":[16606,16680]},{"content":"Note that, it is a requirement to have invoices assigned to you that are in a state to make the workflow actions available to you that you are going to design for.","pos":[16681,16844]},{"content":"Open Notepad or Microsoft Visual Studio, and paste the following code.","pos":[16849,16919]},{"content":"Save the file as a .js file.","pos":[16920,16948]},{"content":"This code does two things:","pos":[16949,16975]},{"content":"It hides the extra workflow-related columns that we added earlier on the mobile list page.","pos":[16984,17074]},{"content":"We added these columns so that the app has that information in context and can do the next step.","pos":[17075,17171]},{"content":"Based on the workflow step that is active, it applies logic to show only those actions.","pos":[17180,17267]},{"content":"Note that, the name of the pages and other controls in the JS code must be the same from the workspace.","pos":[17269,17372]},{"pos":[17378,19353],"content":"function main(metadataService, dataService, cacheService, $q) {        return {            appInit: function (appMetadata) {                // Hide controls that need to be present, but not visible                metadataService.configureControl('My-vendor-invoices', 'ShowAccept', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowApprove', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowReject', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowDelegate', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowRequestChange', { hidden: true });              metadataService.configureControl('My-vendor-invoices', 'ShowRecall', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowComplete', { hidden: true });            metadataService.configureControl('My-vendor-invoices', 'ShowResubmit', { hidden: true });            },            pageInit: function (pageMetadata, params) {     if (pageMetadata.Name == 'Invoice-details') {                    // Show/hide workflow actions based on workflow step                    metadataService.configureAction('Accept', { visible: true });                    metadataService.configureAction('Approve', { visible: true });                    metadataService.configureAction('Reject', { visible: true });                    metadataService.configureAction('Delegate', { visible: true });                    metadataService.configureAction('Request-change', { visible: true });                    metadataService.configureAction('Recall', { visible: true });                    metadataService.configureAction('Complete', { visible: true });                    metadataService.configureAction('Resubmit', { visible: true });","leadings":["","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    "],"source":"function main(metadataService, dataService, cacheService, $q) {\n       return {\n           appInit: function (appMetadata) {\n               // Hide controls that need to be present, but not visible\n               metadataService.configureControl('My-vendor-invoices', 'ShowAccept', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowApprove', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowReject', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowDelegate', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowRequestChange', { hidden: true });\n             metadataService.configureControl('My-vendor-invoices', 'ShowRecall', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowComplete', { hidden: true });\n           metadataService.configureControl('My-vendor-invoices', 'ShowResubmit', { hidden: true });\n           },\n           pageInit: function (pageMetadata, params) {\n    if (pageMetadata.Name == 'Invoice-details') {\n                   // Show/hide workflow actions based on workflow step\n                   metadataService.configureAction('Accept', { visible: true });\n                   metadataService.configureAction('Approve', { visible: true });\n                   metadataService.configureAction('Reject', { visible: true });\n                   metadataService.configureAction('Delegate', { visible: true });\n                   metadataService.configureAction('Request-change', { visible: true });\n                   metadataService.configureAction('Recall', { visible: true });\n                   metadataService.configureAction('Complete', { visible: true });\n                   metadataService.configureAction('Resubmit', { visible: true });"},{"pos":[21896,21964],"content":"Upload the code file to the workspace by selecting the <bpt id=\"p1\">**</bpt>Logic<ept id=\"p1\">**</ept> tab","source":"Upload the code file to the workspace by selecting the **Logic** tab"},{"pos":[21969,22002],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to exit edit mode.","source":"Click **Done** to exit edit mode."},{"pos":[22007,22061],"content":"Click <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> and then <bpt id=\"p2\">**</bpt>Done<ept id=\"p2\">**</ept> to exit the workspace","source":"Click **Back** and then **Done** to exit the workspace"},{"pos":[22066,22111],"content":"Click <bpt id=\"p1\">**</bpt>Publish workspace<ept id=\"p1\">**</ept> to save your work","source":"Click **Publish workspace** to save your work"},{"pos":[22117,22143],"content":"Vendor invoice attachments","linkify":"Vendor invoice attachments","nodes":[{"content":"Vendor invoice attachments","pos":[0,26]}]},{"pos":[22149,22247],"content":"Click the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> (gear) button in the upper right of the page, and then click <bpt id=\"p2\">**</bpt>Mobile app<ept id=\"p2\">**</ept>","source":"Click the **Settings** (gear) button in the upper right of the page, and then click **Mobile app**"},{"pos":[22252,22314],"content":"Click the <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept> button to start edit mode in the workspace.","source":"Click the **Edit** button to start edit mode in the workspace."},{"pos":[22319,22405],"content":"Select the <bpt id=\"p1\">**</bpt>Invoice details <ept id=\"p1\">**</ept>page that you created earlier, and then click <bpt id=\"p2\">**</bpt>Edit<ept id=\"p2\">**</ept>.","source":"Select the **Invoice details **page that you created earlier, and then click **Edit**."},{"content":"Set the <bpt id=\"p1\">**</bpt>Document management<ept id=\"p1\">**</ept> option to <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept> as shown below.","pos":[22410,22475],"source":"Set the **Document management** option to **Yes** as shown below."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If there are no requirements to show attachments on the mobile device, you can leave this option set to <bpt id=\"p2\">**</bpt>No<ept id=\"p2\">**</ept>, which is the default setting.","pos":[22476,22627],"source":"**Note:** If there are no requirements to show attachments on the mobile device, you can leave this option set to **No**, which is the default setting."},{"pos":[22632,22712],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>docmanagement<ept id=\"p1\">](./media/docmanagement-216x300.png)](./media/docmanagement.png)</ept>","source":"[![docmanagement](./media/docmanagement-216x300.png)](./media/docmanagement.png)"},{"pos":[22717,22750],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to exit edit mode.","source":"Click **Done** to exit edit mode."},{"pos":[22755,22809],"content":"Click <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> and then <bpt id=\"p2\">**</bpt>Done<ept id=\"p2\">**</ept> to exit the workspace","source":"Click **Back** and then **Done** to exit the workspace"},{"pos":[22814,22859],"content":"Click <bpt id=\"p1\">**</bpt>Publish workspace<ept id=\"p1\">**</ept> to save your work","source":"Click **Publish workspace** to save your work"},{"pos":[22865,22898],"content":"Vendor invoice line distributions","linkify":"Vendor invoice line distributions","nodes":[{"content":"Vendor invoice line distributions","pos":[0,33]}]},{"content":"The requirements for this scenario confirm that there will be only line-level distributions, and that an invoice will always have only one line.","pos":[22900,23044]},{"content":"Because this scenario is simple, the user experience on the mobile device must also be simple enough that the user doesn’t have to drill down several levels to view the distributions.","pos":[23045,23228]},{"content":"Vendor invoices in Dynamics 365 for Operations include the option of showing all distributions from the invoice header.","pos":[23229,23348]},{"content":"This experience is what we need for the mobile scenario.","pos":[23349,23405]},{"content":"Therefore, we will use the <bpt id=\"p1\">**</bpt>VendMobileInvoiceAllDistributionTree<ept id=\"p1\">**</ept> page to design this part of the mobile scenario.","pos":[23406,23522],"source":" Therefore, we will use the **VendMobileInvoiceAllDistributionTree** page to design this part of the mobile scenario."},{"pos":[23527,23828],"content":"[!NOTE] \nKnowing the requirements helps us decide which specific page to use and how exactly to optimize the mobile experience for the user when we design the scenario. In the second scenario, we will use a different page to show the distributions, because the requirements for that scenario differ.","leadings":["","> "],"nodes":[{"content":"Knowing the requirements helps us decide which specific page to use and how exactly to optimize the mobile experience for the user when we design the scenario. In the second scenario, we will use a different page to show the distributions, because the requirements for that scenario differ.","pos":[9,299],"nodes":[{"content":"Knowing the requirements helps us decide which specific page to use and how exactly to optimize the mobile experience for the user when we design the scenario.","pos":[0,159]},{"content":"In the second scenario, we will use a different page to show the distributions, because the requirements for that scenario differ.","pos":[160,290]}]}]},{"content":"In the URL, replace the name of the menu item, as you did before.","pos":[23834,23899]},{"content":"The page that appears should resemble the following illustration.","pos":[23900,23965]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>All distributions page<ept id=\"p1\">](./media/mobile-invoice-approvals06.png)](./media/mobile-invoice-approvals06.png)</ept>","pos":[23966,24073],"source":"[![All distributions page](./media/mobile-invoice-approvals06.png)](./media/mobile-invoice-approvals06.png)"},{"pos":[24078,24139],"content":"Open the mobile designer from the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> (gear) button.","source":"Open the mobile designer from the **Settings** (gear) button."},{"content":"Click the <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept> button to start edit mode in the workspace.","pos":[24144,24206],"source":"Click the **Edit** button to start edit mode in the workspace."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> You will see that two new pages were created automatically.","pos":[24207,24276],"source":"**Note:** You will see that two new pages were created automatically."},{"content":"The system creates these pages, because you turned on document management in the previous section.","pos":[24277,24375]},{"content":"You can ignore these new pages.","pos":[24376,24407]},{"pos":[24412,24431],"content":"Click <bpt id=\"p1\">**</bpt>Add page<ept id=\"p1\">**</ept>.","source":"Click **Add page**."},{"pos":[24436,24548],"content":"Enter a page title, such as <bpt id=\"p1\">**</bpt>View accounting<ept id=\"p1\">**</ept>, and a description, such as <bpt id=\"p2\">**</bpt>View accounting for the invoice<ept id=\"p2\">**</ept>.","source":"Enter a page title, such as **View accounting**, and a description, such as **View accounting for the invoice**."},{"pos":[24553,24568],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept>.","source":"Click **Done**."},{"pos":[24573,24702],"content":"On the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> tab, click <bpt id=\"p2\">**</bpt>Select fields<ept id=\"p2\">**</ept>, select the following fields from the distributions page, and then click <bpt id=\"p3\">**</bpt>Done<ept id=\"p3\">**</ept>:","source":"On the **Fields** tab, click **Select fields**, select the following fields from the distributions page, and then click **Done**:"},{"content":"Amount","pos":[24711,24717]},{"content":"Currency","pos":[24726,24734]},{"content":"Ledger account","pos":[24743,24757]},{"pos":[24761,25270],"content":"[!NOTE] \nWe didn’t select the **Description** column from the distributions grid, because the requirements for this scenario confirmed that the extended price is the only amount that there will be distributions for. Therefore, the user won’t require another field to determine the amount type that the distribution is for. However, in the next scenario, we **will** use this information, because the requirements for that scenario specify that other amount types have distributions (for example, sales tax).","leadings":["","> "],"nodes":[{"content":"We didn’t select the **Description** column from the distributions grid, because the requirements for this scenario confirmed that the extended price is the only amount that there will be distributions for. Therefore, the user won’t require another field to determine the amount type that the distribution is for. However, in the next scenario, we **will** use this information, because the requirements for that scenario specify that other amount types have distributions (for example, sales tax).","pos":[9,507],"nodes":[{"content":"We didn’t select the <bpt id=\"p1\">**</bpt>Description<ept id=\"p1\">**</ept> column from the distributions grid, because the requirements for this scenario confirmed that the extended price is the only amount that there will be distributions for.","pos":[0,206],"source":"We didn’t select the **Description** column from the distributions grid, because the requirements for this scenario confirmed that the extended price is the only amount that there will be distributions for."},{"content":"Therefore, the user won’t require another field to determine the amount type that the distribution is for.","pos":[207,313]},{"content":"However, in the next scenario, we <bpt id=\"p1\">**</bpt>will<ept id=\"p1\">**</ept> use this information, because the requirements for that scenario specify that other amount types have distributions (for example, sales tax).","pos":[314,498],"source":" However, in the next scenario, we **will** use this information, because the requirements for that scenario specify that other amount types have distributions (for example, sales tax)."}]}]},{"pos":[25275,25308],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to exit edit mode.","source":"Click **Done** to exit edit mode."},{"pos":[25313,25367],"content":"Click <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> and then <bpt id=\"p2\">**</bpt>Done<ept id=\"p2\">**</ept> to exit the workspace","source":"Click **Back** and then **Done** to exit the workspace"},{"pos":[25372,25417],"content":"Click <bpt id=\"p1\">**</bpt>Publish workspace<ept id=\"p1\">**</ept> to save your work","source":"Click **Publish workspace** to save your work"},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The <bpt id=\"p2\">**</bpt>View accounting<ept id=\"p2\">**</ept> mobile page isn’t currently linked to any of the mobile pages that we have designed so far.","pos":[25419,25544],"source":"**Note:** The **View accounting** mobile page isn’t currently linked to any of the mobile pages that we have designed so far."},{"content":"Because the user should be able to navigate to the <bpt id=\"p1\">**</bpt>View accounting<ept id=\"p1\">**</ept> page from the <bpt id=\"p2\">**</bpt>Invoice details<ept id=\"p2\">**</ept> page on the mobile device, we must provide navigation from the <bpt id=\"p3\">**</bpt>Invoice details<ept id=\"p3\">**</ept> page to the <bpt id=\"p4\">**</bpt>View accounting<ept id=\"p4\">**</ept> page.","pos":[25545,25770],"source":" Because the user should be able to navigate to the **View accounting** page from the **Invoice details** page on the mobile device, we must provide navigation from the **Invoice details** page to the **View accounting** page."},{"content":"We establish this navigation by using additional logic via JavaScript.","pos":[25771,25841]},{"content":"Open the .js file that you created earlier, and add the lines that are highlighted in the following code.","pos":[25847,25952]},{"content":"This code does two things:","pos":[25953,25979]},{"pos":[25988,26093],"content":"It helps guarantee that users can’t navigate directly from the workspace to the <bpt id=\"p1\">**</bpt>View accounting<ept id=\"p1\">**</ept> page.","source":"It helps guarantee that users can’t navigate directly from the workspace to the **View accounting** page."},{"pos":[26102,26204],"content":"It establishes a navigation control from the <bpt id=\"p1\">**</bpt>Invoice details<ept id=\"p1\">**</ept> page to the <bpt id=\"p2\">**</bpt>View accounting<ept id=\"p2\">**</ept> page.","source":"It establishes a navigation control from the **Invoice details** page to the **View accounting** page."},{"pos":[26208,26311],"content":"[!NOTE] \nThe name of the pages and other controls in the JS code must be the same from the workspace.","leadings":["","> "],"nodes":[{"content":"The name of the pages and other controls in the JS code must be the same from the workspace.","pos":[9,101]}]},{"pos":[26317,28613],"content":"function main(metadataService, dataService, cacheService, $q) {        return {            appInit: function (appMetadata) {                // Hide controls that need to be present, but not visible                metadataService.configureControl('My-vendor-invoices', 'ShowAccept', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowApprove', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowReject', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowDelegate', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowRequestChange', { hidden: true });              metadataService.configureControl('My-vendor-invoices', 'ShowRecall', { hidden: true });                metadataService.configureControl('My-vendor-invoices', 'ShowComplete', { hidden: true });            metadataService.configureControl('My-vendor-invoices', 'ShowResubmit', { hidden: true });                // Hide pages not applicable for root navigation                metadataService.hideNavigation('View-accounting');                //Link to view accounting                metadataService.addLink('Invoice-details', 'View-accounting', 'View-accounting-nav-control', 'View accounting', true);            },            pageInit: function (pageMetadata, params) {     if (pageMetadata.Name == 'Invoice-details') {                    // Show/hide workflow actions based on workflow step                    metadataService.configureAction('Accept', { visible: true });                    metadataService.configureAction('Approve', { visible: true });                    metadataService.configureAction('Reject', { visible: true });                    metadataService.configureAction('Delegate', { visible: true });                    metadataService.configureAction('Request-change', { visible: true });                    metadataService.configureAction('Recall', { visible: true });                    metadataService.configureAction('Complete', { visible: true });                    metadataService.configureAction('Resubmit', { visible: true });","leadings":["","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    "],"source":"function main(metadataService, dataService, cacheService, $q) {\n       return {\n           appInit: function (appMetadata) {\n               // Hide controls that need to be present, but not visible\n               metadataService.configureControl('My-vendor-invoices', 'ShowAccept', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowApprove', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowReject', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowDelegate', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowRequestChange', { hidden: true });\n             metadataService.configureControl('My-vendor-invoices', 'ShowRecall', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowComplete', { hidden: true });\n           metadataService.configureControl('My-vendor-invoices', 'ShowResubmit', { hidden: true });\n               // Hide pages not applicable for root navigation\n               metadataService.hideNavigation('View-accounting');\n               //Link to view accounting\n               metadataService.addLink('Invoice-details', 'View-accounting', 'View-accounting-nav-control', 'View accounting', true);\n           },\n           pageInit: function (pageMetadata, params) {\n    if (pageMetadata.Name == 'Invoice-details') {\n                   // Show/hide workflow actions based on workflow step\n                   metadataService.configureAction('Accept', { visible: true });\n                   metadataService.configureAction('Approve', { visible: true });\n                   metadataService.configureAction('Reject', { visible: true });\n                   metadataService.configureAction('Delegate', { visible: true });\n                   metadataService.configureAction('Request-change', { visible: true });\n                   metadataService.configureAction('Recall', { visible: true });\n                   metadataService.configureAction('Complete', { visible: true });\n                   metadataService.configureAction('Resubmit', { visible: true });"},{"pos":[31146,31245],"content":"Upload the code file to the workspace by selecting the <bpt id=\"p1\">**</bpt>Logic<ept id=\"p1\">**</ept> tab to overwrite the previous code","source":"Upload the code file to the workspace by selecting the **Logic** tab to overwrite the previous code"},{"pos":[31250,31283],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to exit edit mode.","source":"Click **Done** to exit edit mode."},{"pos":[31288,31342],"content":"Click <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> and then <bpt id=\"p2\">**</bpt>Done<ept id=\"p2\">**</ept> to exit the workspace","source":"Click **Back** and then **Done** to exit the workspace"},{"pos":[31347,31392],"content":"Click <bpt id=\"p1\">**</bpt>Publish workspace<ept id=\"p1\">**</ept> to save your work","source":"Click **Publish workspace** to save your work"},{"pos":[31398,31408],"content":"Validation","linkify":"Validation","nodes":[{"content":"Validation","pos":[0,10]}]},{"content":"From your mobile device, open the app, and connect to your Dynamics 365 for Operations instance.","pos":[31410,31506]},{"content":"Make sure that you sign in to the company where vendor invoices are assigned to you for review.","pos":[31507,31602]},{"content":"You should be able to perform the following actions:","pos":[31603,31655]},{"pos":[31661,31696],"content":"See the <bpt id=\"p1\">**</bpt>My approvals<ept id=\"p1\">**</ept> workspace.","source":"See the **My approvals** workspace."},{"pos":[31701,31783],"content":"Drill into the <bpt id=\"p1\">**</bpt>My approvals<ept id=\"p1\">**</ept> workspace and see the <bpt id=\"p2\">**</bpt>My vendor invoices<ept id=\"p2\">**</ept> page.","source":"Drill into the **My approvals** workspace and see the **My vendor invoices** page."},{"pos":[31788,31885],"content":"Drill into the <bpt id=\"p1\">**</bpt>My vendor invoices<ept id=\"p1\">**</ept> page and see the list of invoices that are assigned to you.","source":"Drill into the **My vendor invoices** page and see the list of invoices that are assigned to you."},{"content":"Drill into one of the invoices, and see the invoice header details and line details.","pos":[31890,31974]},{"content":"On the details page, see a link to attachments, and use this link to navigate to the attachments list and view the attachments.","pos":[31979,32106]},{"pos":[32111,32259],"content":"On the details page, see a link to the <bpt id=\"p1\">**</bpt>View accounting<ept id=\"p1\">**</ept> page, and use this link to navigate to the distributions page and view the distributions.","source":"On the details page, see a link to the **View accounting** page, and use this link to navigate to the distributions page and view the distributions."},{"pos":[32264,32397],"content":"On the details page, click the <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> menu at the bottom, and perform workflow actions that are applicable to the workflow step.","source":"On the details page, click the **Actions** menu at the bottom, and perform workflow actions that are applicable to the workflow step."},{"pos":[32402,32460],"content":"Designing a complex invoice approval scenario for Fabrikam","linkify":"Designing a complex invoice approval scenario for Fabrikam","nodes":[{"content":"Designing a complex invoice approval scenario for Fabrikam","pos":[0,58]}]},{"content":"Scenario attribute","pos":[32564,32582]},{"content":"Answer","pos":[32592,32598]},{"content":"What fields from the invoice header will the user want to see in the mobile experience, and in what order?","pos":[32648,32754]},{"content":"Vendor name","pos":[32773,32784]},{"content":"Invoice amount","pos":[32794,32808]},{"content":"Invoice account","pos":[32818,32833]},{"content":"Invoice number","pos":[32843,32857]},{"content":"Invoice date","pos":[32867,32879]},{"content":"Invoice description","pos":[32889,32908]},{"content":"Due date","pos":[32918,32926]},{"content":"Invoice currency","pos":[32936,32952]},{"content":"What fields from the invoice lines will the user want to see in the mobile experience, and in what order?","pos":[32997,33102]},{"content":"Procurement category","pos":[33121,33141]},{"content":"Quantity","pos":[33151,33159]},{"content":"Unit price","pos":[33169,33179]},{"content":"Line net amount","pos":[33189,33204]},{"content":"1099 amount","pos":[33214,33225]},{"content":"How many invoice lines are there in an invoice?","pos":[33269,33316]},{"content":"Apply the 80-20 rule here, and optimize for the 80 percent.","pos":[33317,33376]},{"content":"5","pos":[33386,33387]},{"content":"Will users want to see accounting distributions (invoice coding) on the mobile device during reviews?","pos":[33421,33522]},{"content":"Yes","pos":[33532,33535]},{"content":"How many accounting distributions (extended price, sales tax, charges, and so on) are there for an invoice line?","pos":[33568,33680]},{"content":"Again, apply the 80-20 rule.","pos":[33681,33709]},{"content":"Extended price: 2 Sales tax: 2 Charges: 2","pos":[33719,33760]},{"content":"Do the invoices also have accounting distributions on the invoice header?","pos":[33794,33867]},{"content":"If so, should these accounting distributions be available on the device?","pos":[33868,33940]},{"content":"Not used","pos":[33950,33958]},{"content":"Will users want to see attachments for the invoice on the device?","pos":[33991,34056]},{"content":"Yes","pos":[34066,34069]},{"pos":[34104,34112],"content":"Exercise","linkify":"Exercise","nodes":[{"content":"Exercise","pos":[0,8]}]},{"content":"The following variations can be done for scenario 1, based on the requirements for scenario 2.","pos":[34114,34208]},{"content":"Use this section as an exercise that you can complete for learning purposes.","pos":[34209,34285]},{"content":"Because more invoice lines are expected in scenario 2, the following changes to the design will help optimize the user experience on the mobile device:","pos":[34291,34442]},{"content":"Instead of viewing invoice lines on the details page (as in scenario 1), users can choose to view lines on a separate mobile page.","pos":[34451,34581]},{"content":"Because more than one invoice line is expected in this scenario, if the <bpt id=\"p1\">**</bpt>VendMobileInvoiceAllDistributionTree<ept id=\"p1\">**</ept> page is used to design the distributions page for mobile (as in scenario 1), it might be confusing for the user to correlate lines to distributions.","pos":[34590,34851],"source":"Because more than one invoice line is expected in this scenario, if the **VendMobileInvoiceAllDistributionTree** page is used to design the distributions page for mobile (as in scenario 1), it might be confusing for the user to correlate lines to distributions."},{"content":"Therefore, use the <bpt id=\"p1\">**</bpt>VendMobileInvoiceLineDistributionTree<ept id=\"p1\">**</ept> page to design the distributions page.","pos":[34852,34951],"source":" Therefore, use the **VendMobileInvoiceLineDistributionTree** page to design the distributions page."},{"content":"Ideally, the distributions should be shown in the context of an invoice line in this scenario.","pos":[34960,35054]},{"content":"Therefore, make sure that the user can drill into a line to see the distributions page.","pos":[35055,35142]},{"content":"Use the page link capability to establish the drill-through, just as you did for the header and details pages in scenario 1.","pos":[35143,35267]},{"content":"Because more than one amount type is expected on the distributions in scenario 2 (sales tax, charges, and so on), it will be useful to show the description of the amount type.","pos":[35273,35448]},{"content":"(We omitted this information in scenario 1.)","pos":[35449,35493]},{"pos":[35498,35508],"content":"Conclusion","linkify":"Conclusion","nodes":[{"content":"Conclusion","pos":[0,10]}]},{"content":"The mobile platform and the application capabilities let you design mobile scenarios that are optimized for a user base in an organization.","pos":[35509,35648]},{"content":"Based on the examples that are provided in this topic, you can try other variations and create different experiences that meet a specific need.","pos":[35649,35792]}],"content":"---\n# required metadata\n\ntitle: Mobile invoice approvals\ndescription: Mobile capabilities in Microsoft Dynamics 365 for Operations let a business user design mobile experiences. For advanced scenarios, the platform also lets developers extend the capabilities as they desire. The most effective way to learn some of the new concepts on mobile is to go through the process of designing a few scenarios. This topic is intended to provide a practical approach to designing mobile scenarios by taking vendor invoice approvals for mobile as a use case. This topic should help you design other variations of the scenarios and can also be applied to other scenarios that aren’t related to vendor invoices.\nauthor: twheeloc\nmanager: AnnBe\nms.date: 2016-12-09 19 - 58 - 42\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Application User, IT Pro\n# ms.devlang: \n# ms.reviewer: 2231\nms.search.scope: Operations, Core\n# ms.tgt_pltfrm: \nms.custom: 262034\nms.assetid: 9db38b3f-26b3-436e-8449-7ff243568a18\nms.search.region: Global\n# ms.search.industry: \nms.author: sunilg\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Version 1611\n\n---\n\n# Mobile invoice approvals\n\nMobile capabilities in Microsoft Dynamics 365 for Operations let a business user design mobile experiences. For advanced scenarios, the platform also lets developers extend the capabilities as they desire. The most effective way to learn some of the new concepts on mobile is to go through the process of designing a few scenarios. This topic is intended to provide a practical approach to designing mobile scenarios by taking vendor invoice approvals for mobile as a use case. This topic should help you design other variations of the scenarios and can also be applied to other scenarios that aren’t related to vendor invoices.\n\nPrerequisites\n-------------\n\n| Prerequisite                                                                                            | Description                                                                                                                                                          |\n|---------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Mobile handbook pre-read                                                                                |(/dev-itpro/mobile-apps/mobile-platform.md)                                                                                                  |\n| Dynamics 365 for Operations                                                                             | An environment that has Microsoft Dynamics 365 for Operations version 1611 and Microsoft Dynamics for Operations platform update 3 (November 2016)                   |\n| Install hotfix KB 3204341.                                                                              | Task recorder can erroneously record two Close commands for dropdown dialogs this is included in Dynamics 365 for Operation platform update 3 (November 2016 update) |\n| Install hotfix KB 3207800.                                                                              | This hotfix enables attachments to be viewed on the mobile client this is included in Dynamics 365 for Operation platform update 3 (November 2016 update).           |\n| Install hotfix KB 3208224.                                                                              | Application code for the mobile vendor invoice approval application this is included in Microsoft Dynamics AX application 7.0.1 (May 2016).                          |\n| An Android or iOS or a Windows device that has the mobile app installed for Dynamics 365 for Operations | Search for the app in the appropriate app store.                                                                                                                     |\n\n## Introduction\nMobile approvals for vendor invoices require the three hotfixes that are mentioned in the “Prerequisites” section. These hotfixes don’t provide a workspace for the invoice approvals. To learn what a workspace is in the context of mobile, read the mobile handbook that is mentioned in the “Prerequisites” section. The invoice approvals workspace must be designed. \n\nEvery organization orchestrates and defines its business process for vendor invoices differently. Before you design a mobile experience for vendor invoice approvals, you should consider the following aspects of the business process. The idea is to use these data points as much as possible to optimize the user experience on the device.\n\n-   What fields from the invoice header will the user want to see in the mobile experience, and in what order?\n-   What fields from the invoice lines will the user want to see in the mobile experience, and in what order?\n-   How many invoice lines are there in an invoice? Apply the 80-20 rule here, and optimize for the 80 percent.\n-   Will users want to see accounting distributions (invoice coding) on the mobile device during reviews? If the answer to this question is yes, consider the following questions:\n    -   How many accounting distributions (extended price, sales tax, charges, splits, and so on) are there for an invoice line? Again, apply the 80-20 rule.\n    -   Do the invoices also have accounting distributions on the invoice header? If so, should these accounting distributions be available on the device?\n\n> [!NOTE]\n> This topic doesn’t explain how to edit accounting distributions, because this functionality isn’t currently supported for mobile scenarios.\n\n-   Will users want to see attachments for the invoice on the device?\n\nThe design of the mobile experience for invoice approvals will differ, depending on the answers to these questions. The objective is to optimize the user experience for the business process on mobile in an organization. In the rest of this topic, we will look at two scenario variations that are based on different answers to the preceding questions. \n\nAs a general guidance, when working with the mobile designer, make sure to 'publish' the changes to prevent losing the updates.\n\n## Designing a simple invoice approval scenario for Contoso\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Scenario attribute</th>\n<th>Answer</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>What fields from the invoice header will the user want to see in the mobile experience, and in what order?</td>\n<td><ol>\n<li>Vendor name</li>\n<li>Invoice total</li>\n<li>Invoice account</li>\n<li>Invoice number</li>\n<li>Invoice date</li>\n<li>Invoice description</li>\n<li>Due date</li>\n<li>Invoice currency</li>\n</ol></td>\n</tr>\n<tr class=\"even\">\n<td>What fields from the invoice lines will the user want to see in the mobile experience, and in what order?</td>\n<td><ol>\n<li>Procurement category</li>\n<li>Quantity</li>\n<li>Unit price</li>\n<li>Line net amount</li>\n<li>1099 amount</li>\n</ol></td>\n</tr>\n<tr class=\"odd\">\n<td>How many invoice lines are there in an invoice? Apply the 80-20 rule here, and optimize for the 80 percent.</td>\n<td>1</td>\n</tr>\n<tr class=\"even\">\n<td>Will users want to see accounting distributions (invoice coding) on the mobile device during reviews?</td>\n<td>Yes</td>\n</tr>\n<tr class=\"odd\">\n<td>How many accounting distributions (extended price, sales tax, charges, and so on) are there for an invoice line? Again, apply the 80-20 rule.</td>\n<td>Extended price: 2 Sales tax: 0 Charges: 0</td>\n</tr>\n<tr class=\"even\">\n<td>Do the invoices also have accounting distributions on the invoice header? If so, should these accounting distributions be available on the device?</td>\n<td>Not used</td>\n</tr>\n<tr class=\"odd\">\n<td>Will users want to see attachments for the invoice on the device?</td>\n<td>Yes</td>\n</tr>\n</tbody>\n</table>\n\n### Create the workspace\n\n1.  In a browser, open Dynamics 365 for Operations, and sign in.\n2.  After you’ve signed in, append **&mode=mobile** to the URL as shown in the following example, and refresh the page: https://&lt;yoururl&gt;/?cmp=usmf&mi=DefaultDashboard**&mode=mobile**\n3.  Click the **Settings** (gear) button in the upper right of the page, and then click **Mobile app**. The mobile app designer must show up just as Task recorder shows up.\n4.  Click **Add** to create a new workspace. For this example, name the workspace **My approvals**.\n5.  Enter a description.\n6.  Select a workspace color. The workspace color will be used for the overall style of the mobile experience for this workspace.\n7.  Select an icon for the workspace.\n8.  Click **Done**\n9.  Click **Publish workspace** to save the changes\n\n### Vendor invoices assigned to me\n\nThe first mobile page that you should design is the list of invoices that are assigned to the user for review. To design this mobile page, use the **VendMobileInvoiceAssignedToMeListPage** page in Dynamics 365 for Operations. Before you complete this procedure, make sure that at least one vendor invoice is assigned to you for review, and that the invoice line has two distributions. This setup meets the requirements for this scenario.\n\n1.  In the Dynamics 365 for Operations URL, replace the name of the menu item with **VendMobileInvoiceAssignedToMeListPage** to open the mobile version of the **Pending vendor invoices assigned to me** list page in the **Accounts payable** module. Depending on the number of invoices that you have in your system assigned to you, this page will show those invoices. To find a specific invoice, you can use the filter on the left. However, we don’t require a specific invoice for this example. We just require some invoice assigned to you which is going to allow you to design the mobile page. The new pages that are available have been designed specifically for developing mobile scenarios for vendor invoice. Therefore, you must use these pages. The URL should resemble the following URL, and after you enter it, the page that is shown in the illustration must appear: https://&lt;yourURL&gt;/?cmp=usmf&mi=**VendMobileInvoiceAssignedToMeListPage**&mode=mobile [![Pending vendor invoices assigned to me page](./media/mobile-invoice-approvals01-1024x281.png)](./media/mobile-invoice-approvals01.png)\n2.  Click the **Settings** (gear) button in the upper right of the page, and then click **Mobile app**\n3.  Select your workspace and click **Edit**\n4.  Click **Add page** to create the first mobile page.\n5.  Enter a name, such as **My vendor invoices**, and a description, such as **Vendor invoices assigned to me for review**.\n6.  Click **Done**.\n7.  In the mobile designer, on the **Fields** tab, click **Select fields**. The columns on the list page must resemble the following illustration. [![Columns on the Pending vendor invoices assigned to me page](./media/mobile-invoice-approvals02-1024x117.png)](./media/mobile-invoice-approvals02.png)\n8.  Add the required columns from the list page that must be shown to the users in the mobile page. The order in which you add is the order in which the fields will be displayed to the end user. The only way to change the ordering of the fields will be by re-selecting all the fields. Based on the requirements for this scenario, the following eight fields are required. However, some users might consider eight fields too much information to have on a mobile device. Therefore, we will show only the most important fields in the mobile list view. The remaining fields will appear in the details view that we will design later. For now, we will add the following fields. Click the plus sign (**+**) in these columns to add to the mobile page.\n    1.  Vendor name\n    2.  Invoice total\n    3.  Invoice account\n    4.  Invoice number\n    5.  Invoice date\n\n    After the fields are added, the mobile page must resemble the following illustration. [![Page after fields are added](./media/mobile-invoice-approvals03.png)](./media/mobile-invoice-approvals03.png)\n9.  You must also add the following columns now, so that we can enable workflow actions later.\n    1.  Show complete task\n    2.  Show delegate task\n    3.  Show recall task\n    4.  Show reject task\n    5.  Show request completion task\n    6.  Show resubmit task\n\n10. Click **Done** to exit edit mode.\n11. Click **Back** and then **Done** to exit the workspace\n12. Click **Publish workspace** to save your work.\n13. Enable **Display invoice total on pending vendor invoices list** in accounts payable parameters form under **Invoice**. Note that, only by enabling this parameter, invoice totals will be calculated to be displayed on the pending vendor invoices list page. This is a new capability as part of the pre-requisite hot fix 3208224.\n\n### Vendor invoice details\n\nTo design the invoice details page for mobile, use the **VendMobileInvoiceHeaderDetails** page in Dynamics 365 for Operations. Note that, depending on the number of invoices that you have in your system, this page shows the oldest invoice (the invoice that was created first). To find a specific invoice, you can use the filter on the left. However, we don’t require a specific invoice for this example. We just require some invoice data so that we can design the mobile page. [![Workflow page](./media/mobile-invoice-approvals04-1024x425.png)](./media/mobile-invoice-approvals04.png)\n\n1.  In the Dynamics 365 for Operations URL, replace the name of the menu item with **VendMobileInvoiceHeaderDetails** to open the form\n2.  Open the mobile designer from the **Settings** (gear) button.\n3.  Click the **Edit** button to start edit mode in the workspace.\n4.  Select the **My vendor invoices **page that you created earlier, and then click **Edit**.\n5.  On the **Fields** tab, click the **Grid** column heading.\n6.  Click **Properties** &gt; **Add page**. **Note:** When you click the **Grid** heading and add a page, the relationship with the details page is established automatically.\n7.  Enter a page title, such as **Invoice details**, and a description, such as **View invoice header and line details**.\n8.  Click **Select fields**. Note that, the order in which you add is the order in which the fields will be displayed to the end user. The only way to change the ordering of the fields will be by re-selecting all the fields.\n9.  Add the following fields from the header, based on the requirements for this scenario:\n    1.  Vendor name\n    2.  Invoice total\n    3.  Invoice account\n    4.  Invoice number\n    5.  Invoice date\n    6.  Invoice description\n    7.  Due date\n    8.  Invoice currency\n\n10. Add the following fields from the lines grid on the page:\n    1.  Procurement category\n    2.  Quantity\n    3.  Unit price\n    4.  Line net amount\n    5.  1099 amount\n\n11. After all the fields from the previous two steps have been added, click **Done**. The page must resemble the following illustration. [![Page after fields are added](./media/mobile-invoice-approvals05.png)](./media/mobile-invoice-approvals05.png)\n12. Click **Done** to exit edit mode.\n13. Click **Back** and then **Done** to exit the workspace\n14. Click **Publish workspace** to save your work\n\n### Workflow actions\n\nTo add workflow actions, use the **VendMobileInvoiceHeaderDetails** page in Dynamics 365 for Operations. To open this page, replace the name of the menu item in the URL, as you did earlier. Then open the mobile designer from the **Settings** (gear) button. Follow these steps to add workflow actions on the details page.\n\n1.  Click the **Edit** button to start edit mode in the workspace.\n2.  Select the **Invoice details** page that you created earlier, and then click **Edit**.\n3.  On the **Actions** tab, click **Add action**.\n4.  Enter an action title, such as **Approve**, and a description, such as **Approve invoice**. Note that the action title that you enter here becomes the name of the action that is shown to the user in the mobile app.\n5.  Click **Done**.\n6.  Click **Select fields**.\n7.  Go through the workflow process on the **VendMobileInvoiceHeaderDetails** page, and complete the action that you wanted to record. Make sure that you enter workflow comments during this process, so that a comments field is also included in the mobile experience.\n8.  After the workflow action is run, click **Done** to complete the Select fields task.\n9.  Click **Done** to exit edit mode.\n10. Click **Back** and then **Done** to exit the workspace\n11. Click **Publish workspace** to save your work\n12. Repeat the steps 3 through 11 to record all the required workflow actions. Note that, it is a requirement to have invoices assigned to you that are in a state to make the workflow actions available to you that you are going to design for.\n13. Open Notepad or Microsoft Visual Studio, and paste the following code. Save the file as a .js file. This code does two things:\n    1.  It hides the extra workflow-related columns that we added earlier on the mobile list page. We added these columns so that the app has that information in context and can do the next step.\n    2.  Based on the workflow step that is active, it applies logic to show only those actions.\n\nNote that, the name of the pages and other controls in the JS code must be the same from the workspace.\n\n1.  function main(metadataService, dataService, cacheService, $q) {\n           return {\n               appInit: function (appMetadata) {\n                   // Hide controls that need to be present, but not visible\n                   metadataService.configureControl('My-vendor-invoices', 'ShowAccept', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowApprove', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowReject', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowDelegate', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowRequestChange', { hidden: true });\n                 metadataService.configureControl('My-vendor-invoices', 'ShowRecall', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowComplete', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowResubmit', { hidden: true });\n               },\n               pageInit: function (pageMetadata, params) {\n        if (pageMetadata.Name == 'Invoice-details') {\n                       // Show/hide workflow actions based on workflow step\n                       metadataService.configureAction('Accept', { visible: true });\n                       metadataService.configureAction('Approve', { visible: true });\n                       metadataService.configureAction('Reject', { visible: true });\n                       metadataService.configureAction('Delegate', { visible: true });\n                       metadataService.configureAction('Request-change', { visible: true });\n                       metadataService.configureAction('Recall', { visible: true });\n                       metadataService.configureAction('Complete', { visible: true });\n                       metadataService.configureAction('Resubmit', { visible: true });\n\n                       var entityContextParts = params.pageContext.split(':');\n                       var data = dataService.getEntityData(entityContextParts[0], entityContextParts[1]);\n\n                       var acceptControl = data.getPropertyValue('VendInvoiceInfoTable/showAccept');\n                       var approveControl = data.getPropertyValue('VendInvoiceInfoTable/showApprove');\n                       var rejectControl = data.getPropertyValue('VendInvoiceInfoTable/showReject');\n                       var delegateControl = data.getPropertyValue('VendInvoiceInfoTable/showDelegate');\n                       var requestChangeControl = data.getPropertyValue('VendInvoiceInfoTable/showRequestChange');\n                       var recallControl = data.getPropertyValue('VendInvoiceInfoTable/showRecall');\n                       var completeControl = data.getPropertyValue('VendInvoiceInfoTable/showComplete');\n                       var resubmitControl = data.getPropertyValue('VendInvoiceInfoTable/showResubmit');\n\n                       var showAcceptControl = Boolean(acceptControl == 1);\n                       var showApproveControl = Boolean(approveControl == 1);\n                       var showRejectControl = Boolean(rejectControl == 1);\n                      var showDelegateControl = Boolean(delegateControl == 1);\n                       var showRequestChangeControl = Boolean(requestChangeControl == 1);\n                       var showRecallControl = Boolean(recallControl == 1);\n                       var showCompleteControl = Boolean(completeControl == 1);\n                       var showResubmitControl = Boolean(resubmitControl == 1);\n\n                       metadataService.configureAction('Accept', { visible: showAcceptControl });\n                       metadataService.configureAction('Approve', { visible: showApproveControl });\n                       metadataService.configureAction('Reject', { visible: showRejectControl });\n                       metadataService.configureAction('Delegate', { visible: showDelegateControl });\n                       metadataService.configureAction('Request-change', { visible: showRequestChangeControl });\n                       metadataService.configureAction('Recall', { visible: showRecallControl });\n                       metadataService.configureAction('Complete', { visible: showCompleteControl });\n                     metadataService.configureAction('Resubmit', { visible: showResubmitControl });\n                   }\n                 },\n           };\n        }\n\n2.  Upload the code file to the workspace by selecting the **Logic** tab\n3.  Click **Done** to exit edit mode.\n4.  Click **Back** and then **Done** to exit the workspace\n5.  Click **Publish workspace** to save your work\n\n### Vendor invoice attachments\n\n1.  Click the **Settings** (gear) button in the upper right of the page, and then click **Mobile app**\n2.  Click the **Edit** button to start edit mode in the workspace.\n3.  Select the **Invoice details **page that you created earlier, and then click **Edit**.\n4.  Set the **Document management** option to **Yes** as shown below. **Note:** If there are no requirements to show attachments on the mobile device, you can leave this option set to **No**, which is the default setting.\n5.  [![docmanagement](./media/docmanagement-216x300.png)](./media/docmanagement.png)\n6.  Click **Done** to exit edit mode.\n7.  Click **Back** and then **Done** to exit the workspace\n8.  Click **Publish workspace** to save your work\n\n### Vendor invoice line distributions\n\nThe requirements for this scenario confirm that there will be only line-level distributions, and that an invoice will always have only one line. Because this scenario is simple, the user experience on the mobile device must also be simple enough that the user doesn’t have to drill down several levels to view the distributions. Vendor invoices in Dynamics 365 for Operations include the option of showing all distributions from the invoice header. This experience is what we need for the mobile scenario. Therefore, we will use the **VendMobileInvoiceAllDistributionTree** page to design this part of the mobile scenario. \n\n> [!NOTE] \n> Knowing the requirements helps us decide which specific page to use and how exactly to optimize the mobile experience for the user when we design the scenario. In the second scenario, we will use a different page to show the distributions, because the requirements for that scenario differ.\n\n1.  In the URL, replace the name of the menu item, as you did before. The page that appears should resemble the following illustration. [![All distributions page](./media/mobile-invoice-approvals06.png)](./media/mobile-invoice-approvals06.png)\n2.  Open the mobile designer from the **Settings** (gear) button.\n3.  Click the **Edit** button to start edit mode in the workspace. **Note:** You will see that two new pages were created automatically. The system creates these pages, because you turned on document management in the previous section. You can ignore these new pages.\n4.  Click **Add page**.\n5.  Enter a page title, such as **View accounting**, and a description, such as **View accounting for the invoice**.\n6.  Click **Done**.\n7.  On the **Fields** tab, click **Select fields**, select the following fields from the distributions page, and then click **Done**:\n    1.  Amount\n    2.  Currency\n    3.  Ledger account\n\n> [!NOTE] \n> We didn’t select the **Description** column from the distributions grid, because the requirements for this scenario confirmed that the extended price is the only amount that there will be distributions for. Therefore, the user won’t require another field to determine the amount type that the distribution is for. However, in the next scenario, we **will** use this information, because the requirements for that scenario specify that other amount types have distributions (for example, sales tax).\n8.  Click **Done** to exit edit mode.\n9.  Click **Back** and then **Done** to exit the workspace\n10. Click **Publish workspace** to save your work\n\n**Note:** The **View accounting** mobile page isn’t currently linked to any of the mobile pages that we have designed so far. Because the user should be able to navigate to the **View accounting** page from the **Invoice details** page on the mobile device, we must provide navigation from the **Invoice details** page to the **View accounting** page. We establish this navigation by using additional logic via JavaScript.\n\n1.  Open the .js file that you created earlier, and add the lines that are highlighted in the following code. This code does two things:\n    1.  It helps guarantee that users can’t navigate directly from the workspace to the **View accounting** page.\n    2.  It establishes a navigation control from the **Invoice details** page to the **View accounting** page.\n\n> [!NOTE] \n> The name of the pages and other controls in the JS code must be the same from the workspace.\n\n1.  function main(metadataService, dataService, cacheService, $q) {\n           return {\n               appInit: function (appMetadata) {\n                   // Hide controls that need to be present, but not visible\n                   metadataService.configureControl('My-vendor-invoices', 'ShowAccept', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowApprove', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowReject', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowDelegate', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowRequestChange', { hidden: true });\n                 metadataService.configureControl('My-vendor-invoices', 'ShowRecall', { hidden: true });\n                   metadataService.configureControl('My-vendor-invoices', 'ShowComplete', { hidden: true });\n               metadataService.configureControl('My-vendor-invoices', 'ShowResubmit', { hidden: true });\n                   // Hide pages not applicable for root navigation\n                   metadataService.hideNavigation('View-accounting');\n                   //Link to view accounting\n                   metadataService.addLink('Invoice-details', 'View-accounting', 'View-accounting-nav-control', 'View accounting', true);\n               },\n               pageInit: function (pageMetadata, params) {\n        if (pageMetadata.Name == 'Invoice-details') {\n                       // Show/hide workflow actions based on workflow step\n                       metadataService.configureAction('Accept', { visible: true });\n                       metadataService.configureAction('Approve', { visible: true });\n                       metadataService.configureAction('Reject', { visible: true });\n                       metadataService.configureAction('Delegate', { visible: true });\n                       metadataService.configureAction('Request-change', { visible: true });\n                       metadataService.configureAction('Recall', { visible: true });\n                       metadataService.configureAction('Complete', { visible: true });\n                       metadataService.configureAction('Resubmit', { visible: true });\n\n                       var entityContextParts = params.pageContext.split(':');\n                       var data = dataService.getEntityData(entityContextParts[0], entityContextParts[1]);\n\n                       var acceptControl = data.getPropertyValue('VendInvoiceInfoTable/showAccept');\n                       var approveControl = data.getPropertyValue('VendInvoiceInfoTable/showApprove');\n                       var rejectControl = data.getPropertyValue('VendInvoiceInfoTable/showReject');\n                       var delegateControl = data.getPropertyValue('VendInvoiceInfoTable/showDelegate');\n                       var requestChangeControl = data.getPropertyValue('VendInvoiceInfoTable/showRequestChange');\n                       var recallControl = data.getPropertyValue('VendInvoiceInfoTable/showRecall');\n                       var completeControl = data.getPropertyValue('VendInvoiceInfoTable/showComplete');\n                       var resubmitControl = data.getPropertyValue('VendInvoiceInfoTable/showResubmit');\n\n                       var showAcceptControl = Boolean(acceptControl == 1);\n                       var showApproveControl = Boolean(approveControl == 1);\n                     var showRejectControl = Boolean(rejectControl == 1);\n                       var showDelegateControl = Boolean(delegateControl == 1);\n                       var showRequestChangeControl = Boolean(requestChangeControl == 1);\n                       var showRecallControl = Boolean(recallControl == 1);\n                       var showCompleteControl = Boolean(completeControl == 1);\n                       var showResubmitControl = Boolean(resubmitControl == 1);\n\n                       metadataService.configureAction('Accept', { visible: showAcceptControl });\n                       metadataService.configureAction('Approve', { visible: showApproveControl });\n                       metadataService.configureAction('Reject', { visible: showRejectControl });\n                       metadataService.configureAction('Delegate', { visible: showDelegateControl });\n                       metadataService.configureAction('Request-change', { visible: showRequestChangeControl });\n                       metadataService.configureAction('Recall', { visible: showRecallControl });\n                       metadataService.configureAction('Complete', { visible: showCompleteControl });\n                       metadataService.configureAction('Resubmit', { visible: showResubmitControl });\n        }\n                 },\n           };\n        }\n\n2.  Upload the code file to the workspace by selecting the **Logic** tab to overwrite the previous code\n3.  Click **Done** to exit edit mode.\n4.  Click **Back** and then **Done** to exit the workspace\n5.  Click **Publish workspace** to save your work\n\n### Validation\n\nFrom your mobile device, open the app, and connect to your Dynamics 365 for Operations instance. Make sure that you sign in to the company where vendor invoices are assigned to you for review. You should be able to perform the following actions:\n\n-   See the **My approvals** workspace.\n-   Drill into the **My approvals** workspace and see the **My vendor invoices** page.\n-   Drill into the **My vendor invoices** page and see the list of invoices that are assigned to you.\n-   Drill into one of the invoices, and see the invoice header details and line details.\n-   On the details page, see a link to attachments, and use this link to navigate to the attachments list and view the attachments.\n-   On the details page, see a link to the **View accounting** page, and use this link to navigate to the distributions page and view the distributions.\n-   On the details page, click the **Actions** menu at the bottom, and perform workflow actions that are applicable to the workflow step.\n\n## Designing a complex invoice approval scenario for Fabrikam\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Scenario attribute</th>\n<th>Answer</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>What fields from the invoice header will the user want to see in the mobile experience, and in what order?</td>\n<td><ol>\n<li>Vendor name</li>\n<li>Invoice amount</li>\n<li>Invoice account</li>\n<li>Invoice number</li>\n<li>Invoice date</li>\n<li>Invoice description</li>\n<li>Due date</li>\n<li>Invoice currency</li>\n</ol></td>\n</tr>\n<tr class=\"even\">\n<td>What fields from the invoice lines will the user want to see in the mobile experience, and in what order?</td>\n<td><ol>\n<li>Procurement category</li>\n<li>Quantity</li>\n<li>Unit price</li>\n<li>Line net amount</li>\n<li>1099 amount</li>\n</ol></td>\n</tr>\n<tr class=\"odd\">\n<td>How many invoice lines are there in an invoice? Apply the 80-20 rule here, and optimize for the 80 percent.</td>\n<td>5</td>\n</tr>\n<tr class=\"even\">\n<td>Will users want to see accounting distributions (invoice coding) on the mobile device during reviews?</td>\n<td>Yes</td>\n</tr>\n<tr class=\"odd\">\n<td>How many accounting distributions (extended price, sales tax, charges, and so on) are there for an invoice line? Again, apply the 80-20 rule.</td>\n<td>Extended price: 2 Sales tax: 2 Charges: 2</td>\n</tr>\n<tr class=\"even\">\n<td>Do the invoices also have accounting distributions on the invoice header? If so, should these accounting distributions be available on the device?</td>\n<td>Not used</td>\n</tr>\n<tr class=\"odd\">\n<td>Will users want to see attachments for the invoice on the device?</td>\n<td>Yes</td>\n</tr>\n</tbody>\n</table>\n\n### Exercise\n\nThe following variations can be done for scenario 1, based on the requirements for scenario 2. Use this section as an exercise that you can complete for learning purposes.\n\n1.  Because more invoice lines are expected in scenario 2, the following changes to the design will help optimize the user experience on the mobile device:\n    1.  Instead of viewing invoice lines on the details page (as in scenario 1), users can choose to view lines on a separate mobile page.\n    2.  Because more than one invoice line is expected in this scenario, if the **VendMobileInvoiceAllDistributionTree** page is used to design the distributions page for mobile (as in scenario 1), it might be confusing for the user to correlate lines to distributions. Therefore, use the **VendMobileInvoiceLineDistributionTree** page to design the distributions page.\n    3.  Ideally, the distributions should be shown in the context of an invoice line in this scenario. Therefore, make sure that the user can drill into a line to see the distributions page. Use the page link capability to establish the drill-through, just as you did for the header and details pages in scenario 1.\n\n2.  Because more than one amount type is expected on the distributions in scenario 2 (sales tax, charges, and so on), it will be useful to show the description of the amount type. (We omitted this information in scenario 1.)\n\n## Conclusion\nThe mobile platform and the application capabilities let you design mobile scenarios that are optimized for a user base in an organization. Based on the examples that are provided in this topic, you can try other variations and create different experiences that meet a specific need.\n\n"}