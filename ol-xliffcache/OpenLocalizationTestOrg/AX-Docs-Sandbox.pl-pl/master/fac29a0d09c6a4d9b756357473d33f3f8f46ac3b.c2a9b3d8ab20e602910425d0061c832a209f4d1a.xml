{"nodes":[{"pos":[32,86],"content":"Retail Store Scale Unit configuration and installation","needQuote":true,"needEscape":true,"nodes":[{"content":"Retail Store Scale Unit configuration and installation","pos":[0,54]}]},{"pos":[100,755],"content":"This topic explains how you can use self-service to configure Retail Store Scale Unit in Microsoft Dynamics 365 for Operations headquarters, download it, and install it on one or more computers in a brick-and-mortar store. Retail Store Scale Unit combines the Retail channel database, Retail Async Client, Retail Server, and Retail Cloud POS components. A Dynamics 365 for Operations environment already provides these components, but you can now configure them to work locally in a store, in either a single-computer setup (the default option) or a multi-computer setup. This topic also explains how to uninstall and troubleshoot Retail Store Scale Unit.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic explains how you can use self-service to configure Retail Store Scale Unit in Microsoft Dynamics 365 for Operations headquarters, download it, and install it on one or more computers in a brick-and-mortar store. Retail Store Scale Unit combines the Retail channel database, Retail Async Client, Retail Server, and Retail Cloud POS components. A Dynamics 365 for Operations environment already provides these components, but you can now configure them to work locally in a store, in either a single-computer setup (the default option) or a multi-computer setup. This topic also explains how to uninstall and troubleshoot Retail Store Scale Unit.","pos":[0,655],"nodes":[{"content":"This topic explains how you can use self-service to configure Retail Store Scale Unit in Microsoft Dynamics 365 for Operations headquarters, download it, and install it on one or more computers in a brick-and-mortar store.","pos":[0,222]},{"content":"Retail Store Scale Unit combines the Retail channel database, Retail Async Client, Retail Server, and Retail Cloud POS components.","pos":[223,353]},{"content":"A Dynamics 365 for Operations environment already provides these components, but you can now configure them to work locally in a store, in either a single-computer setup (the default option) or a multi-computer setup.","pos":[354,571]},{"content":"This topic also explains how to uninstall and troubleshoot Retail Store Scale Unit.","pos":[572,655]}]}]},{"pos":[1251,1305],"content":"Retail Store Scale Unit configuration and installation","linkify":"Retail Store Scale Unit configuration and installation","nodes":[{"content":"Retail Store Scale Unit configuration and installation","pos":[0,54]}]},{"content":"This topic explains how you can use self-service to configure Retail Store Scale Unit in Microsoft Dynamics 365 for Operations headquarters, download it, and install it on one or more computers in a brick-and-mortar store.","pos":[1307,1529]},{"content":"Retail Store Scale Unit combines the Retail channel database, Retail Async Client, Retail Server, and Retail Cloud POS components.","pos":[1530,1660]},{"content":"A Dynamics 365 for Operations environment already provides these components, but you can now configure them to work locally in a store, in either a single-computer setup (the default option) or a multi-computer setup.","pos":[1661,1878]},{"content":"This topic also explains how to uninstall and troubleshoot Retail Store Scale Unit.","pos":[1879,1962]},{"pos":[1964,1980],"content":"Before you begin","linkify":"Before you begin","nodes":[{"content":"Before you begin","pos":[0,16]}]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> To help maintain a high level of security across the company, we strongly recommend that you create a new client ID and secret for each retail store that is created.","pos":[1999,2179],"source":"**Important:** To help maintain a high level of security across the company, we strongly recommend that you create a new client ID and secret for each retail store that is created."},{"content":"This step requires a new Web App.","pos":[2180,2213]},{"content":"Generate a Microsoft Azure Web App to create a client ID and secret.","pos":[2219,2287]},{"content":"For instructions, see the \"Basics of Registering an Application in Azure AD\" section in <bpt id=\"p1\">[</bpt>Authentication Scenarios for Azure AD<ept id=\"p1\">](https://azure.microsoft.com/en-us/documentation/articles/active-directory-authentication-scenarios/)</ept>.","pos":[2288,2517],"source":" For instructions, see the \"Basics of Registering an Application in Azure AD\" section in [Authentication Scenarios for Azure AD](https://azure.microsoft.com/en-us/documentation/articles/active-directory-authentication-scenarios/)."},{"content":"After a client ID and secret are created for Retail Store Scale Unit, the client ID must be accepted in Microsoft Dynamics 365 for Operations.","pos":[2522,2664]},{"content":"Go to <bpt id=\"p1\">**</bpt>System administration<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Azure Active Directory applications<ept id=\"p3\">**</ept>.","pos":[2665,2757],"source":" Go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**."},{"content":"Enter the client ID in the <bpt id=\"p1\">**</bpt>Client ID<ept id=\"p1\">**</ept> column, enter descriptive text in the <bpt id=\"p2\">**</bpt>Name<ept id=\"p2\">**</ept> column, and enter <bpt id=\"p3\">**</bpt>RetailServiceAccount<ept id=\"p3\">**</ept> in the <bpt id=\"p4\">**</bpt>User ID<ept id=\"p4\">**</ept> column.","pos":[2758,2915],"source":" Enter the client ID in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column."},{"pos":[2920,2959],"content":"Configure a new Retail Store Scale Unit","linkify":"Configure a new Retail Store Scale Unit","nodes":[{"content":"Configure a new Retail Store Scale Unit","pos":[0,39]}]},{"content":"To create a functioning Retail Store Scale Unit, complete the procedures in all sections of this topic through the \"Running the Retail Store Scale Unit installer\" section.","pos":[2960,3131]},{"content":"Use Azure Active Directory (Azure AD) credentials to sign in to the Microsoft Dynamics 365 for Operations headquarters or Dynamics 365 for Operations trial.","pos":[3137,3293]},{"pos":[3298,3467],"content":"On the <bpt id=\"p1\">**</bpt>Welcome<ept id=\"p1\">**</ept> page, use the menu in the upper left to go to <bpt id=\"p2\">**</bpt>Retail and commerce<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Headquarters setup<ept id=\"p3\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Retail scheduler<ept id=\"p4\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p5\">**</bpt>Channel database<ept id=\"p5\">**</ept>.","source":"On the **Welcome** page, use the menu in the upper left to go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**."},{"pos":[3472,3541],"content":"On the <bpt id=\"p1\">**</bpt>Channel database<ept id=\"p1\">**</ept> page, on the Action Pane, select <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>.","source":"On the **Channel database** page, on the Action Pane, select **New**."},{"pos":[3546,3605],"content":"In the <bpt id=\"p1\">**</bpt>Channel database ID<ept id=\"p1\">**</ept> field, enter a unique value.","source":"In the **Channel database ID** field, enter a unique value."},{"content":"In the <bpt id=\"p1\">**</bpt>Channel data group<ept id=\"p1\">**</ept> field, select the <bpt id=\"p2\">**</bpt>Default<ept id=\"p2\">**</ept> option.","pos":[3610,3677],"source":"In the **Channel data group** field, select the **Default** option."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> You can select any other option that you've already created.","pos":[3678,3748],"source":"**Note:** You can select any other option that you've already created."},{"pos":[3753,3832],"content":"In the <bpt id=\"p1\">**</bpt>Type<ept id=\"p1\">**</ept> field, leave the default value (<bpt id=\"p2\">**</bpt>Channel database<ept id=\"p2\">**</ept>) selected.","source":"In the **Type** field, leave the default value (**Channel database**) selected."},{"content":"You can leave the <bpt id=\"p1\">**</bpt>Data sync interval<ept id=\"p1\">**</ept> field blank.","pos":[3837,3890],"source":"You can leave the **Data sync interval** field blank."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Alternatively, you can select a value in this field.","pos":[3891,3953],"source":"**Note:** Alternatively, you can select a value in this field."},{"content":"For example, in the demo data, the value <bpt id=\"p1\">**</bpt>D60-U15<ept id=\"p1\">**</ept> specifies a 15-minute synchronization interval.","pos":[3954,4054],"source":" For example, in the demo data, the value **D60-U15** specifies a 15-minute synchronization interval."},{"content":"On the <bpt id=\"p1\">**</bpt>Retail channel<ept id=\"p1\">**</ept> FastTab, select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>, and then, in the <bpt id=\"p3\">**</bpt>Channel<ept id=\"p3\">**</ept> field, select the appropriate Retail store channel.","pos":[4059,4190],"source":"On the **Retail channel** FastTab, select **Add**, and then, in the **Channel** field, select the appropriate Retail store channel."},{"content":"Repeat this step to add all the channels that use this database.","pos":[4191,4255]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> You can also add channels that don't use this database.","pos":[4256,4321],"source":"**Note:** You can also add channels that don't use this database."},{"content":"In this way, you keep the data for those channels in the Store Scale Unit channel database.","pos":[4322,4413]},{"content":"The Retail store channels that actively use this database can then access that data locally.","pos":[4414,4506]},{"content":"On the <bpt id=\"p1\">**</bpt>Store Scale Unit package<ept id=\"p1\">**</ept> FastTab, in the <bpt id=\"p2\">**</bpt>Name<ept id=\"p2\">**</ept> field, select the appropriate store Scale Unit package.","pos":[4511,4627],"source":"On the **Store Scale Unit package** FastTab, in the **Name** field, select the appropriate store Scale Unit package."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Each environment generates a base Store Scale Unit package.","pos":[4628,4697],"source":"**Note:** Each environment generates a base Store Scale Unit package."},{"content":"Therefore, this field always contains at least one option.","pos":[4698,4756]},{"pos":[4761,4797],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **Save**."},{"pos":[4802,4881],"content":"Go to <bpt id=\"p1\">**</bpt>Retail and commerce<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Channel setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Channel profiles<ept id=\"p3\">**</ept>.","source":"Go to **Retail and commerce** &gt; **Channel setup** &gt; **Channel profiles**."},{"pos":[4886,4921],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>New<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **New**."},{"pos":[4926,4993],"content":"In the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> field, enter a unique name for the channel profile.","source":"In the **Name** field, enter a unique name for the channel profile."},{"pos":[4998,5034],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **Save**."},{"pos":[5039,5121],"content":"On the <bpt id=\"p1\">**</bpt>Profile properties<ept id=\"p1\">**</ept> FastTab for the new channel profile, select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>.","source":"On the **Profile properties** FastTab for the new channel profile, select **Add**."},{"pos":[5126,5186],"content":"In the <bpt id=\"p1\">**</bpt>Property key<ept id=\"p1\">**</ept> field, select <bpt id=\"p2\">**</bpt>Retail server URL<ept id=\"p2\">**</ept>.","source":"In the **Property key** field, select **Retail server URL**."},{"content":"In the <bpt id=\"p1\">**</bpt>Property value<ept id=\"p1\">**</ept> field, enter the URL for the Store Scale Unit Retail Server that will be installed.","pos":[5191,5300],"source":"In the **Property value** field, enter the URL for the Store Scale Unit Retail Server that will be installed."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The standard format for the URL of an on-premises store installation of Store Scale Unit is <bpt id=\"p2\">**</bpt>https://<ph id=\"ph1\">&amp;lt;</ph>Computer Name<ph id=\"ph2\">&amp;gt;</ph>:<ph id=\"ph3\">&amp;lt;</ph>Port<ph id=\"ph4\">&amp;gt;</ph>/RetailServer/Commerce<ept id=\"p2\">**</ept>.","pos":[5301,5472],"source":"**Note:** The standard format for the URL of an on-premises store installation of Store Scale Unit is **https://&lt;Computer Name&gt;:&lt;Port&gt;/RetailServer/Commerce**."},{"content":"In this format, <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&amp;lt;</ph>Computer Name<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">**</ept> is the fully qualified domain name (FQDN) of the computer where Store Scale Unit is installed or the full computer name, for systems that aren't joined to a domain, and <bpt id=\"p2\">**</bpt><ph id=\"ph3\">&amp;lt;</ph>Port<ph id=\"ph4\">&amp;gt;</ph><ept id=\"p2\">**</ept> is the port number that will be used in the installation.","pos":[5473,5758],"source":" In this format, **&lt;Computer Name&gt;** is the fully qualified domain name (FQDN) of the computer where Store Scale Unit is installed or the full computer name, for systems that aren't joined to a domain, and **&lt;Port&gt;** is the port number that will be used in the installation."},{"content":"The port number must be a value between 1 and 65535.","pos":[5759,5811]},{"content":"If you're using the default HTTPS port (443), you don't have to specify the port number.","pos":[5812,5900]},{"pos":[5905,5987],"content":"On the <bpt id=\"p1\">**</bpt>Profile properties<ept id=\"p1\">**</ept> FastTab for the new channel profile, select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>.","source":"On the **Profile properties** FastTab for the new channel profile, select **Add**."},{"pos":[5992,6048],"content":"In the <bpt id=\"p1\">**</bpt>Property key<ept id=\"p1\">**</ept> field, select <bpt id=\"p2\">**</bpt>Cloud POS URL<ept id=\"p2\">**</ept>.","source":"In the **Property key** field, select **Cloud POS URL**."},{"content":"In the <bpt id=\"p1\">**</bpt>Property value<ept id=\"p1\">**</ept> field, enter the URL for the Store Scale Unit Retail Server that will be installed.","pos":[6053,6162],"source":"In the **Property value** field, enter the URL for the Store Scale Unit Retail Server that will be installed."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The standard format for the URL of an on-premises store installation of Store Scale Unit is <bpt id=\"p2\">**</bpt>https://<ph id=\"ph1\">&amp;lt;</ph>Computer Name<ph id=\"ph2\">&amp;gt;</ph>:<ph id=\"ph3\">&amp;lt;</ph>Port<ph id=\"ph4\">&amp;gt;</ph>/POS<ept id=\"p2\">**</ept>.","pos":[6163,6316],"source":"**Note:** The standard format for the URL of an on-premises store installation of Store Scale Unit is **https://&lt;Computer Name&gt;:&lt;Port&gt;/POS**."},{"content":"In this format, <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&amp;lt;</ph>Computer Name<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">**</ept> is the FQDN of the computer where Store Scale Unit is installed or the full computer name for systems that aren't joined to a domain, and <bpt id=\"p2\">**</bpt><ph id=\"ph3\">&amp;lt;</ph>Port<ph id=\"ph4\">&amp;gt;</ph><ept id=\"p2\">**</ept> is the port number that will be used in the installation.","pos":[6317,6571],"source":" In this format, **&lt;Computer Name&gt;** is the FQDN of the computer where Store Scale Unit is installed or the full computer name for systems that aren't joined to a domain, and **&lt;Port&gt;** is the port number that will be used in the installation."},{"content":"The port number must be a value between 1 and 65535.","pos":[6572,6624]},{"content":"If you're using the default HTTPS port (443), you don't have to specify the port number.","pos":[6625,6713]},{"pos":[6718,6754],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **Save**."},{"pos":[6759,6857],"content":"Go to <bpt id=\"p1\">**</bpt>Retail and commerce<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Channels<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Retail stores<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>All retail stores<ept id=\"p4\">**</ept>.","source":"Go to **Retail and commerce** &gt; **Channels** &gt; **Retail stores** &gt; **All retail stores**."},{"content":"Select the Retail channel ID for the retail store that will use the new channel database.","pos":[6862,6951]},{"pos":[6956,7036],"content":"On the details page for the selected store, on the Action Pane, select <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept>.","source":"On the details page for the selected store, on the Action Pane, select **Edit**."},{"pos":[7041,7178],"content":"On the <bpt id=\"p1\">**</bpt>General<ept id=\"p1\">**</ept> FastTab for the store, in the <bpt id=\"p2\">**</bpt>Live channel database<ept id=\"p2\">**</ept> field, select the channel database that you created in step 4.","source":"On the **General** FastTab for the store, in the **Live channel database** field, select the channel database that you created in step 4."},{"pos":[7183,7219],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **Save**."},{"pos":[7224,7355],"content":"On the <bpt id=\"p1\">**</bpt>General<ept id=\"p1\">**</ept> FastTab for the store, in the <bpt id=\"p2\">**</bpt>Channel profile<ept id=\"p2\">**</ept> field, select the channel profile that you created in step 13.","source":"On the **General** FastTab for the store, in the **Channel profile** field, select the channel profile that you created in step 13."},{"pos":[7360,7472],"content":"Go to <bpt id=\"p1\">**</bpt>Retail and commerce<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Headquarters setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Retail scheduler<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Channel data group<ept id=\"p4\">**</ept>.","source":"Go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel data group**."},{"content":"Select the <bpt id=\"p1\">**</bpt>Default<ept id=\"p1\">**</ept> data group, and then, on the Action Pane, select <bpt id=\"p2\">**</bpt>Full data sync<ept id=\"p2\">**</ept>.","pos":[7477,7568],"source":"Select the **Default** data group, and then, on the Action Pane, select **Full data sync**."},{"content":"In the <bpt id=\"p1\">**</bpt>Select a distribution schedule<ept id=\"p1\">**</ept> field, select job <bpt id=\"p2\">**</bpt>9999<ept id=\"p2\">**</ept>, and then select <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.","pos":[7569,7662],"source":" In the **Select a distribution schedule** field, select job **9999**, and then select **OK**."},{"content":"In the dialog box that appears, select <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to confirm the full synchronization.","pos":[7663,7745],"source":" In the dialog box that appears, select **OK** to confirm the full synchronization."},{"content":"All the data in the channel database is prepared for download.","pos":[7746,7808]},{"pos":[7814,7860],"content":"Download the Retail Store Scale Unit installer","linkify":"Download the Retail Store Scale Unit installer","nodes":[{"content":"Download the Retail Store Scale Unit installer","pos":[0,46]}]},{"content":"Use Azure AD credentials to sign in to the Microsoft Dynamics Commerce or Dynamics 365 for Operations trial.","pos":[7866,7974]},{"pos":[7979,8148],"content":"On the <bpt id=\"p1\">**</bpt>Welcome<ept id=\"p1\">**</ept> page, use the menu in the upper left to go to <bpt id=\"p2\">**</bpt>Retail and commerce<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Headquarters setup<ept id=\"p3\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Retail scheduler<ept id=\"p4\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p5\">**</bpt>Channel database<ept id=\"p5\">**</ept>.","source":"On the **Welcome** page, use the menu in the upper left to go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**."},{"content":"In the list of channel databases on the left, select the channel database that you created earlier.","pos":[8153,8252]},{"pos":[8257,8297],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Download<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **Download**."},{"content":"On the drop-down menu, select <bpt id=\"p1\">**</bpt>Configuration file<ept id=\"p1\">**</ept>.","pos":[8302,8355],"source":"On the drop-down menu, select **Configuration file**."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> To help guarantee that the Retail Store Scale Unit installer correctly uses the configuration file (XML file), you must save the configuration file to the same location as the installer.","pos":[8356,8552],"source":"**Note:** To help guarantee that the Retail Store Scale Unit installer correctly uses the configuration file (XML file), you must save the configuration file to the same location as the installer."},{"content":"On the Notification bar that appears at the bottom of the Internet Explorer window, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","pos":[8557,8657],"source":"On the Notification bar that appears at the bottom of the Internet Explorer window, select **Save**."},{"content":"(The Notification bar might appear in a different place in other browsers.) <bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Browsers might block the download pop-up that is generated.","pos":[8658,8803],"source":" (The Notification bar might appear in a different place in other browsers.) **Note:** Browsers might block the download pop-up that is generated."},{"content":"Select either <bpt id=\"p1\">**</bpt>Allow once<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Options for this site<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Always allow<ept id=\"p3\">**</ept>.","pos":[8804,8884],"source":" Select either **Allow once** or **Options for this site** &gt; **Always allow**."},{"content":"Then select <bpt id=\"p1\">**</bpt>Download<ept id=\"p1\">**</ept> again.","pos":[8885,8916],"source":" Then select **Download** again."},{"pos":[8921,8961],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Download<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **Download**."},{"pos":[8966,9032],"content":"On the drop-down menu, select <bpt id=\"p1\">**</bpt>Retail Store Scale Unit package<ept id=\"p1\">**</ept>.","source":"On the drop-down menu, select **Retail Store Scale Unit package**."},{"content":"On the Notification bar that appears at the bottom of the Internet Explorer window, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","pos":[9037,9137],"source":"On the Notification bar that appears at the bottom of the Internet Explorer window, select **Save**."},{"content":"(The Notification bar might appear in a different place in other browsers.) <bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The correct installation package is automatically selected for download, based on the Retail Store Scale Unit package on the selected channel database.","pos":[9138,9375],"source":" (The Notification bar might appear in a different place in other browsers.) **Note:** The correct installation package is automatically selected for download, based on the Retail Store Scale Unit package on the selected channel database."},{"content":"After the setup installer has been saved, on the Notification bar, select <bpt id=\"p1\">**</bpt>Run<ept id=\"p1\">**</ept>.","pos":[9380,9462],"source":"After the setup installer has been saved, on the Notification bar, select **Run**."},{"content":"(This step might differ, depending on the type of browser.)","pos":[9463,9522]},{"pos":[9528,9573],"content":"Running the Retail Store Scale Unit installer","linkify":"Running the Retail Store Scale Unit installer","nodes":[{"content":"Running the Retail Store Scale Unit installer","pos":[0,45]}]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If you will install and use Retail Cloud POS, you must initialize the configuration the first time that you run the installer, as described in the procedure.","pos":[9575,9742],"source":"**Note:** If you will install and use Retail Cloud POS, you must initialize the configuration the first time that you run the installer, as described in the procedure."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Before you run the Retail Store Scale Unit installer, make sure that the following requirements are met:","pos":[9743,9857],"source":"**Note:** Before you run the Retail Store Scale Unit installer, make sure that the following requirements are met:"},{"content":"The installer requires that the Microsoft .NET Framework version 4.5.1 be installed on the system.","pos":[9863,9961]},{"content":"The installer installs the Retail Store Scale Unit components only on the following operating systems.","pos":[9966,10068]},{"content":"Before you install any component, you must update the operating system with all service packs and updates that are available for it.","pos":[10069,10201]},{"content":"Windows 7 Professional, Enterprise, or Ultimate edition (both x86 and x64 architectures).","pos":[10210,10299]},{"content":"Home edition and Embedded edition aren’t supported.","pos":[10300,10351]},{"content":"Windows 8.1 Update 1 Pro or Enterprise edition (both x86 and x64 architectures).","pos":[10360,10440]},{"content":"Standard edition isn’t supported.","pos":[10441,10474]},{"content":"Windows 10 Pro or Enterprise edition (both x86 and x64 architectures).","pos":[10483,10553]},{"content":"Home edition isn’t supported.","pos":[10554,10583]},{"content":"Microsoft Windows Server 2012 or Microsoft Windows Server 2012 R2.","pos":[10592,10658]},{"content":"The Retail Store Scale Unit installer first extracts the associated files.","pos":[10660,10734]},{"content":"It then begins the installation.","pos":[10735,10767]},{"content":"On the first page of the installer, you select the components to install.","pos":[10773,10846]},{"content":"You can install the following components:","pos":[10847,10888]},{"content":"Retail channel database with Async Client","pos":[10897,10938]},{"content":"Retail Server","pos":[10947,10960]},{"content":"Retail Cloud POS <bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> To install Retail Cloud POS, you must also select and install Retail Server.","pos":[10969,11072],"source":"Retail Cloud POS **Note:** To install Retail Cloud POS, you must also select and install Retail Server."},{"content":"If you will use only Retail Modern POS in the store, clear the Retail Cloud POS check box, and continue with installation as it's described here.","pos":[11073,11218]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> By default, the installer installs all components on one computer.","pos":[11224,11300],"source":"**Note:** By default, the installer installs all components on one computer."},{"content":"To install the components across multiple computers, you must complete additional manual steps.","pos":[11301,11396]},{"content":"For more information, see the \"Multi-box installation\" section.","pos":[11397,11460]},{"content":"After you've selected all the components to install, select <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> to continue.","pos":[11461,11542],"source":" After you've selected all the components to install, select **Next** to continue."},{"content":"The installer validates that all prerequisites are met.","pos":[11547,11602]},{"content":"If a valid version of Microsoft SQL Server isn’t found, the installer downloads and installs Microsoft SQL Server 2014 Express with Service Pack 2.","pos":[11603,11750]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> To meet prerequisites, SQL Server must have Full-text search and, at a minimum, support for Transport Layer Security (TLS) 1.2.","pos":[11751,11888],"source":"**Note:** To meet prerequisites, SQL Server must have Full-text search and, at a minimum, support for Transport Layer Security (TLS) 1.2."},{"content":"For Microsoft SQL Server 2012, Service Pack 3 must be installed, at a minimum.","pos":[11889,11967]},{"content":"For Microsoft SQL Server 2014, Service Pack 2 must be installed.","pos":[11968,12032]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If a system restart is required, the installer shows this requirement.","pos":[12033,12113],"source":"**Note:** If a system restart is required, the installer shows this requirement."},{"content":"Although the restart is recommended, the installer can continue without it.","pos":[12114,12189]},{"content":"Verify the Application Object Server (AOS) URL (the URL that is used to access Dynamics 365 for Operations headquarters), and then select <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.","pos":[12194,12341],"source":"Verify the Application Object Server (AOS) URL (the URL that is used to access Dynamics 365 for Operations headquarters), and then select **Next**."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The Retail Server URL is automatically entered from the configuration file.","pos":[12342,12427],"source":"**Note:** The Retail Server URL is automatically entered from the configuration file."},{"content":"Select a valid Secure Sockets Layer (SSL) certificate to use for HTTPS communication.","pos":[12432,12517]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The certificate must use private key storage, and server authentication must be listed in the enhanced key usage property.","pos":[12518,12650],"source":"**Note:** The certificate must use private key storage, and server authentication must be listed in the enhanced key usage property."},{"content":"Additionally, the certificate must be trusted locally, and it can’t be expired.","pos":[12651,12730]},{"content":"It must be stored in the personal certificate store location on the local computer.","pos":[12731,12814]},{"content":"If a specific user is required, enter the user name and password that the application pool will run under.","pos":[12819,12925]},{"content":"By default, the installer automatically generates a service account to use.","pos":[12926,13001]},{"content":"This approach is more secure and is recommended.","pos":[13002,13050]},{"content":"On the next page, you enter the user account and password for the Retail Server application pool and the Async Client.","pos":[13055,13173]},{"content":"By default, this account is automatically generated.","pos":[13174,13226]},{"content":"However, you can enter the user account and password manually.","pos":[13227,13289]},{"content":"Enter the HTTPS port to use, and verify that the host name of the computer is correct.","pos":[13294,13380]},{"content":"Select <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> to continue.","pos":[13381,13409],"source":" Select **Next** to continue."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The HTTPS port is listed in the Store system profile.","pos":[13410,13473],"source":"**Note:** The HTTPS port is listed in the Store system profile."},{"content":"To access the Store system profile, on the <bpt id=\"p1\">**</bpt>Retail store details<ept id=\"p1\">**</ept> page, on the <bpt id=\"p2\">**</bpt>Store systems<ept id=\"p2\">**</ept> FastTab, select the profile ID of the selected Store system.","pos":[13474,13633],"source":" To access the Store system profile, on the **Retail store details** page, on the **Store systems** FastTab, select the profile ID of the selected Store system."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The installer automatically enters the host name.","pos":[13634,13693],"source":"**Note:** The installer automatically enters the host name."},{"content":"If, for any reason, the host name must be changed for the installation, change it here.","pos":[13694,13781]},{"content":"The host name must be the FQDN of the system, and it must be entered in the <bpt id=\"p1\">**</bpt>Host name<ept id=\"p1\">**</ept> field for the selected Store system entry.","pos":[13782,13914],"source":" The host name must be the FQDN of the system, and it must be entered in the **Host name** field for the selected Store system entry."},{"content":"Enter the client ID and secret that are associated with this Retail Store Scale Unit installation.","pos":[13919,14017]},{"content":"Additionally, verify the channel database ID, which is automatically entered from the configuration file.","pos":[14018,14123]},{"content":"Then select <bpt id=\"p1\">**</bpt>Install<ept id=\"p1\">**</ept>.","pos":[14124,14148],"source":" Then select **Install**."},{"content":"If you will use Retail Cloud POS, make sure that the <bpt id=\"p1\">**</bpt>Configure Retail Cloud POS<ept id=\"p1\">**</ept> check box at the bottom of this page is selected.","pos":[14149,14282],"source":" If you will use Retail Cloud POS, make sure that the **Configure Retail Cloud POS** check box at the bottom of this page is selected."},{"content":"This configuration requests Azure AD sign-in and automatically generates all required information in Azure so that Retail Cloud POS can be used on-premises.","pos":[14283,14439]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> For information about how to correctly generate an Azure Web App to create a client ID and secret, see the \"Basics of Registering an Application in Azure AD\" section in <bpt id=\"p2\">[</bpt>Authentication Scenarios for Azure AD<ept id=\"p2\">](https://azure.microsoft.com/en-us/documentation/articles/active-directory-authentication-scenarios/)</ept>.","pos":[14440,14760],"source":"**Note:** For information about how to correctly generate an Azure Web App to create a client ID and secret, see the \"Basics of Registering an Application in Azure AD\" section in [Authentication Scenarios for Azure AD](https://azure.microsoft.com/en-us/documentation/articles/active-directory-authentication-scenarios/)."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> When you create the Web App, the initial URI and URL don't have to be any specific value.","pos":[14761,14860],"source":"**Note:** When you create the Web App, the initial URI and URL don't have to be any specific value."},{"content":"Only the client ID and secret that are created are important.","pos":[14861,14922]},{"content":"After a client ID and secret are created for Retail Store Scale Unit, the client ID must be accepted in Dynamics 365 for Operations.","pos":[14927,15059]},{"content":"Go to <bpt id=\"p1\">**</bpt>System administration<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Azure Active Directory applications<ept id=\"p3\">**</ept>.","pos":[15060,15152],"source":" Go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**."},{"content":"Enter the client ID in the <bpt id=\"p1\">**</bpt>Client ID<ept id=\"p1\">**</ept> column, enter descriptive text in the <bpt id=\"p2\">**</bpt>Name<ept id=\"p2\">**</ept> column, and enter <bpt id=\"p3\">**</bpt>RetailServiceAccount<ept id=\"p3\">**</ept> in the <bpt id=\"p4\">**</bpt>User ID<ept id=\"p4\">**</ept> column.","pos":[15153,15310],"source":" Enter the client ID in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column."},{"content":"After the installation is completed, the final health page appears.","pos":[15315,15382]},{"content":"This page shows whether the installation was successful.","pos":[15383,15439]},{"content":"It also shows the health of each component, based on basic connection tests, and the location of this topic.","pos":[15440,15548]},{"content":"If the installation wasn't successful, the page shows the location of the log files.","pos":[15549,15633]},{"content":"If Retail Cloud POS is configured for use, a client ID is shown.","pos":[15638,15702]},{"content":"You must add this client ID to the <bpt id=\"p1\">**</bpt>Retail shared parameters<ept id=\"p1\">**</ept> page in Dynamics 365 for Operations.","pos":[15703,15803],"source":" You must add this client ID to the **Retail shared parameters** page in Dynamics 365 for Operations."},{"pos":[15812,15956],"content":"In Dynamics 365 for Operations, go to <bpt id=\"p1\">**</bpt>Retail and commerce<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Headquarters setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Parameters<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Retail shared parameters<ept id=\"p4\">**</ept>.","source":"In Dynamics 365 for Operations, go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Parameters** &gt; **Retail shared parameters**."},{"pos":[15965,15995],"content":"Select <bpt id=\"p1\">**</bpt>Identity providers<ept id=\"p1\">**</ept>.","source":"Select **Identity providers**."},{"content":"On the <bpt id=\"p1\">**</bpt>Identity providers<ept id=\"p1\">**</ept> FastTab, select the provider that begins with <bpt id=\"p2\">**</bpt>HTTPS://sts.windows.net/<ept id=\"p2\">**</ept>.","pos":[16004,16109],"source":"On the **Identity providers** FastTab, select the provider that begins with **HTTPS://sts.windows.net/**."},{"content":"The values on the <bpt id=\"p1\">**</bpt>Relying parties<ept id=\"p1\">**</ept> FastTab are set, based on your selection.","pos":[16110,16189],"source":" The values on the **Relying parties** FastTab are set, based on your selection."},{"content":"On the <bpt id=\"p1\">**</bpt>Relying parties<ept id=\"p1\">**</ept> FastTab, select <bpt id=\"p2\">**</bpt>+Add<ept id=\"p2\">**</ept>.","pos":[16198,16250],"source":"On the **Relying parties** FastTab, select **+Add**."},{"content":"Enter the client ID that is listed in the Retail Store Scale Unit installer.","pos":[16251,16327]},{"content":"Set the <bpt id=\"p1\">**</bpt>Type<ept id=\"p1\">**</ept> field to <bpt id=\"p2\">**</bpt>Public<ept id=\"p2\">**</ept> and the <bpt id=\"p3\">**</bpt>UserType<ept id=\"p3\">**</ept> field to <bpt id=\"p4\">**</bpt>Worker<ept id=\"p4\">**</ept>.","pos":[16328,16406],"source":" Set the **Type** field to **Public** and the **UserType** field to **Worker**."},{"content":"Then, on the Action Pane, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","pos":[16407,16449],"source":" Then, on the Action Pane, select **Save**."},{"content":"Select the new relying party, and then, on the <bpt id=\"p1\">**</bpt>Server resource IDs<ept id=\"p1\">**</ept> FastTab, select <bpt id=\"p2\">**</bpt>+Add<ept id=\"p2\">**</ept>.","pos":[16458,16554],"source":"Select the new relying party, and then, on the **Server resource IDs** FastTab, select **+Add**."},{"content":"In the <bpt id=\"p1\">**</bpt>Server Resource ID<ept id=\"p1\">**</ept> column, enter <bpt id=\"p2\">**</bpt>https://retailstorescaleunit.retailserver.com<ept id=\"p2\">**</ept>.","pos":[16555,16649],"source":" In the **Server Resource ID** column, enter **https://retailstorescaleunit.retailserver.com**."},{"pos":[16658,16694],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **Save**."},{"content":"When you've finished, select <bpt id=\"p1\">**</bpt>Finish<ept id=\"p1\">**</ept>.","pos":[16700,16740],"source":"When you've finished, select **Finish**."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If the installer doesn't show a check mark for Retail Server, Async Client, or any other component, wait 10 minutes, so that any cached values can be updated in the cloud.","pos":[16741,16922],"source":"**Note:** If the installer doesn't show a check mark for Retail Server, Async Client, or any other component, wait 10 minutes, so that any cached values can be updated in the cloud."},{"content":"Then check again.","pos":[16923,16940]},{"content":"If the installer still isn't fully successful, run a full synchronization on the new channel database that this installation uses.","pos":[16941,17071]},{"pos":[17077,17099],"content":"Multi-box installation","linkify":"Multi-box installation","nodes":[{"content":"Multi-box installation","pos":[0,22]}]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Only advanced users should install Retail Store Scale Unit across multiple computers.","pos":[17101,17196],"source":"**Note:** Only advanced users should install Retail Store Scale Unit across multiple computers."},{"content":"The following procedures show how to install the Retail channel database and Async Client on one computer, and the Retail Server and Retail Cloud POS on a second computer.","pos":[17197,17368]},{"content":"The instructions assume that both systems are on a domain together, and that users have already been created on both systems for the services that will be installed.","pos":[17369,17534]},{"content":"It's important that you perform all configuration in Dynamics 365 for Operations headquarters.","pos":[17535,17629]},{"pos":[17636,17670],"content":"Installation on the first computer","linkify":"Installation on the first computer","nodes":[{"content":"Installation on the first computer","pos":[0,34]}]},{"content":"On the first computer, run the Retail Store Scale Unit self-service installer as described earlier in this topic, but make the following changes.","pos":[17672,17817]},{"content":"Select only Retail Channel Database and Async Client as the components to install.","pos":[17823,17905]},{"content":"Select <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> to continue with the installation.","pos":[17906,17956],"source":" Select **Next** to continue with the installation."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> You can use a generated service account for the Async Client, because the Async Client won't be accessed outside the computer that it's installed on.","pos":[17957,18116],"source":"**Note:** You can use a generated service account for the Async Client, because the Async Client won't be accessed outside the computer that it's installed on."},{"content":"Enter the client ID and secret.","pos":[18121,18152]},{"content":"Keep these details available, so that you can use them again on the second computer.","pos":[18153,18237]},{"content":"After a client ID and secret are created for Retail Store Scale Unit, the client ID must be accepted in Dynamics 365 for Operations.","pos":[18242,18374]},{"content":"Go to <bpt id=\"p1\">**</bpt>System administration<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Azure Active Directory applications<ept id=\"p3\">**</ept>.","pos":[18375,18467],"source":" Go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**."},{"content":"Enter the client ID in the <bpt id=\"p1\">**</bpt>Client ID<ept id=\"p1\">**</ept> column, enter descriptive text in the <bpt id=\"p2\">**</bpt>Name<ept id=\"p2\">**</ept> column, and enter <bpt id=\"p3\">**</bpt>RetailServiceAccount<ept id=\"p3\">**</ept> in the <bpt id=\"p4\">**</bpt>User ID<ept id=\"p4\">**</ept> column.","pos":[18468,18625],"source":" Enter the client ID in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column."},{"content":"When setup is successful, start SQL Server Configuration Manager.","pos":[18630,18695]},{"pos":[18700,18790],"content":"Go to <bpt id=\"p1\">**</bpt>SQL Server Network Configuration<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Protocols<ept id=\"p2\">**</ept> for the SQL Server instance.","source":"Go to **SQL Server Network Configuration** &gt; **Protocols** for the SQL Server instance."},{"pos":[18795,18839],"content":"Right-click, and then select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","source":"Right-click, and then select **Properties**."},{"pos":[18844,18926],"content":"In the <bpt id=\"p1\">**</bpt>Flags<ept id=\"p1\">**</ept> section, change the value of <bpt id=\"p2\">**</bpt>Set Force Encryption<ept id=\"p2\">**</ept> to <bpt id=\"p3\">**</bpt>Yes<ept id=\"p3\">**</ept>.","source":"In the **Flags** section, change the value of **Set Force Encryption** to **Yes**."},{"content":"In the <bpt id=\"p1\">**</bpt>Certificate<ept id=\"p1\">**</ept> section, select the SSL certificate on the drop-down menu.","pos":[18931,19012],"source":"In the **Certificate** section, select the SSL certificate on the drop-down menu."},{"content":"This SQL Server SSL certificate is the same certificate that is used in the installer.","pos":[19013,19099]},{"pos":[19104,19118],"content":"Select <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","source":"Select **OK**."},{"pos":[19123,19220],"content":"Go back to <bpt id=\"p1\">**</bpt>Protocols<ept id=\"p1\">**</ept> in SQL Server Configuration Manager, and enable the following protocols:","source":"Go back to **Protocols** in SQL Server Configuration Manager, and enable the following protocols:"},{"content":"Named Pipes","pos":[19229,19240]},{"content":"TCP/IP","pos":[19249,19255]},{"pos":[19261,19329],"content":"Right-click the <bpt id=\"p1\">**</bpt>TCP/IP<ept id=\"p1\">**</ept> protocol, and then select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","source":"Right-click the **TCP/IP** protocol, and then select **Properties**."},{"pos":[19334,19399],"content":"In the <bpt id=\"p1\">**</bpt>IP Address<ept id=\"p1\">**</ept> section, scroll down the list to <bpt id=\"p2\">**</bpt>IPALL<ept id=\"p2\">**</ept>.","source":"In the **IP Address** section, scroll down the list to **IPALL**."},{"pos":[19404,19429],"content":"Enter <bpt id=\"p1\">**</bpt>TCPPort = 1433<ept id=\"p1\">**</ept>.","source":"Enter **TCPPort = 1433**."},{"pos":[19434,19448],"content":"Select <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","source":"Select **OK**."},{"content":"Start Windows Firewall with Advanced Security.","pos":[19453,19499]},{"content":"In Windows Firewall, create an inbound rule to open the TCP port 1433.","pos":[19504,19574]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> For detailed information about SQL Server and Windows Firewall, see <bpt id=\"p2\">[</bpt>Configure a Windows Firewall for Database Engine Access<ept id=\"p2\">](https://msdn.microsoft.com/en-us/library/ms175043.aspx)</ept>.","pos":[19575,19767],"source":"**Note:** For detailed information about SQL Server and Windows Firewall, see [Configure a Windows Firewall for Database Engine Access](https://msdn.microsoft.com/en-us/library/ms175043.aspx)."},{"pos":[19774,19809],"content":"Installation on the second computer","linkify":"Installation on the second computer","nodes":[{"content":"Installation on the second computer","pos":[0,35]}]},{"content":"On the second computer, run the Retail Store Scale Unit Self-service installer as described earlier in this article, but make the following changes.","pos":[19811,19959]},{"content":"Select only Retail Server and Retail Cloud POS as the components to install.","pos":[19965,20041]},{"content":"If only Retail Server must to be installed, don't select Retail Cloud POS.","pos":[20042,20116]},{"content":"Select <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> to continue with the installation.","pos":[20117,20167],"source":" Select **Next** to continue with the installation."},{"content":"Enter the domain user credentials (user name and password) that have permission to access SQL Server on the first computer.","pos":[20172,20295]},{"content":"Then select <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.","pos":[20296,20317],"source":" Then select **Next**."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> A generated service account can't be used, because Retail Server requires access to the SQL database on the first computer.","pos":[20318,20451],"source":"**Note:** A generated service account can't be used, because Retail Server requires access to the SQL database on the first computer."},{"content":"You must use a domain account.","pos":[20452,20482]},{"content":"Enter the same client ID and secret that are used on the first computer.","pos":[20487,20559]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> It's critical that you add this client ID to Dynamics 365 for Operations as described above.","pos":[20560,20667],"source":"**Important:** It's critical that you add this client ID to Dynamics 365 for Operations as described above."},{"content":"Select <bpt id=\"p1\">**</bpt>Configure Cloud POS<ept id=\"p1\">**</ept>, and then enter Azure AD credentials that have the correct permissions to create Azure Web Apps.","pos":[20672,20799],"source":"Select **Configure Cloud POS**, and then enter Azure AD credentials that have the correct permissions to create Azure Web Apps."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> For more information about Azure Web Apps, how to create them, and how to generate new secrets, see <bpt id=\"p2\">[</bpt>Use portal to create Active Directory application and service principal that can access resources<ept id=\"p2\">](https://azure.microsoft.com/en-us/documentation/articles/resource-group-create-service-principal-portal/)</ept>.","pos":[20800,21116],"source":"**Note:** For more information about Azure Web Apps, how to create them, and how to generate new secrets, see [Use portal to create Active Directory application and service principal that can access resources](https://azure.microsoft.com/en-us/documentation/articles/resource-group-create-service-principal-portal/)."},{"content":"Note that the sign-in URL and the App ID URI aren't important.","pos":[21117,21179]},{"content":"When setup is successful, don't exit the installer.","pos":[21184,21235]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> At first, the healthcheck ping won't be successful, because the database isn't yet set up correctly.","pos":[21236,21346],"source":"**Note:** At first, the healthcheck ping won't be successful, because the database isn't yet set up correctly."},{"content":"After you've completed the remaining steps of this procedure, you can test the healthcheck again.","pos":[21347,21444]},{"pos":[21449,21561],"content":"Go to <bpt id=\"p1\">**</bpt>IIS<ept id=\"p1\">**</ept>, select the <bpt id=\"p2\">**</bpt>Retail Store Scale Unit<ept id=\"p2\">**</ept> website, and select the <bpt id=\"p3\">**</bpt>Retail Server<ept id=\"p3\">**</ept> web application.","source":"Go to **IIS**, select the **Retail Store Scale Unit** website, and select the **Retail Server** web application."},{"content":"Explore the working directory.","pos":[21566,21596]},{"content":"Open the Web.config file, and then, in the <bpt id=\"p1\">**</bpt>connectionStrings<ept id=\"p1\">**</ept> section, add <bpt id=\"p2\">**</bpt>Server name<ept id=\"p2\">**</ept>.","pos":[21601,21695],"source":"Open the Web.config file, and then, in the **connectionStrings** section, add **Server name**."},{"content":"<bpt id=\"p1\">**</bpt>Server name<ept id=\"p1\">**</ept> is the name of the first computer where you installed components.","pos":[21696,21777],"source":"**Server name** is the name of the first computer where you installed components."},{"content":"Save the file.","pos":[21778,21792]},{"content":"If the certificate that is used isn't a valid, trusted certificate from a trusted authority, open CERTMGR.MSC, and follow these steps:","pos":[21797,21931]},{"content":"Import the SQL Server SSL certificate that you created earlier, and add it to Trusted Root.","pos":[21940,22031]},{"pos":[22040,22134],"content":"Open a <bpt id=\"p1\">**</bpt>Command Prompt<ept id=\"p1\">**</ept> window as an administrator, type <bpt id=\"p2\">**</bpt>IISRESET<ept id=\"p2\">**</ept>, and then press Enter.","source":"Open a **Command Prompt** window as an administrator, type **IISRESET**, and then press Enter."},{"content":"If Retail Cloud POS is configured for use, a client ID is shown.","pos":[22140,22204]},{"content":"You must add this client ID to the <bpt id=\"p1\">**</bpt>Retail shared parameters<ept id=\"p1\">**</ept> page in Dynamics 365 for Operations.","pos":[22205,22305],"source":" You must add this client ID to the **Retail shared parameters** page in Dynamics 365 for Operations."},{"pos":[22314,22458],"content":"In Dynamics 365 for Operations, go to <bpt id=\"p1\">**</bpt>Retail and commerce<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Headquarters setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Parameters<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Retail shared parameters<ept id=\"p4\">**</ept>.","source":"In Dynamics 365 for Operations, go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Parameters** &gt; **Retail shared parameters**."},{"pos":[22467,22497],"content":"Select <bpt id=\"p1\">**</bpt>Identity providers<ept id=\"p1\">**</ept>.","source":"Select **Identity providers**."},{"content":"On the <bpt id=\"p1\">**</bpt>Identity providers<ept id=\"p1\">**</ept> FastTab, select the provider that begins with <bpt id=\"p2\">**</bpt>HTTPS://sts.windows.net/<ept id=\"p2\">**</ept>.","pos":[22506,22611],"source":"On the **Identity providers** FastTab, select the provider that begins with **HTTPS://sts.windows.net/**."},{"content":"The values on the <bpt id=\"p1\">**</bpt>Relying parties<ept id=\"p1\">**</ept> FastTab are set, based on your selection.","pos":[22612,22691],"source":" The values on the **Relying parties** FastTab are set, based on your selection."},{"content":"On the <bpt id=\"p1\">**</bpt>Relying parties<ept id=\"p1\">**</ept> FastTab, select <bpt id=\"p2\">**</bpt>+Add<ept id=\"p2\">**</ept>.","pos":[22700,22752],"source":"On the **Relying parties** FastTab, select **+Add**."},{"content":"Enter the client ID that is listed in the Retail Store Scale Unit installer.","pos":[22753,22829]},{"content":"Set the <bpt id=\"p1\">**</bpt>Type<ept id=\"p1\">**</ept> field to <bpt id=\"p2\">**</bpt>Public<ept id=\"p2\">**</ept> and the <bpt id=\"p3\">**</bpt>UserType<ept id=\"p3\">**</ept> field to <bpt id=\"p4\">**</bpt>Worker<ept id=\"p4\">**</ept>.","pos":[22830,22908],"source":" Set the **Type** field to **Public** and the **UserType** field to **Worker**."},{"content":"Then, on the Action Pane, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","pos":[22909,22951],"source":" Then, on the Action Pane, select **Save**."},{"content":"Select the new relying party, and then, on the <bpt id=\"p1\">**</bpt>Server resource IDs<ept id=\"p1\">**</ept> FastTab, select <bpt id=\"p2\">**</bpt>+Add<ept id=\"p2\">**</ept>.","pos":[22960,23056],"source":"Select the new relying party, and then, on the **Server resource IDs** FastTab, select **+Add**."},{"content":"In the <bpt id=\"p1\">**</bpt>Server Resource ID<ept id=\"p1\">**</ept> column, enter <bpt id=\"p2\">**</bpt>https://retailstorescaleunit.retailserver.com<ept id=\"p2\">**</ept>.","pos":[23057,23151],"source":" In the **Server Resource ID** column, enter **https://retailstorescaleunit.retailserver.com**."},{"pos":[23160,23196],"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.","source":"On the Action Pane, select **Save**."},{"pos":[23202,23368],"content":"In Dynamics 365 for Operations, go to <bpt id=\"p1\">**</bpt>Retail and commerce<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Headquarters setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Retail scheduler<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Channel database<ept id=\"p4\">**</ept>, and follow these steps:","source":"In Dynamics 365 for Operations, go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**, and follow these steps:"},{"content":"Select the channel database that you created at the beginning of this topic.","pos":[23377,23453]},{"content":"On the Action Pane, select <bpt id=\"p1\">**</bpt>Full Sync<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Job 9999<ept id=\"p2\">**</ept>.","pos":[23462,23521],"source":"On the Action Pane, select **Full Sync** &gt; **Job 9999**."},{"content":"Full synchronization might require several minutes.","pos":[23522,23573]},{"content":"In the Retail Store Scale Unit installer, retest to verify that all functionality is working correctly.","pos":[23582,23685]},{"content":"Start Retail Cloud POS from the computer that you're using for point of sale (POS) operations.","pos":[23691,23785]},{"content":"(This computer is a third computer that is separate from the Retail Store Scale Unit systems.)","pos":[23786,23880]},{"content":"Activate the Retail Cloud POS device that you're using for this computer.","pos":[23885,23958]},{"content":"Do a simple sale to verify full end-to-end functionality.","pos":[23963,24020]},{"pos":[24026,24061],"content":"Help secure Retail Store Scale Unit","linkify":"Help secure Retail Store Scale Unit","nodes":[{"content":"Help secure Retail Store Scale Unit","pos":[0,35]}]},{"content":"According to current security standards, the following options should be set in a production environment:","pos":[24063,24168]},{"content":"You should completely disable SSL (v2 and v3) on the computer.","pos":[24174,24236]},{"content":"You should enable and use only TLS version 1.2 (or the current highest version).","pos":[24241,24321]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> By default, SSL and all version of TLS except TLS 1.2 are disabled.","pos":[24322,24399],"source":"**Note:** By default, SSL and all version of TLS except TLS 1.2 are disabled."},{"content":"To edit or enable these settings, follow these steps:","pos":[24400,24453]},{"pos":[24462,24516],"content":"Press the Windows logo key+R to open a <bpt id=\"p1\">**</bpt>Run<ept id=\"p1\">**</ept> window.","source":"Press the Windows logo key+R to open a **Run** window."},{"pos":[24525,24590],"content":"In the <bpt id=\"p1\">**</bpt>Open<ept id=\"p1\">**</ept> field, enter <bpt id=\"p2\">**</bpt>Regedit<ept id=\"p2\">**</ept>, and then select <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.","source":"In the **Open** field, enter **Regedit**, and then select **OK**."},{"pos":[24599,24829],"content":"In the <bpt id=\"p1\">**</bpt>User Account Control<ept id=\"p1\">**</ept> window, select <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept> (if this step is required), and then, in the new <bpt id=\"p3\">**</bpt>Registry Editor<ept id=\"p3\">**</ept> window, go to <bpt id=\"p4\">**</bpt>HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>System<ph id=\"ph4\">\\\\</ph>CurrentControlSet<ph id=\"ph5\">\\\\</ph>SecurityProviders<ph id=\"ph6\">\\\\</ph>SCHANNEL<ph id=\"ph7\">\\\\</ph>Protocols<ept id=\"p4\">**</ept>.","source":"In the **User Account Control** window, select **Yes** (if this step is required), and then, in the new **Registry Editor** window, go to **HKEY\\_LOCAL\\_MACHINE\\\\System\\\\CurrentControlSet\\\\SecurityProviders\\\\SCHANNEL\\\\Protocols**."},{"content":"The following keys have been automatically entered to enabled only TLS 1.2:","pos":[24838,24913]},{"content":"TLS 1.2<ph id=\"ph1\">\\\\</ph>Server:Enabled=1","pos":[24926,24951],"source":"TLS 1.2\\\\Server:Enabled=1"},{"content":"TLS 1.2<ph id=\"ph1\">\\\\</ph>Server:DisabledByDefault=0","pos":[24964,24999],"source":"TLS 1.2\\\\Server:DisabledByDefault=0"},{"content":"TLS 1.2<ph id=\"ph1\">\\\\</ph>Client:Enabled=1","pos":[25012,25037],"source":"TLS 1.2\\\\Client:Enabled=1"},{"content":"TLS 1.2<ph id=\"ph1\">\\\\</ph>Client:DisabledByDefault=0","pos":[25050,25085],"source":"TLS 1.2\\\\Client:DisabledByDefault=0"},{"content":"TLS 1.1<ph id=\"ph1\">\\\\</ph>Server:Enabled=0","pos":[25098,25123],"source":"TLS 1.1\\\\Server:Enabled=0"},{"content":"TLS 1.1<ph id=\"ph1\">\\\\</ph>Client:Enabled=0","pos":[25136,25161],"source":"TLS 1.1\\\\Client:Enabled=0"},{"content":"TLS 1.0<ph id=\"ph1\">\\\\</ph>Server:Enabled=0","pos":[25174,25199],"source":"TLS 1.0\\\\Server:Enabled=0"},{"content":"TLS 1.0<ph id=\"ph1\">\\\\</ph>Client:Enabled=0","pos":[25212,25237],"source":"TLS 1.0\\\\Client:Enabled=0"},{"content":"SSL 3.0<ph id=\"ph1\">\\\\</ph>Server:Enabled=0","pos":[25250,25275],"source":"SSL 3.0\\\\Server:Enabled=0"},{"content":"SSL 3.0<ph id=\"ph1\">\\\\</ph>Client:Enabled=0","pos":[25288,25313],"source":"SSL 3.0\\\\Client:Enabled=0"},{"content":"SSL 2.0<ph id=\"ph1\">\\\\</ph>Server:Enabled=0","pos":[25326,25351],"source":"SSL 2.0\\\\Server:Enabled=0"},{"content":"SSL 2.0<ph id=\"ph1\">\\\\</ph>Client:Enabled=0","pos":[25364,25389],"source":"SSL 2.0\\\\Client:Enabled=0"},{"content":"No additional network ports should be open, unless they are required for known, specified reasons.","pos":[25405,25503]},{"content":"You must disable cross-origin resource sharing, and you must specify the allowed origins that are accepted.","pos":[25508,25615]},{"content":"You should use only trusted certificate authorities to obtain certificates that will be used on Store system computers.","pos":[25620,25739]},{"pos":[25741,25891],"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> It's critical that you review security guidelines for Internet Information Services (IIS) and Payment Card Industry (PCI) requirements.","source":"**Important:** It's critical that you review security guidelines for Internet Information Services (IIS) and Payment Card Industry (PCI) requirements."},{"pos":[25897,25933],"content":"Troubleshoot Retail Store Scale Unit","linkify":"Troubleshoot Retail Store Scale Unit","nodes":[{"content":"Troubleshoot Retail Store Scale Unit","pos":[0,36]}]},{"content":"This section will be more thorough in the future.","pos":[25935,25984]},{"content":"For now, here is a checklist of things to verify:","pos":[25985,26034]},{"content":"In Dynamics 365 for Operations, on the <bpt id=\"p1\">**</bpt>Retail shared parameters<ept id=\"p1\">**</ept> page, verify that the correct client ID has been added to the <bpt id=\"p2\">**</bpt>Relying Parties<ept id=\"p2\">**</ept> FastTab.","pos":[26040,26198],"source":"In Dynamics 365 for Operations, on the **Retail shared parameters** page, verify that the correct client ID has been added to the **Relying Parties** FastTab."},{"content":"Additionally, verify that the correct <bpt id=\"p1\">**</bpt>https://retailstorescaleunit.retailserver.com<ept id=\"p1\">**</ept> entry has been added to the <bpt id=\"p2\">**</bpt>Server Resource IDs<ept id=\"p2\">**</ept> FastTab.","pos":[26199,26347],"source":" Additionally, verify that the correct **https://retailstorescaleunit.retailserver.com** entry has been added to the **Server Resource IDs** FastTab."},{"pos":[26352,26512],"content":"In Dynamics 365 for Operations, verify that every client ID that was generated for each retail store exists on the <bpt id=\"p1\">**</bpt>Azure Active Directory applications<ept id=\"p1\">**</ept> page.","source":"In Dynamics 365 for Operations, verify that every client ID that was generated for each retail store exists on the **Azure Active Directory applications** page."},{"content":"In Dynamics 365 for Operations, on the <bpt id=\"p1\">**</bpt>Channel profile<ept id=\"p1\">**</ept> page, verify that the URLs are correct.","pos":[26517,26615],"source":"In Dynamics 365 for Operations, on the **Channel profile** page, verify that the URLs are correct."},{"content":"(That is, verify that the machine name in each URL is correct, the URL is correctly formatted, and so on.)","pos":[26616,26722]},{"pos":[26727,26881],"content":"In Dynamics 365 for Operations, on the <bpt id=\"p1\">**</bpt>Channel database<ept id=\"p1\">**</ept> page, verify that the full synchronization has occurred properly for the new channel database.","source":"In Dynamics 365 for Operations, on the **Channel database** page, verify that the full synchronization has occurred properly for the new channel database."},{"content":"Verify that the retail store is correctly configured to use the new channel database.","pos":[26886,26971]},{"pos":[26977,27006],"content":"Uninstall Retail Store system","linkify":"Uninstall Retail Store system","nodes":[{"content":"Uninstall Retail Store system","pos":[0,29]}]},{"content":"Use Control Panel in Microsoft Windows to uninstall Retail Store system.","pos":[27008,27080]},{"content":"Press the Windows logo key, and then enter <bpt id=\"p1\">**</bpt>Control Panel<ept id=\"p1\">**</ept> in the search box.","pos":[27086,27165],"source":"Press the Windows logo key, and then enter **Control Panel** in the search box."},{"content":"In the search results, select <bpt id=\"p1\">**</bpt>Control Panel<ept id=\"p1\">**</ept>.","pos":[27166,27214],"source":" In the search results, select **Control Panel**."},{"pos":[27219,27286],"content":"In Control Panel, select <bpt id=\"p1\">**</bpt>Programs<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Uninstall a program<ept id=\"p2\">**</ept>.","source":"In Control Panel, select **Programs** &gt; **Uninstall a program**."},{"pos":[27291,27465],"content":"In the <bpt id=\"p1\">**</bpt>Programs and Features<ept id=\"p1\">**</ept> window, select <bpt id=\"p2\">**</bpt>Microsoft Dynamics 365 for Operations for Retail Store system<ept id=\"p2\">**</ept>, and then, above the list of programs, select <bpt id=\"p3\">**</bpt>Uninstall<ept id=\"p3\">**</ept>.","source":"In the **Programs and Features** window, select **Microsoft Dynamics 365 for Operations for Retail Store system**, and then, above the list of programs, select **Uninstall**."},{"content":"Wait for the uninstaller to finish removing the program.","pos":[27470,27526]}],"content":"---\n# required metadata\n\ntitle: Retail Store Scale Unit configuration and installation\ndescription: This topic explains how you can use self-service to configure Retail Store Scale Unit in Microsoft Dynamics 365 for Operations headquarters, download it, and install it on one or more computers in a brick-and-mortar store. Retail Store Scale Unit combines the Retail channel database, Retail Async Client, Retail Server, and Retail Cloud POS components. A Dynamics 365 for Operations environment already provides these components, but you can now configure them to work locally in a store, in either a single-computer setup (the default option) or a multi-computer setup. This topic also explains how to uninstall and troubleshoot Retail Store Scale Unit.\nauthor: josaw1\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: IT Pro\n# ms.devlang: \n# ms.reviewer: josaw1\nms.search.scope: Operations\n# ms.tgt_pltfrm: \nms.custom: 219744\nms.assetid: 5e28948f-d40a-40e8-843b-8c2747916546\nms.search.region: Global\nms.search.industry: Retail\nms.author: jashanno\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Version 1611\n\n---\n\n# Retail Store Scale Unit configuration and installation\n\nThis topic explains how you can use self-service to configure Retail Store Scale Unit in Microsoft Dynamics 365 for Operations headquarters, download it, and install it on one or more computers in a brick-and-mortar store. Retail Store Scale Unit combines the Retail channel database, Retail Async Client, Retail Server, and Retail Cloud POS components. A Dynamics 365 for Operations environment already provides these components, but you can now configure them to work locally in a store, in either a single-computer setup (the default option) or a multi-computer setup. This topic also explains how to uninstall and troubleshoot Retail Store Scale Unit.\n\nBefore you begin\n----------------\n\n**Important:** To help maintain a high level of security across the company, we strongly recommend that you create a new client ID and secret for each retail store that is created. This step requires a new Web App.\n\n1.  Generate a Microsoft Azure Web App to create a client ID and secret. For instructions, see the \"Basics of Registering an Application in Azure AD\" section in [Authentication Scenarios for Azure AD](https://azure.microsoft.com/en-us/documentation/articles/active-directory-authentication-scenarios/).\n2.  After a client ID and secret are created for Retail Store Scale Unit, the client ID must be accepted in Microsoft Dynamics 365 for Operations. Go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**. Enter the client ID in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column.\n\n## Configure a new Retail Store Scale Unit\nTo create a functioning Retail Store Scale Unit, complete the procedures in all sections of this topic through the \"Running the Retail Store Scale Unit installer\" section.\n\n1.  Use Azure Active Directory (Azure AD) credentials to sign in to the Microsoft Dynamics 365 for Operations headquarters or Dynamics 365 for Operations trial.\n2.  On the **Welcome** page, use the menu in the upper left to go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**.\n3.  On the **Channel database** page, on the Action Pane, select **New**.\n4.  In the **Channel database ID** field, enter a unique value.\n5.  In the **Channel data group** field, select the **Default** option. **Note:** You can select any other option that you've already created.\n6.  In the **Type** field, leave the default value (**Channel database**) selected.\n7.  You can leave the **Data sync interval** field blank. **Note:** Alternatively, you can select a value in this field. For example, in the demo data, the value **D60-U15** specifies a 15-minute synchronization interval.\n8.  On the **Retail channel** FastTab, select **Add**, and then, in the **Channel** field, select the appropriate Retail store channel. Repeat this step to add all the channels that use this database. **Note:** You can also add channels that don't use this database. In this way, you keep the data for those channels in the Store Scale Unit channel database. The Retail store channels that actively use this database can then access that data locally.\n9.  On the **Store Scale Unit package** FastTab, in the **Name** field, select the appropriate store Scale Unit package. **Note:** Each environment generates a base Store Scale Unit package. Therefore, this field always contains at least one option.\n10. On the Action Pane, select **Save**.\n11. Go to **Retail and commerce** &gt; **Channel setup** &gt; **Channel profiles**.\n12. On the Action Pane, select **New**.\n13. In the **Name** field, enter a unique name for the channel profile.\n14. On the Action Pane, select **Save**.\n15. On the **Profile properties** FastTab for the new channel profile, select **Add**.\n16. In the **Property key** field, select **Retail server URL**.\n17. In the **Property value** field, enter the URL for the Store Scale Unit Retail Server that will be installed. **Note:** The standard format for the URL of an on-premises store installation of Store Scale Unit is **https://&lt;Computer Name&gt;:&lt;Port&gt;/RetailServer/Commerce**. In this format, **&lt;Computer Name&gt;** is the fully qualified domain name (FQDN) of the computer where Store Scale Unit is installed or the full computer name, for systems that aren't joined to a domain, and **&lt;Port&gt;** is the port number that will be used in the installation. The port number must be a value between 1 and 65535. If you're using the default HTTPS port (443), you don't have to specify the port number.\n18. On the **Profile properties** FastTab for the new channel profile, select **Add**.\n19. In the **Property key** field, select **Cloud POS URL**.\n20. In the **Property value** field, enter the URL for the Store Scale Unit Retail Server that will be installed. **Note:** The standard format for the URL of an on-premises store installation of Store Scale Unit is **https://&lt;Computer Name&gt;:&lt;Port&gt;/POS**. In this format, **&lt;Computer Name&gt;** is the FQDN of the computer where Store Scale Unit is installed or the full computer name for systems that aren't joined to a domain, and **&lt;Port&gt;** is the port number that will be used in the installation. The port number must be a value between 1 and 65535. If you're using the default HTTPS port (443), you don't have to specify the port number.\n21. On the Action Pane, select **Save**.\n22. Go to **Retail and commerce** &gt; **Channels** &gt; **Retail stores** &gt; **All retail stores**.\n23. Select the Retail channel ID for the retail store that will use the new channel database.\n24. On the details page for the selected store, on the Action Pane, select **Edit**.\n25. On the **General** FastTab for the store, in the **Live channel database** field, select the channel database that you created in step 4.\n26. On the Action Pane, select **Save**.\n27. On the **General** FastTab for the store, in the **Channel profile** field, select the channel profile that you created in step 13.\n28. Go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel data group**.\n29. Select the **Default** data group, and then, on the Action Pane, select **Full data sync**. In the **Select a distribution schedule** field, select job **9999**, and then select **OK**. In the dialog box that appears, select **OK** to confirm the full synchronization. All the data in the channel database is prepared for download.\n\n### Download the Retail Store Scale Unit installer\n\n1.  Use Azure AD credentials to sign in to the Microsoft Dynamics Commerce or Dynamics 365 for Operations trial.\n2.  On the **Welcome** page, use the menu in the upper left to go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**.\n3.  In the list of channel databases on the left, select the channel database that you created earlier.\n4.  On the Action Pane, select **Download**.\n5.  On the drop-down menu, select **Configuration file**. **Note:** To help guarantee that the Retail Store Scale Unit installer correctly uses the configuration file (XML file), you must save the configuration file to the same location as the installer.\n6.  On the Notification bar that appears at the bottom of the Internet Explorer window, select **Save**. (The Notification bar might appear in a different place in other browsers.) **Note:** Browsers might block the download pop-up that is generated. Select either **Allow once** or **Options for this site** &gt; **Always allow**. Then select **Download** again.\n7.  On the Action Pane, select **Download**.\n8.  On the drop-down menu, select **Retail Store Scale Unit package**.\n9.  On the Notification bar that appears at the bottom of the Internet Explorer window, select **Save**. (The Notification bar might appear in a different place in other browsers.) **Note:** The correct installation package is automatically selected for download, based on the Retail Store Scale Unit package on the selected channel database.\n10. After the setup installer has been saved, on the Notification bar, select **Run**. (This step might differ, depending on the type of browser.)\n\n### Running the Retail Store Scale Unit installer\n\n**Note:** If you will install and use Retail Cloud POS, you must initialize the configuration the first time that you run the installer, as described in the procedure. **Note:** Before you run the Retail Store Scale Unit installer, make sure that the following requirements are met:\n\n-   The installer requires that the Microsoft .NET Framework version 4.5.1 be installed on the system.\n-   The installer installs the Retail Store Scale Unit components only on the following operating systems. Before you install any component, you must update the operating system with all service packs and updates that are available for it.\n    -   Windows 7 Professional, Enterprise, or Ultimate edition (both x86 and x64 architectures). Home edition and Embedded edition aren’t supported.\n    -   Windows 8.1 Update 1 Pro or Enterprise edition (both x86 and x64 architectures). Standard edition isn’t supported.\n    -   Windows 10 Pro or Enterprise edition (both x86 and x64 architectures). Home edition isn’t supported.\n    -   Microsoft Windows Server 2012 or Microsoft Windows Server 2012 R2.\n\nThe Retail Store Scale Unit installer first extracts the associated files. It then begins the installation.\n\n1.  On the first page of the installer, you select the components to install. You can install the following components:\n    -   Retail channel database with Async Client\n    -   Retail Server\n    -   Retail Cloud POS **Note:** To install Retail Cloud POS, you must also select and install Retail Server. If you will use only Retail Modern POS in the store, clear the Retail Cloud POS check box, and continue with installation as it's described here.\n\n    **Note:** By default, the installer installs all components on one computer. To install the components across multiple computers, you must complete additional manual steps. For more information, see the \"Multi-box installation\" section. After you've selected all the components to install, select **Next** to continue.\n2.  The installer validates that all prerequisites are met. If a valid version of Microsoft SQL Server isn’t found, the installer downloads and installs Microsoft SQL Server 2014 Express with Service Pack 2. **Note:** To meet prerequisites, SQL Server must have Full-text search and, at a minimum, support for Transport Layer Security (TLS) 1.2. For Microsoft SQL Server 2012, Service Pack 3 must be installed, at a minimum. For Microsoft SQL Server 2014, Service Pack 2 must be installed. **Note:** If a system restart is required, the installer shows this requirement. Although the restart is recommended, the installer can continue without it.\n3.  Verify the Application Object Server (AOS) URL (the URL that is used to access Dynamics 365 for Operations headquarters), and then select **Next**. **Note:** The Retail Server URL is automatically entered from the configuration file.\n4.  Select a valid Secure Sockets Layer (SSL) certificate to use for HTTPS communication. **Note:** The certificate must use private key storage, and server authentication must be listed in the enhanced key usage property. Additionally, the certificate must be trusted locally, and it can’t be expired. It must be stored in the personal certificate store location on the local computer.\n5.  If a specific user is required, enter the user name and password that the application pool will run under. By default, the installer automatically generates a service account to use. This approach is more secure and is recommended.\n6.  On the next page, you enter the user account and password for the Retail Server application pool and the Async Client. By default, this account is automatically generated. However, you can enter the user account and password manually.\n7.  Enter the HTTPS port to use, and verify that the host name of the computer is correct. Select **Next** to continue. **Note:** The HTTPS port is listed in the Store system profile. To access the Store system profile, on the **Retail store details** page, on the **Store systems** FastTab, select the profile ID of the selected Store system. **Note:** The installer automatically enters the host name. If, for any reason, the host name must be changed for the installation, change it here. The host name must be the FQDN of the system, and it must be entered in the **Host name** field for the selected Store system entry.\n8.  Enter the client ID and secret that are associated with this Retail Store Scale Unit installation. Additionally, verify the channel database ID, which is automatically entered from the configuration file. Then select **Install**. If you will use Retail Cloud POS, make sure that the **Configure Retail Cloud POS** check box at the bottom of this page is selected. This configuration requests Azure AD sign-in and automatically generates all required information in Azure so that Retail Cloud POS can be used on-premises. **Note:** For information about how to correctly generate an Azure Web App to create a client ID and secret, see the \"Basics of Registering an Application in Azure AD\" section in [Authentication Scenarios for Azure AD](https://azure.microsoft.com/en-us/documentation/articles/active-directory-authentication-scenarios/). **Note:** When you create the Web App, the initial URI and URL don't have to be any specific value. Only the client ID and secret that are created are important.\n9.  After a client ID and secret are created for Retail Store Scale Unit, the client ID must be accepted in Dynamics 365 for Operations. Go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**. Enter the client ID in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column.\n10. After the installation is completed, the final health page appears. This page shows whether the installation was successful. It also shows the health of each component, based on basic connection tests, and the location of this topic. If the installation wasn't successful, the page shows the location of the log files.\n11. If Retail Cloud POS is configured for use, a client ID is shown. You must add this client ID to the **Retail shared parameters** page in Dynamics 365 for Operations.\n    1.  In Dynamics 365 for Operations, go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Parameters** &gt; **Retail shared parameters**.\n    2.  Select **Identity providers**.\n    3.  On the **Identity providers** FastTab, select the provider that begins with **HTTPS://sts.windows.net/**. The values on the **Relying parties** FastTab are set, based on your selection.\n    4.  On the **Relying parties** FastTab, select **+Add**. Enter the client ID that is listed in the Retail Store Scale Unit installer. Set the **Type** field to **Public** and the **UserType** field to **Worker**. Then, on the Action Pane, select **Save**.\n    5.  Select the new relying party, and then, on the **Server resource IDs** FastTab, select **+Add**. In the **Server Resource ID** column, enter **https://retailstorescaleunit.retailserver.com**.\n    6.  On the Action Pane, select **Save**.\n\n12. When you've finished, select **Finish**. **Note:** If the installer doesn't show a check mark for Retail Server, Async Client, or any other component, wait 10 minutes, so that any cached values can be updated in the cloud. Then check again. If the installer still isn't fully successful, run a full synchronization on the new channel database that this installation uses.\n\n### Multi-box installation\n\n**Note:** Only advanced users should install Retail Store Scale Unit across multiple computers. The following procedures show how to install the Retail channel database and Async Client on one computer, and the Retail Server and Retail Cloud POS on a second computer. The instructions assume that both systems are on a domain together, and that users have already been created on both systems for the services that will be installed. It's important that you perform all configuration in Dynamics 365 for Operations headquarters.\n\n#### Installation on the first computer\n\nOn the first computer, run the Retail Store Scale Unit self-service installer as described earlier in this topic, but make the following changes.\n\n1.  Select only Retail Channel Database and Async Client as the components to install. Select **Next** to continue with the installation. **Note:** You can use a generated service account for the Async Client, because the Async Client won't be accessed outside the computer that it's installed on.\n2.  Enter the client ID and secret. Keep these details available, so that you can use them again on the second computer.\n3.  After a client ID and secret are created for Retail Store Scale Unit, the client ID must be accepted in Dynamics 365 for Operations. Go to **System administration** &gt; **Setup** &gt; **Azure Active Directory applications**. Enter the client ID in the **Client ID** column, enter descriptive text in the **Name** column, and enter **RetailServiceAccount** in the **User ID** column.\n4.  When setup is successful, start SQL Server Configuration Manager.\n5.  Go to **SQL Server Network Configuration** &gt; **Protocols** for the SQL Server instance.\n6.  Right-click, and then select **Properties**.\n7.  In the **Flags** section, change the value of **Set Force Encryption** to **Yes**.\n8.  In the **Certificate** section, select the SSL certificate on the drop-down menu. This SQL Server SSL certificate is the same certificate that is used in the installer.\n9.  Select **OK**.\n10. Go back to **Protocols** in SQL Server Configuration Manager, and enable the following protocols:\n    -   Named Pipes\n    -   TCP/IP\n\n11. Right-click the **TCP/IP** protocol, and then select **Properties**.\n12. In the **IP Address** section, scroll down the list to **IPALL**.\n13. Enter **TCPPort = 1433**.\n14. Select **OK**.\n15. Start Windows Firewall with Advanced Security.\n16. In Windows Firewall, create an inbound rule to open the TCP port 1433. **Note:** For detailed information about SQL Server and Windows Firewall, see [Configure a Windows Firewall for Database Engine Access](https://msdn.microsoft.com/en-us/library/ms175043.aspx).\n\n#### Installation on the second computer\n\nOn the second computer, run the Retail Store Scale Unit Self-service installer as described earlier in this article, but make the following changes.\n\n1.  Select only Retail Server and Retail Cloud POS as the components to install. If only Retail Server must to be installed, don't select Retail Cloud POS. Select **Next** to continue with the installation.\n2.  Enter the domain user credentials (user name and password) that have permission to access SQL Server on the first computer. Then select **Next**. **Note:** A generated service account can't be used, because Retail Server requires access to the SQL database on the first computer. You must use a domain account.\n3.  Enter the same client ID and secret that are used on the first computer. **Important:** It's critical that you add this client ID to Dynamics 365 for Operations as described above.\n4.  Select **Configure Cloud POS**, and then enter Azure AD credentials that have the correct permissions to create Azure Web Apps. **Note:** For more information about Azure Web Apps, how to create them, and how to generate new secrets, see [Use portal to create Active Directory application and service principal that can access resources](https://azure.microsoft.com/en-us/documentation/articles/resource-group-create-service-principal-portal/). Note that the sign-in URL and the App ID URI aren't important.\n5.  When setup is successful, don't exit the installer. **Note:** At first, the healthcheck ping won't be successful, because the database isn't yet set up correctly. After you've completed the remaining steps of this procedure, you can test the healthcheck again.\n6.  Go to **IIS**, select the **Retail Store Scale Unit** website, and select the **Retail Server** web application.\n7.  Explore the working directory.\n8.  Open the Web.config file, and then, in the **connectionStrings** section, add **Server name**. **Server name** is the name of the first computer where you installed components. Save the file.\n9.  If the certificate that is used isn't a valid, trusted certificate from a trusted authority, open CERTMGR.MSC, and follow these steps:\n    1.  Import the SQL Server SSL certificate that you created earlier, and add it to Trusted Root.\n    2.  Open a **Command Prompt** window as an administrator, type **IISRESET**, and then press Enter.\n\n10. If Retail Cloud POS is configured for use, a client ID is shown. You must add this client ID to the **Retail shared parameters** page in Dynamics 365 for Operations.\n    1.  In Dynamics 365 for Operations, go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Parameters** &gt; **Retail shared parameters**.\n    2.  Select **Identity providers**.\n    3.  On the **Identity providers** FastTab, select the provider that begins with **HTTPS://sts.windows.net/**. The values on the **Relying parties** FastTab are set, based on your selection.\n    4.  On the **Relying parties** FastTab, select **+Add**. Enter the client ID that is listed in the Retail Store Scale Unit installer. Set the **Type** field to **Public** and the **UserType** field to **Worker**. Then, on the Action Pane, select **Save**.\n    5.  Select the new relying party, and then, on the **Server resource IDs** FastTab, select **+Add**. In the **Server Resource ID** column, enter **https://retailstorescaleunit.retailserver.com**.\n    6.  On the Action Pane, select **Save**.\n\n11. In Dynamics 365 for Operations, go to **Retail and commerce** &gt; **Headquarters setup** &gt; **Retail scheduler** &gt; **Channel database**, and follow these steps:\n    1.  Select the channel database that you created at the beginning of this topic.\n    2.  On the Action Pane, select **Full Sync** &gt; **Job 9999**. Full synchronization might require several minutes.\n    3.  In the Retail Store Scale Unit installer, retest to verify that all functionality is working correctly.\n\n12. Start Retail Cloud POS from the computer that you're using for point of sale (POS) operations. (This computer is a third computer that is separate from the Retail Store Scale Unit systems.)\n13. Activate the Retail Cloud POS device that you're using for this computer.\n14. Do a simple sale to verify full end-to-end functionality.\n\n### Help secure Retail Store Scale Unit\n\nAccording to current security standards, the following options should be set in a production environment:\n\n-   You should completely disable SSL (v2 and v3) on the computer.\n-   You should enable and use only TLS version 1.2 (or the current highest version). **Note:** By default, SSL and all version of TLS except TLS 1.2 are disabled. To edit or enable these settings, follow these steps:\n    1.  Press the Windows logo key+R to open a **Run** window.\n    2.  In the **Open** field, enter **Regedit**, and then select **OK**.\n    3.  In the **User Account Control** window, select **Yes** (if this step is required), and then, in the new **Registry Editor** window, go to **HKEY\\_LOCAL\\_MACHINE\\\\System\\\\CurrentControlSet\\\\SecurityProviders\\\\SCHANNEL\\\\Protocols**.\n    4.  The following keys have been automatically entered to enabled only TLS 1.2:\n        -   TLS 1.2\\\\Server:Enabled=1\n        -   TLS 1.2\\\\Server:DisabledByDefault=0\n        -   TLS 1.2\\\\Client:Enabled=1\n        -   TLS 1.2\\\\Client:DisabledByDefault=0\n        -   TLS 1.1\\\\Server:Enabled=0\n        -   TLS 1.1\\\\Client:Enabled=0\n        -   TLS 1.0\\\\Server:Enabled=0\n        -   TLS 1.0\\\\Client:Enabled=0\n        -   SSL 3.0\\\\Server:Enabled=0\n        -   SSL 3.0\\\\Client:Enabled=0\n        -   SSL 2.0\\\\Server:Enabled=0\n        -   SSL 2.0\\\\Client:Enabled=0\n\n<!-- -->\n\n-   No additional network ports should be open, unless they are required for known, specified reasons.\n-   You must disable cross-origin resource sharing, and you must specify the allowed origins that are accepted.\n-   You should use only trusted certificate authorities to obtain certificates that will be used on Store system computers.\n\n**Important:** It's critical that you review security guidelines for Internet Information Services (IIS) and Payment Card Industry (PCI) requirements.\n\n### Troubleshoot Retail Store Scale Unit\n\nThis section will be more thorough in the future. For now, here is a checklist of things to verify:\n\n1.  In Dynamics 365 for Operations, on the **Retail shared parameters** page, verify that the correct client ID has been added to the **Relying Parties** FastTab. Additionally, verify that the correct **https://retailstorescaleunit.retailserver.com** entry has been added to the **Server Resource IDs** FastTab.\n2.  In Dynamics 365 for Operations, verify that every client ID that was generated for each retail store exists on the **Azure Active Directory applications** page.\n3.  In Dynamics 365 for Operations, on the **Channel profile** page, verify that the URLs are correct. (That is, verify that the machine name in each URL is correct, the URL is correctly formatted, and so on.)\n4.  In Dynamics 365 for Operations, on the **Channel database** page, verify that the full synchronization has occurred properly for the new channel database.\n5.  Verify that the retail store is correctly configured to use the new channel database.\n\n### Uninstall Retail Store system\n\nUse Control Panel in Microsoft Windows to uninstall Retail Store system.\n\n1.  Press the Windows logo key, and then enter **Control Panel** in the search box. In the search results, select **Control Panel**.\n2.  In Control Panel, select **Programs** &gt; **Uninstall a program**.\n3.  In the **Programs and Features** window, select **Microsoft Dynamics 365 for Operations for Retail Store system**, and then, above the list of programs, select **Uninstall**.\n4.  Wait for the uninstaller to finish removing the program.\n\n\n"}