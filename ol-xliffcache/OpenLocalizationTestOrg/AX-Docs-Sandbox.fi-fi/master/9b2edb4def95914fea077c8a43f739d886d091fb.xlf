<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="markdown" source-language="en-US" target-language="fi-fi">
    <header>
      <tool tool-id="mdxliff" tool-name="mdxliff" tool-version="1.0-71050dc" tool-company="Microsoft" />
      <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">9b2edb4def95914fea077c8a43f739d886d091fb</xliffext:olfilehash>
      <xliffext:olfilepath xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">dev-itpro\deployment\process-for-upgrading-ax-data-to-the-latest-dynamics-ax-update.md</xliffext:olfilepath>
      <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">do-not-translate</xliffext:oltranslationpriority>
      <xliffext:oltranslationtype xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">Human Translation</xliffext:oltranslationtype>
      <xliffext:olskeletonhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">ac385ff997a82a14af870f0c3fd3b015c8838e9d</xliffext:olskeletonhash>
      <xliffext:olxliffhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">6152a73636f8eef205a6acf08bf8a5b05b1678cb</xliffext:olxliffhash>
    </header>
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve">
          <source>Upgrade data in development or demo environments | Microsoft Docs</source>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>Upgrade data in development or demo environments</source>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>This topic describes how to upgrade an older source database to run in a one-box demo or development environment for the latest Dynamics 365 for Operations update.</source>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>The source database can be from CTP 7 or later.</source>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>To copy a database from a production environment back to a one-box demo or development environment follow the steps in <bpt id="p1">[</bpt>Copy a Microsoft Dynamics 365 for Operations database from Azure SQL Database to a Microsoft SQL Server Environment<ept id="p1">](https://ax.help.dynamics.com/en/wiki/copy-an-ax-database-from-azure-sql-database-to-sql-server/)</ept>.</source>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source>This process does not apply to the upgrade of data in Management Reporter or the Retail channel database.</source>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source>It also does not apply to the upgrade of document attachments that are stored in Microsoft Azure Blob storage.</source>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source>Before you begin</source>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source>You must have a functional one-box demo or development environment that is already successfully running with the latest Dynamics 365 for Operations update.</source>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>If upgrading from the Dynamics AX February 2016 release or earlier the following hotfixes must be installed:</source>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>Hotfix KB number 3170386, "Upgrade script error: ReleaseUpdateDB70<ph id="ph1">\_</ph>DMF.</source>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source>updateIntegrationActivityExecutionMessageIdPreSync".</source>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source>Hotfix KB number 3180871, "Data upgrade from RTW to Update 1 causes error when synchronizing PlanPlanActivitiesAggregate view".</source>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>This is a binary hotfix which will cause the database synchronize process to fail.</source>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>In your source database, verify that the SysSetupLog version number in the <bpt id="p1">**</bpt>DESCRIPTION<ept id="p1">**</ept> column is correct.</source>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source>Refer to the appropriate statement for your environment below.</source>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source>Make sure that the SYSSETUPLOG table has the correct record.</source>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>If you're upgrading from CTP7, run the following Transact-SQL statement from SQL Server Management Studio.</source>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source>If you're upgrading from CTP8, run the following statement from Management Studio.</source>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source>If you're upgrading from the February 2016 release, run the following statement from Management Studio.</source>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source>If you're upgrading from the May 2016 release, run the following statement from Management Studio.</source>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>If you're upgrading from the August 2016 release, run the following statement from Management Studio.</source>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source>If you're upgrading a database that began as a standard demo data database, you must also run the following script.</source>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source>This step is required because the demo data contains bad records for some kernel X++ classes.</source>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source>Download the DataUpgrade.zip script</source>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>To obtain the latest DataUpgrade.zip package, from your target environment that is running the latest Dynamics 365 for Operations update, download the latest binary updates from Microsoft Dynamics Lifecycle Services (LCS).</source>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source>In LCS, in the <bpt id="p1">**</bpt>Environments<ept id="p1">**</ept> section, click your target Dynamics 365 for Operations environment, scroll to the bottom of the page, and then click the <bpt id="p2">**</bpt>Application binary updates<ept id="p2">**</ept> tile.</source>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>Note:<ept id="p1">**</ept> If the Application binary updates tile shows zero updates available then use the DataUpgrade.zip from the latest platform update package available in the <bpt id="p2">**</bpt>Shared Asset Library<ept id="p2">**</ept> in LCS within the <bpt id="p3">**</bpt>Software deployable package<ept id="p3">**</ept> section.</source>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>For example if upgrading to Dynamics 365 for Operations version 1611 and the Application binary updates tile shows zero updates, then use the "Dynamics 365 for Operations Platform Update 3" package from the Shared asset library.</source>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source>When using this package from the shared asset library the path required in step 3 below changes to ..<ph id="ph1">\\</ph>AOSService<ph id="ph2">\\</ph>Packages<ph id="ph3">\\</ph>files<ph id="ph4">\\</ph>dynamicsax-framework-bin.7.0.4307.16141.zip<ph id="ph5">\\</ph>CustomDeployablePackage</source>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source>On the <bpt id="p1">**</bpt>Add hotfixes<ept id="p1">**</ept> page, click <bpt id="p2">**</bpt>Select all<ept id="p2">**</ept>, click <bpt id="p3">**</bpt>Add<ept id="p3">**</ept>, and then click <bpt id="p4">**</bpt>Download package<ept id="p4">**</ept>.</source>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source>On the next page, click <bpt id="p1">**</bpt>Download<ept id="p1">**</ept>.</source>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source>After the package is downloaded, extract the contents, and go to the following directory to find the DataUpgrade.zip file (note that the version number in the path will vary): ..<ph id="ph1">\\</ph>AOSServiceDSC<ph id="ph2">\\</ph>Packages<ph id="ph3">\\</ph>files<ph id="ph4">\\</ph>dynamicsax-framework-bin.7.0.4127.24083.zip<ph id="ph5">\\</ph>CustomDeployablePackage</source>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>Note:<ept id="p1">**</ept> Computers that are deployed from LCS will already have a DataUpgrade.zip file.</source>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>However, that file is out of date and includes issues that have been resolved in later fixes.</source>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source>Always download the latest version of the file from LCS.</source>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>Remove encryption certification rotation</source>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>Extract the DataUpgrade.zip deployable package to C:<ph id="ph1">\\</ph>Temp or a location of your choice.</source>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source>Open the following file in a text editor: C:<ph id="ph1">\\</ph>Temp<ph id="ph2">\\</ph>DataUpgrade<ph id="ph3">\\</ph>RotateConfigData<ph id="ph4">\\</ph>ServicingRotations.json file.</source>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source>Modify the file as shown here, and save it.</source>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source>This step is required only for one-box environments.</source>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source>Because you're removing the need for encryption certificate rotations, old data in encrypted fields in your database will no longer be readable.</source>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>This is a technical limitation for a one-box data upgrade.</source>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>New data that goes into those fields after the upgrade is completed is unaffected.</source>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>For details about the affected fields, see the <bpt id="p1">[</bpt>"Encrypted fields in demo data"<ept id="p1">](#encrypted-fields-in-demo-data)</ept> section later in this topic.</source>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>Run the Windows PowerShell Integrated Scripting Environment (ISE) as an administrator.</source>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>Open C:<ph id="ph1">\\</ph>Temp<ph id="ph2">\\</ph>DataUpgrade<ph id="ph3">\\</ph>RotateConfigData<ph id="ph4">\\</ph>Scripts<ph id="ph5">\\</ph>EncryptRotationConfigData.ps1.</source>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>Press F5 to run the script.</source>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source>Fix the duplicate key issue (February 2016 release only)</source>
        </trans-unit>
        <trans-unit id="150" translate="yes" xml:space="preserve">
          <source>This step is required if you're upgrading a database from the Dynamics AX February 2016 release (also known as RTW).</source>
        </trans-unit>
        <trans-unit id="151" translate="yes" xml:space="preserve">
          <source>Open the following file in a text editor: C:<ph id="ph1">\\</ph>Temp<ph id="ph2">\\</ph>DataUpgrade<ph id="ph3">\\</ph>AOSService<ph id="ph4">\\</ph>Scripts<ph id="ph5">\\</ph>AutoDataUpgradePreReqs.ps1.</source>
        </trans-unit>
        <trans-unit id="152" translate="yes" xml:space="preserve">
          <source>Comment out or remove the following line.</source>
        </trans-unit>
        <trans-unit id="153" translate="yes" xml:space="preserve">
          <source>Save the file.</source>
        </trans-unit>
        <trans-unit id="154" translate="yes" xml:space="preserve">
          <source>Upgrade the database</source>
        </trans-unit>
        <trans-unit id="155" translate="yes" xml:space="preserve">
          <source>Install the deployable package from the C:<ph id="ph1">\\</ph>Temp<ph id="ph2">\\</ph>DataUpgrade folder.</source>
        </trans-unit>
        <trans-unit id="156" translate="yes" xml:space="preserve">
          <source>Use the instructions in <bpt id="p1">[</bpt>Install a deployable package<ept id="p1">](http://ax.help.dynamics.com/en/wiki/installing-deployable-package-in-ax7/)</ept>.</source>
        </trans-unit>
        <trans-unit id="157" translate="yes" xml:space="preserve">
          <source>Restore a backup of the source database to your one-box demo or development environment that is already running the latest Dynamics 365 for Operations update that you wish to upgrade to.</source>
        </trans-unit>
        <trans-unit id="158" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>Note:<ept id="p1">**</ept> For better upload/download speed between Azure virtual machines (VMs), we recommend that you use AzCopy.</source>
        </trans-unit>
        <trans-unit id="159" translate="yes" xml:space="preserve">
          <source>For details about how to download and use AzCopy to copy to or from an Azure Blob store, see <bpt id="p1">[</bpt>Transfer data with the AzCopy Command-Line Utility<ept id="p1">](https://azure.microsoft.com/en-us/documentation/articles/storage-use-azcopy/)</ept>.</source>
        </trans-unit>
        <trans-unit id="160" translate="yes" xml:space="preserve">
          <source>Run the runbook file until Step 4: GlobalBackup.</source>
        </trans-unit>
        <trans-unit id="161" translate="yes" xml:space="preserve">
          <source>Rename the existing Update 1 database, and replace it with the source database that you want to upgrade.</source>
        </trans-unit>
        <trans-unit id="162" translate="yes" xml:space="preserve">
          <source>Create a backup of the source database, in case you need to revert to it, because the following steps will modify the source database.</source>
        </trans-unit>
        <trans-unit id="163" translate="yes" xml:space="preserve">
          <source>Mark step 4 of the runbook completed, and continue to run the runbook until it's completed.</source>
        </trans-unit>
        <trans-unit id="164" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>Notes:<ept id="p1">**</ept></source>
        </trans-unit>
        <trans-unit id="165" translate="yes" xml:space="preserve">
          <source>The steps after step 4 of the runbook run the upgrade scripts.</source>
        </trans-unit>
        <trans-unit id="166" translate="yes" xml:space="preserve">
          <source>If there is data in any staging tables that are used by data management, this step fails, and you receive the following error message.</source>
        </trans-unit>
        <trans-unit id="167" translate="yes" xml:space="preserve">
          <source>Staging tables should be empty in order to proceed with the data upgrade.</source>
        </trans-unit>
        <trans-unit id="168" translate="yes" xml:space="preserve">
          <source>Please run the DeleteScriptForStagingTables.sql by carefully reviewing the script in order to remove the data from the staging tables.</source>
        </trans-unit>
        <trans-unit id="169" translate="yes" xml:space="preserve">
          <source>In this case, run DeleteScriptForStagingTables.sql to clean up the staging tables.</source>
        </trans-unit>
        <trans-unit id="170" translate="yes" xml:space="preserve">
          <source>You can find this script under AOSServiceScripts in your data upgrade folder.</source>
        </trans-unit>
        <trans-unit id="171" translate="yes" xml:space="preserve">
          <source>After the script has finished running, rerun this step.</source>
        </trans-unit>
        <trans-unit id="172" translate="yes" xml:space="preserve">
          <source>How to troubleshoot upgrade script errors</source>
        </trans-unit>
        <trans-unit id="173" translate="yes" xml:space="preserve">
          <source>How to re-run the runbook after a data upgrade script failure</source>
        </trans-unit>
        <trans-unit id="174" translate="yes" xml:space="preserve">
          <source>A data upgrade deployable package allows more granular re-running than a typical deployable package.</source>
        </trans-unit>
        <trans-unit id="175" translate="yes" xml:space="preserve">
          <source>The step at which the data upgrade scripts begin executing is step 5.</source>
        </trans-unit>
        <trans-unit id="176" translate="yes" xml:space="preserve">
          <source>If experiencing a failure during step 5, check the output in the command window to identify which sub-step you reached – for example it may be 5.3, the issue the command follows to re-run from that sub-step.</source>
        </trans-unit>
        <trans-unit id="177" translate="yes" xml:space="preserve">
          <source>This is to allow the user to keep re-running a particular failing script during debugging, without having to re-run the entire data upgrade piece (including database synchronization).</source>
        </trans-unit>
        <trans-unit id="178" translate="yes" xml:space="preserve">
          <source>How to view more detail about a script error</source>
        </trans-unit>
        <trans-unit id="179" translate="yes" xml:space="preserve">
          <source>Upgrade scripts are running in X++ using a batch process which the runbook installer is starting.</source>
        </trans-unit>
        <trans-unit id="180" translate="yes" xml:space="preserve">
          <source>There are classes you can view in the Application Explorer in Visual Studio, they are prefixed with <bpt id="p1">*</bpt>ReleaseUpdate<ept id="p1">*</ept>.</source>
        </trans-unit>
        <trans-unit id="181" translate="yes" xml:space="preserve">
          <source>If an upgrade script fails during the runbook process a user can discover more detail about the reason for the error by opening SQL Management Studio and querying the ReleaseUpdateScriptsErrorLog as follows.</source>
        </trans-unit>
        <trans-unit id="182" translate="yes" xml:space="preserve">
          <source>It is possible to then take that code, add it to a new runnable class in Visual Studio and directly observe, debug, and rework it’s behaviour.</source>
        </trans-unit>
        <trans-unit id="183" translate="yes" xml:space="preserve">
          <source>How to skip failed scripts</source>
        </trans-unit>
        <trans-unit id="184" translate="yes" xml:space="preserve">
          <source>This process is only designed to be used in a development scenario – as an aid to the troubleshooting process, it allows the user to skip all scripts that have failed a certain number of times and move to the next viable scripts instead.</source>
        </trans-unit>
        <trans-unit id="185" translate="yes" xml:space="preserve">
          <source>The process is intentionally very manual to reduce the likelihood that a user skips scripts without realizing they were skipped.</source>
        </trans-unit>
        <trans-unit id="186" translate="yes" xml:space="preserve">
          <source>In the table ReleaseUpdateConfiguration there is a new field called ScriptRetryCount.</source>
        </trans-unit>
        <trans-unit id="187" translate="yes" xml:space="preserve">
          <source>The value in this field controls how many times the runbook process will re-run a script before it ignores it.</source>
        </trans-unit>
        <trans-unit id="188" translate="yes" xml:space="preserve">
          <source>When the runbook executes, the system updates the field ReleaseUpdateScriptsErrorLog.ErrorCount each time a specific script fails (creating a new row for each distinct script).</source>
        </trans-unit>
        <trans-unit id="189" translate="yes" xml:space="preserve">
          <source>Within the DataUpgrade package folder, under ..<ph id="ph1">\\</ph>AosServices<ph id="ph2">\\</ph>Scripts<ph id="ph3">\\</ph> is a script named IgnoreBlockingScripts.ps1.</source>
        </trans-unit>
        <trans-unit id="190" translate="yes" xml:space="preserve">
          <source>Execute this from an Administrator PowerShell window to skip all scripts where the ScriptRetryCount=ErrorCount.</source>
        </trans-unit>
        <trans-unit id="191" translate="yes" xml:space="preserve">
          <source>Then re-run the failed runbook step and those scripts will be ignored.</source>
        </trans-unit>
        <trans-unit id="192" translate="yes" xml:space="preserve">
          <source>The field ReleaseUpdateScriptsErrorLog.Ignored will also have been set for each skipped script so that they can be identified later.</source>
        </trans-unit>
        <trans-unit id="193" translate="yes" xml:space="preserve">
          <source>How to monitor duration of executed scripts</source>
        </trans-unit>
        <trans-unit id="194" translate="yes" xml:space="preserve">
          <source>Each successfully executed script records the amount of time it took to process in minutes in the ReleaseUpdateScriptsLog.DurationMins column.</source>
        </trans-unit>
        <trans-unit id="195" translate="yes" xml:space="preserve">
          <source>This is intended as a simple way to identify the longest running scripts when working on performance tuning the data upgrade process.</source>
        </trans-unit>
        <trans-unit id="196" translate="yes" xml:space="preserve">
          <source>It is important to understand that the timings here are the duration for each individual script to run but multiple scripts will run in parallel, so the sum of the DurationMins column is greater than the overall duration of the upgrade process.</source>
        </trans-unit>
        <trans-unit id="197" translate="yes" xml:space="preserve">
          <source>Known issues</source>
        </trans-unit>
        <trans-unit id="198" translate="yes" xml:space="preserve">
          <source>The system fails to locate or generate a user GUID</source>
        </trans-unit>
        <trans-unit id="199" translate="yes" xml:space="preserve">
          <source>You might receive the following error message.</source>
        </trans-unit>
        <trans-unit id="200" translate="yes" xml:space="preserve">
          <source>…Unhandled exception More Information: System failed to locate or generate a user GUID…</source>
        </trans-unit>
        <trans-unit id="201" translate="yes" xml:space="preserve">
          <source>In this case, rerun the runbook step that failed.</source>
        </trans-unit>
        <trans-unit id="202" translate="yes" xml:space="preserve">
          <source>You will then be able to continue.</source>
        </trans-unit>
        <trans-unit id="203" translate="yes" xml:space="preserve">
          <source>Presync or postsync errors on ReleaseUpdateDB71<ph id="ph1">\_</ph>LedgerPeriodClose</source>
        </trans-unit>
        <trans-unit id="204" translate="yes" xml:space="preserve">
          <source>You might receive one of the following error messages on either preSyncLedgerPeriodCloseTemplateTask, updateMenuItemTypeForCurrencyReval, updateLedgerPeriodCloseTemplateTask methods in the ReleaseUpdateDB71<ph id="ph1">\_</ph>LedgerPeriodClose class:</source>
        </trans-unit>
        <trans-unit id="205" translate="yes" xml:space="preserve">
          <source>Cannot execute the required database operation.</source>
        </trans-unit>
        <trans-unit id="206" translate="yes" xml:space="preserve">
          <source>The SQL database has issued an error.</source>
        </trans-unit>
        <trans-unit id="207" translate="yes" xml:space="preserve">
          <source>Object Server DynamicsAXBatchManagement: <ph id="ph1">\[</ph>Microsoft<ph id="ph2">\]</ph><ph id="ph3">\[</ph>SQL Server Native Client 11.0<ph id="ph4">\]</ph><ph id="ph5">\[</ph>SQL Server<ph id="ph6">\]</ph>Invalid column name 'TEMPLATE'.</source>
        </trans-unit>
        <trans-unit id="208" translate="yes" xml:space="preserve">
          <source>INSERT INTO LedgerPeriodCloseTemplateTaskTmp ( TEMPLATE, AREA, NAME, MENUITEM, MENUITEMTYPE, TARGETDAYSFROMPROJECTCOMPLETE, DUETIME, LEGALENTITYSELECTION, RECVERSION, PARTITION, RECID, CLOSINGROLE, LINENUM) SELECT T1.TEMPLATE, T1.AREA, T1.NAME, T1.MENUITEM, T1.MENUITEMTYPE, T1.TARGETDAYSFROMPROJECTCOMPLETE, T1.DUETIME, T1.LEGALENTITYSELECTION, T1.RECVERSION, T1.PARTITION, T1.RECID, T1.CLOSINGROLE, 0 FROM LedgerPeriodCloseTemplateTask T1 session 1013 (Admin) Microsoft.Dynamics.Ax.Xpp.ErrorException: Cannot execute the required database operation.</source>
        </trans-unit>
        <trans-unit id="209" translate="yes" xml:space="preserve">
          <source>The SQL database has issued an error.</source>
        </trans-unit>
        <trans-unit id="210" translate="yes" xml:space="preserve">
          <source>Cannot execute the required database operation.</source>
        </trans-unit>
        <trans-unit id="211" translate="yes" xml:space="preserve">
          <source>The SQL database has issued an error.</source>
        </trans-unit>
        <trans-unit id="212" translate="yes" xml:space="preserve">
          <source>Object Server DynamicsAXBatchManagement: <ph id="ph1">\[</ph>Microsoft<ph id="ph2">\]</ph><ph id="ph3">\[</ph>SQL Server Native Client 11.0<ph id="ph4">\]</ph><ph id="ph5">\[</ph>SQL Server<ph id="ph6">\]</ph>Invalid column name 'MENUITEMTYPE'.</source>
        </trans-unit>
        <trans-unit id="213" translate="yes" xml:space="preserve">
          <source>UPDATE LedgerPeriodCloseTemplateTaskTmp SET MENUITEMTYPE = 0 WHERE MENUITEMTYPE = 2 AND MENUITEM = 'LedgerExchAdj' AND PARTITION = 5637144576 session 1013 (Admin) Microsoft.Dynamics.Ax.Xpp.ErrorException: Cannot execute the required database operation.</source>
        </trans-unit>
        <trans-unit id="214" translate="yes" xml:space="preserve">
          <source>The SQL database has issued an error.</source>
        </trans-unit>
        <trans-unit id="215" translate="yes" xml:space="preserve">
          <source>Cannot execute the required database operation.</source>
        </trans-unit>
        <trans-unit id="216" translate="yes" xml:space="preserve">
          <source>The SQL database has issued an error.</source>
        </trans-unit>
        <trans-unit id="217" translate="yes" xml:space="preserve">
          <source>Object Server DynamicsAXBatchManagement: <ph id="ph1">\[</ph>Microsoft<ph id="ph2">\]</ph><ph id="ph3">\[</ph>SQL Server Native Client 11.0<ph id="ph4">\]</ph><ph id="ph5">\[</ph>SQL Server<ph id="ph6">\]</ph>Invalid column name 'TEMPLATE'.</source>
        </trans-unit>
        <trans-unit id="218" translate="yes" xml:space="preserve">
          <source>INSERT INTO LedgerPeriodCloseTemplateTask ( TEMPLATE, AREA, NAME, MENUITEM, MENUITEMTYPE, TARGETDAYSFROMPROJECTCOMPLETE, DUETIME, LEGALENTITYSELECTION, RECVERSION, PARTITION, RECID, CLOSINGROLE, LINENUM) SELECT T1.TEMPLATE, T1.AREA, T1.NAME, T1.MENUITEM, T1.MENUITEMTYPE, T1.TARGETDAYSFROMPROJECTCOMPLETE, T1.DUETIME, T1.LEGALENTITYSELECTION, T1.RECVERSION, T1.PARTITION, T1.RECID, T1.CLOSINGROLE, T1.LINENUM FROM LedgerPeriodCloseTemplateTaskTmp T1 session 1013 (Admin)</source>
        </trans-unit>
        <trans-unit id="219" translate="yes" xml:space="preserve">
          <source>In this case, manually drop the table LedgerPeriodCloseTemplateTaskTmp table from the database via SQL Management Studio and then re-run the runbook step.</source>
        </trans-unit>
        <trans-unit id="220" translate="yes" xml:space="preserve">
          <source>This issue will be fixed in a future hotfix.</source>
        </trans-unit>
        <trans-unit id="221" translate="yes" xml:space="preserve">
          <source>KB number 3170386</source>
        </trans-unit>
        <trans-unit id="222" translate="yes" xml:space="preserve">
          <source>If KB number 3170386 isn't installed, you will receive the following error message.</source>
        </trans-unit>
        <trans-unit id="223" translate="yes" xml:space="preserve">
          <source>GlobalUpdate script for service model: AOSService on machine ….</source>
        </trans-unit>
        <trans-unit id="224" translate="yes" xml:space="preserve">
          <source>Etc ….</source>
        </trans-unit>
        <trans-unit id="225" translate="yes" xml:space="preserve">
          <source>UpgradeServiceHelper::WaitForDataUpgradeToComplete(Object<ph id="ph1">\[</ph><ph id="ph2">\]</ph>…</source>
        </trans-unit>
        <trans-unit id="226" translate="yes" xml:space="preserve">
          <source>The step failed</source>
        </trans-unit>
        <trans-unit id="227" translate="yes" xml:space="preserve">
          <source>This error is caused by a failure in the pre-sync or the post-sync substep of the data upgrade.</source>
        </trans-unit>
        <trans-unit id="228" translate="yes" xml:space="preserve">
          <source>You can use the following steps to determine which substep failed and the details of the failure: <bpt id="p1">**</bpt>Note:<ept id="p1">**</ept> You can't rerun the failed runbook step until the pre-sync or post-sync substep has been manually completed and the AutoDataUpgrade.config file has been updated to skip the substeps that have already been run.</source>
        </trans-unit>
        <trans-unit id="229" translate="yes" xml:space="preserve">
          <source>In File Explorer, in the …DataUpgradeAosServiceScripts folder, sort by descending order of date modified, and then look at the file at the top of the list to determine which substep failed.</source>
        </trans-unit>
        <trans-unit id="230" translate="yes" xml:space="preserve">
          <source>If the top file is named dbUpgrade<bpt id="p1">*</bpt>PreSync<ept id="p1">*</ept>Monitor.error.log, the pre-sync substep failed.</source>
        </trans-unit>
        <trans-unit id="231" translate="yes" xml:space="preserve">
          <source>If the top file is named dbUpgrade<bpt id="p1">*</bpt>PostSync<ept id="p1">*</ept>Monitor.error.log, the post-sync substep failed.</source>
        </trans-unit>
        <trans-unit id="232" translate="yes" xml:space="preserve">
          <source>In Management Studio, run the following <bpt id="p1">**</bpt>SELECT<ept id="p1">**</ept> statement.</source>
        </trans-unit>
        <trans-unit id="233" translate="yes" xml:space="preserve">
          <source>The second-to-last record in the result set will have the errors and call stacks for all the failures.</source>
        </trans-unit>
        <trans-unit id="234" translate="yes" xml:space="preserve">
          <source>DMF errors</source>
        </trans-unit>
        <trans-unit id="235" translate="yes" xml:space="preserve">
          <source>If you receive either of the following Data Migration Framework (DMF) errors, download Hotfix KB number 3170386, and restart the upgrade process.</source>
        </trans-unit>
        <trans-unit id="236" translate="yes" xml:space="preserve">
          <source>DMF PreSync</source>
        </trans-unit>
        <trans-unit id="237" translate="yes" xml:space="preserve">
          <source>Batch error: initial.DAT.ReleaseUpdateDB70<ph id="ph1">\_</ph>DMF.updateIntegrationActivityExecutionMessageIdPreSync (Batch:AOS-F01B9F0CCC8, 9, Info, Error, ):<ph id="ph2">\[</ph><ph id="ph3">\[</ph>1<ph id="ph4">\]</ph><ph id="ph5">\[</ph>3,Cannot execute the required database operation.</source>
        </trans-unit>
        <trans-unit id="238" translate="yes" xml:space="preserve">
          <source>The SQL database has issued an error.<ph id="ph1">\]</ph><ph id="ph2">\[</ph>3,Object Server DynamicsAXBatchManagement: <ph id="ph3">\]</ph><ph id="ph4">\[</ph>3,<ph id="ph5">\[</ph>Microsoft<ph id="ph6">\]</ph><ph id="ph7">\[</ph>SQL Server Native Client 11.0<ph id="ph8">\]</ph><ph id="ph9">\[</ph>SQL Server<ph id="ph10">\]</ph>Incorrect syntax near 'GO'.<ph id="ph11">\]</ph><ph id="ph12">\[</ph>3,</source>
        </trans-unit>
        <trans-unit id="239" translate="yes" xml:space="preserve">
          <source>DMF PostSync</source>
        </trans-unit>
        <trans-unit id="240" translate="yes" xml:space="preserve">
          <source>Batch error: initial.DAT.ReleaseUpdateDB70<ph id="ph1">\_</ph>DMF.updateIntegrationActivityExecutionMessageIdPostSync (Batch:AOS-F01B9F0CCC8, 9, Info, Error, ):<ph id="ph2">\[</ph><ph id="ph3">\[</ph>1<ph id="ph4">\]</ph><ph id="ph5">\[</ph>3,Cannot execute the required database operation.The SQL database has issued an error.<ph id="ph6">\]</ph><ph id="ph7">\[</ph>3,Object Server DynamicsAXBatchManagement: <ph id="ph8">\]</ph><ph id="ph9">\[</ph>3,<ph id="ph10">\[</ph>Microsoft<ph id="ph11">\]</ph><ph id="ph12">\[</ph>SQL Server Native Client 11.0<ph id="ph13">\]</ph><ph id="ph14">\[</ph>SQL Server<ph id="ph15">\]</ph>Incorrect syntax near 'GO'.<ph id="ph16">\]</ph><ph id="ph17">\[</ph>3,</source>
        </trans-unit>
        <trans-unit id="241" translate="yes" xml:space="preserve">
          <source>Encrypted fields in demo data</source>
        </trans-unit>
        <trans-unit id="242" translate="yes" xml:space="preserve">
          <source>After upgrade, values in encrypted fields in the database will be unreadable.</source>
        </trans-unit>
        <trans-unit id="243" translate="yes" xml:space="preserve">
          <source>However, new values that are entered in these fields after upgrade will be readable.</source>
        </trans-unit>
        <trans-unit id="244" translate="yes" xml:space="preserve">
          <source>This behavior occurs because of a technical limitation that is related to the certificate that is used for data encryption.</source>
        </trans-unit>
        <trans-unit id="245" translate="yes" xml:space="preserve">
          <source>The following table shows the fields that are affected.</source>
        </trans-unit>
        <trans-unit id="246" translate="yes" xml:space="preserve">
          <source>Table.Field</source>
        </trans-unit>
        <trans-unit id="247" translate="yes" xml:space="preserve">
          <source>Data exists in demo data</source>
        </trans-unit>
        <trans-unit id="248" translate="yes" xml:space="preserve">
          <source>CreditCardAccountSetup.SecureMerchantProperties</source>
        </trans-unit>
        <trans-unit id="249" translate="yes" xml:space="preserve">
          <source>Yes</source>
        </trans-unit>
        <trans-unit id="250" translate="yes" xml:space="preserve">
          <source>ExchangeRateProviderConfigurationDetails.Value</source>
        </trans-unit>
        <trans-unit id="251" translate="yes" xml:space="preserve">
          <source>Yes</source>
        </trans-unit>
        <trans-unit id="252" translate="yes" xml:space="preserve">
          <source>RetailChannelPaymentConnectorLine.SecureMerchantProperties</source>
        </trans-unit>
        <trans-unit id="253" translate="yes" xml:space="preserve">
          <source>Yes</source>
        </trans-unit>
        <trans-unit id="254" translate="yes" xml:space="preserve">
          <source>RetailConnDatabaseProfile.ConnectionString</source>
        </trans-unit>
        <trans-unit id="255" translate="yes" xml:space="preserve">
          <source>Yes</source>
        </trans-unit>
        <trans-unit id="256" translate="yes" xml:space="preserve">
          <source>RetailHardwareProfile.SecureMerchantProperties</source>
        </trans-unit>
        <trans-unit id="257" translate="yes" xml:space="preserve">
          <source>Yes</source>
        </trans-unit>
        <trans-unit id="258" translate="yes" xml:space="preserve">
          <source>RetailHardwareProfileMerchantInfoEntity.SecureMerchantProperties</source>
        </trans-unit>
        <trans-unit id="259" translate="yes" xml:space="preserve">
          <source>Yes</source>
        </trans-unit>
        <trans-unit id="260" translate="yes" xml:space="preserve">
          <source>FiscalEstablishment<ph id="ph1">\_</ph>BR.ConsumerEFDocCsc</source>
        </trans-unit>
        <trans-unit id="261" translate="yes" xml:space="preserve">
          <source>No</source>
        </trans-unit>
        <trans-unit id="262" translate="yes" xml:space="preserve">
          <source>FiscalEstablishmentEntity.CSC</source>
        </trans-unit>
        <trans-unit id="263" translate="yes" xml:space="preserve">
          <source>No</source>
        </trans-unit>
        <trans-unit id="264" translate="yes" xml:space="preserve">
          <source>FiscalEstablishmentStaging.CSC</source>
        </trans-unit>
        <trans-unit id="265" translate="yes" xml:space="preserve">
          <source>No</source>
        </trans-unit>
        <trans-unit id="266" translate="yes" xml:space="preserve">
          <source>HcmPersonIdentificationNumber.PersonIdentificationNumber</source>
        </trans-unit>
        <trans-unit id="267" translate="yes" xml:space="preserve">
          <source>No</source>
        </trans-unit>
        <trans-unit id="268" translate="yes" xml:space="preserve">
          <source>HcmWorkerActionHire.PersonIdentificationNumber</source>
        </trans-unit>
        <trans-unit id="269" translate="yes" xml:space="preserve">
          <source>No</source>
        </trans-unit>
        <trans-unit id="270" translate="yes" xml:space="preserve">
          <source>SysEmailSMPTPassword.Password</source>
        </trans-unit>
        <trans-unit id="271" translate="yes" xml:space="preserve">
          <source>No</source>
        </trans-unit>
        <trans-unit id="272" translate="yes" xml:space="preserve">
          <source>SysOAuthUserTokens.EncryptedAccessToken</source>
        </trans-unit>
        <trans-unit id="273" translate="yes" xml:space="preserve">
          <source>No</source>
        </trans-unit>
        <trans-unit id="274" translate="yes" xml:space="preserve">
          <source>SysOAuthUserTokens.EncryptedRefreshToken</source>
        </trans-unit>
        <trans-unit id="275" translate="yes" xml:space="preserve">
          <source>No</source>
        </trans-unit>
        <trans-unit id="276" translate="yes" xml:space="preserve">
          <source>See also</source>
        </trans-unit>
        <trans-unit id="277" translate="yes" xml:space="preserve">
          <source><bpt id="p1">[</bpt>Process for upgrading to the latest Dynamics AX update<ept id="p1">](http://ax.help.dynamics.com/en/wiki/process-for-upgrading-to-the-latest-dynamics-ax-update/)</ept></source>
        </trans-unit>
      </group>
    </body>
  </file>
</xliff>