{"content":"---\n# required metadata\n\ntitle: Extend the number sequence scope\ndescription: This topic explains how developers can extend number sequence scope.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 04/14/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: 2051\nms.search.scope: AX 7.0.0, Operations\n# ms.tgt_pltfrm: \nms.custom: 10031\nms.assetid: 4be8b7a1-9632-4368-af41-6811cd100a37\nms.search.region: Global\n# ms.search.industry: \nms.author: lgou\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Extend the number sequence scope\n\nThis topic shows you how to extend the number sequence scope.\n\nThe scope of a number sequence defines which organization uses the number sequence. The scope can be **Shared**, **Company**, **Legal entity**, or **Operating unit**. **Company** and **Legal entity** scopes can be combined with fiscal calendar periods to create even more specific number sequences. New number sequence scopes can be added through extensions.  \n\nTo create a new scope and have it show up in the Dynamics 365 for Operations client, complete the following steps:\n\n1. Create an enum extension for **NumberSeqParameterType**. In the extension, add a new enum value for the new scope type. \n1. Create an enum extension for **NumberSequenceType**. Add a new enum value for the new scope type. The **NumberSequenceType** enum is used in **NumberSequenceTableEntity** and **NumberSequencesReferenceEntity**.\n1. Create a table extension for the **NumberSequenceScope** table. Add a new field for the new scope type.\n1. Create an extension class for **NumberSeqScope** class.\n  1. Create a post handler for the **NumberSeqScope::getValidScopeTypes** method. In the event handler method, add the new scope type to the valid scope types list.\n  1. Create an event handler for the **onGetFormatSegmentShortName** delegate. In the event handler, return the short name for the new scope type.\n  1. Create a post handler for the **NumberSeqScope::find** method and add logic for the new scope type so the corresponding **NumberSeqScope** instance can be found.   \n  1. Create a post handler for the **NumberSeqScope::getId** method and add logic for the new scope type, so the corresponding record can be found (or created if it does not exist) in the **NumberSequenceScope** table. \n1. Create an extension class for the **NumberSequenceScopeFactory** class. Add a method that initializes the new **NumberSeqScope** that represents the new scope type.\n1. Create a form extension for the **NumberSequenceDetails** form. Add controls that show the new scope type to the **Scope** tab.\n1. Create an extension class for the **NumberSequenceDetails** form.\n  1. Create a post handler for the **updateScopeControlVisibility** method to show the new scope type when the new scope type is selected in the **Scope** box.\n  2. Create a post handler for the **updateScopeControlValues** method to update the values of the controls in the **Scope** tab.\n  3. Create a post handler for the **createScope** method to initialize a **NumberSeqScope** instance when the new scope type is selected.\n  4. Create an event handler for the **getShortNameForParameterType** delegate to return the short name for the new scope type.\n1. Add an extension class for the **NumberSequenceTableEntity** and **NumberSequencesReferenceEntity** data entities. Create post handlers for the **GenerateNumberSequenceScopeTypes** and **GenerateNumberSequenceScopeValues** methods to generate the **NumberSequenceScope** for the new scope type.\n\n\n","nodes":[{"pos":[32,64],"content":"Extend the number sequence scope","needQuote":true,"needEscape":true,"nodes":[{"content":"Extend the number sequence scope","pos":[0,32]}]},{"pos":[78,146],"content":"This topic explains how developers can extend number sequence scope.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic explains how developers can extend number sequence scope.","pos":[0,68]}]},{"pos":[642,674],"content":"Extend the number sequence scope","linkify":"Extend the number sequence scope","nodes":[{"content":"Extend the number sequence scope","pos":[0,32]}]},{"content":"This topic shows you how to extend the number sequence scope.","pos":[676,737]},{"content":"The scope of a number sequence defines which organization uses the number sequence.","pos":[739,822]},{"content":"The scope can be <bpt id=\"p1\">**</bpt>Shared<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Company<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Legal entity<ept id=\"p3\">**</ept>, or <bpt id=\"p4\">**</bpt>Operating unit<ept id=\"p4\">**</ept>.","pos":[823,905],"source":" The scope can be **Shared**, **Company**, **Legal entity**, or **Operating unit**."},{"content":"<bpt id=\"p1\">**</bpt>Company<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Legal entity<ept id=\"p2\">**</ept> scopes can be combined with fiscal calendar periods to create even more specific number sequences.","pos":[906,1037],"source":"**Company** and **Legal entity** scopes can be combined with fiscal calendar periods to create even more specific number sequences."},{"content":"New number sequence scopes can be added through extensions.","pos":[1038,1097]},{"content":"To create a new scope and have it show up in the Dynamics 365 for Operations client, complete the following steps:","pos":[1101,1215]},{"content":"Create an enum extension for <bpt id=\"p1\">**</bpt>NumberSeqParameterType<ept id=\"p1\">**</ept>.","pos":[1220,1276],"source":"Create an enum extension for **NumberSeqParameterType**."},{"content":"In the extension, add a new enum value for the new scope type.","pos":[1277,1339]},{"content":"Create an enum extension for <bpt id=\"p1\">**</bpt>NumberSequenceType<ept id=\"p1\">**</ept>.","pos":[1344,1396],"source":"Create an enum extension for **NumberSequenceType**."},{"content":"Add a new enum value for the new scope type.","pos":[1397,1441]},{"content":"The <bpt id=\"p1\">**</bpt>NumberSequenceType<ept id=\"p1\">**</ept> enum is used in <bpt id=\"p2\">**</bpt>NumberSequenceTableEntity<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>NumberSequencesReferenceEntity<ept id=\"p3\">**</ept>.","pos":[1442,1554],"source":" The **NumberSequenceType** enum is used in **NumberSequenceTableEntity** and **NumberSequencesReferenceEntity**."},{"content":"Create a table extension for the <bpt id=\"p1\">**</bpt>NumberSequenceScope<ept id=\"p1\">**</ept> table.","pos":[1558,1621],"source":"Create a table extension for the **NumberSequenceScope** table."},{"content":"Add a new field for the new scope type.","pos":[1622,1661]},{"pos":[1665,1720],"content":"Create an extension class for <bpt id=\"p1\">**</bpt>NumberSeqScope<ept id=\"p1\">**</ept> class.","source":"Create an extension class for **NumberSeqScope** class."},{"content":"Create a post handler for the <bpt id=\"p1\">**</bpt>NumberSeqScope::getValidScopeTypes<ept id=\"p1\">**</ept> method.","pos":[1726,1802],"source":"Create a post handler for the **NumberSeqScope::getValidScopeTypes** method."},{"content":"In the event handler method, add the new scope type to the valid scope types list.","pos":[1803,1885]},{"content":"Create an event handler for the <bpt id=\"p1\">**</bpt>onGetFormatSegmentShortName<ept id=\"p1\">**</ept> delegate.","pos":[1891,1964],"source":"Create an event handler for the **onGetFormatSegmentShortName** delegate."},{"content":"In the event handler, return the short name for the new scope type.","pos":[1965,2032]},{"pos":[2038,2199],"content":"Create a post handler for the <bpt id=\"p1\">**</bpt>NumberSeqScope::find<ept id=\"p1\">**</ept> method and add logic for the new scope type so the corresponding <bpt id=\"p2\">**</bpt>NumberSeqScope<ept id=\"p2\">**</ept> instance can be found.","source":"Create a post handler for the **NumberSeqScope::find** method and add logic for the new scope type so the corresponding **NumberSeqScope** instance can be found."},{"pos":[2208,2421],"content":"Create a post handler for the <bpt id=\"p1\">**</bpt>NumberSeqScope::getId<ept id=\"p1\">**</ept> method and add logic for the new scope type, so the corresponding record can be found (or created if it does not exist) in the <bpt id=\"p2\">**</bpt>NumberSequenceScope<ept id=\"p2\">**</ept> table.","source":"Create a post handler for the **NumberSeqScope::getId** method and add logic for the new scope type, so the corresponding record can be found (or created if it does not exist) in the **NumberSequenceScope** table."},{"content":"Create an extension class for the <bpt id=\"p1\">**</bpt>NumberSequenceScopeFactory<ept id=\"p1\">**</ept> class.","pos":[2426,2497],"source":"Create an extension class for the **NumberSequenceScopeFactory** class."},{"content":"Add a method that initializes the new <bpt id=\"p1\">**</bpt>NumberSeqScope<ept id=\"p1\">**</ept> that represents the new scope type.","pos":[2498,2590],"source":" Add a method that initializes the new **NumberSeqScope** that represents the new scope type."},{"content":"Create a form extension for the <bpt id=\"p1\">**</bpt>NumberSequenceDetails<ept id=\"p1\">**</ept> form.","pos":[2594,2657],"source":"Create a form extension for the **NumberSequenceDetails** form."},{"content":"Add controls that show the new scope type to the <bpt id=\"p1\">**</bpt>Scope<ept id=\"p1\">**</ept> tab.","pos":[2658,2721],"source":" Add controls that show the new scope type to the **Scope** tab."},{"pos":[2725,2790],"content":"Create an extension class for the <bpt id=\"p1\">**</bpt>NumberSequenceDetails<ept id=\"p1\">**</ept> form.","source":"Create an extension class for the **NumberSequenceDetails** form."},{"pos":[2796,2950],"content":"Create a post handler for the <bpt id=\"p1\">**</bpt>updateScopeControlVisibility<ept id=\"p1\">**</ept> method to show the new scope type when the new scope type is selected in the <bpt id=\"p2\">**</bpt>Scope<ept id=\"p2\">**</ept> box.","source":"Create a post handler for the **updateScopeControlVisibility** method to show the new scope type when the new scope type is selected in the **Scope** box."},{"pos":[2956,3080],"content":"Create a post handler for the <bpt id=\"p1\">**</bpt>updateScopeControlValues<ept id=\"p1\">**</ept> method to update the values of the controls in the <bpt id=\"p2\">**</bpt>Scope<ept id=\"p2\">**</ept> tab.","source":"Create a post handler for the **updateScopeControlValues** method to update the values of the controls in the **Scope** tab."},{"pos":[3086,3219],"content":"Create a post handler for the <bpt id=\"p1\">**</bpt>createScope<ept id=\"p1\">**</ept> method to initialize a <bpt id=\"p2\">**</bpt>NumberSeqScope<ept id=\"p2\">**</ept> instance when the new scope type is selected.","source":"Create a post handler for the **createScope** method to initialize a **NumberSeqScope** instance when the new scope type is selected."},{"pos":[3225,3347],"content":"Create an event handler for the <bpt id=\"p1\">**</bpt>getShortNameForParameterType<ept id=\"p1\">**</ept> delegate to return the short name for the new scope type.","source":"Create an event handler for the **getShortNameForParameterType** delegate to return the short name for the new scope type."},{"content":"Add an extension class for the <bpt id=\"p1\">**</bpt>NumberSequenceTableEntity<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>NumberSequencesReferenceEntity<ept id=\"p2\">**</ept> data entities.","pos":[3351,3465],"source":"Add an extension class for the **NumberSequenceTableEntity** and **NumberSequencesReferenceEntity** data entities."},{"content":"Create post handlers for the <bpt id=\"p1\">**</bpt>GenerateNumberSequenceScopeTypes<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>GenerateNumberSequenceScopeValues<ept id=\"p2\">**</ept> methods to generate the <bpt id=\"p3\">**</bpt>NumberSequenceScope<ept id=\"p3\">**</ept> for the new scope type.","pos":[3466,3645],"source":" Create post handlers for the **GenerateNumberSequenceScopeTypes** and **GenerateNumberSequenceScopeValues** methods to generate the **NumberSequenceScope** for the new scope type."}]}