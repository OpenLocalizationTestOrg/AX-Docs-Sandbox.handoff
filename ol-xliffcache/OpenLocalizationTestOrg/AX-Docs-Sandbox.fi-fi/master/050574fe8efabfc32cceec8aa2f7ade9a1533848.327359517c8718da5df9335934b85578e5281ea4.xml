{"nodes":[{"pos":[32,96],"content":"Develop an entity and use it for data migration | Microsoft Docs","needQuote":true,"needEscape":true,"nodes":[{"content":"Develop an entity and use it for data migration | Microsoft Docs","pos":[0,64]}]},{"pos":[110,223],"content":"This tutorial shows how to develop data entities in Microsoft Visual Studio and then use them for data migration.","needQuote":true,"needEscape":true,"nodes":[{"content":"This tutorial shows how to develop data entities in Microsoft Visual Studio and then use them for data migration.","pos":[0,113]}]},{"pos":[637,684],"content":"Develop an entity and use it for data migration","linkify":"Develop an entity and use it for data migration","nodes":[{"content":"Develop an entity and use it for data migration","pos":[0,47]}]},{"content":"This tutorial is broken out into two sections and four exercises.","pos":[686,751]},{"content":"In the first section, you will build a <bpt id=\"p1\">**</bpt>Project Category<ept id=\"p1\">**</ept> entity in Visual Studio.","pos":[752,836],"source":" In the first section, you will build a **Project Category** entity in Visual Studio."},{"content":"You will then use this entity to export data from Microsoft Dynamics 365 for Operations.","pos":[837,925]},{"content":"In the second section, you will use <bpt id=\"p1\">**</bpt>Customer Groups<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Customers<ept id=\"p2\">**</ept> entities to import multiple sets of files by using the new Data Import/Export Framework.","pos":[926,1088],"source":" In the second section, you will use **Customer Groups** and **Customers** entities to import multiple sets of files by using the new Data Import/Export Framework."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> This tutorial is designed to be slightly more challenging than <bpt id=\"p2\">[</bpt>Building and consuming data entities<ept id=\"p2\">](https://ax.help.dynamics.com/en/wiki/building-and-consuming-data-entities/)</ept>.","pos":[1089,1277],"source":"**Note:** This tutorial is designed to be slightly more challenging than [Building and consuming data entities](https://ax.help.dynamics.com/en/wiki/building-and-consuming-data-entities/)."},{"content":"Instead of providing a step-by-step guide, it has scenario exercises and describes the expected outcomes.","pos":[1278,1383]},{"content":"The assumption is that you've already familiarized yourself with entities and the Data Import/Export Framework through Microsoft Office Mix videos.","pos":[1384,1531]},{"pos":[1536,1549],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"This tutorial requires that you access the environment by using Remote Desktop.","pos":[1550,1629]},{"content":"You must be provisioned as an administrator on the instance.","pos":[1630,1690]},{"pos":[1695,1703],"content":"Base URL","linkify":"Base URL","nodes":[{"content":"Base URL","pos":[0,8]}]},{"content":"Throughout this tutorial, \"base URL\" refers to the base URL of the  instance.","pos":[1704,1781]},{"content":"In the cloud environment, you obtain the base URL from Microsoft Dynamics Lifecycle Services (LCS).","pos":[1787,1886]},{"content":"On a local virtual machine (VM), the base URL is https://usnconeboxax1aos.cloud.onebox.dynamics.com.","pos":[1891,1991]},{"pos":[1996,2065],"content":"Developing an entity in Visual Studio and enabling it for data export","linkify":"Developing an entity in Visual Studio and enabling it for data export","nodes":[{"content":"Developing an entity in Visual Studio and enabling it for data export","pos":[0,69]}]},{"pos":[2070,2086],"content":"Business problem","linkify":"Business problem","nodes":[{"content":"Business problem","pos":[0,16]}]},{"content":"You're developing a new solution for a Project module.","pos":[2088,2142]},{"content":"As part of your implementation, you must represent the data from project categories, so that this data can be imported into the system or exported from it.","pos":[2143,2298]},{"content":"To accomplish this goal, you will first build an entity for the project category and then use the export functionality to test data extraction.","pos":[2299,2442]},{"pos":[2448,2491],"content":"Exercise 1: Build a Project Category entity","linkify":"Exercise 1: Build a Project Category entity","nodes":[{"content":"Exercise 1: Build a Project Category entity","pos":[0,43]}]},{"content":"In this exercise, you will build an entity, <bpt id=\"p1\">**</bpt>Project Category<ept id=\"p1\">**</ept>, that uses the ProjCategory table as its primary data source.","pos":[2493,2619],"source":"In this exercise, you will build an entity, **Project Category**, that uses the ProjCategory table as its primary data source."},{"content":"This entity has the following properties.","pos":[2620,2661]},{"content":"Property","pos":[2665,2673]},{"content":"Value","pos":[2690,2695]},{"content":"Entity AOT name","pos":[2767,2782]},{"content":"ProjectCategoryEntity","pos":[2792,2813]},{"content":"Label","pos":[2818,2823]},{"content":"Project Categories","pos":[2843,2861]},{"content":"Entity category","pos":[2869,2884]},{"content":"Reference","pos":[2894,2903]},{"content":"Public name","pos":[2920,2931]},{"content":"ProjectCategory","pos":[2945,2960]},{"content":"Collection name","pos":[2971,2986]},{"content":"ProjectCategories","pos":[2996,3013]},{"content":"Enable public API","pos":[3022,3039]},{"content":"Yes","pos":[3047,3050]},{"content":"Enable data management","pos":[3073,3095]},{"content":"Yes","pos":[3098,3101]},{"content":"The entity also has the following fields.","pos":[3123,3164]},{"content":"Fields","pos":[3168,3174]},{"content":"ActiveInJournals","pos":[3226,3242]},{"content":"CategoryGroup","pos":[3255,3268]},{"content":"Category","pos":[3284,3292]},{"content":"TransactionType","pos":[3313,3328]},{"content":"CategoryName","pos":[3342,3354]},{"content":"Worker","pos":[3371,3377]},{"content":"CustomerPaymentRetention","pos":[3400,3424]},{"content":"IndirectCostComponent","pos":[3429,3450]},{"content":"ItemSalesTaxGroup","pos":[3458,3475]},{"content":"ServiceCode","pos":[3487,3498]},{"content":"Absence","pos":[3516,3523]},{"pos":[3549,3554],"content":"Steps","linkify":"Steps","nodes":[{"content":"Steps","pos":[0,5]}]},{"content":"In Visual Studio, create a new Dynamics 365 for Operations project.","pos":[3560,3627]},{"pos":[3632,3710],"content":"In Solution Explorer, select the project, and then right-click <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","source":"In Solution Explorer, select the project, and then right-click **Properties**."},{"pos":[3715,3779],"content":"Specify the following project properties, and then click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","source":"Specify the following project properties, and then click **OK**."},{"content":"Property","pos":[3786,3794]},{"content":"Value","pos":[3818,3823]},{"content":"Model","pos":[3902,3907]},{"content":"Application Suite","pos":[3934,3951]},{"content":"Company","pos":[3960,3967]},{"content":"USSI","pos":[3992,3996]},{"content":"Synchronize Database on build","pos":[4018,4047]},{"content":"True","pos":[4050,4054]},{"pos":[4075,4131],"content":"From the project, right-click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>New item<ept id=\"p2\">**</ept>.","source":"From the project, right-click **Add** &gt; **New item**."},{"pos":[4136,4196],"content":"Select <bpt id=\"p1\">**</bpt>Data Model<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Data Entity<ept id=\"p2\">**</ept> as your new item.","source":"Select **Data Model** &gt; **Data Entity** as your new item."},{"pos":[4201,4278],"content":"Enter a name, and then click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> to start the <bpt id=\"p2\">**</bpt>Data<ept id=\"p2\">**</ept> <bpt id=\"p3\">**</bpt>Entity<ept id=\"p3\">**</ept> wizard.","source":"Enter a name, and then click **Add** to start the **Data** **Entity** wizard."},{"content":"On the first page of the wizard, specify the set of properties for the entity by using the table earlier in this exercise.","pos":[4283,4405]},{"content":"Then click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.","pos":[4406,4426],"source":" Then click **Next**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Specify properties page<ept id=\"p1\">](media/SpecifyProperties_DevoEntity.png)](media/SpecifyProperties_DevoEntity.png)</ept>","pos":[4427,4535],"source":"[![Specify properties page](media/SpecifyProperties_DevoEntity.png)](media/SpecifyProperties_DevoEntity.png)"},{"content":"On the next page, add fields from the primary data source.","pos":[4540,4598]},{"content":"Make sure that each field name reflects the public contract (see the table earlier in this exercise).","pos":[4599,4700]},{"content":"To use the field's label as the field name, select the <bpt id=\"p1\">**</bpt>Convert label to field names<ept id=\"p1\">**</ept> option.","pos":[4701,4796],"source":" To use the field's label as the field name, select the **Convert label to field names** option."},{"content":"Clear the option for any fields that are not required for the entity.","pos":[4797,4866]},{"pos":[4871,4967],"content":"Click <bpt id=\"p1\">**</bpt>Finish<ept id=\"p1\">**</ept> to complete the wizard, and to add the entity and its artifacts to the project.","source":"Click **Finish** to complete the wizard, and to add the entity and its artifacts to the project."},{"content":"Build your project, so that you can start to use the entity.","pos":[4972,5032]},{"pos":[5039,5055],"content":"Expected outcome","linkify":"Expected outcome","nodes":[{"content":"Expected outcome","pos":[0,16]}]},{"content":"In Visual Studio, the following artifacts will appear in the project after you've completed the <bpt id=\"p1\">**</bpt>Data Entity<ept id=\"p1\">**</ept> wizard.","pos":[5061,5180],"source":"In Visual Studio, the following artifacts will appear in the project after you've completed the **Data Entity** wizard."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>New project artifacts<ept id=\"p1\">](media/TestAppSuite_DevoEntity.png)](media/TestAppSuite_DevoEntity.png)</ept>","pos":[5181,5277],"source":"[![New project artifacts](media/TestAppSuite_DevoEntity.png)](media/TestAppSuite_DevoEntity.png)"},{"content":"Right-click the data entity, and then select <bpt id=\"p1\">**</bpt>Open table browser<ept id=\"p1\">**</ept>.","pos":[5282,5350],"source":"Right-click the data entity, and then select **Open table browser**."},{"content":"The data from the entity should look like the following screen shot.","pos":[5351,5419]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Make sure that your company is set to <bpt id=\"p2\">**</bpt>USSI<ept id=\"p2\">**</ept>.","pos":[5420,5477],"source":"**Note:** Make sure that your company is set to **USSI**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Table browser<ept id=\"p1\">](media/TableBrowser_DevoEntity.png)](media/TableBrowser_DevoEntity.png)</ept>","pos":[5478,5566],"source":"[![Table browser](media/TableBrowser_DevoEntity.png)](media/TableBrowser_DevoEntity.png)"},{"pos":[5572,5655],"content":"Exercise 2: Export a limited set of data by using a sample file mapping and filters","linkify":"Exercise 2: Export a limited set of data by using a sample file mapping and filters","nodes":[{"content":"Exercise 2: Export a limited set of data by using a sample file mapping and filters","pos":[0,83]}]},{"content":"In this exercise, you will use the <bpt id=\"p1\">**</bpt>Project Category<ept id=\"p1\">**</ept> entity that you just built to export data.","pos":[5657,5755],"source":"In this exercise, you will use the **Project Category** entity that you just built to export data."},{"content":"To export only a subset of the data, you will use a sample file mapping and filters.","pos":[5756,5840]},{"content":"The exported data will be in XML format.","pos":[5841,5881]},{"pos":[5888,5893],"content":"Steps","linkify":"Steps","nodes":[{"content":"Steps","pos":[0,5]}]},{"pos":[5899,5980],"content":"After you've finished building the <bpt id=\"p1\">**</bpt>Project Category<ept id=\"p1\">**</ept> entity, start the client.","source":"After you've finished building the **Project Category** entity, start the client."},{"pos":[5985,6016],"content":"Change the company to <bpt id=\"p1\">**</bpt>USSI<ept id=\"p1\">**</ept>.","source":"Change the company to **USSI**."},{"pos":[6021,6101],"content":"In the <bpt id=\"p1\">**</bpt>Data management<ept id=\"p1\">**</ept> workspace, click <bpt id=\"p2\">**</bpt>Export<ept id=\"p2\">**</ept> to begin data extraction.","source":"In the **Data management** workspace, click **Export** to begin data extraction."},{"content":"Enter the export details, such as entity name and target data format.","pos":[6106,6175]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Entering export details<ept id=\"p1\">](media/ExportProjectCategory_DevoEntity.png)](media/ExportProjectCategory_DevoEntity.png)</ept> Use the following file as the sample file format for XML: <bpt id=\"p2\">[</bpt>ProjectCategoryExport<ph id=\"ph2\">\\_</ph>Sample<ept id=\"p2\">](media/ProjectCategoryExport_Sample.xlsx)</ept>.","pos":[6176,6424],"source":"[![Entering export details](media/ExportProjectCategory_DevoEntity.png)](media/ExportProjectCategory_DevoEntity.png) Use the following file as the sample file format for XML: [ProjectCategoryExport\\_Sample](media/ProjectCategoryExport_Sample.xlsx)."},{"content":"Open this file in a text editor, and save it as an XML file.","pos":[6425,6485]},{"content":"If the sample file mapping isn't valid, there is an incorrect field name in the entity.","pos":[6486,6573]},{"content":"Fix either the entity or the sample file to continue.","pos":[6574,6627]},{"content":"Click <bpt id=\"p1\">**</bpt>Filter<ept id=\"p1\">**</ept>, and then specify <bpt id=\"p2\">**</bpt>Project<ept id=\"p2\">**</ept> as the filter criterion, so that only limited data is exported.","pos":[6632,6742],"source":"Click **Filter**, and then specify **Project** as the filter criterion, so that only limited data is exported."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Filtering by project<ept id=\"p1\">](media/Inquiry_DevoEntity.png)](media/Inquiry_DevoEntity.png)</ept>","pos":[6743,6828],"source":"[![Filtering by project](media/Inquiry_DevoEntity.png)](media/Inquiry_DevoEntity.png)"},{"pos":[6833,6876],"content":"In the <bpt id=\"p1\">**</bpt>Export<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.","source":"In the **Export** dialog box, click **OK**."},{"pos":[6883,6899],"content":"Expected outcome","linkify":"Expected outcome","nodes":[{"content":"Expected outcome","pos":[0,16]}]},{"content":"Fifteen records are successfully exported.","pos":[6905,6947]},{"content":"The output is similar to the following file: <bpt id=\"p1\">[</bpt>ProjectCategoryExport<ph id=\"ph1\">\\_</ph>Output<ept id=\"p1\">](media/ProjectCategoryExport_Output.xlsx)</ept>.","pos":[6952,7070],"source":"The output is similar to the following file: [ProjectCategoryExport\\_Output](media/ProjectCategoryExport_Output.xlsx)."},{"content":"(Open the file in a text editor to verify this outcome.)","pos":[7071,7127]},{"pos":[7132,7206],"content":"Migrating data in multiple files by using the Data Import/Export Framework","linkify":"Migrating data in multiple files by using the Data Import/Export Framework","nodes":[{"content":"Migrating data in multiple files by using the Data Import/Export Framework","pos":[0,74]}]},{"pos":[7211,7227],"content":"Business problem","linkify":"Business problem","nodes":[{"content":"Business problem","pos":[0,16]}]},{"content":"You're implementing a new environment.","pos":[7229,7267]},{"content":"As part of this implementation, you want to migrate some legacy customer data.","pos":[7268,7346]},{"content":"The data is contained in two sets of files, each of which has data for the <bpt id=\"p1\">**</bpt>Customers<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Customer Groups<ept id=\"p2\">**</ept> entities.","pos":[7347,7469],"source":" The data is contained in two sets of files, each of which has data for the **Customers** and **Customer Groups** entities."},{"content":"This migration is slightly complex, because some columns in the data files don't map directly to the entities.","pos":[7470,7580]},{"content":"Additionally, the files have validation errors that must be corrected during the import process.","pos":[7581,7677]},{"pos":[7683,7742],"content":"Exercise 3: Create a data project and import multiple files","linkify":"Exercise 3: Create a data project and import multiple files","nodes":[{"content":"Exercise 3: Create a data project and import multiple files","pos":[0,59]}]},{"content":"In this exercise, you will import two files into the <bpt id=\"p1\">**</bpt>USRT<ept id=\"p1\">**</ept> company by using the new Data Import/Export Framework.","pos":[7744,7860],"source":"In this exercise, you will import two files into the **USRT** company by using the new Data Import/Export Framework."},{"content":"These files need to be imported in sequence by using a single data project.","pos":[7861,7936]},{"content":"The <bpt id=\"p1\">**</bpt>Customers<ept id=\"p1\">**</ept> entity has a reference to the <bpt id=\"p2\">**</bpt>Customer Groups<ept id=\"p2\">**</ept> entity.","pos":[7937,8012],"source":" The **Customers** entity has a reference to the **Customer Groups** entity."},{"content":"Because the Customers1 file doesn't map correctly to the <bpt id=\"p1\">**</bpt>Customers<ept id=\"p1\">**</ept> entity, you will receive an error when you upload the file.","pos":[8013,8143],"source":" Because the Customers1 file doesn't map correctly to the **Customers** entity, you will receive an error when you upload the file."},{"content":"Therefore, to complete the import process, you will have to provide the correct column mappings for the <bpt id=\"p1\">**</bpt>Customers<ept id=\"p1\">**</ept> entity.","pos":[8144,8269],"source":" Therefore, to complete the import process, you will have to provide the correct column mappings for the **Customers** entity."},{"pos":[8276,8281],"content":"Steps","linkify":"Steps","nodes":[{"content":"Steps","pos":[0,5]}]},{"content":"Open the following files in Microsoft Excel, and save them as CSV files in your local directory:","pos":[8287,8383]},{"pos":[8392,8427],"content":"<bpt id=\"p1\">[</bpt>Customers1<ept id=\"p1\">](media/Customers1.xlsx)</ept>","source":"[Customers1](media/Customers1.xlsx)"},{"pos":[8436,8481],"content":"<bpt id=\"p1\">[</bpt>CustomerGroups1<ept id=\"p1\">](media/CustomerGroups1.xlsx)</ept>","source":"[CustomerGroups1](media/CustomerGroups1.xlsx)"},{"pos":[8487,8533],"content":"In the client, change the company to <bpt id=\"p1\">**</bpt>USRT<ept id=\"p1\">**</ept>.","source":"In the client, change the company to **USRT**."},{"pos":[8538,8606],"content":"From the <bpt id=\"p1\">**</bpt>User<ept id=\"p1\">**</ept> dashboard, open the <bpt id=\"p2\">**</bpt>Data Management<ept id=\"p2\">**</ept> workspace.","source":"From the **User** dashboard, open the **Data Management** workspace."},{"pos":[8611,8660],"content":"Click <bpt id=\"p1\">**</bpt>Import<ept id=\"p1\">**</ept> to configure a new data project.","source":"Click **Import** to configure a new data project."},{"content":"Enter the project details, such as the name and file format.","pos":[8665,8725]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Entering project details<ept id=\"p1\">](media/CustDataMigration_DevoEntity.png)](media/CustDataMigration_DevoEntity.png)</ept>","pos":[8726,8835],"source":"[![Entering project details](media/CustDataMigration_DevoEntity.png)](media/CustDataMigration_DevoEntity.png)"},{"content":"For each file, select an entity, and then upload the data file.","pos":[8840,8903]},{"content":"Because the Customer1.csv file doesn't map correctly to the <bpt id=\"p1\">**</bpt>Customers<ept id=\"p1\">**</ept> entity, you will receive an error when you upload the file.","pos":[8908,9041],"source":"Because the Customer1.csv file doesn't map correctly to the **Customers** entity, you will receive an error when you upload the file."},{"content":"After the file is uploaded, click <bpt id=\"p1\">**</bpt>View mappings<ept id=\"p1\">**</ept> to fix the column mappings for the <bpt id=\"p2\">**</bpt>Customers<ept id=\"p2\">**</ept> entity.","pos":[9042,9150],"source":" After the file is uploaded, click **View mappings** to fix the column mappings for the **Customers** entity."},{"content":"<bpt id=\"p1\">**</bpt>Hint:<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>CustomerAccount<ept id=\"p2\">**</ept> is required in the entity during import.","pos":[9151,9221],"source":"**Hint:** **CustomerAccount** is required in the entity during import."},{"content":"It is mapped from <bpt id=\"p1\">**</bpt>AccountNum<ept id=\"p1\">**</ept> in the source file.","pos":[9222,9274],"source":" It is mapped from **AccountNum** in the source file."},{"content":"Address fields are optional for the import.","pos":[9275,9318]},{"pos":[9323,9417],"content":"When you've finished, click the <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> button in your browser to return to the data project.","source":"When you've finished, click the **Back** button in your browser to return to the data project."},{"pos":[9422,9473],"content":"On the <bpt id=\"p1\">**</bpt>Data Project<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Import now<ept id=\"p2\">**</ept>.","source":"On the **Data Project** page, click **Import now**."},{"pos":[9480,9496],"content":"Expected outcome","linkify":"Expected outcome","nodes":[{"content":"Expected outcome","pos":[0,16]}]},{"content":"Four updates and 23 inserts are successfully imported.","pos":[9502,9556]},{"content":"The <bpt id=\"p1\">**</bpt>Execution summary<ept id=\"p1\">**</ept> page resembles the following screen shot.","pos":[9561,9628],"source":"The **Execution summary** page resembles the following screen shot."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Execution summary page<ept id=\"p1\">](media/ExecutionSummary_DevoEntity.png)](media/ExecutionSummary_DevoEntity.png)</ept>","pos":[9629,9734],"source":"[![Execution summary page](media/ExecutionSummary_DevoEntity.png)](media/ExecutionSummary_DevoEntity.png)"},{"pos":[9740,9822],"content":"Exercise 4: Re-import by using an existing data project and manage data in staging","linkify":"Exercise 4: Re-import by using an existing data project and manage data in staging","nodes":[{"content":"Exercise 4: Re-import by using an existing data project and manage data in staging","pos":[0,82]}]},{"content":"In this exercise, you will use a new set of files to import data through the existing data project.","pos":[9824,9923]},{"content":"Customers2 contains new and updated data for the <bpt id=\"p1\">**</bpt>Customers<ept id=\"p1\">**</ept> entity.","pos":[9924,9994],"source":" Customers2 contains new and updated data for the **Customers** entity."},{"content":"CustomerGroups2 contains updated data for the <bpt id=\"p1\">**</bpt>Customer Groups<ept id=\"p1\">**</ept> entity.","pos":[9995,10068],"source":" CustomerGroups2 contains updated data for the **Customer Groups** entity."},{"content":"Customers2 contains some error records.","pos":[10069,10108]},{"content":"You will fix these errors in staging, validate the data, and then push it to the target to complete the import.","pos":[10109,10220]},{"pos":[10227,10232],"content":"Steps","linkify":"Steps","nodes":[{"content":"Steps","pos":[0,5]}]},{"content":"In the <bpt id=\"p1\">**</bpt>Data management<ept id=\"p1\">**</ept> workspace, select the existing data project, and the click <bpt id=\"p2\">**</bpt>Re-import<ept id=\"p2\">**</ept>.","pos":[10238,10338],"source":"In the **Data management** workspace, select the existing data project, and the click **Re-import**."},{"content":"By using the re-import functionality, you can preserve your previous settings for the data project and use new files for the import.","pos":[10339,10471]},{"content":"However, if you click <bpt id=\"p1\">**</bpt>Reload data project<ept id=\"p1\">**</ept> and upload new files instead, the previous mappings will be overridden.","pos":[10472,10589],"source":" However, if you click **Reload data project** and upload new files instead, the previous mappings will be overridden."},{"content":"Open the following files in Excel, and save them as CSV files in your local directory:","pos":[10594,10680]},{"pos":[10689,10724],"content":"<bpt id=\"p1\">[</bpt>Customers2<ept id=\"p1\">](media/Customers2.xlsx)</ept>","source":"[Customers2](media/Customers2.xlsx)"},{"pos":[10733,10778],"content":"<bpt id=\"p1\">[</bpt>CustomerGroups2<ept id=\"p1\">](media/CustomerGroups2.xlsx)</ept>","source":"[CustomerGroups2](media/CustomerGroups2.xlsx)"},{"content":"Upload the new files for each entity, and then click <bpt id=\"p1\">**</bpt>Import now<ept id=\"p1\">**</ept>.","pos":[10784,10852],"source":"Upload the new files for each entity, and then click **Import now**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Uploading new files for import<ept id=\"p1\">](media/JobExecution_DevoEntity.png)](media/JobExecution_DevoEntity.png)</ept>","pos":[10853,10958],"source":"[![Uploading new files for import](media/JobExecution_DevoEntity.png)](media/JobExecution_DevoEntity.png)"},{"content":"On the <bpt id=\"p1\">**</bpt>Status<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>View execution log<ept id=\"p2\">**</ept> to investigate the errors.","pos":[10963,11042],"source":"On the **Status** page, click **View execution log** to investigate the errors."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Execution log<ept id=\"p1\">](media/ViewExecutionLog_DevoEntity.png)](media/ViewExecutionLog_DevoEntity.png)</ept>","pos":[11043,11139],"source":"[![Execution log](media/ViewExecutionLog_DevoEntity.png)](media/ViewExecutionLog_DevoEntity.png)"},{"content":"On the <bpt id=\"p1\">**</bpt>Status<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>View staging<ept id=\"p2\">**</ept> to view the data in a staging table.","pos":[11144,11227],"source":"On the **Status** page, click **View staging** to view the data in a staging table."},{"content":"This view will also show records that have errors.","pos":[11228,11278]},{"content":"Click <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept> to fix records that have errors.","pos":[11283,11330],"source":"Click **Edit** to fix records that have errors."},{"content":"(The <bpt id=\"p1\">**</bpt>Customer Group<ept id=\"p1\">**</ept> value for records DM10221 and DM1022 isn't valid.)","pos":[11331,11405],"source":" (The **Customer Group** value for records DM10221 and DM1022 isn't valid.)"},{"content":"Select the records that you fixed, and then click <bpt id=\"p1\">**</bpt>Validate<ept id=\"p1\">**</ept>.","pos":[11410,11473],"source":"Select the records that you fixed, and then click **Validate**."},{"content":"Refresh the page to verify that the status of the records is <bpt id=\"p1\">**</bpt>Validated<ept id=\"p1\">**</ept>.","pos":[11474,11549],"source":" Refresh the page to verify that the status of the records is **Validated**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Verifying that records have Validated status<ept id=\"p1\">](media/Validated_DevoEntity.png)](media/Validated_DevoEntity.png)</ept>","pos":[11550,11663],"source":"[![Verifying that records have Validated status](media/Validated_DevoEntity.png)](media/Validated_DevoEntity.png)"},{"pos":[11668,11698],"content":"Click <bpt id=\"p1\">**</bpt>Copy data to target<ept id=\"p1\">**</ept>.","source":"Click **Copy data to target**."},{"content":"In the <bpt id=\"p1\">**</bpt>Select a job ID to run<ept id=\"p1\">**</ept> dialog box, in the <bpt id=\"p2\">**</bpt>Run for<ept id=\"p2\">**</ept> field, select <bpt id=\"p3\">**</bpt>Criteria<ept id=\"p3\">**</ept>, and set <bpt id=\"p4\">**</bpt>Row selected by user<ept id=\"p4\">**</ept> to <bpt id=\"p5\">**</bpt>Yes<ept id=\"p5\">**</ept>.","pos":[11703,11840],"source":"In the **Select a job ID to run** dialog box, in the **Run for** field, select **Criteria**, and set **Row selected by user** to **Yes**."},{"content":"Then click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","pos":[11841,11859],"source":" Then click **OK**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Selecting a job to run<ept id=\"p1\">](media/SelectJob_DevoEntity.png)](media/SelectJob_DevoEntity.png)</ept>","pos":[11860,11951],"source":"[![Selecting a job to run](media/SelectJob_DevoEntity.png)](media/SelectJob_DevoEntity.png)"},{"content":"On the <bpt id=\"p1\">**</bpt>Target data execution<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Run<ept id=\"p2\">**</ept>.","pos":[11956,12009],"source":"On the **Target data execution** page, click **Run**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Target data execution page<ept id=\"p1\">](media/TargetData_DevoEntity.png)](media/TargetData_DevoEntity.png)</ept>","pos":[12010,12107],"source":"[![Target data execution page](media/TargetData_DevoEntity.png)](media/TargetData_DevoEntity.png)"},{"content":"When the run is completed, refresh the page to see the latest staging status.","pos":[12112,12189]},{"pos":[12196,12212],"content":"Expected outcome","linkify":"Expected outcome","nodes":[{"content":"Expected outcome","pos":[0,16]}]},{"pos":[12218,12343],"content":"On the first try, the import succeeds for the <bpt id=\"p1\">**</bpt>Customer Groups<ept id=\"p1\">**</ept> entity and partially succeeds for the <bpt id=\"p2\">**</bpt>Customers<ept id=\"p2\">**</ept> entity.","source":"On the first try, the import succeeds for the **Customer Groups** entity and partially succeeds for the **Customers** entity."},{"content":"The <bpt id=\"p1\">**</bpt>Execution summary<ept id=\"p1\">**</ept> page shows that five records were created, three records were updated, and two records have errors.","pos":[12348,12473],"source":"The **Execution summary** page shows that five records were created, three records were updated, and two records have errors."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Execution summary page<ept id=\"p1\">](media/CustDataExecutionSumm_DevoEntity.png)](media/CustDataExecutionSumm_DevoEntity.png)</ept>","pos":[12474,12589],"source":"[![Execution summary page](media/CustDataExecutionSumm_DevoEntity.png)](media/CustDataExecutionSumm_DevoEntity.png)"},{"content":"In the staging view, two records have errors, as shown in the following screen shot.","pos":[12594,12678]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Records that have errors<ept id=\"p1\">](media/CustomerStagingErrors_DevoEntity.png)](media/CustomerStagingErrors_DevoEntity.png)</ept>","pos":[12679,12796],"source":"[![Records that have errors](media/CustomerStagingErrors_DevoEntity.png)](media/CustomerStagingErrors_DevoEntity.png)"},{"content":"After you fix the records and run the import again, the staging view shows that all records are completed.","pos":[12801,12907]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Completed status for all records<ept id=\"p1\">](media/CustomerStagingCompleted_DevoEntity.png)](media/CustomerStagingCompleted_DevoEntity.png)</ept>","pos":[12908,13039],"source":"[![Completed status for all records](media/CustomerStagingCompleted_DevoEntity.png)](media/CustomerStagingCompleted_DevoEntity.png)"}],"content":"---\n# required metadata\n\ntitle: Develop an entity and use it for data migration | Microsoft Docs\ndescription: This tutorial shows how to develop data entities in Microsoft Visual Studio and then use them for data migration.\nauthor: annbe\nmanager: AnnBe\nms.date: 2016-04-28 19:47:29\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# keywords: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: 61\nms.suite: Released- Dynamics AX 7.0.0\n# ms.tgt_pltfrm: \nms.custom: 83692\nms.assetid: 71a26f18-c8fe-4648-b50a-0957353f0c4b\n# ms.region: \n# ms.industry: \nms.author: RobinARH\n\n---\n\n# Develop an entity and use it for data migration\n\nThis tutorial is broken out into two sections and four exercises. In the first section, you will build a **Project Category** entity in Visual Studio. You will then use this entity to export data from Microsoft Dynamics 365 for Operations. In the second section, you will use **Customer Groups** and **Customers** entities to import multiple sets of files by using the new Data Import/Export Framework. **Note:** This tutorial is designed to be slightly more challenging than [Building and consuming data entities](https://ax.help.dynamics.com/en/wiki/building-and-consuming-data-entities/). Instead of providing a step-by-step guide, it has scenario exercises and describes the expected outcomes. The assumption is that you've already familiarized yourself with entities and the Data Import/Export Framework through Microsoft Office Mix videos.\n\n## Prerequisites\nThis tutorial requires that you access the environment by using Remote Desktop. You must be provisioned as an administrator on the instance.\n\n## Base URL\nThroughout this tutorial, \"base URL\" refers to the base URL of the  instance.\n\n-   In the cloud environment, you obtain the base URL from Microsoft Dynamics Lifecycle Services (LCS).\n-   On a local virtual machine (VM), the base URL is https://usnconeboxax1aos.cloud.onebox.dynamics.com.\n\n## Developing an entity in Visual Studio and enabling it for data export\n### Business problem\n\nYou're developing a new solution for a Project module. As part of your implementation, you must represent the data from project categories, so that this data can be imported into the system or exported from it. To accomplish this goal, you will first build an entity for the project category and then use the export functionality to test data extraction.\n\n### Exercise 1: Build a Project Category entity\n\nIn this exercise, you will build an entity, **Project Category**, that uses the ProjCategory table as its primary data source. This entity has the following properties.\n\n| Property               | Value                 |\n|------------------------|-----------------------|\n| Entity AOT name        | ProjectCategoryEntity |\n| Label                  | Project Categories    |\n| Entity category        | Reference             |\n| Public name            | ProjectCategory       |\n| Collection name        | ProjectCategories     |\n| Enable public API      | Yes                   |\n| Enable data management | Yes                   |\n\nThe entity also has the following fields.\n\n| Fields                   |\n|--------------------------|\n| ActiveInJournals         |\n| CategoryGroup            |\n| Category                 |\n| TransactionType          |\n| CategoryName             |\n| Worker                   |\n| CustomerPaymentRetention |\n| IndirectCostComponent    |\n| ItemSalesTaxGroup        |\n| ServiceCode              |\n| Absence                  |\n\n#### Steps\n\n1.  In Visual Studio, create a new Dynamics 365 for Operations project.\n2.  In Solution Explorer, select the project, and then right-click **Properties**.\n3.  Specify the following project properties, and then click **OK**.\n    | Property                      | Value             |\n    |-------------------------------|-------------------|\n    | Model                         | Application Suite |\n    | Company                       | USSI              |\n    | Synchronize Database on build | True              |\n\n4.  From the project, right-click **Add** &gt; **New item**.\n5.  Select **Data Model** &gt; **Data Entity** as your new item.\n6.  Enter a name, and then click **Add** to start the **Data** **Entity** wizard.\n7.  On the first page of the wizard, specify the set of properties for the entity by using the table earlier in this exercise. Then click **Next**. [![Specify properties page](media/SpecifyProperties_DevoEntity.png)](media/SpecifyProperties_DevoEntity.png)\n8.  On the next page, add fields from the primary data source. Make sure that each field name reflects the public contract (see the table earlier in this exercise). To use the field's label as the field name, select the **Convert label to field names** option. Clear the option for any fields that are not required for the entity.\n9.  Click **Finish** to complete the wizard, and to add the entity and its artifacts to the project.\n10. Build your project, so that you can start to use the entity.\n\n#### Expected outcome\n\n-   In Visual Studio, the following artifacts will appear in the project after you've completed the **Data Entity** wizard. [![New project artifacts](media/TestAppSuite_DevoEntity.png)](media/TestAppSuite_DevoEntity.png)\n-   Right-click the data entity, and then select **Open table browser**. The data from the entity should look like the following screen shot. **Note:** Make sure that your company is set to **USSI**. [![Table browser](media/TableBrowser_DevoEntity.png)](media/TableBrowser_DevoEntity.png)\n\n### Exercise 2: Export a limited set of data by using a sample file mapping and filters\n\nIn this exercise, you will use the **Project Category** entity that you just built to export data. To export only a subset of the data, you will use a sample file mapping and filters. The exported data will be in XML format.\n\n#### Steps\n\n1.  After you've finished building the **Project Category** entity, start the client.\n2.  Change the company to **USSI**.\n3.  In the **Data management** workspace, click **Export** to begin data extraction.\n4.  Enter the export details, such as entity name and target data format. [![Entering export details](media/ExportProjectCategory_DevoEntity.png)](media/ExportProjectCategory_DevoEntity.png) Use the following file as the sample file format for XML: [ProjectCategoryExport\\_Sample](media/ProjectCategoryExport_Sample.xlsx). Open this file in a text editor, and save it as an XML file. If the sample file mapping isn't valid, there is an incorrect field name in the entity. Fix either the entity or the sample file to continue.\n5.  Click **Filter**, and then specify **Project** as the filter criterion, so that only limited data is exported. [![Filtering by project](media/Inquiry_DevoEntity.png)](media/Inquiry_DevoEntity.png)\n6.  In the **Export** dialog box, click **OK**.\n\n#### Expected outcome\n\n-   Fifteen records are successfully exported.\n-   The output is similar to the following file: [ProjectCategoryExport\\_Output](media/ProjectCategoryExport_Output.xlsx). (Open the file in a text editor to verify this outcome.)\n\n## Migrating data in multiple files by using the Data Import/Export Framework\n### Business problem\n\nYou're implementing a new environment. As part of this implementation, you want to migrate some legacy customer data. The data is contained in two sets of files, each of which has data for the **Customers** and **Customer Groups** entities. This migration is slightly complex, because some columns in the data files don't map directly to the entities. Additionally, the files have validation errors that must be corrected during the import process.\n\n### Exercise 3: Create a data project and import multiple files\n\nIn this exercise, you will import two files into the **USRT** company by using the new Data Import/Export Framework. These files need to be imported in sequence by using a single data project. The **Customers** entity has a reference to the **Customer Groups** entity. Because the Customers1 file doesn't map correctly to the **Customers** entity, you will receive an error when you upload the file. Therefore, to complete the import process, you will have to provide the correct column mappings for the **Customers** entity.\n\n#### Steps\n\n1.  Open the following files in Microsoft Excel, and save them as CSV files in your local directory:\n    -   [Customers1](media/Customers1.xlsx)\n    -   [CustomerGroups1](media/CustomerGroups1.xlsx)\n\n2.  In the client, change the company to **USRT**.\n3.  From the **User** dashboard, open the **Data Management** workspace.\n4.  Click **Import** to configure a new data project.\n5.  Enter the project details, such as the name and file format. [![Entering project details](media/CustDataMigration_DevoEntity.png)](media/CustDataMigration_DevoEntity.png)\n6.  For each file, select an entity, and then upload the data file.\n7.  Because the Customer1.csv file doesn't map correctly to the **Customers** entity, you will receive an error when you upload the file. After the file is uploaded, click **View mappings** to fix the column mappings for the **Customers** entity. **Hint:** **CustomerAccount** is required in the entity during import. It is mapped from **AccountNum** in the source file. Address fields are optional for the import.\n8.  When you've finished, click the **Back** button in your browser to return to the data project.\n9.  On the **Data Project** page, click **Import now**.\n\n#### Expected outcome\n\n-   Four updates and 23 inserts are successfully imported.\n-   The **Execution summary** page resembles the following screen shot. [![Execution summary page](media/ExecutionSummary_DevoEntity.png)](media/ExecutionSummary_DevoEntity.png)\n\n### Exercise 4: Re-import by using an existing data project and manage data in staging\n\nIn this exercise, you will use a new set of files to import data through the existing data project. Customers2 contains new and updated data for the **Customers** entity. CustomerGroups2 contains updated data for the **Customer Groups** entity. Customers2 contains some error records. You will fix these errors in staging, validate the data, and then push it to the target to complete the import.\n\n#### Steps\n\n1.  In the **Data management** workspace, select the existing data project, and the click **Re-import**. By using the re-import functionality, you can preserve your previous settings for the data project and use new files for the import. However, if you click **Reload data project** and upload new files instead, the previous mappings will be overridden.\n2.  Open the following files in Excel, and save them as CSV files in your local directory:\n    -   [Customers2](media/Customers2.xlsx)\n    -   [CustomerGroups2](media/CustomerGroups2.xlsx)\n\n3.  Upload the new files for each entity, and then click **Import now**. [![Uploading new files for import](media/JobExecution_DevoEntity.png)](media/JobExecution_DevoEntity.png)\n4.  On the **Status** page, click **View execution log** to investigate the errors. [![Execution log](media/ViewExecutionLog_DevoEntity.png)](media/ViewExecutionLog_DevoEntity.png)\n5.  On the **Status** page, click **View staging** to view the data in a staging table. This view will also show records that have errors.\n6.  Click **Edit** to fix records that have errors. (The **Customer Group** value for records DM10221 and DM1022 isn't valid.)\n7.  Select the records that you fixed, and then click **Validate**. Refresh the page to verify that the status of the records is **Validated**. [![Verifying that records have Validated status](media/Validated_DevoEntity.png)](media/Validated_DevoEntity.png)\n8.  Click **Copy data to target**.\n9.  In the **Select a job ID to run** dialog box, in the **Run for** field, select **Criteria**, and set **Row selected by user** to **Yes**. Then click **OK**. [![Selecting a job to run](media/SelectJob_DevoEntity.png)](media/SelectJob_DevoEntity.png)\n10. On the **Target data execution** page, click **Run**. [![Target data execution page](media/TargetData_DevoEntity.png)](media/TargetData_DevoEntity.png)\n11. When the run is completed, refresh the page to see the latest staging status.\n\n#### Expected outcome\n\n-   On the first try, the import succeeds for the **Customer Groups** entity and partially succeeds for the **Customers** entity.\n-   The **Execution summary** page shows that five records were created, three records were updated, and two records have errors. [![Execution summary page](media/CustDataExecutionSumm_DevoEntity.png)](media/CustDataExecutionSumm_DevoEntity.png)\n-   In the staging view, two records have errors, as shown in the following screen shot. [![Records that have errors](media/CustomerStagingErrors_DevoEntity.png)](media/CustomerStagingErrors_DevoEntity.png)\n-   After you fix the records and run the import again, the staging view shows that all records are completed. [![Completed status for all records](media/CustomerStagingCompleted_DevoEntity.png)](media/CustomerStagingCompleted_DevoEntity.png)\n\n\n"}