{"content":"---\n# required metadata\n\ntitle: File upload control\ndescription: This topic provides information about the file upload control. This control lets users upload files.\nauthor: aneesmsft\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: 2051\nms.search.scope: AX 7.0.0, Operations\n# ms.tgt_pltfrm: \nms.custom: 54311\nms.assetid: 82f47d4d-912c-4f85-81f9-b09c723f72fc\nms.search.region: Global\n# ms.search.industry: \nms.author: aneesa\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# File upload control\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic provides information about the file upload control. This control lets users upload files.\n\nOverview\n--------\n\nThe file upload control lets users upload a file. It also lets developers control the upload process and manage the file that is uploaded, based on their requirements. \n\n[![FileUpload001](./media/fileupload001.png)](./media/fileupload001.png) \n\nThe file upload control can have three styles. You control the style by using the **Style** property.\n\n-   The **Standard** style shows the file name field together with **Browse**, **Upload**, and **Cancel** buttons.\n-   The **Minimal** style shows only the **Browse** button.\n-   The **MinimalWithFileName** style shows the file name field and the **Browse** button.\n\nThe **FileTypesAccepted** property of the file upload control lets you limit the types of files that users can upload. The file types that users can upload are primarily controlled by the associated upload strategy. The **FileTypesAccepted** property on the file upload control should be used only if further restrictions are required. If the upload control tries to specify file types that are restricted by the upload strategy, the **Browse** button becomes unavailable.\n\n| Allowed file types    | Allowed file types from the upload strategy | Final result                          |\n|-----------------------|---------------------------------------------|---------------------------------------|\n| \".jpg,.png\"           | \".jpg,.png,.gif,.txt\"                       | \".jpg,.png\"                           |\n| \"image/png\"           | \"image/\\*\"                                  | \"image/png\"                           |\n| \"image/\\*\"            | \"image/png\"                                 | The **Browse** button is unavailable. |\n| \".jpg,.png,.gif,.txt\" | \".jpg,.png\"                                 | The **Browse** button is unavailable. |\n\nYou can use the **OnBrowseButtonClicked**, **OnUploadAttemptStarted**, and **OnUploadCompleted** overrides to hook into the various stages of the file upload process. You can also create custom file upload strategies and associate them with a file upload control by using the **FileUpload Strategy Class** property.\n\n## Design classes\nThere are two main types of classes that developers can work with for the file upload control:\n\n-   **Upload strategy class** – This class lets developers control various parameters that should be enforced for uploaded files, such as the types of files that a user can upload and the maximum size of a file. It also lets developers determine where and how the uploaded file should be stored. All upload strategy classes must inherit from the abstract **FileUploadStrategyBase** class.\n-   **Upload result class** – This class lets developers access the details of a file that was uploaded by a user, such as its name, content type, and upload status. It also lets developers open and delete the corresponding file. All upload result classes must inherit from the abstract **FileUploadResultBase** class.\n\nThe framework provides a default upload strategy class that is named **FileUploadTemporaryStorageStrategy** and a default upload result class that is named **FileUploadTemporaryStorageResult**. This upload result class stores uploaded files to the temporary blob storage and provides a download URL. Developers can also implement their own custom upload strategy and upload result classes as required. For the upload strategy, two abstract methods from the **FileUploadStrategyBase** class must be implemented: **uploadFile** and **getResultClassName**. The **uploadFile** method handles where and how the file is stored. The **getResultClassName** method retrieves the upload result class that is used in this strategy. The **FileUploadResultBase** class has fields for the file name, the upload status, the content type of the file, and the log message. This class can be extended as required. All new properties should be able to be serialized and deserialized. The **openResult** method opens the file as a stream, and the **deleteResult** method deletes the file from the corresponding data storage.\n\n## Sequence diagram\nThe file upload control accepts the file and upload strategy in the client, and sends them to the file services. The file services start a new session, create an instance of a strategy class, and call the **uploadFile** method. When the **uploadFile** method has finished storing the file in the data source, a file upload result class returns to the file services. This class is sent back to the client, which might trigger the **OnUploadCompleted** event to deal with the post-process. \n\n[![FileUploadControlUsageAndDesign1](./media/fileuploadcontrolusageanddesign1.png)](./media/fileuploadcontrolusageanddesign1.png)\n\n\n\n","nodes":[{"pos":[32,51],"content":"File upload control","needQuote":true,"needEscape":true,"nodes":[{"content":"File upload control","pos":[0,19]}]},{"pos":[65,165],"content":"This topic provides information about the file upload control. This control lets users upload files.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic provides information about the file upload control. This control lets users upload files.","pos":[0,100],"nodes":[{"content":"This topic provides information about the file upload control.","pos":[0,62]},{"content":"This control lets users upload files.","pos":[63,100]}]}]},{"pos":[663,682],"content":"File upload control","linkify":"File upload control","nodes":[{"content":"File upload control","pos":[0,19]}]},{"content":"This topic provides information about the file upload control.","pos":[728,790]},{"content":"This control lets users upload files.","pos":[791,828]},{"pos":[830,838],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"The file upload control lets users upload a file.","pos":[849,898]},{"content":"It also lets developers control the upload process and manage the file that is uploaded, based on their requirements.","pos":[899,1016]},{"pos":[1019,1091],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FileUpload001<ept id=\"p1\">](./media/fileupload001.png)](./media/fileupload001.png)</ept>","source":"[![FileUpload001](./media/fileupload001.png)](./media/fileupload001.png)"},{"content":"The file upload control can have three styles.","pos":[1094,1140]},{"content":"You control the style by using the <bpt id=\"p1\">**</bpt>Style<ept id=\"p1\">**</ept> property.","pos":[1141,1195],"source":" You control the style by using the **Style** property."},{"pos":[1201,1311],"content":"The <bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> style shows the file name field together with <bpt id=\"p2\">**</bpt>Browse<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Upload<ept id=\"p3\">**</ept>, and <bpt id=\"p4\">**</bpt>Cancel<ept id=\"p4\">**</ept> buttons.","source":"The **Standard** style shows the file name field together with **Browse**, **Upload**, and **Cancel** buttons."},{"pos":[1316,1371],"content":"The <bpt id=\"p1\">**</bpt>Minimal<ept id=\"p1\">**</ept> style shows only the <bpt id=\"p2\">**</bpt>Browse<ept id=\"p2\">**</ept> button.","source":"The **Minimal** style shows only the **Browse** button."},{"pos":[1376,1462],"content":"The <bpt id=\"p1\">**</bpt>MinimalWithFileName<ept id=\"p1\">**</ept> style shows the file name field and the <bpt id=\"p2\">**</bpt>Browse<ept id=\"p2\">**</ept> button.","source":"The **MinimalWithFileName** style shows the file name field and the **Browse** button."},{"content":"The <bpt id=\"p1\">**</bpt>FileTypesAccepted<ept id=\"p1\">**</ept> property of the file upload control lets you limit the types of files that users can upload.","pos":[1464,1582],"source":"The **FileTypesAccepted** property of the file upload control lets you limit the types of files that users can upload."},{"content":"The file types that users can upload are primarily controlled by the associated upload strategy.","pos":[1583,1679]},{"content":"The <bpt id=\"p1\">**</bpt>FileTypesAccepted<ept id=\"p1\">**</ept> property on the file upload control should be used only if further restrictions are required.","pos":[1680,1799],"source":" The **FileTypesAccepted** property on the file upload control should be used only if further restrictions are required."},{"content":"If the upload control tries to specify file types that are restricted by the upload strategy, the <bpt id=\"p1\">**</bpt>Browse<ept id=\"p1\">**</ept> button becomes unavailable.","pos":[1800,1936],"source":" If the upload control tries to specify file types that are restricted by the upload strategy, the **Browse** button becomes unavailable."},{"content":"Allowed file types","pos":[1940,1958]},{"content":"Allowed file types from the upload strategy","pos":[1964,2007]},{"content":"Final result","pos":[2010,2022]},{"content":"\".jpg,.png\"","pos":[2164,2175]},{"content":"\".jpg,.png,.gif,.txt\"","pos":[2188,2209]},{"content":"\".jpg,.png\"","pos":[2234,2245]},{"content":"\"image/png\"","pos":[2276,2287]},{"content":"\"image/<ph id=\"ph1\">\\*</ph>\"","pos":[2300,2310],"source":"\"image/\\*\""},{"content":"\"image/png\"","pos":[2346,2357]},{"content":"\"image/<ph id=\"ph1\">\\*</ph>\"","pos":[2388,2398],"source":"\"image/\\*\""},{"content":"\"image/png\"","pos":[2412,2423]},{"pos":[2458,2495],"content":"The <bpt id=\"p1\">**</bpt>Browse<ept id=\"p1\">**</ept> button is unavailable.","source":"The **Browse** button is unavailable."},{"content":"\".jpg,.png,.gif,.txt\"","pos":[2500,2521]},{"content":"\".jpg,.png\"","pos":[2524,2535]},{"pos":[2570,2607],"content":"The <bpt id=\"p1\">**</bpt>Browse<ept id=\"p1\">**</ept> button is unavailable.","source":"The **Browse** button is unavailable."},{"content":"You can use the <bpt id=\"p1\">**</bpt>OnBrowseButtonClicked<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>OnUploadAttemptStarted<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>OnUploadCompleted<ept id=\"p3\">**</ept> overrides to hook into the various stages of the file upload process.","pos":[2611,2777],"source":"You can use the **OnBrowseButtonClicked**, **OnUploadAttemptStarted**, and **OnUploadCompleted** overrides to hook into the various stages of the file upload process."},{"content":"You can also create custom file upload strategies and associate them with a file upload control by using the <bpt id=\"p1\">**</bpt>FileUpload Strategy Class<ept id=\"p1\">**</ept> property.","pos":[2778,2926],"source":" You can also create custom file upload strategies and associate them with a file upload control by using the **FileUpload Strategy Class** property."},{"pos":[2931,2945],"content":"Design classes","linkify":"Design classes","nodes":[{"content":"Design classes","pos":[0,14]}]},{"content":"There are two main types of classes that developers can work with for the file upload control:","pos":[2946,3040]},{"content":"<bpt id=\"p1\">**</bpt>Upload strategy class<ept id=\"p1\">**</ept> – This class lets developers control various parameters that should be enforced for uploaded files, such as the types of files that a user can upload and the maximum size of a file.","pos":[3046,3253],"source":"**Upload strategy class** – This class lets developers control various parameters that should be enforced for uploaded files, such as the types of files that a user can upload and the maximum size of a file."},{"content":"It also lets developers determine where and how the uploaded file should be stored.","pos":[3254,3337]},{"content":"All upload strategy classes must inherit from the abstract <bpt id=\"p1\">**</bpt>FileUploadStrategyBase<ept id=\"p1\">**</ept> class.","pos":[3338,3430],"source":" All upload strategy classes must inherit from the abstract **FileUploadStrategyBase** class."},{"content":"<bpt id=\"p1\">**</bpt>Upload result class<ept id=\"p1\">**</ept> – This class lets developers access the details of a file that was uploaded by a user, such as its name, content type, and upload status.","pos":[3435,3596],"source":"**Upload result class** – This class lets developers access the details of a file that was uploaded by a user, such as its name, content type, and upload status."},{"content":"It also lets developers open and delete the corresponding file.","pos":[3597,3660]},{"content":"All upload result classes must inherit from the abstract <bpt id=\"p1\">**</bpt>FileUploadResultBase<ept id=\"p1\">**</ept> class.","pos":[3661,3749],"source":" All upload result classes must inherit from the abstract **FileUploadResultBase** class."},{"content":"The framework provides a default upload strategy class that is named <bpt id=\"p1\">**</bpt>FileUploadTemporaryStorageStrategy<ept id=\"p1\">**</ept> and a default upload result class that is named <bpt id=\"p2\">**</bpt>FileUploadTemporaryStorageResult<ept id=\"p2\">**</ept>.","pos":[3751,3944],"source":"The framework provides a default upload strategy class that is named **FileUploadTemporaryStorageStrategy** and a default upload result class that is named **FileUploadTemporaryStorageResult**."},{"content":"This upload result class stores uploaded files to the temporary blob storage and provides a download URL.","pos":[3945,4050]},{"content":"Developers can also implement their own custom upload strategy and upload result classes as required.","pos":[4051,4152]},{"content":"For the upload strategy, two abstract methods from the <bpt id=\"p1\">**</bpt>FileUploadStrategyBase<ept id=\"p1\">**</ept> class must be implemented: <bpt id=\"p2\">**</bpt>uploadFile<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>getResultClassName<ept id=\"p3\">**</ept>.","pos":[4153,4304],"source":" For the upload strategy, two abstract methods from the **FileUploadStrategyBase** class must be implemented: **uploadFile** and **getResultClassName**."},{"content":"The <bpt id=\"p1\">**</bpt>uploadFile<ept id=\"p1\">**</ept> method handles where and how the file is stored.","pos":[4305,4372],"source":" The **uploadFile** method handles where and how the file is stored."},{"content":"The <bpt id=\"p1\">**</bpt>getResultClassName<ept id=\"p1\">**</ept> method retrieves the upload result class that is used in this strategy.","pos":[4373,4471],"source":" The **getResultClassName** method retrieves the upload result class that is used in this strategy."},{"content":"The <bpt id=\"p1\">**</bpt>FileUploadResultBase<ept id=\"p1\">**</ept> class has fields for the file name, the upload status, the content type of the file, and the log message.","pos":[4472,4606],"source":" The **FileUploadResultBase** class has fields for the file name, the upload status, the content type of the file, and the log message."},{"content":"This class can be extended as required.","pos":[4607,4646]},{"content":"All new properties should be able to be serialized and deserialized.","pos":[4647,4715]},{"content":"The <bpt id=\"p1\">**</bpt>openResult<ept id=\"p1\">**</ept> method opens the file as a stream, and the <bpt id=\"p2\">**</bpt>deleteResult<ept id=\"p2\">**</ept> method deletes the file from the corresponding data storage.","pos":[4716,4855],"source":" The **openResult** method opens the file as a stream, and the **deleteResult** method deletes the file from the corresponding data storage."},{"pos":[4860,4876],"content":"Sequence diagram","linkify":"Sequence diagram","nodes":[{"content":"Sequence diagram","pos":[0,16]}]},{"content":"The file upload control accepts the file and upload strategy in the client, and sends them to the file services.","pos":[4877,4989]},{"content":"The file services start a new session, create an instance of a strategy class, and call the <bpt id=\"p1\">**</bpt>uploadFile<ept id=\"p1\">**</ept> method.","pos":[4990,5104],"source":" The file services start a new session, create an instance of a strategy class, and call the **uploadFile** method."},{"content":"When the <bpt id=\"p1\">**</bpt>uploadFile<ept id=\"p1\">**</ept> method has finished storing the file in the data source, a file upload result class returns to the file services.","pos":[5105,5242],"source":" When the **uploadFile** method has finished storing the file in the data source, a file upload result class returns to the file services."},{"content":"This class is sent back to the client, which might trigger the <bpt id=\"p1\">**</bpt>OnUploadCompleted<ept id=\"p1\">**</ept> event to deal with the post-process.","pos":[5243,5364],"source":" This class is sent back to the client, which might trigger the **OnUploadCompleted** event to deal with the post-process."},{"pos":[5367,5496],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>FileUploadControlUsageAndDesign1<ept id=\"p1\">](./media/fileuploadcontrolusageanddesign1.png)](./media/fileuploadcontrolusageanddesign1.png)</ept>","source":"[![FileUploadControlUsageAndDesign1](./media/fileuploadcontrolusageanddesign1.png)](./media/fileuploadcontrolusageanddesign1.png)"}]}