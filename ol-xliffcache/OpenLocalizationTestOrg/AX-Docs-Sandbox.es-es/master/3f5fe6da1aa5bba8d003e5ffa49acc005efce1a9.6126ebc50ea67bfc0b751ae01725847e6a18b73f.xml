{"content":"---\n# required metadata\n\ntitle: Install Retail hotfixes\ndescription: Use this tutorial to install Retail hotfixes for Microsoft Dynamics AX.\nauthor: MargoC\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \n# ms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, Retail\n# ms.tgt_pltfrm: \nms.custom: 15151\nms.assetid: 507e478a-3931-4573-8ff3-7b777ac03dee\nms.search.region: Global\n# ms.search.industry: \nms.author: aamiral\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Install Retail hotfixes\n\n[!include[banner](../includes/banner.md)]\n\n\nUse this tutorial to install Retail hotfixes for Microsoft Dynamics AX.\n\nRetail server\n-------------\n\n1.  Download the hotfix package.\n2.  Unzip the package. \n\n    [![Extract\\_RetailHotfix](./media/extract_retailhotfix.png)](./media/extract_retailhotfix.png)\n\n3.  Go to the Retail server files in the extracted zip folder.\n4.  Stop the Retail server IIS website. \n\n    [![WebsiteHome\\_RetailHotfix](./media/websitehome_retailhotfix.png)](./media/websitehome_retailhotfix.png)\n\n5.  Back up files.\n6.  Copy Retail server files from the zip folder to the following location:\n    -   Navigate to IIS, right-click the RetailServer website and select **Explore**.\n\n7.  Merge the web.config by diffing the current version in this folder with the file in the zip package.\n8.  Start the IIS website.\n\n## Cloud POS\n##### Follow the same steps as for Retail server (as described above)\n\nYou will find the install folder for Cloud POS the same way as for Retail Server, by navigating to IIS, and selecting CloudPOS website, instead of Retail Server website. \n\n[![CloudMultiBox\\_RetailHotfix](./media/cloudmultibox_retailhotfix.png)](./media/cloudmultibox_retailhotfix.png)\n\n## Channel database\n1.  Download the hotfix.\n2.  Extract the contents on the Retail Server computer.\n3.  Connect to SQL Server where the Channel database is deployed.\n\n### Downloadable VHD\n\nSQL computer is 'localhost.' The password is the same as the one for the computer. Connect to SQL using Windows authentication.\n\n### Cloud deployments\n\nFind the SQL machine name and the credentials to log in to SQL Server in the Retail Server web.config file. You can navigate to the web.config file as described in above sections. Find the following node.\n\n    <connectionStrings>/<add name=\"STORAGEID:<databasename>\n\nIn this node, you'll find the necessary details:\n\n-   Server – The SQL server to connect to.\n-   Database – Retail channel database name.\n-   User ID – User name.\n-   Password\n\n[![ConnectionStringsNode\\_RetailHotfix](./media/connectionstringsnode_retailhotfix.png)](./media/connectionstringsnode_retailhotfix.png)\n\n1.  Start SQL Server Management Studio.\n2.  Connect to the SQL Server instance with the respective credentials.\n3.  Browse to the RetailServer/Scripts folder.\n4.  Before you open the web.config file to obtain the connection details, you must first decrypt the file. After you have obtained the connection details, you must encrypt the file again.\n\n    This can be done by running the following commands in command prompt (run with elevated privileges).\n\n        aspnet_regiis -pe \"connectionStrings\" -app \"/\" -Site 3\n        aspnet_regiis -pd \"connectionStrings\" -app \"/\" -Site 3\n\n    Site number in the above commands can be obtained by using the following steps:\n\n    Click the RetailServer website in IIS Manager, and then select Advanced Settings.\n\n    Site ID will be shown under **General &gt; ID**.\n\n5.  Open the upgrade script in SQL Server Management Studio.\n6.  Execute the script.\n\n## Selfservice package upload\nRun the uploader script from the following location:\n\n-   Downloadable VHD - To upload a self-service package on a Downloadable VHD, obtain the scripts from a cloud deployment, as described above and copy them to the Downloadable VHD.\n-   Cloud deployments - F:\\\\AosService\\\\RetailTools\\\\Scripts\\\\RetailSelfServiceOnDemandPackageUploader.ps1. If you cannot find this folder in the specified drive, look in a different drive on the VM.\n\n### How to use the script and things to know\n\nList of parameters accepted/required.\n\n**Parameter name**\n\n**Required**\n\n**Purpose**\n\n**PackageFilePath**\n\nYes\n\nThe full path to the package file which needs to be uploaded to the cloud storage.\n\n**PackageDescription**\n\nNo\n\nA brief description of the package which will be visible from AOS.\n\n**PackageVersion**\n\nYes\n\nThe package file version.\n\n**PackageType**\n\nYes\n\nThe type of the package being uploaded. Currently supported types include:\n\n-   ModernPosWithOffline\n-   ModernPosWithoutOffline\n-   HardwareStation\n-   Miscellaneous (customization option in a future release)\n\n**PackageReplaceMode**\n\nNo\n\nSpecify the action to be performed if another package exists of the same type. The default is ReplaceExisting.\n\n**AOSWebsiteName**\n\nNo\n\nThe name of the AOS website as shown in IIS. The default is AosWebApplication\n\n**LogFile**\n\nNo\n\nLocation or name of the file where all the logs will be stored. The default is RetailSelfServiceOnDemandPackageUploader.log\n\n### Example 1\n\nUpload a package located at *C:\\\\Packages\\\\ModernPOSSetup.exe* with version \"7.0.968.0\" and PackageType as 'ModernPosWithOffline'. If a package exists with the same type in the cloud storage, the existing package will be removed from the storage and replaced with the provided package. .\\\\RetailSelfServiceOnDemandPackageUploader.ps1 -PackageFilePath *C :\\\\Packages\\\\ModernPOSSetup.exe\" -PackageVersion \"7.0.968.0\" -PackageType ModernPosWithOffline*\n\n### Example 2\n\nUpload a package located at *C:\\\\Packages\\\\ModernPOSSetup.exe* with version \"7.0.968.0\" and PackageType as 'ModernPosWithOffline'. If there exists a package of the same type in the cloud storage, it will be removed from the storage. The details required to access the cloud storage will be accessed via the configuration file available for the IIS website 'MyCompanyWebsite'. .\\\\RetailSelfServiceOnDemandPackageUploader.ps1 -PackageFilePath *C:\\\\Packages\\\\ModernPOSSetup.exe\" -PackageVersion \"7.0.968.0\" -PackageType ModernPosWithOffline -AOSWebsiteName \"MyCompanyWebsite* \n\n[![Powershell\\_RetailHotfix](./media/powershell_retailhotfix.png)](./media/powershell_retailhotfix.png)  \n\n\n\n","nodes":[{"pos":[32,55],"content":"Install Retail hotfixes","needQuote":true,"needEscape":true,"nodes":[{"content":"Install Retail hotfixes","pos":[0,23]}]},{"pos":[69,140],"content":"Use this tutorial to install Retail hotfixes for Microsoft Dynamics AX.","needQuote":true,"needEscape":true,"nodes":[{"content":"Use this tutorial to install Retail hotfixes for Microsoft Dynamics AX.","pos":[0,71]}]},{"pos":[647,670],"content":"Install Retail hotfixes","linkify":"Install Retail hotfixes","nodes":[{"content":"Install Retail hotfixes","pos":[0,23]}]},{"content":"Use this tutorial to install Retail hotfixes for Microsoft Dynamics AX.","pos":[716,787]},{"pos":[789,802],"content":"Retail server","linkify":"Retail server","nodes":[{"content":"Retail server","pos":[0,13]}]},{"content":"Download the hotfix package.","pos":[822,850]},{"content":"Unzip the package.","pos":[855,873]},{"pos":[880,974],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Extract<ph id=\"ph2\">\\_</ph>RetailHotfix<ept id=\"p1\">](./media/extract_retailhotfix.png)](./media/extract_retailhotfix.png)</ept>","source":"[![Extract\\_RetailHotfix](./media/extract_retailhotfix.png)](./media/extract_retailhotfix.png)"},{"content":"Go to the Retail server files in the extracted zip folder.","pos":[980,1038]},{"content":"Stop the Retail server IIS website.","pos":[1043,1078]},{"pos":[1085,1191],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>WebsiteHome<ph id=\"ph2\">\\_</ph>RetailHotfix<ept id=\"p1\">](./media/websitehome_retailhotfix.png)](./media/websitehome_retailhotfix.png)</ept>","source":"[![WebsiteHome\\_RetailHotfix](./media/websitehome_retailhotfix.png)](./media/websitehome_retailhotfix.png)"},{"content":"Back up files.","pos":[1197,1211]},{"content":"Copy Retail server files from the zip folder to the following location:","pos":[1216,1287]},{"pos":[1296,1373],"content":"Navigate to IIS, right-click the RetailServer website and select <bpt id=\"p1\">**</bpt>Explore<ept id=\"p1\">**</ept>.","source":"Navigate to IIS, right-click the RetailServer website and select **Explore**."},{"content":"Merge the web.config by diffing the current version in this folder with the file in the zip package.","pos":[1379,1479]},{"content":"Start the IIS website.","pos":[1484,1506]},{"pos":[1511,1520],"content":"Cloud POS","linkify":"Cloud POS","nodes":[{"content":"Cloud POS","pos":[0,9]}]},{"pos":[1527,1590],"content":"Follow the same steps as for Retail server (as described above)","linkify":"Follow the same steps as for Retail server (as described above)","nodes":[{"content":"Follow the same steps as for Retail server (as described above)","pos":[0,63]}]},{"content":"You will find the install folder for Cloud POS the same way as for Retail Server, by navigating to IIS, and selecting CloudPOS website, instead of Retail Server website.","pos":[1592,1761]},{"pos":[1764,1876],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>CloudMultiBox<ph id=\"ph2\">\\_</ph>RetailHotfix<ept id=\"p1\">](./media/cloudmultibox_retailhotfix.png)](./media/cloudmultibox_retailhotfix.png)</ept>","source":"[![CloudMultiBox\\_RetailHotfix](./media/cloudmultibox_retailhotfix.png)](./media/cloudmultibox_retailhotfix.png)"},{"pos":[1881,1897],"content":"Channel database","linkify":"Channel database","nodes":[{"content":"Channel database","pos":[0,16]}]},{"content":"Download the hotfix.","pos":[1902,1922]},{"content":"Extract the contents on the Retail Server computer.","pos":[1927,1978]},{"content":"Connect to SQL Server where the Channel database is deployed.","pos":[1983,2044]},{"pos":[2050,2066],"content":"Downloadable VHD","linkify":"Downloadable VHD","nodes":[{"content":"Downloadable VHD","pos":[0,16]}]},{"content":"SQL computer is 'localhost.'","pos":[2068,2096]},{"content":"The password is the same as the one for the computer.","pos":[2097,2150]},{"content":"Connect to SQL using Windows authentication.","pos":[2151,2195]},{"pos":[2201,2218],"content":"Cloud deployments","linkify":"Cloud deployments","nodes":[{"content":"Cloud deployments","pos":[0,17]}]},{"content":"Find the SQL machine name and the credentials to log in to SQL Server in the Retail Server web.config file.","pos":[2220,2327]},{"content":"You can navigate to the web.config file as described in above sections.","pos":[2328,2399]},{"content":"Find the following node.","pos":[2400,2424]},{"content":"In this node, you'll find the necessary details:","pos":[2487,2535]},{"content":"Server – The SQL server to connect to.","pos":[2541,2579]},{"content":"Database – Retail channel database name.","pos":[2584,2624]},{"content":"User ID – User name.","pos":[2629,2649]},{"content":"Password","pos":[2654,2662]},{"pos":[2664,2800],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>ConnectionStringsNode<ph id=\"ph2\">\\_</ph>RetailHotfix<ept id=\"p1\">](./media/connectionstringsnode_retailhotfix.png)](./media/connectionstringsnode_retailhotfix.png)</ept>","source":"[![ConnectionStringsNode\\_RetailHotfix](./media/connectionstringsnode_retailhotfix.png)](./media/connectionstringsnode_retailhotfix.png)"},{"content":"Start SQL Server Management Studio.","pos":[2806,2841]},{"content":"Connect to the SQL Server instance with the respective credentials.","pos":[2846,2913]},{"content":"Browse to the RetailServer/Scripts folder.","pos":[2918,2960]},{"content":"Before you open the web.config file to obtain the connection details, you must first decrypt the file.","pos":[2965,3067]},{"content":"After you have obtained the connection details, you must encrypt the file again.","pos":[3068,3148]},{"content":"This can be done by running the following commands in command prompt (run with elevated privileges).","pos":[3154,3254]},{"content":"Site number in the above commands can be obtained by using the following steps:","pos":[3387,3466]},{"content":"Click the RetailServer website in IIS Manager, and then select Advanced Settings.","pos":[3472,3553]},{"pos":[3559,3607],"content":"Site ID will be shown under <bpt id=\"p1\">**</bpt>General <ph id=\"ph1\">&amp;gt;</ph> ID<ept id=\"p1\">**</ept>.","source":"Site ID will be shown under **General &gt; ID**."},{"content":"Open the upgrade script in SQL Server Management Studio.","pos":[3613,3669]},{"content":"Execute the script.","pos":[3674,3693]},{"pos":[3698,3724],"content":"Selfservice package upload","linkify":"Selfservice package upload","nodes":[{"content":"Selfservice package upload","pos":[0,26]}]},{"content":"Run the uploader script from the following location:","pos":[3725,3777]},{"content":"Downloadable VHD - To upload a self-service package on a Downloadable VHD, obtain the scripts from a cloud deployment, as described above and copy them to the Downloadable VHD.","pos":[3783,3959]},{"content":"Cloud deployments - F:<ph id=\"ph1\">\\\\</ph>AosService<ph id=\"ph2\">\\\\</ph>RetailTools<ph id=\"ph3\">\\\\</ph>Scripts<ph id=\"ph4\">\\\\</ph>RetailSelfServiceOnDemandPackageUploader.ps1.","pos":[3964,4067],"source":"Cloud deployments - F:\\\\AosService\\\\RetailTools\\\\Scripts\\\\RetailSelfServiceOnDemandPackageUploader.ps1."},{"content":"If you cannot find this folder in the specified drive, look in a different drive on the VM.","pos":[4068,4159]},{"pos":[4165,4205],"content":"How to use the script and things to know","linkify":"How to use the script and things to know","nodes":[{"content":"How to use the script and things to know","pos":[0,40]}]},{"content":"List of parameters accepted/required.","pos":[4207,4244]},{"pos":[4246,4264],"content":"<bpt id=\"p1\">**</bpt>Parameter name<ept id=\"p1\">**</ept>","source":"**Parameter name**"},{"pos":[4266,4278],"content":"<bpt id=\"p1\">**</bpt>Required<ept id=\"p1\">**</ept>","source":"**Required**"},{"pos":[4280,4291],"content":"<bpt id=\"p1\">**</bpt>Purpose<ept id=\"p1\">**</ept>","source":"**Purpose**"},{"pos":[4293,4312],"content":"<bpt id=\"p1\">**</bpt>PackageFilePath<ept id=\"p1\">**</ept>","source":"**PackageFilePath**"},{"content":"Yes","pos":[4314,4317]},{"content":"The full path to the package file which needs to be uploaded to the cloud storage.","pos":[4319,4401]},{"pos":[4403,4425],"content":"<bpt id=\"p1\">**</bpt>PackageDescription<ept id=\"p1\">**</ept>","source":"**PackageDescription**"},{"content":"No","pos":[4427,4429]},{"content":"A brief description of the package which will be visible from AOS.","pos":[4431,4497]},{"pos":[4499,4517],"content":"<bpt id=\"p1\">**</bpt>PackageVersion<ept id=\"p1\">**</ept>","source":"**PackageVersion**"},{"content":"Yes","pos":[4519,4522]},{"content":"The package file version.","pos":[4524,4549]},{"pos":[4551,4566],"content":"<bpt id=\"p1\">**</bpt>PackageType<ept id=\"p1\">**</ept>","source":"**PackageType**"},{"content":"Yes","pos":[4568,4571]},{"content":"The type of the package being uploaded.","pos":[4573,4612]},{"content":"Currently supported types include:","pos":[4613,4647]},{"content":"ModernPosWithOffline","pos":[4653,4673]},{"content":"ModernPosWithoutOffline","pos":[4678,4701]},{"content":"HardwareStation","pos":[4706,4721]},{"content":"Miscellaneous (customization option in a future release)","pos":[4726,4782]},{"pos":[4784,4806],"content":"<bpt id=\"p1\">**</bpt>PackageReplaceMode<ept id=\"p1\">**</ept>","source":"**PackageReplaceMode**"},{"content":"No","pos":[4808,4810]},{"content":"Specify the action to be performed if another package exists of the same type.","pos":[4812,4890]},{"content":"The default is ReplaceExisting.","pos":[4891,4922]},{"pos":[4924,4942],"content":"<bpt id=\"p1\">**</bpt>AOSWebsiteName<ept id=\"p1\">**</ept>","source":"**AOSWebsiteName**"},{"content":"No","pos":[4944,4946]},{"content":"The name of the AOS website as shown in IIS.","pos":[4948,4992]},{"content":"The default is AosWebApplication","pos":[4993,5025]},{"pos":[5027,5038],"content":"<bpt id=\"p1\">**</bpt>LogFile<ept id=\"p1\">**</ept>","source":"**LogFile**"},{"content":"No","pos":[5040,5042]},{"content":"Location or name of the file where all the logs will be stored.","pos":[5044,5107]},{"content":"The default is RetailSelfServiceOnDemandPackageUploader.log","pos":[5108,5167]},{"pos":[5173,5182],"content":"Example 1","linkify":"Example 1","nodes":[{"content":"Example 1","pos":[0,9]}]},{"content":"Upload a package located at <bpt id=\"p1\">*</bpt>C:<ph id=\"ph1\">\\\\</ph>Packages<ph id=\"ph2\">\\\\</ph>ModernPOSSetup.exe<ept id=\"p1\">*</ept> with version \"7.0.968.0\" and PackageType as 'ModernPosWithOffline'.","pos":[5184,5314],"source":"Upload a package located at *C:\\\\Packages\\\\ModernPOSSetup.exe* with version \"7.0.968.0\" and PackageType as 'ModernPosWithOffline'."},{"content":"If a package exists with the same type in the cloud storage, the existing package will be removed from the storage and replaced with the provided package.","pos":[5315,5469]},{"content":".<ph id=\"ph1\">\\\\</ph>RetailSelfServiceOnDemandPackageUploader.ps1 -PackageFilePath <bpt id=\"p1\">*</bpt>C :<ph id=\"ph2\">\\\\</ph>Packages<ph id=\"ph3\">\\\\</ph>ModernPOSSetup.exe\" -PackageVersion \"7.0.968.0\" -PackageType ModernPosWithOffline<ept id=\"p1\">*</ept>","pos":[5470,5633],"source":" .\\\\RetailSelfServiceOnDemandPackageUploader.ps1 -PackageFilePath *C :\\\\Packages\\\\ModernPOSSetup.exe\" -PackageVersion \"7.0.968.0\" -PackageType ModernPosWithOffline*"},{"pos":[5639,5648],"content":"Example 2","linkify":"Example 2","nodes":[{"content":"Example 2","pos":[0,9]}]},{"content":"Upload a package located at <bpt id=\"p1\">*</bpt>C:<ph id=\"ph1\">\\\\</ph>Packages<ph id=\"ph2\">\\\\</ph>ModernPOSSetup.exe<ept id=\"p1\">*</ept> with version \"7.0.968.0\" and PackageType as 'ModernPosWithOffline'.","pos":[5650,5780],"source":"Upload a package located at *C:\\\\Packages\\\\ModernPOSSetup.exe* with version \"7.0.968.0\" and PackageType as 'ModernPosWithOffline'."},{"content":"If there exists a package of the same type in the cloud storage, it will be removed from the storage.","pos":[5781,5882]},{"content":"The details required to access the cloud storage will be accessed via the configuration file available for the IIS website 'MyCompanyWebsite'.","pos":[5883,6025]},{"content":".<ph id=\"ph1\">\\\\</ph>RetailSelfServiceOnDemandPackageUploader.ps1 -PackageFilePath <bpt id=\"p1\">*</bpt>C:<ph id=\"ph2\">\\\\</ph>Packages<ph id=\"ph3\">\\\\</ph>ModernPOSSetup.exe\" -PackageVersion \"7.0.968.0\" -PackageType ModernPosWithOffline -AOSWebsiteName \"MyCompanyWebsite<ept id=\"p1\">*</ept>","pos":[6026,6222],"source":" .\\\\RetailSelfServiceOnDemandPackageUploader.ps1 -PackageFilePath *C:\\\\Packages\\\\ModernPOSSetup.exe\" -PackageVersion \"7.0.968.0\" -PackageType ModernPosWithOffline -AOSWebsiteName \"MyCompanyWebsite*"},{"pos":[6225,6328],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Powershell<ph id=\"ph2\">\\_</ph>RetailHotfix<ept id=\"p1\">](./media/powershell_retailhotfix.png)](./media/powershell_retailhotfix.png)</ept>","source":"[![Powershell\\_RetailHotfix](./media/powershell_retailhotfix.png)](./media/powershell_retailhotfix.png)"}]}