{"content":"---\n# required metadata\n\ntitle: Commerce runtime extensibility and triggers\ndescription: This article explains trigger support for the Microsoft Dynamics AX commerce runtime (CRT). CRT supports pre-triggers and post-triggers for every request.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, Retail\n# ms.tgt_pltfrm: \nms.custom: 17731\nms.assetid: 2d6ec331-b266-4dbc-97c5-db2919b662dc\nms.search.region: Global\nms.search.industry: Retail\nms.author: sijoshi\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Commerce runtime extensibility and triggers\n\n[!include[banner](../includes/banner.md)]\n\n\nThis article explains trigger support for the Dynamics 365 for Retail commerce runtime (CRT). CRT supports pre-triggers and post-triggers for every request.\n\nCRT trigger overview\n--------------------\n\nCommerce runtime (CRT) triggers give you a way to extend the CRT workflow, and let you add business logic before and after every CRT request is executed. The following two methods are used:\n\n-   **OnExecuting** – This method is invoked before a request has been processed by a corresponding **IRequestHandler** implementation.\n-   **OnExecuted** – This method is invoked after the request has been processed by a corresponding **IRequestHandler** implementation.\n\n## CRT trigger interface\nTo implement a trigger, you must complete these tasks, as shown in the code example that follows:\n\n1.  Implement **IRequestTrigger**.\n2.  Specify **SupportedRequestTypes** to define the request types that the trigger must be executed for.\n3.  Write a trigger implementation in the **OnExecuting** method if business logic must be run before the request is addressed.\n4.  Write a trigger implementation in the **OnExecuted** method if business logic must be run after the request is addressed.\n\n<!-- -->\n\n    /// <summary>\n    /// The interface for request trigger.\n    /// </summary>\n    public interface IRequestTrigger\n    {\n        /// <summary>\n        /// Gets the collection of request types supported by this trigger.\n        /// </summary>\n        /// <remarks>If null or empty collection returned trigger will be called for all request.</remarks>\n        IEnumerable<Type> SupportedRequestTypes { get; }\n        /// <summary>\n        /// Invoked before request has been processed by <see cref=\"IRequestHandler\"/>.\n        /// </summary>\n        /// <param name=\"request\">The incoming request message.</param>\n        void OnExecuting(Request request);\n        /// <summary>\n        /// Invoked after request has been processed by <see cref=\"IRequestHandler\"/>.\n        /// </summary>\n        /// <param name=\"request\">The request message processed by handler.</param>\n        /// <param name=\"response\">The response message generated by handler.</param>\n        void OnExecuted(Request request, Response response);\n    }\n\n## Trigger CommerceRunTime.config updates\nWhen you extend the CRT, make sure that you always write your extension in your own assembly. After you write the trigger extension in your assembly, you must add an entry in the **composition** section of the .config file for the CRT, so that the trigger is loaded at run time. The following example shows a .config file that includes an entry for a trigger implementation in the **CRTExtensionTrigger** assembly. [![CRTExtensionTrigger](./media/crtextensiontrigger-1024x489.png)](./media/crtextensiontrigger.png)\n\n\n\n","nodes":[{"pos":[32,75],"content":"Commerce runtime extensibility and triggers","needQuote":true,"needEscape":true,"nodes":[{"content":"Commerce runtime extensibility and triggers","pos":[0,43]}]},{"pos":[89,243],"content":"This article explains trigger support for the Microsoft Dynamics AX commerce runtime (CRT). CRT supports pre-triggers and post-triggers for every request.","needQuote":true,"needEscape":true,"nodes":[{"content":"This article explains trigger support for the Microsoft Dynamics AX commerce runtime (CRT). CRT supports pre-triggers and post-triggers for every request.","pos":[0,154],"nodes":[{"content":"This article explains trigger support for the Microsoft Dynamics AX commerce runtime (CRT).","pos":[0,91]},{"content":"CRT supports pre-triggers and post-triggers for every request.","pos":[92,154]}]}]},{"pos":[754,797],"content":"Commerce runtime extensibility and triggers","linkify":"Commerce runtime extensibility and triggers","nodes":[{"content":"Commerce runtime extensibility and triggers","pos":[0,43]}]},{"content":"This article explains trigger support for the Dynamics 365 for Retail commerce runtime (CRT).","pos":[843,936]},{"content":"CRT supports pre-triggers and post-triggers for every request.","pos":[937,999]},{"pos":[1001,1021],"content":"CRT trigger overview","linkify":"CRT trigger overview","nodes":[{"content":"CRT trigger overview","pos":[0,20]}]},{"content":"Commerce runtime (CRT) triggers give you a way to extend the CRT workflow, and let you add business logic before and after every CRT request is executed.","pos":[1044,1197]},{"content":"The following two methods are used:","pos":[1198,1233]},{"pos":[1239,1370],"content":"<bpt id=\"p1\">**</bpt>OnExecuting<ept id=\"p1\">**</ept> – This method is invoked before a request has been processed by a corresponding <bpt id=\"p2\">**</bpt>IRequestHandler<ept id=\"p2\">**</ept> implementation.","source":"**OnExecuting** – This method is invoked before a request has been processed by a corresponding **IRequestHandler** implementation."},{"pos":[1375,1506],"content":"<bpt id=\"p1\">**</bpt>OnExecuted<ept id=\"p1\">**</ept> – This method is invoked after the request has been processed by a corresponding <bpt id=\"p2\">**</bpt>IRequestHandler<ept id=\"p2\">**</ept> implementation.","source":"**OnExecuted** – This method is invoked after the request has been processed by a corresponding **IRequestHandler** implementation."},{"pos":[1511,1532],"content":"CRT trigger interface","linkify":"CRT trigger interface","nodes":[{"content":"CRT trigger interface","pos":[0,21]}]},{"content":"To implement a trigger, you must complete these tasks, as shown in the code example that follows:","pos":[1533,1630]},{"pos":[1636,1666],"content":"Implement <bpt id=\"p1\">**</bpt>IRequestTrigger<ept id=\"p1\">**</ept>.","source":"Implement **IRequestTrigger**."},{"pos":[1671,1771],"content":"Specify <bpt id=\"p1\">**</bpt>SupportedRequestTypes<ept id=\"p1\">**</ept> to define the request types that the trigger must be executed for.","source":"Specify **SupportedRequestTypes** to define the request types that the trigger must be executed for."},{"pos":[1776,1899],"content":"Write a trigger implementation in the <bpt id=\"p1\">**</bpt>OnExecuting<ept id=\"p1\">**</ept> method if business logic must be run before the request is addressed.","source":"Write a trigger implementation in the **OnExecuting** method if business logic must be run before the request is addressed."},{"pos":[1904,2025],"content":"Write a trigger implementation in the <bpt id=\"p1\">**</bpt>OnExecuted<ept id=\"p1\">**</ept> method if business logic must be run after the request is addressed.","source":"Write a trigger implementation in the **OnExecuted** method if business logic must be run after the request is addressed."},{"pos":[3067,3105],"content":"Trigger CommerceRunTime.config updates","linkify":"Trigger CommerceRunTime.config updates","nodes":[{"content":"Trigger CommerceRunTime.config updates","pos":[0,38]}]},{"content":"When you extend the CRT, make sure that you always write your extension in your own assembly.","pos":[3106,3199]},{"content":"After you write the trigger extension in your assembly, you must add an entry in the <bpt id=\"p1\">**</bpt>composition<ept id=\"p1\">**</ept> section of the .config file for the CRT, so that the trigger is loaded at run time.","pos":[3200,3384],"source":" After you write the trigger extension in your assembly, you must add an entry in the **composition** section of the .config file for the CRT, so that the trigger is loaded at run time."},{"content":"The following example shows a .config file that includes an entry for a trigger implementation in the <bpt id=\"p1\">**</bpt>CRTExtensionTrigger<ept id=\"p1\">**</ept> assembly.","pos":[3385,3520],"source":" The following example shows a .config file that includes an entry for a trigger implementation in the **CRTExtensionTrigger** assembly."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>CRTExtensionTrigger<ept id=\"p1\">](./media/crtextensiontrigger-1024x489.png)](./media/crtextensiontrigger.png)</ept>","pos":[3521,3620],"source":"[![CRTExtensionTrigger](./media/crtextensiontrigger-1024x489.png)](./media/crtextensiontrigger.png)"}]}