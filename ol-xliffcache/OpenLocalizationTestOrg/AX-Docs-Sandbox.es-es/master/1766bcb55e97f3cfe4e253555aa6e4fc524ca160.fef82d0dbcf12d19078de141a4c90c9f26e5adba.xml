{"nodes":[{"pos":[32,108],"content":"Expression constraints and table constraints in product configuration models","needQuote":true,"needEscape":true,"nodes":[{"content":"Expression constraints and table constraints in product configuration models","pos":[0,76]}]},{"pos":[122,472],"content":"This topic describes the use of expression constraints and table constraints. Constraints control the attribute values that you can select when you configure products for a sales order, sales quotation, purchase order, or production order. You can use expression constraints or table constraints, depending on how you prefer to build the constraints.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic describes the use of expression constraints and table constraints. Constraints control the attribute values that you can select when you configure products for a sales order, sales quotation, purchase order, or production order. You can use expression constraints or table constraints, depending on how you prefer to build the constraints.","pos":[0,350],"nodes":[{"content":"This topic describes the use of expression constraints and table constraints.","pos":[0,77]},{"content":"Constraints control the attribute values that you can select when you configure products for a sales order, sales quotation, purchase order, or production order.","pos":[78,239]},{"content":"You can use expression constraints or table constraints, depending on how you prefer to build the constraints.","pos":[240,350]}]}]},{"pos":[1126,1202],"content":"Expression constraints and table constraints in product configuration models","linkify":"Expression constraints and table constraints in product configuration models","nodes":[{"content":"Expression constraints and table constraints in product configuration models","pos":[0,76]}]},{"content":"This topic describes the use of expression constraints and table constraints.","pos":[1204,1281]},{"content":"Constraints control the attribute values that you can select when you configure products for a sales order, sales quotation, purchase order, or production order.","pos":[1282,1443]},{"content":"You can use expression constraints or table constraints, depending on how you prefer to build the constraints.","pos":[1444,1554]},{"content":"Constraints are used to control the attribute values that you can select when you configure products for a sales order, sales quotation, purchase order, or production order.","pos":[1557,1730]},{"content":"You can use expression constraints or table constraints, depending on how you prefer to build the constraints.","pos":[1731,1841]},{"pos":[1846,1878],"content":"What are expression constraints?","linkify":"What are expression constraints?","nodes":[{"content":"What are expression constraints?","pos":[0,32]}]},{"content":"Expression constraints are characterized by an expression that uses arithmetic and Boolean operators and functions.","pos":[1879,1994]},{"content":"An expression constraint is written for a specific component in a product configuration model.","pos":[1995,2089]},{"content":"It can't be reused by or shared with another component.","pos":[2090,2145]},{"content":"However, the expression constraints for a component can reference attributes of the component's subcomponents.","pos":[2146,2256]},{"pos":[2261,2288],"content":"What are table constraints?","linkify":"What are table constraints?","nodes":[{"content":"What are table constraints?","pos":[0,27]}]},{"content":"Table constraints list the combinations of values that are allowed for attributes when you configure a product.","pos":[2289,2400]},{"content":"Table constraint definitions can be used generically.","pos":[2401,2454]},{"content":"When you create a table constraint for a component in a product configuration model, you select a table constraint definition.","pos":[2455,2581]},{"content":"To create the combinations that are allowed, you add attributes of specific types to the components.","pos":[2582,2682]},{"content":"Each attribute type has a specific value.","pos":[2683,2724]},{"pos":[2730,2759],"content":"Example of a table constraint","linkify":"Example of a table constraint","nodes":[{"content":"Example of a table constraint","pos":[0,29]}]},{"content":"This example shows how you can limit the configuration of a speaker to specific cabinet finishes and fronts.","pos":[2761,2869]},{"content":"The first table shows the cabinet finishes and fronts that are generally available for configuration.","pos":[2870,2971]},{"content":"The values are defined for the <bpt id=\"p1\">**</bpt>Cabinet finish<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Front grill<ept id=\"p2\">**</ept> attribute types.","pos":[2972,3058],"source":" The values are defined for the **Cabinet finish** and **Front grill** attribute types."},{"content":"Attribute type","pos":[3062,3076]},{"content":"Values","pos":[3079,3085]},{"content":"Cabinet finish","pos":[3160,3174]},{"content":"Black, Oak, Rosewood, White","pos":[3177,3204]},{"content":"Front grill","pos":[3209,3220]},{"content":"Black, Metal, White","pos":[3226,3245]},{"content":"The next table shows the combinations that are defined by the <bpt id=\"p1\">**</bpt>Color and finish<ept id=\"p1\">**</ept> table constraint.","pos":[3257,3357],"source":"The next table shows the combinations that are defined by the **Color and finish** table constraint."},{"content":"By using this table constraint, you can configure a speaker that has an oak finish and a black grill, a Rosewood finish and a white grill, and so on.","pos":[3358,3507]},{"content":"Finish","pos":[3511,3517]},{"content":"Grill","pos":[3528,3533]},{"content":"Oak","pos":[3609,3612]},{"content":"Black","pos":[3626,3631]},{"content":"Rosewood","pos":[3658,3666]},{"content":"White","pos":[3675,3680]},{"content":"White","pos":[3707,3712]},{"content":"Black","pos":[3724,3729]},{"content":"White","pos":[3756,3761]},{"content":"White","pos":[3773,3778]},{"content":"Black","pos":[3805,3810]},{"content":"Black","pos":[3822,3827]},{"content":"Black","pos":[3854,3859]},{"content":"Metal","pos":[3871,3876]},{"content":"You can create system-defined and user-defined table constraints.","pos":[3903,3968]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>System-defined and user-defined table constraints<ept id=\"p1\">](system-defined-user-defined-table-constraints.md)</ept>.","pos":[3969,4097],"source":" For more information, see [System-defined and user-defined table constraints](system-defined-user-defined-table-constraints.md)."},{"pos":[4102,4150],"content":"What syntax should be used to write constraints?","linkify":"What syntax should be used to write constraints?","nodes":[{"content":"What syntax should be used to write constraints?","pos":[0,48]}]},{"content":"You must use Optimization Modeling Language (OML) syntax when you write constraints.","pos":[4151,4235]},{"content":"The system uses Microsoft Solver Foundation constraint solver to solve the constraints.","pos":[4236,4323]},{"pos":[4328,4385],"content":"Should I use table constraints or expression constraints?","linkify":"Should I use table constraints or expression constraints?","nodes":[{"content":"Should I use table constraints or expression constraints?","pos":[0,57]}]},{"content":"You can use either expression constraints or table constraints, depending on how you prefer to build the constraints.","pos":[4386,4503]},{"content":"You build a table constraint as a matrix, whereas an expression constraint is an individual statement.","pos":[4504,4606]},{"content":"When you configure a product, it doesn't matter what kind of constraint is used.","pos":[4607,4687]},{"content":"The following example shows how the two methods differ.","pos":[4688,4743]},{"content":"When you configure a product by using the following constraint setups, these combinations are allowed:","pos":[4747,4849]},{"content":"A product in the color Black, and in size 30 or 50","pos":[4855,4905]},{"content":"A product in the color Red and in size 20","pos":[4910,4951]},{"pos":[4957,4979],"content":"Table constraint setup","linkify":"Table constraint setup","nodes":[{"content":"Table constraint setup","pos":[0,22]}]},{"content":"Color","pos":[4983,4988]},{"content":"Size","pos":[4991,4995]},{"content":"Black","pos":[5017,5022]},{"content":"30","pos":[5025,5027]},{"content":"Black","pos":[5034,5039]},{"content":"50","pos":[5042,5044]},{"content":"Red","pos":[5051,5054]},{"content":"20","pos":[5059,5061]},{"pos":[5071,5098],"content":"Expression constraint setup","linkify":"Expression constraint setup","nodes":[{"content":"Expression constraint setup","pos":[0,27]}]},{"content":"(Color == \"Black\" &amp; (size == \"30\" | size == \"50\")) | (color == \"Red\" &amp; size = \"20\")","pos":[5100,5183],"source":"(Color == \"Black\" & (size == \"30\" | size == \"50\")) | (color == \"Red\" & size = \"20\")"},{"pos":[5188,5265],"content":"Should I use operators or infix notation when I write expression constraints?","linkify":"Should I use operators or infix notation when I write expression constraints?","nodes":[{"content":"Should I use operators or infix notation when I write expression constraints?","pos":[0,77]}]},{"content":"You can write an expression constraint by using either the available prefix operators or infix notation.","pos":[5266,5370]},{"content":"For the <bpt id=\"p1\">**</bpt>Min<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Max<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>Abs<ept id=\"p3\">**</ept> operators, you can't use infix notation.","pos":[5371,5449],"source":" For the **Min**, **Max**, and **Abs** operators, you can't use infix notation."},{"content":"These operators are included as standard operators in most programming languages.","pos":[5450,5531]},{"pos":[5536,5616],"content":"What operators and infix notation can I use when I write expression constraints?","linkify":"What operators and infix notation can I use when I write expression constraints?","nodes":[{"content":"What operators and infix notation can I use when I write expression constraints?","pos":[0,80]}]},{"content":"The following tables list the operators and infix notation that you can use when you write an expression constraint for a component in a product configuration model.","pos":[5617,5782]},{"content":"The examples in the first table show how to write an expression by using either infix notation or operators.","pos":[5783,5891]},{"content":"Operator","pos":[6036,6044]},{"content":"Description","pos":[6054,6065]},{"content":"Syntax","pos":[6075,6081]},{"content":"Examples","pos":[6091,6099]},{"content":"Implies","pos":[6149,6156]},{"content":"This is true if the first condition is false, the second condition is true, or both.","pos":[6166,6250]},{"content":"Implies[a, b], infix: a -: b","pos":[6260,6288]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Implies[x != 0, y <ph id=\"ph1\">&amp;gt;</ph>= 0]","pos":[6307,6360],"source":"<strong>Operator:</strong> Implies[x != 0, y &gt;= 0]"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Infix notation:<ept id=\"p1\">&lt;/strong&gt;</ept> x != 0 -: y <ph id=\"ph1\">&amp;gt;</ph>= 0","pos":[6370,6422],"source":"<strong>Infix notation:</strong> x != 0 -: y &gt;= 0"},{"content":"And","pos":[6467,6470]},{"content":"This is true only if all conditions are true.","pos":[6480,6525]},{"content":"If the number of conditions is 0 (zero), it produces <bpt id=\"p1\">&lt;strong&gt;</bpt>True<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[6526,6601],"source":" If the number of conditions is 0 (zero), it produces <strong>True</strong>."},{"content":"And[args], infix: a <ph id=\"ph1\">&amp;amp;</ph> b <ph id=\"ph2\">&amp;amp;</ph> ... <ph id=\"ph3\">&amp;amp;</ph> z","pos":[6611,6656],"source":"And[args], infix: a &amp; b &amp; ... &amp; z"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> And[x == 2, y <ph id=\"ph1\">&amp;lt;</ph>= 2]","pos":[6675,6724],"source":"<strong>Operator:</strong> And[x == 2, y &lt;= 2]"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Infix notation:<ept id=\"p1\">&lt;/strong&gt;</ept> x == 2 <ph id=\"ph1\">&amp;amp;</ph> y <ph id=\"ph2\">&amp;lt;</ph>= 2","pos":[6734,6789],"source":"<strong>Infix notation:</strong> x == 2 &amp; y &lt;= 2"},{"content":"Or","pos":[6833,6835]},{"content":"This is true if any condition is true.","pos":[6845,6883]},{"content":"If the number of conditions is 0 (zero), it produces <bpt id=\"p1\">&lt;strong&gt;</bpt>False<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[6884,6960],"source":" If the number of conditions is 0 (zero), it produces <strong>False</strong>."},{"content":"Or[args], infix: a | b | ... | z","pos":[6970,7002]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Or[x == 2, y <ph id=\"ph1\">&amp;lt;</ph>= 2]","pos":[7021,7069],"source":"<strong>Operator:</strong> Or[x == 2, y &lt;= 2]"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Infix notation:<ept id=\"p1\">&lt;/strong&gt;</ept> x == 2 | y <ph id=\"ph1\">&amp;lt;</ph>= 2","pos":[7079,7130],"source":"<strong>Infix notation:</strong> x == 2 | y &lt;= 2"},{"content":"Plus","pos":[7175,7179]},{"content":"This sums its conditions.","pos":[7189,7214]},{"content":"If the number of conditions is 0 (zero), it produces <bpt id=\"p1\">&lt;strong&gt;</bpt>0<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[7215,7287],"source":" If the number of conditions is 0 (zero), it produces <strong>0</strong>."},{"content":"Plus[args], infix: a + b + ... + z","pos":[7297,7331]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Plus[x, y, 2] == z","pos":[7350,7395],"source":"<strong>Operator:</strong> Plus[x, y, 2] == z"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Infix notation:<ept id=\"p1\">&lt;/strong&gt;</ept> x + y + 2 == z","pos":[7405,7452],"source":"<strong>Infix notation:</strong> x + y + 2 == z"},{"content":"Minus","pos":[7496,7501]},{"content":"This negates its argument.","pos":[7511,7537]},{"content":"It must have exactly one condition.","pos":[7538,7573]},{"content":"Minus[expr], infix: -expr","pos":[7583,7608]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Minus[x] == y","pos":[7627,7667],"source":"<strong>Operator:</strong> Minus[x] == y"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Infix notation:<ept id=\"p1\">&lt;/strong&gt;</ept> -x == y","pos":[7677,7717],"source":"<strong>Infix notation:</strong> -x == y"},{"content":"Abs","pos":[7762,7765]},{"content":"This takes the absolute value of its condition.","pos":[7775,7822]},{"content":"It must have exactly one condition.","pos":[7823,7858]},{"content":"Abs[expr]","pos":[7868,7877]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Abs[x]","pos":[7887,7920],"source":"<strong>Operator:</strong> Abs[x]"},{"content":"Times","pos":[7953,7958]},{"content":"This takes the product of its conditions.","pos":[7968,8009]},{"content":"If the number of conditions is 0 (zero), it produces <bpt id=\"p1\">&lt;strong&gt;</bpt>1<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[8010,8082],"source":" If the number of conditions is 0 (zero), it produces <strong>1</strong>."},{"content":"Times[args], infix: a * b * ... * z","pos":[8092,8127]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Times[x, y, 2] == z","pos":[8146,8192],"source":"<strong>Operator:</strong> Times[x, y, 2] == z"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Infix notation:<ept id=\"p1\">&lt;/strong&gt;</ept> x * y * 2 == z","pos":[8202,8249],"source":"<strong>Infix notation:</strong> x * y * 2 == z"},{"content":"Power","pos":[8294,8299]},{"content":"This takes an exponential.","pos":[8309,8335]},{"content":"It applies exponentiation from right to left.","pos":[8336,8381]},{"content":"(In other words, it's right-associative.) Therefore, <bpt id=\"p1\">&lt;strong&gt;</bpt>Power[a, b, c]<ept id=\"p1\">&lt;/strong&gt;</ept> is equivalent to <bpt id=\"p2\">&lt;strong&gt;</bpt>Power[a, Power[b, c]]<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[8382,8523],"source":" (In other words, it's right-associative.) Therefore, <strong>Power[a, b, c]</strong> is equivalent to <strong>Power[a, Power[b, c]]</strong>."},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Power<ept id=\"p1\">&lt;/strong&gt;</ept> can be used only if the exponent is a positive constant.","pos":[8524,8603],"source":"<strong>Power</strong> can be used only if the exponent is a positive constant."},{"content":"Power[args], infix: a ^ b ^ ... ^ z","pos":[8613,8648]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Power[x, 2] == y","pos":[8667,8710],"source":"<strong>Operator:</strong> Power[x, 2] == y"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Infix notation:<ept id=\"p1\">&lt;/strong&gt;</ept> x ^ 2 == y","pos":[8720,8763],"source":"<strong>Infix notation:</strong> x ^ 2 == y"},{"content":"Max","pos":[8807,8810]},{"content":"This produces the largest condition.","pos":[8820,8856]},{"content":"If the number of conditions is 0 (zero), it produces <bpt id=\"p1\">&lt;strong&gt;</bpt>Infinity<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[8857,8936],"source":" If the number of conditions is 0 (zero), it produces <strong>Infinity</strong>."},{"content":"Max[args]","pos":[8946,8955]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Max[x, y, 2] == z","pos":[8965,9009],"source":"<strong>Operator:</strong> Max[x, y, 2] == z"},{"content":"Min","pos":[9043,9046]},{"content":"This produces the smallest condition.","pos":[9056,9093]},{"content":"If the number of conditions is 0 (zero), it produces <bpt id=\"p1\">&lt;strong&gt;</bpt>Infinity<ept id=\"p1\">&lt;/strong&gt;</ept>.","pos":[9094,9173],"source":" If the number of conditions is 0 (zero), it produces <strong>Infinity</strong>."},{"content":"Min[args]","pos":[9183,9192]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Min[x, y, 2] == z","pos":[9202,9246],"source":"<strong>Operator:</strong> Min[x, y, 2] == z"},{"content":"Not","pos":[9279,9282]},{"content":"This produces the logical inverse of its condition.","pos":[9292,9343]},{"content":"It must have exactly one condition.","pos":[9344,9379]},{"content":"Not[expr], infix: !expr","pos":[9389,9412]},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Operator:<ept id=\"p1\">&lt;/strong&gt;</ept> Not[x] <ph id=\"ph1\">&amp;amp;</ph> Not[y == 3]","pos":[9431,9482],"source":"<strong>Operator:</strong> Not[x] &amp; Not[y == 3]"},{"content":"<bpt id=\"p1\">&lt;strong&gt;</bpt>Infix notation:<ept id=\"p1\">&lt;/strong&gt;</ept> !x!(y == 3)","pos":[9492,9536],"source":"<strong>Infix notation:</strong> !x!(y == 3)"},{"content":"The examples in the next table show how to write infix notation.","pos":[9578,9642]},{"content":"Infix notation","pos":[9646,9660]},{"content":"Description","pos":[9666,9677]},{"content":"x + y + z","pos":[9882,9891]},{"content":"Addition","pos":[9902,9910]},{"content":"x <ph id=\"ph1\">\\*</ph> y <ph id=\"ph2\">\\*</ph> z","pos":[10000,10011],"source":"x \\* y \\* z"},{"content":"Multiplication","pos":[10020,10034]},{"content":"x - y","pos":[10118,10123]},{"content":"Binary subtraction is translated the same as binary addition where there is a negated second.","pos":[10138,10231]},{"content":"x ^ y ^ z","pos":[10236,10245]},{"content":"Exponentiation that has right associativity","pos":[10256,10299]},{"content":"!x","pos":[10354,10356]},{"content":"Boolean not","pos":[10374,10385]},{"content":"x -: y","pos":[10472,10478]},{"content":"Boolean implication","pos":[10492,10511]},{"content":"x","pos":[10590,10591]},{"content":"y","pos":[10594,10595]},{"content":"z","pos":[10598,10599]},{"content":"Boolean or","pos":[10610,10620]},{"content":"x &amp; y &amp; z","pos":[10708,10717],"source":"x & y & z"},{"content":"Boolean and","pos":[10728,10739]},{"content":"x == y == z","pos":[10826,10837]},{"content":"Equality","pos":[10846,10854]},{"content":"x != y != z","pos":[10944,10955]},{"content":"Distinct","pos":[10964,10972]},{"content":"x <ph id=\"ph1\">&amp;lt;</ph> y <ph id=\"ph2\">&amp;lt;</ph> z","pos":[11062,11077],"source":"x &lt; y &lt; z"},{"content":"Less than","pos":[11082,11091]},{"content":"x <ph id=\"ph1\">&amp;gt;</ph> y <ph id=\"ph2\">&amp;gt;</ph> z","pos":[11180,11195],"source":"x &gt; y &gt; z"},{"content":"Greater than","pos":[11200,11212]},{"content":"x <ph id=\"ph1\">&amp;lt;</ph>= y <ph id=\"ph2\">&amp;lt;</ph>= z","pos":[11298,11315],"source":"x &lt;= y &lt;= z"},{"content":"Less than or equal to","pos":[11318,11339]},{"content":"x <ph id=\"ph1\">&amp;gt;</ph>= y <ph id=\"ph2\">&amp;gt;</ph>= z","pos":[11416,11433],"source":"x &gt;= y &gt;= z"},{"content":"Greater than or equal to","pos":[11436,11460]},{"content":"(x)","pos":[11534,11537]},{"content":"Parentheses override default precedence.","pos":[11554,11594]},{"pos":[11654,11711],"content":"Why aren't my expression constraints validated correctly?","linkify":"Why aren't my expression constraints validated correctly?","nodes":[{"content":"Why aren't my expression constraints validated correctly?","pos":[0,57]}]},{"content":"You can't use reserved keywords as solver names for attributes, components, or subcomponents in a product configuration model.","pos":[11712,11838]},{"content":"Here is a list of the reserved keywords that you can't use:","pos":[11839,11898]},{"content":"Ceiling","pos":[11904,11911]},{"content":"Element","pos":[11916,11923]},{"content":"Equal","pos":[11928,11933]},{"content":"Floor","pos":[11938,11943]},{"content":"If","pos":[11948,11950]},{"content":"Less","pos":[11955,11959]},{"content":"Greater","pos":[11964,11971]},{"content":"Implies","pos":[11976,11983]},{"content":"Log","pos":[11988,11991]},{"content":"Max","pos":[11996,11999]},{"content":"Min","pos":[12004,12007]},{"content":"Minus","pos":[12012,12017]},{"content":"Plus","pos":[12022,12026]},{"content":"Power","pos":[12031,12036]},{"content":"Times","pos":[12041,12046]},{"content":"Slot","pos":[12051,12055]},{"content":"Model","pos":[12060,12065]},{"content":"Decision","pos":[12070,12078]},{"content":"Goal","pos":[12083,12087]},{"pos":[12090,12098],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[12109,12225],"content":"<bpt id=\"p1\">[</bpt>Create an expression constraint (Task guide)<ept id=\"p1\">](http://ax.help.dynamics.com/en/wiki/create-an-expression-constraint/)</ept>","source":"[Create an expression constraint (Task guide)](http://ax.help.dynamics.com/en/wiki/create-an-expression-constraint/)"},{"pos":[12227,12381],"content":"<bpt id=\"p1\">[</bpt>Add a calculation to a product configuration model (Task guide)<ept id=\"p1\">](http://ax.help.dynamics.com/en/wiki/add-a-calculation-to-a-product-configuration-model/)</ept>","source":"[Add a calculation to a product configuration model (Task guide)](http://ax.help.dynamics.com/en/wiki/add-a-calculation-to-a-product-configuration-model/)"}],"content":"---\n# required metadata\n\ntitle: Expression constraints and table constraints in product configuration models\ndescription: This topic describes the use of expression constraints and table constraints. Constraints control the attribute values that you can select when you configure products for a sales order, sales quotation, purchase order, or production order. You can use expression constraints or table constraints, depending on how you prefer to build the constraints. \nauthor: YuyuScheller\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\nms.search.form: PCGlobalTableConstraintEdit, PCProductConfigurationModelDetails, PCTableConstraintAttachAttributeTree, PCTableConstraintDefinition\n# ROBOTS: \naudience: Application User\n# ms.devlang: \n# ms.reviewer: 2094\nms.search.scope: AX 7.0.0, Operations, Core\n# ms.tgt_pltfrm: \nms.custom: 53111\nms.assetid: 5c12b1f2-eb89-4648-a755-de412f2eadd6\nms.search.region: Global\nms.search.industry: Manufacturing\nms.author: yuyus\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Expression constraints and table constraints in product configuration models\n\nThis topic describes the use of expression constraints and table constraints. Constraints control the attribute values that you can select when you configure products for a sales order, sales quotation, purchase order, or production order. You can use expression constraints or table constraints, depending on how you prefer to build the constraints. \n\nConstraints are used to control the attribute values that you can select when you configure products for a sales order, sales quotation, purchase order, or production order. You can use expression constraints or table constraints, depending on how you prefer to build the constraints.\n\n## What are expression constraints?\nExpression constraints are characterized by an expression that uses arithmetic and Boolean operators and functions. An expression constraint is written for a specific component in a product configuration model. It can't be reused by or shared with another component. However, the expression constraints for a component can reference attributes of the component's subcomponents.\n\n## What are table constraints?\nTable constraints list the combinations of values that are allowed for attributes when you configure a product. Table constraint definitions can be used generically. When you create a table constraint for a component in a product configuration model, you select a table constraint definition. To create the combinations that are allowed, you add attributes of specific types to the components. Each attribute type has a specific value.\n\n### Example of a table constraint\n\nThis example shows how you can limit the configuration of a speaker to specific cabinet finishes and fronts. The first table shows the cabinet finishes and fronts that are generally available for configuration. The values are defined for the **Cabinet finish** and **Front grill** attribute types.\n\n| Attribute type | Values                      |\n|----------------|-----------------------------|\n| Cabinet finish | Black, Oak, Rosewood, White |\n| Front grill    | Black, Metal, White         |\n\nThe next table shows the combinations that are defined by the **Color and finish** table constraint. By using this table constraint, you can configure a speaker that has an oak finish and a black grill, a Rosewood finish and a white grill, and so on.\n\n| Finish         | Grill                       |\n|----------------|-----------------------------|\n| Oak            | Black                       |\n| Rosewood       | White                       |\n| White          | Black                       |\n| White          | White                       |\n| Black          | Black                       |\n| Black          | Metal                       | \n\nYou can create system-defined and user-defined table constraints. For more information, see [System-defined and user-defined table constraints](system-defined-user-defined-table-constraints.md).\n\n## What syntax should be used to write constraints?\nYou must use Optimization Modeling Language (OML) syntax when you write constraints. The system uses Microsoft Solver Foundation constraint solver to solve the constraints.\n\n## Should I use table constraints or expression constraints?\nYou can use either expression constraints or table constraints, depending on how you prefer to build the constraints. You build a table constraint as a matrix, whereas an expression constraint is an individual statement. When you configure a product, it doesn't matter what kind of constraint is used. The following example shows how the two methods differ.  \n\nWhen you configure a product by using the following constraint setups, these combinations are allowed:\n\n-   A product in the color Black, and in size 30 or 50\n-   A product in the color Red and in size 20\n\n### Table constraint setup\n\n| Color | Size |\n|-------|------|\n| Black | 30   |\n| Black | 50   |\n| Red   | 20   |\n\n### Expression constraint setup\n\n(Color == \"Black\" & (size == \"30\" | size == \"50\")) | (color == \"Red\" & size = \"20\")\n\n## Should I use operators or infix notation when I write expression constraints?\nYou can write an expression constraint by using either the available prefix operators or infix notation. For the **Min**, **Max**, and **Abs** operators, you can't use infix notation. These operators are included as standard operators in most programming languages.\n\n## What operators and infix notation can I use when I write expression constraints?\nThe following tables list the operators and infix notation that you can use when you write an expression constraint for a component in a product configuration model. The examples in the first table show how to write an expression by using either infix notation or operators.\n\n<table>\n<colgroup>\n<col width=\"25%\" />\n<col width=\"25%\" />\n<col width=\"25%\" />\n<col width=\"25%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Operator</th>\n<th>Description</th>\n<th>Syntax</th>\n<th>Examples</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>Implies</td>\n<td>This is true if the first condition is false, the second condition is true, or both.</td>\n<td>Implies[a, b], infix: a -: b</td>\n<td><ul>\n<li><strong>Operator:</strong> Implies[x != 0, y &gt;= 0]</li>\n<li><strong>Infix notation:</strong> x != 0 -: y &gt;= 0</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>And</td>\n<td>This is true only if all conditions are true. If the number of conditions is 0 (zero), it produces <strong>True</strong>.</td>\n<td>And[args], infix: a &amp; b &amp; ... &amp; z</td>\n<td><ul>\n<li><strong>Operator:</strong> And[x == 2, y &lt;= 2]</li>\n<li><strong>Infix notation:</strong> x == 2 &amp; y &lt;= 2</li>\n</ul></td>\n</tr>\n<tr class=\"odd\">\n<td>Or</td>\n<td>This is true if any condition is true. If the number of conditions is 0 (zero), it produces <strong>False</strong>.</td>\n<td>Or[args], infix: a | b | ... | z</td>\n<td><ul>\n<li><strong>Operator:</strong> Or[x == 2, y &lt;= 2]</li>\n<li><strong>Infix notation:</strong> x == 2 | y &lt;= 2</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Plus</td>\n<td>This sums its conditions. If the number of conditions is 0 (zero), it produces <strong>0</strong>.</td>\n<td>Plus[args], infix: a + b + ... + z</td>\n<td><ul>\n<li><strong>Operator:</strong> Plus[x, y, 2] == z</li>\n<li><strong>Infix notation:</strong> x + y + 2 == z</li>\n</ul></td>\n</tr>\n<tr class=\"odd\">\n<td>Minus</td>\n<td>This negates its argument. It must have exactly one condition.</td>\n<td>Minus[expr], infix: -expr</td>\n<td><ul>\n<li><strong>Operator:</strong> Minus[x] == y</li>\n<li><strong>Infix notation:</strong> -x == y</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Abs</td>\n<td>This takes the absolute value of its condition. It must have exactly one condition.</td>\n<td>Abs[expr]</td>\n<td><strong>Operator:</strong> Abs[x]</td>\n</tr>\n<tr class=\"odd\">\n<td>Times</td>\n<td>This takes the product of its conditions. If the number of conditions is 0 (zero), it produces <strong>1</strong>.</td>\n<td>Times[args], infix: a * b * ... * z</td>\n<td><ul>\n<li><strong>Operator:</strong> Times[x, y, 2] == z</li>\n<li><strong>Infix notation:</strong> x * y * 2 == z</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Power</td>\n<td>This takes an exponential. It applies exponentiation from right to left. (In other words, it's right-associative.) Therefore, <strong>Power[a, b, c]</strong> is equivalent to <strong>Power[a, Power[b, c]]</strong>. <strong>Power</strong> can be used only if the exponent is a positive constant.</td>\n<td>Power[args], infix: a ^ b ^ ... ^ z</td>\n<td><ul>\n<li><strong>Operator:</strong> Power[x, 2] == y</li>\n<li><strong>Infix notation:</strong> x ^ 2 == y</li>\n</ul></td>\n</tr>\n<tr class=\"odd\">\n<td>Max</td>\n<td>This produces the largest condition. If the number of conditions is 0 (zero), it produces <strong>Infinity</strong>.</td>\n<td>Max[args]</td>\n<td><strong>Operator:</strong> Max[x, y, 2] == z</td>\n</tr>\n<tr class=\"even\">\n<td>Min</td>\n<td>This produces the smallest condition. If the number of conditions is 0 (zero), it produces <strong>Infinity</strong>.</td>\n<td>Min[args]</td>\n<td><strong>Operator:</strong> Min[x, y, 2] == z</td>\n</tr>\n<tr class=\"odd\">\n<td>Not</td>\n<td>This produces the logical inverse of its condition. It must have exactly one condition.</td>\n<td>Not[expr], infix: !expr</td>\n<td><ul>\n<li><strong>Operator:</strong> Not[x] &amp; Not[y == 3]</li>\n<li><strong>Infix notation:</strong> !x!(y == 3)</li>\n</ul></td>\n</tr>\n</tbody>\n</table>\n\nThe examples in the next table show how to write infix notation.\n\n| Infix notation    | Description                                                                                   |\n|-------------------|-----------------------------------------------------------------------------------------------|\n| x + y + z         | Addition                                                                                      |\n| x \\* y \\* z       | Multiplication                                                                                |\n| x - y             | Binary subtraction is translated the same as binary addition where there is a negated second. |\n| x ^ y ^ z         | Exponentiation that has right associativity                                                   |\n| !x                | Boolean not                                                                                   |\n| x -: y            | Boolean implication                                                                           |\n| x | y | z         | Boolean or                                                                                    |\n| x & y & z         | Boolean and                                                                                   |\n| x == y == z       | Equality                                                                                      |\n| x != y != z       | Distinct                                                                                      |\n| x &lt; y &lt; z   | Less than                                                                                     |\n| x &gt; y &gt; z   | Greater than                                                                                  |\n| x &lt;= y &lt;= z | Less than or equal to                                                                         |\n| x &gt;= y &gt;= z | Greater than or equal to                                                                      |\n| (x)               | Parentheses override default precedence.                                                      |\n\n## Why aren't my expression constraints validated correctly?\nYou can't use reserved keywords as solver names for attributes, components, or subcomponents in a product configuration model. Here is a list of the reserved keywords that you can't use:\n\n-   Ceiling\n-   Element\n-   Equal\n-   Floor\n-   If\n-   Less\n-   Greater\n-   Implies\n-   Log\n-   Max\n-   Min\n-   Minus\n-   Plus\n-   Power\n-   Times\n-   Slot\n-   Model\n-   Decision\n-   Goal\n\n\nSee also\n--------\n\n[Create an expression constraint (Task guide)](http://ax.help.dynamics.com/en/wiki/create-an-expression-constraint/)\n\n[Add a calculation to a product configuration model (Task guide)](http://ax.help.dynamics.com/en/wiki/add-a-calculation-to-a-product-configuration-model/)\n\n"}