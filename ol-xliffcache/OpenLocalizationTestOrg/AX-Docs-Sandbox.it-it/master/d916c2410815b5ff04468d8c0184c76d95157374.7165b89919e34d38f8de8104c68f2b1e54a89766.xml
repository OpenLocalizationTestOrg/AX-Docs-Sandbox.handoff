{"content":"---\n# required metadata\n\ntitle: Install a deployable package\ndescription: This topic walks you through the steps for using the command line to apply either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.\nauthor: manalidongre\nmanager: AnnBe\nms.date: 04/22/2017\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \n# ms.reviewer: 61\nms.search.scope: AX 7.0.0, Operations\n# ms.tgt_pltfrm: \nms.custom: 24191\nms.assetid: 42d238d6-ff03-41b6-b2d5-c94bcdc37576\nms.search.region: Global\n# ms.search.industry: \nms.author: manado\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Install a deployable package\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic walks you through the steps for using the command line to apply either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.\n\nThis command line process requires remote access to the environments. In most cases, you can apply a deployable package to an environment directly from Dynamics Lifecycle Services (LCS) as described in [Apply a deployable package on a system](apply-deployable-package-system.md), without the need to understand the process described on this page.\n\n## Key concepts\n-   **Deployable package**– A deployable package is a unit of deployment that can be applied in any environment. It can consist of a binary hotfix to the AOS runtime components, an updated application package, or a new application package.\n-   **AXUpdateInstaller**– A deployable package has the installer executable bundled in it. When the package is downloaded to a computer, the installer is available.\n-   **Runbook**– The deployment runbook is a series of steps that is generated for applying the deployable package to the target environment. Some of the steps are automated, and some are manual. AXUpdateInstaller provides the capability to run these steps one by one and in the correct sequence.\n\n## Collect topology configuration data\n1.  In Microsoft Dynamics Lifecycle Services (LCS), open the **Environment **page.\n2.  Click the name of a virtual machine (VM), and establish a Remote Desktop connection to the VM by using the user name and password that are provided on the**Environment**page.\n3.  On the VM, download the zip file for the deployable package from LCS. **Note:** After you download the zip file, right-click it, and then select **Properties**. Then, in the **Properties** dialog box, on the **General** tab, click **Unblock** to unlock the files. Finally, extract the files, and continue with the next step. Also, make sure that the **zip** file is stored in a non-user folder\n4.  In the folder where the deployable package was extracted, find and open the file that is named DefaultTopologyData.xml. You must populate this file with the VM name and installed components.\n    -   To populate the VM name, follow these steps:\n        1.  Open Windows Explorer, right-click **This PC**, and then select **Properties**.\n        2.  In the system properties, find and make a note of the machine name (for example, AOS-950ed2c3e7b).\n        3.  In the DefaultTopologyData.xml file, replace the machine name with the name that you found in the previous step.\n    -   To populate the installed components, follow these steps:\n        1.  Open a Command Prompt window as an administrator.\n        2.  Navigate to the extracted folder, and run the following command to see a list of all the installed components on the computer.\n\n                AXUpdateInstaller.exe list\n\n        3.  Update the DefaultTopologyData.xml with the list of components.\n\n    When you've finished populating the VM name and installed components, the DefaultTopologyData.xml file should resemble the following illustration. ![defaulttopology](./media/defaulttopology.png)\n5.  Repeat steps 2 through 4 for each VM that is listed on the**Environment**page.\n\n## Generate a runbook from the topology\nBased on the topology information in the DefaultTopologyData.xml file, you must generate the runbook file that will provide step-by-step instructions for updating each VM.\n\n-   On any VM, run the following command to generate the runbook.\n\n        AXUpdateInstaller.exe generate -runbookid=[runbookID] -topologyfile=[topologyFile] -servicemodelfile=[serviceModelFile] -runbookfile=[runbookFile]\n\n    Here is an explanation of the parameters that are used in this command:\n\n    -   **\\[runbookID\\]**– A parameter that is specified by the developer who applies the deployable package\n    -   **\\[topologyFile\\]**– The path of the DefaultTopologyData.xml file\n    -   **\\[serviceModelFile\\]**– The path of the DefaultServiceModelData.xml file\n    -   **\\[runbookFile\\]**– The name of the runbook file to generate (for example, AOSRunbook.xml)\n\n    **Example**\n\n        AXUpdateInstaller.exe generate -runbookid=\"VAL200AA2BMEDIU-runbook\" -topologyfile=\"DefaultTopologyData.xml\" -servicemodelfile=\"DefaultServiceModelData.xml\" -runbookfile=\"VAL200AA2BMEDIU-runbook.xml\"\n\nThe runbook provides the sequence of steps that must be run to update the environment. The following illustration shows an example of a runbook file. Each step in a runbook is associated with an ID, a machine name, and step execution details. [![runbook-steps](./media/runbook-steps-1024x624.jpg)](./media/runbook-steps.jpg)\n\n## Install a deployable package\n1.  Based on the sequence of steps that is specified in the runbook, start with the first machine that is listed.\n2.  Follow these steps on each VM:\n    1.  Import the runbook by running the following command.\n\n            AXUpdateInstaller.exe import -runbookfile=[runbookFile]\n\n        **Example**\n\n            AXUpdateInstaller.exe import -runbookfile=\"VAL200AA2BMEDIU-runbook.xml\"\n\n    2.  Verify the runbook.\n\n            AXUpdateInstaller.exe list\n\n    3.  Execute the runbook.\n\n            AXUpdateInstaller.exe execute -runbookid=[runbookID]\n\n        **Example**\n\n            AXUpdateInstaller.exe execute -runbookid=\"VAL200AA2BMEDIU-runbook\"\n\n    4.  Export the runbook.\n\n            AXUpdateInstaller.exe export -runbookid=[runbookID] -runbookfile=[runbookFile]\n\n        **Example**\n\n            AXUpdateInstaller.exe export -runbookid=\"VAL200AA2BMEDIU-runbook\" -runbookfile=\"VAL200AA2BMEDIU-runbook.xml\"\n\n3.  AXUpdateInstaller updates the runbook file after each step is run on a VM.\n4.  The runbook also logs information about each step.\n5.  For manual steps, follow the instructions, and then mark the step as completed in the runbook by using the AXUpdateInstaller.\n\n        AXUpdateInstaller.exe execute -runbookID=[runbookID] -setstepcomplete=[stepID]\n\n    **Example**\n\n        AXUpdateInstaller.exe execute -runbookid=\"VAL200AA2BMEDIU-runbook\" -setstepcomplete=2\n\n6.  After all the steps are completed on one machine, export the runbook results.\n\n        AXUpdateInstaller.exe export -runbookID=[runbookID] -runbookfile=[runbookFile]\n\n    **Example**\n\n        AXUpdateInstaller.exe export -runbookid=\"VAL200AA2BMEDIU-runbook\" -runbookfile=\"VAL200AA2BMEDIU-runbook.xml\"\n\n7.  Log on to the second machine that is listed, and repeat steps 1 through 6 until all machines have been updated.\n8.  If errors occur during any step, debug the script/instruction in the step, and update accordingly.\n\n## Back up the database and computer instance\n-   After all the services are stopped, make a backup of the database and VM snapshot manually (optional). Then run the following command to mark the backup step as completed. Supply the correct backup step ID.\n\n        AXUpdateInstaller.exe execute -runbookid=[runbookID] -setstepcomplete=[stepID]\n\n    **Example**\n\n        AXUpdateInstaller.exe execute -runbookid=\"VAL200AA2BMEDIU-runbook\" -setstepcomplete=3\n\n## Update files\n1.  After you've marked the backup step as completed, the next step is triggered. In the sample step, AOS packages are updated from the deployable package.\n2.  Run the following command to verify that the new version is installed.\n\n        AXUpdateInstaller.exe list\n\n3.  View the runbook to see the completed steps. [![image013](./media/image013-1024x978.png)](./media/image013.png)\n\n## Run database synchronization\n-   At one point, you will see a database synchronization (DBSync) step. [![image015](./media/image015-1024x654.png)](./media/image015.png)\n\n## Start all services\n-   After the database synchronization step is completed, follow the same instructions to complete the remaining steps. All the services will be started.\n\n## Troubleshooting\n-   After all the steps are completed, export the runbook, and save it outside the computer for future reference. For example, you might have to use the runbook file in these situations:\n    -   You must analyze the downtime requirements for production, and so on.\n    -   You must send the file to Microsoft in the event of failure to install a deployable package.\n-   If any step fails, you can rerun it by running the following command.\n\n        AXUpdateInstaller.exe execute -runbookid=[runbookID] -rerunstep=[stepID]\n\n-   To prevent version mismatch or downgrade, or installation of the same deployable package, run the following command.\n\n        AXUpdateInstaller.exe execute -runbookid=[runbook ID] -versioncheck=true\n\n-   To verify database synchronization, navigate to the aosservce\\\\scripts\\\\ folder and find the dbsync.error.txt file. Find the file, and look for any errors.\n\n\n\n\n","nodes":[{"pos":[32,60],"content":"Install a deployable package","needQuote":true,"needEscape":true,"nodes":[{"content":"Install a deployable package","pos":[0,28]}]},{"pos":[74,281],"content":"This topic walks you through the steps for using the command line to apply either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic walks you through the steps for using the command line to apply either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.","pos":[0,207]}]},{"pos":[789,817],"content":"Install a deployable package","linkify":"Install a deployable package","nodes":[{"content":"Install a deployable package","pos":[0,28]}]},{"content":"This topic walks you through the steps for using the command line to apply either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.","pos":[863,1070]},{"content":"This command line process requires remote access to the environments.","pos":[1072,1141]},{"content":"In most cases, you can apply a deployable package to an environment directly from Dynamics Lifecycle Services (LCS) as described in <bpt id=\"p1\">[</bpt>Apply a deployable package on a system<ept id=\"p1\">](apply-deployable-package-system.md)</ept>, without the need to understand the process described on this page.","pos":[1142,1418],"source":" In most cases, you can apply a deployable package to an environment directly from Dynamics Lifecycle Services (LCS) as described in [Apply a deployable package on a system](apply-deployable-package-system.md), without the need to understand the process described on this page."},{"pos":[1423,1435],"content":"Key concepts","linkify":"Key concepts","nodes":[{"content":"Key concepts","pos":[0,12]}]},{"content":"<bpt id=\"p1\">**</bpt>Deployable package<ept id=\"p1\">**</ept>– A deployable package is a unit of deployment that can be applied in any environment.","pos":[1440,1548],"source":"**Deployable package**– A deployable package is a unit of deployment that can be applied in any environment."},{"content":"It can consist of a binary hotfix to the AOS runtime components, an updated application package, or a new application package.","pos":[1549,1675]},{"content":"<bpt id=\"p1\">**</bpt>AXUpdateInstaller<ept id=\"p1\">**</ept>– A deployable package has the installer executable bundled in it.","pos":[1680,1767],"source":"**AXUpdateInstaller**– A deployable package has the installer executable bundled in it."},{"content":"When the package is downloaded to a computer, the installer is available.","pos":[1768,1841]},{"content":"<bpt id=\"p1\">**</bpt>Runbook<ept id=\"p1\">**</ept>– The deployment runbook is a series of steps that is generated for applying the deployable package to the target environment.","pos":[1846,1983],"source":"**Runbook**– The deployment runbook is a series of steps that is generated for applying the deployable package to the target environment."},{"content":"Some of the steps are automated, and some are manual.","pos":[1984,2037]},{"content":"AXUpdateInstaller provides the capability to run these steps one by one and in the correct sequence.","pos":[2038,2138]},{"pos":[2143,2178],"content":"Collect topology configuration data","linkify":"Collect topology configuration data","nodes":[{"content":"Collect topology configuration data","pos":[0,35]}]},{"content":"In Microsoft Dynamics Lifecycle Services (LCS), open the **Environment **page.","pos":[2183,2261]},{"pos":[2266,2440],"content":"Click the name of a virtual machine (VM), and establish a Remote Desktop connection to the VM by using the user name and password that are provided on the<bpt id=\"p1\">**</bpt>Environment<ept id=\"p1\">**</ept>page.","source":"Click the name of a virtual machine (VM), and establish a Remote Desktop connection to the VM by using the user name and password that are provided on the**Environment**page."},{"content":"On the VM, download the zip file for the deployable package from LCS.","pos":[2445,2514]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> After you download the zip file, right-click it, and then select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","pos":[2515,2605],"source":"**Note:** After you download the zip file, right-click it, and then select **Properties**."},{"content":"Then, in the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> dialog box, on the <bpt id=\"p2\">**</bpt>General<ept id=\"p2\">**</ept> tab, click <bpt id=\"p3\">**</bpt>Unblock<ept id=\"p3\">**</ept> to unlock the files.","pos":[2606,2708],"source":" Then, in the **Properties** dialog box, on the **General** tab, click **Unblock** to unlock the files."},{"content":"Finally, extract the files, and continue with the next step.","pos":[2709,2769]},{"content":"Also, make sure that the <bpt id=\"p1\">**</bpt>zip<ept id=\"p1\">**</ept> file is stored in a non-user folder","pos":[2770,2838],"source":" Also, make sure that the **zip** file is stored in a non-user folder"},{"content":"In the folder where the deployable package was extracted, find and open the file that is named DefaultTopologyData.xml.","pos":[2843,2962]},{"content":"You must populate this file with the VM name and installed components.","pos":[2963,3033]},{"content":"To populate the VM name, follow these steps:","pos":[3042,3086]},{"pos":[3099,3178],"content":"Open Windows Explorer, right-click <bpt id=\"p1\">**</bpt>This PC<ept id=\"p1\">**</ept>, and then select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","source":"Open Windows Explorer, right-click **This PC**, and then select **Properties**."},{"content":"In the system properties, find and make a note of the machine name (for example, AOS-950ed2c3e7b).","pos":[3191,3289]},{"content":"In the DefaultTopologyData.xml file, replace the machine name with the name that you found in the previous step.","pos":[3302,3414]},{"content":"To populate the installed components, follow these steps:","pos":[3423,3480]},{"content":"Open a Command Prompt window as an administrator.","pos":[3493,3542]},{"content":"Navigate to the extracted folder, and run the following command to see a list of all the installed components on the computer.","pos":[3555,3681]},{"content":"Update the DefaultTopologyData.xml with the list of components.","pos":[3739,3802]},{"content":"When you've finished populating the VM name and installed components, the DefaultTopologyData.xml file should resemble the following illustration.","pos":[3808,3954]},{"content":"defaulttopology","pos":[3957,3972]},{"pos":[4007,4085],"content":"Repeat steps 2 through 4 for each VM that is listed on the<bpt id=\"p1\">**</bpt>Environment<ept id=\"p1\">**</ept>page.","source":"Repeat steps 2 through 4 for each VM that is listed on the**Environment**page."},{"pos":[4090,4126],"content":"Generate a runbook from the topology","linkify":"Generate a runbook from the topology","nodes":[{"content":"Generate a runbook from the topology","pos":[0,36]}]},{"content":"Based on the topology information in the DefaultTopologyData.xml file, you must generate the runbook file that will provide step-by-step instructions for updating each VM.","pos":[4127,4298]},{"content":"On any VM, run the following command to generate the runbook.","pos":[4304,4365]},{"content":"Here is an explanation of the parameters that are used in this command:","pos":[4527,4598]},{"pos":[4608,4708],"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\[</ph>runbookID<ph id=\"ph2\">\\]</ph><ept id=\"p1\">**</ept>– A parameter that is specified by the developer who applies the deployable package","source":"**\\[runbookID\\]**– A parameter that is specified by the developer who applies the deployable package"},{"pos":[4717,4783],"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\[</ph>topologyFile<ph id=\"ph2\">\\]</ph><ept id=\"p1\">**</ept>– The path of the DefaultTopologyData.xml file","source":"**\\[topologyFile\\]**– The path of the DefaultTopologyData.xml file"},{"pos":[4792,4866],"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\[</ph>serviceModelFile<ph id=\"ph2\">\\]</ph><ept id=\"p1\">**</ept>– The path of the DefaultServiceModelData.xml file","source":"**\\[serviceModelFile\\]**– The path of the DefaultServiceModelData.xml file"},{"pos":[4875,4966],"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\[</ph>runbookFile<ph id=\"ph2\">\\]</ph><ept id=\"p1\">**</ept>– The name of the runbook file to generate (for example, AOSRunbook.xml)","source":"**\\[runbookFile\\]**– The name of the runbook file to generate (for example, AOSRunbook.xml)"},{"pos":[4972,4983],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"The runbook provides the sequence of steps that must be run to update the environment.","pos":[5193,5279]},{"content":"The following illustration shows an example of a runbook file.","pos":[5280,5342]},{"content":"Each step in a runbook is associated with an ID, a machine name, and step execution details.","pos":[5343,5435]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>runbook-steps<ept id=\"p1\">](./media/runbook-steps-1024x624.jpg)](./media/runbook-steps.jpg)</ept>","pos":[5436,5517],"source":"[![runbook-steps](./media/runbook-steps-1024x624.jpg)](./media/runbook-steps.jpg)"},{"pos":[5522,5550],"content":"Install a deployable package","linkify":"Install a deployable package","nodes":[{"content":"Install a deployable package","pos":[0,28]}]},{"content":"Based on the sequence of steps that is specified in the runbook, start with the first machine that is listed.","pos":[5555,5664]},{"content":"Follow these steps on each VM:","pos":[5669,5699]},{"content":"Import the runbook by running the following command.","pos":[5708,5760]},{"pos":[5839,5850],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"Verify the runbook.","pos":[5945,5964]},{"content":"Execute the runbook.","pos":[6014,6034]},{"pos":[6110,6121],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"Export the runbook.","pos":[6211,6230]},{"pos":[6332,6343],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"AXUpdateInstaller updates the runbook file after each step is run on a VM.","pos":[6471,6545]},{"content":"The runbook also logs information about each step.","pos":[6550,6600]},{"content":"For manual steps, follow the instructions, and then mark the step as completed in the runbook by using the AXUpdateInstaller.","pos":[6605,6730]},{"pos":[6824,6835],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"After all the steps are completed on one machine, export the runbook results.","pos":[6936,7013]},{"pos":[7107,7118],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"Log on to the second machine that is listed, and repeat steps 1 through 6 until all machines have been updated.","pos":[7242,7353]},{"content":"If errors occur during any step, debug the script/instruction in the step, and update accordingly.","pos":[7358,7456]},{"pos":[7461,7503],"content":"Back up the database and computer instance","linkify":"Back up the database and computer instance","nodes":[{"content":"Back up the database and computer instance","pos":[0,42]}]},{"content":"After all the services are stopped, make a backup of the database and VM snapshot manually (optional).","pos":[7508,7610]},{"content":"Then run the following command to mark the backup step as completed.","pos":[7611,7679]},{"content":"Supply the correct backup step ID.","pos":[7680,7714]},{"pos":[7808,7819],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"pos":[7919,7931],"content":"Update files","linkify":"Update files","nodes":[{"content":"Update files","pos":[0,12]}]},{"content":"After you've marked the backup step as completed, the next step is triggered.","pos":[7936,8013]},{"content":"In the sample step, AOS packages are updated from the deployable package.","pos":[8014,8087]},{"content":"Run the following command to verify that the new version is installed.","pos":[8092,8162]},{"content":"View the runbook to see the completed steps.","pos":[8204,8248]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>image013<ept id=\"p1\">](./media/image013-1024x978.png)](./media/image013.png)</ept>","pos":[8249,8315],"source":"[![image013](./media/image013-1024x978.png)](./media/image013.png)"},{"pos":[8320,8348],"content":"Run database synchronization","linkify":"Run database synchronization","nodes":[{"content":"Run database synchronization","pos":[0,28]}]},{"content":"At one point, you will see a database synchronization (DBSync) step.","pos":[8353,8421]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>image015<ept id=\"p1\">](./media/image015-1024x654.png)](./media/image015.png)</ept>","pos":[8422,8488],"source":"[![image015](./media/image015-1024x654.png)](./media/image015.png)"},{"pos":[8493,8511],"content":"Start all services","linkify":"Start all services","nodes":[{"content":"Start all services","pos":[0,18]}]},{"content":"After the database synchronization step is completed, follow the same instructions to complete the remaining steps.","pos":[8516,8631]},{"content":"All the services will be started.","pos":[8632,8665]},{"pos":[8670,8685],"content":"Troubleshooting","linkify":"Troubleshooting","nodes":[{"content":"Troubleshooting","pos":[0,15]}]},{"content":"After all the steps are completed, export the runbook, and save it outside the computer for future reference.","pos":[8690,8799]},{"content":"For example, you might have to use the runbook file in these situations:","pos":[8800,8872]},{"content":"You must analyze the downtime requirements for production, and so on.","pos":[8881,8950]},{"content":"You must send the file to Microsoft in the event of failure to install a deployable package.","pos":[8959,9051]},{"content":"If any step fails, you can rerun it by running the following command.","pos":[9056,9125]},{"content":"To prevent version mismatch or downgrade, or installation of the same deployable package, run the following command.","pos":[9213,9329]},{"content":"To verify database synchronization, navigate to the aosservce<ph id=\"ph1\">\\\\</ph>scripts<ph id=\"ph2\">\\\\</ph> folder and find the dbsync.error.txt file.","pos":[9417,9532],"source":"To verify database synchronization, navigate to the aosservce\\\\scripts\\\\ folder and find the dbsync.error.txt file."},{"content":"Find the file, and look for any errors.","pos":[9533,9572]}]}