{"nodes":[{"pos":[32,75],"content":"Add contextual BI to forms | Microsoft Docs","needQuote":true,"needEscape":true,"nodes":[{"content":"Add contextual BI to forms | Microsoft Docs","pos":[0,43]}]},{"pos":[89,330],"content":"In this tutorial you'll model a form part that displays the previous rental history of vehicles. You'll add the form part to the Vehicles form using a DynaLink. When the user views a vehicle record, the part displays relevant rental history.","needQuote":true,"needEscape":true,"nodes":[{"content":"In this tutorial you'll model a form part that displays the previous rental history of vehicles. You'll add the form part to the Vehicles form using a DynaLink. When the user views a vehicle record, the part displays relevant rental history.","pos":[0,241],"nodes":[{"content":"In this tutorial you'll model a form part that displays the previous rental history of vehicles.","pos":[0,96]},{"content":"You'll add the form part to the Vehicles form using a DynaLink.","pos":[97,160]},{"content":"When the user views a vehicle record, the part displays relevant rental history.","pos":[161,241]}]}]},{"pos":[757,783],"content":"Add contextual BI to forms","linkify":"Add contextual BI to forms","nodes":[{"content":"Add contextual BI to forms","pos":[0,26]}]},{"content":"In this tutorial you'll model a form part that displays the previous rental history of vehicles.","pos":[785,881]},{"content":"You'll add the form part to the Vehicles form using a DynaLink.","pos":[882,945]},{"content":"When the user views a vehicle record, the part displays relevant rental history.","pos":[946,1026]},{"pos":[1029,1042],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"This tutorial requires you to access the Microsoft Dynamics AX environment using Remote Desktop, and be provisioned as an administrator on the Dynamics AX instance.","pos":[1058,1222]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Access Microsoft Dynamics AX Instances<ept id=\"p1\">](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2)</ept>.","pos":[1223,1410],"source":" For more information, see [Access Microsoft Dynamics AX Instances](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2)."},{"pos":[1415,1427],"content":"Key concepts","linkify":"Key concepts","nodes":[{"content":"Key concepts","pos":[0,12]}]},{"pos":[1432,1630],"content":"<bpt id=\"p1\">**</bpt>Aggregate measurements<ept id=\"p1\">**</ept> - Similar to <bpt id=\"p2\">**</bpt>perspectives<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Cubes<ept id=\"p3\">**</ept> from earlier versions of Microsoft Dynamics AX, aggregate measurements let you model and consume aggregate data in Dynamics AX.","source":"**Aggregate measurements** - Similar to **perspectives** and **Cubes** from earlier versions of Microsoft Dynamics AX, aggregate measurements let you model and consume aggregate data in Dynamics AX."},{"content":"<bpt id=\"p1\">**</bpt>Aggregate data entities<ept id=\"p1\">**</ept> - Aggregate data can be consumed in building charts and other controls.","pos":[1635,1734],"source":"**Aggregate data entities** - Aggregate data can be consumed in building charts and other controls."},{"content":"Using the model driven approach, you have the ability to create data entities by directly referencing aggregate measurements and aggregate dimensions.","pos":[1735,1885]},{"content":"These entities are referred to as <bpt id=\"p1\">**</bpt>Aggregate data entities<ept id=\"p1\">**</ept>.","pos":[1886,1948],"source":" These entities are referred to as **Aggregate data entities**."},{"content":"Aggregate data entities are read-only data entities used for reporting purposes.","pos":[1949,2029]},{"pos":[2034,2262],"content":"<bpt id=\"p1\">**</bpt>Contextual BI<ept id=\"p1\">**</ept> - Contextual BI refers to providing required insights as a part of the user experience so that the user has relevant insights to not only achieve the task, but be highly productive during the course of the day.","source":"**Contextual BI** - Contextual BI refers to providing required insights as a part of the user experience so that the user has relevant insights to not only achieve the task, but be highly productive during the course of the day."},{"content":"<bpt id=\"p1\">**</bpt>Embedded BI -<ept id=\"p1\">**</ept> Embedded BI refers to analytic content being embedded within the Dynamics AX user experience.","pos":[2267,2378],"source":"**Embedded BI -** Embedded BI refers to analytic content being embedded within the Dynamics AX user experience."},{"content":"Contextual BI and embedded BI teams are closely related.","pos":[2379,2435]},{"content":"Contextual BI implies the added notion that the context of analytic context revolves around the data or the task.","pos":[2436,2549]},{"pos":[2554,2710],"content":"<bpt id=\"p1\">**</bpt>Self-service BI<ept id=\"p1\">**</ept> - Self-service BI refers to enabling to user to tweak existing and/or create new analytic content such as reports, KPIs, and dashboards.","source":"**Self-service BI** - Self-service BI refers to enabling to user to tweak existing and/or create new analytic content such as reports, KPIs, and dashboards."},{"pos":[2715,2720],"content":"Setup","linkify":"Setup","nodes":[{"content":"Setup","pos":[0,5]}]},{"pos":[2725,2742],"content":"Install demo data","linkify":"Install demo data","nodes":[{"content":"Install demo data","pos":[0,17]}]},{"pos":[2744,2886],"content":"If this is the first tutorial you’re working on, follow the steps in the <bpt id=\"p1\">**</bpt>Appendix<ept id=\"p1\">**</ept> section at the end of this article to install demo data.","source":"If this is the first tutorial you’re working on, follow the steps in the **Appendix** section at the end of this article to install demo data."},{"pos":[2892,2919],"content":"Import the lab 10.2 project","linkify":"Import the lab 10.2 project","nodes":[{"content":"Import the lab 10.2 project","pos":[0,27]}]},{"content":"This tutorial works on Fleet Management model.","pos":[2921,2967]},{"pos":[2973,3085],"content":"Download the Fleet Management sample from <bpt id=\"p1\">&lt;</bpt>https://github.com/Microsoft/FMLab<ept id=\"p1\">&gt;</ept>, save it to <bpt id=\"p2\">**</bpt>C:<ept id=\"p2\">**</ept>, and unzip it.","source":"Download the Fleet Management sample from <https://github.com/Microsoft/FMLab>, save it to **C:**, and unzip it."},{"pos":[3090,3162],"content":"In Visual Studio, on the <bpt id=\"p1\">**</bpt>Dynamics AX<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Import Project<ept id=\"p2\">**</ept>.","source":"In Visual Studio, on the **Dynamics AX** menu, click **Import Project**."},{"pos":[3167,3262],"content":"In the <bpt id=\"p1\">**</bpt>Import Project<ept id=\"p1\">**</ept> window, next to the <bpt id=\"p2\">**</bpt>Filename<ept id=\"p2\">**</ept> text box, click the ellipsis button.","source":"In the **Import Project** window, next to the **Filename** text box, click the ellipsis button."},{"pos":[3267,3429],"content":"In the Select the file to import window, browse to <bpt id=\"p1\">**</bpt>C:<ph id=\"ph1\">\\\\</ph>FmLab<ph id=\"ph2\">\\\\</ph>Lab 10-2<ept id=\"p1\">**</ept> folder, click <bpt id=\"p2\">**</bpt>Add contextual BI to forms –Before Lab.axpp<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Open<ept id=\"p3\">**</ept>.","source":"In the Select the file to import window, browse to **C:\\\\FmLab\\\\Lab 10-2** folder, click **Add contextual BI to forms –Before Lab.axpp**, and then click **Open**."},{"pos":[3434,3498],"content":"Select the <bpt id=\"p1\">**</bpt>Overwrite Elements<ept id=\"p1\">**</ept> option, and then click <bpt id=\"p2\">**</bpt>Ok<ept id=\"p2\">**</ept>.","source":"Select the **Overwrite Elements** option, and then click **Ok**."},{"content":"Open the project <bpt id=\"p1\">**</bpt>BIR102 Adding contextual BI - Before Lab.<ept id=\"p1\">**</ept>","pos":[3503,3565],"source":"Open the project **BIR102 Adding contextual BI - Before Lab.**"},{"content":"Double-click the <bpt id=\"p1\">**</bpt>FMVehicle<ept id=\"p1\">**</ept> form in Solution Explorer.","pos":[3566,3623],"source":" Double-click the **FMVehicle** form in Solution Explorer."},{"pos":[3628,3653],"content":"Review the FMVehicle form","linkify":"Review the FMVehicle form","nodes":[{"content":"Review the FMVehicle form","pos":[0,25]}]},{"content":"In this tutorial, the <bpt id=\"p1\">**</bpt>FMVehicle<ept id=\"p1\">**</ept> form has been modified with a part that shows the rental history of vehicles that are the same make.","pos":[3658,3794],"source":"In this tutorial, the **FMVehicle** form has been modified with a part that shows the rental history of vehicles that are the same make."},{"content":"The form part has been added to the <bpt id=\"p1\">**</bpt>FMVehicle<ept id=\"p1\">**</ept> form.","pos":[3795,3850],"source":" The form part has been added to the **FMVehicle** form."},{"content":"In Solution Explorer, double-click the <bpt id=\"p1\">**</bpt>FMVehicle<ept id=\"p1\">**</ept> form.","pos":[3855,3913],"source":"In Solution Explorer, double-click the **FMVehicle** form."},{"content":"The form designer will open as shown below.","pos":[3914,3957]},{"content":"Notice the newly added form part.","pos":[3958,3991]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms1<ept id=\"p1\">](./media/biforms1.png)](./media/biforms1.png)</ept>","pos":[3992,4049],"source":"[![BIforms1](./media/biforms1.png)](./media/biforms1.png)"},{"content":"Select the form part reference node <bpt id=\"p1\">**</bpt>FMVehicleRentalsAndRevenue<ph id=\"ph1\">\\_</ph>Part<ept id=\"p1\">**</ept>, right-click, and then select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","pos":[4054,4172],"source":"Select the form part reference node **FMVehicleRentalsAndRevenue\\_Part**, right-click, and then select **Properties**."},{"content":"Notice following properties in the part reference","pos":[4173,4222]},{"pos":[4393,4410],"content":"<bpt id=\"p1\">**</bpt>Property name<ept id=\"p1\">**</ept>","source":"**Property name**"},{"pos":[4420,4429],"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>","source":"**Value**"},{"pos":[4457,4466],"content":"<bpt id=\"p1\">**</bpt>Notes<ept id=\"p1\">**</ept>","source":"**Notes**"},{"pos":[4475,4483],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"content":"FMVehicleRentalsAndRevenue<ph id=\"ph1\">\\_</ph>Part","pos":[4502,4534],"source":"FMVehicleRentalsAndRevenue\\_Part"},{"pos":[4557,4575],"content":"<bpt id=\"p1\">**</bpt>Menu item name<ept id=\"p1\">**</ept>","source":"**Menu item name**"},{"content":"FMBIVehicleRentalsAndRevenue<ph id=\"ph1\">\\_</ph>Part","pos":[4584,4618],"source":"FMBIVehicleRentalsAndRevenue\\_Part"},{"pos":[4639,4654],"content":"<bpt id=\"p1\">**</bpt>Data source<ept id=\"p1\">**</ept>","source":"**Data source**"},{"content":"FMVehicle","pos":[4666,4675]},{"pos":[4721,4745],"content":"<bpt id=\"p1\">**</bpt>Data source relation<ept id=\"p1\">**</ept>","source":"**Data source relation**"},{"content":"FMVehicle.VehicleModel","pos":[4748,4770]},{"pos":[4803,4815],"content":"<bpt id=\"p1\">**</bpt>Run mode<ept id=\"p1\">**</ept>","source":"**Run mode**"},{"content":"Local","pos":[4830,4835]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> In this case, the form part should refresh asynchronously when information about a vehicle, shown in the grid, changes in the parent form.","pos":[4880,5028],"source":"**Note:** In this case, the form part should refresh asynchronously when information about a vehicle, shown in the grid, changes in the parent form."},{"content":"We've selected the <bpt id=\"p1\">**</bpt>FMVehicleModel<ept id=\"p1\">**</ept> table to be the data source that relates the main form and the part.","pos":[5029,5135],"source":" We've selected the **FMVehicleModel** table to be the data source that relates the main form and the part."},{"pos":[5140,5190],"content":"Review the form part to display vehicle model data","linkify":"Review the form part to display vehicle model data","nodes":[{"content":"Review the form part to display vehicle model data","pos":[0,50]}]},{"content":"Next, we will review the form part.","pos":[5191,5226]},{"pos":[5232,5331],"content":"In Solution Explorer, select and double-click the form part <bpt id=\"p1\">**</bpt>FMBIVehicleRentalsAndRevenue<ph id=\"ph1\">\\_</ph>Part<ept id=\"p1\">**</ept>.","source":"In Solution Explorer, select and double-click the form part **FMBIVehicleRentalsAndRevenue\\_Part**."},{"content":"The form part will be appear in the Form designer as shown below.","pos":[5336,5401]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms2<ept id=\"p1\">](./media/biforms2.png)](./media/biforms2.png)</ept>","pos":[5402,5459],"source":"[![BIforms2](./media/biforms2.png)](./media/biforms2.png)"},{"pos":[5464,5556],"content":"Select <bpt id=\"p1\">**</bpt>DataSources<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>FMVehicleModel<ept id=\"p2\">**</ept>, right-click, and then select <bpt id=\"p3\">**</bpt>Properties<ept id=\"p3\">**</ept>.","source":"Select **DataSources** &gt; **FMVehicleModel**, right-click, and then select **Properties**."},{"content":"Review the following properties.","pos":[5561,5593]},{"pos":[5710,5727],"content":"<bpt id=\"p1\">**</bpt>Property name<ept id=\"p1\">**</ept>","source":"**Property name**"},{"pos":[5730,5739],"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>","source":"**Value**"},{"pos":[5747,5756],"content":"<bpt id=\"p1\">**</bpt>Notes<ept id=\"p1\">**</ept>","source":"**Notes**"},{"pos":[5765,5774],"content":"<bpt id=\"p1\">**</bpt>Table<ept id=\"p1\">**</ept>","source":"**Table**"},{"content":"FMVehicleModel","pos":[5785,5799]},{"pos":[5820,5833],"content":"<bpt id=\"p1\">**</bpt>Link type<ept id=\"p1\">**</ept>","source":"**Link type**"},{"content":"Delayed","pos":[5840,5847]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> You could have used other DynaLink types.","pos":[5874,5925],"source":"**Note:** You could have used other DynaLink types."},{"content":"In this case, we want the form part to refresh asynchronously.","pos":[5926,5988]},{"content":"So we have selected Delayed as the DynaLink type.","pos":[5989,6038]},{"content":"Next, select the project node, right-click, and then select <bpt id=\"p1\">**</bpt>Rebuild<ept id=\"p1\">**</ept>.","pos":[6043,6115],"source":"Next, select the project node, right-click, and then select **Rebuild**."},{"content":"Press <bpt id=\"p1\">**</bpt>Ctrl+F5<ept id=\"p1\">**</ept> to run the form.","pos":[6116,6150],"source":" Press **Ctrl+F5** to run the form."},{"content":"You will see the modified Vehicle form.","pos":[6151,6190]},{"content":"Expand the <bpt id=\"p1\">**</bpt>Rental history of Cars like this<ept id=\"p1\">**</ept> part by clicking the Down Arrow beside the part.","pos":[6195,6291],"source":"Expand the **Rental history of Cars like this** part by clicking the Down Arrow beside the part."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms3<ept id=\"p1\">](./media/biforms3.png)](./media/biforms3.png)</ept>","pos":[6292,6349],"source":"[![BIforms3](./media/biforms3.png)](./media/biforms3.png)"},{"content":"Select and click a record to view detailed information about the record.","pos":[6354,6426]},{"content":"To see context being passed to the form part, select the <bpt id=\"p1\">**</bpt>List<ept id=\"p1\">**</ept> icon on the bottom left and navigate through the records.","pos":[6431,6554],"source":"To see context being passed to the form part, select the **List** icon on the bottom left and navigate through the records."},{"content":"You will see the part display model specification for each of the cars shown on the page.","pos":[6555,6644]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms4<ept id=\"p1\">](./media/biforms4.png)](./media/biforms4.png)</ept>","pos":[6645,6702],"source":"[![BIforms4](./media/biforms4.png)](./media/biforms4.png)"},{"pos":[6707,6775],"content":"Adding contextual BI to the form part using an aggregate data entity","linkify":"Adding contextual BI to the form part using an aggregate data entity","nodes":[{"content":"Adding contextual BI to the form part using an aggregate data entity","pos":[0,68]}]},{"content":"In this section, you’ll model an aggregate data entity.","pos":[6776,6831]},{"content":"Next, you will add the Aggregate Data entity into the form part and then populate a chart.","pos":[6832,6922]},{"pos":[6928,7017],"content":"Model an Aggregate data entity that shows the Number of Rentals by Vehicle model by month","linkify":"Model an Aggregate data entity that shows the Number of Rentals by Vehicle model by month","nodes":[{"content":"Model an Aggregate data entity that shows the Number of Rentals by Vehicle model by month","pos":[0,89]}]},{"pos":[7023,7135],"content":"Select the project node <bpt id=\"p1\">**</bpt>BIR102 Adding contextual BI<ept id=\"p1\">**</ept>, right-click, and then select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>New Item<ept id=\"p3\">**</ept>.","source":"Select the project node **BIR102 Adding contextual BI**, right-click, and then select **Add** &gt; **New Item**."},{"content":"In the <bpt id=\"p1\">**</bpt>Add new item<ept id=\"p1\">**</ept> wizard, select <bpt id=\"p2\">**</bpt>Dynamics AX Artifacts<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Analytics<ept id=\"p3\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Aggregate Data entity<ept id=\"p4\">**</ept>.","pos":[7140,7255],"source":"In the **Add new item** wizard, select **Dynamics AX Artifacts** &gt; **Analytics** &gt; **Aggregate Data entity**."},{"content":"Enter the name <bpt id=\"p1\">**</bpt>FMBIRevenueByVehicleModelbyMonth<ept id=\"p1\">**</ept>, and select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>.","pos":[7256,7328],"source":" Enter the name **FMBIRevenueByVehicleModelbyMonth**, and select **Add**."},{"content":"The Aggregate Data Entity designer will be displayed.","pos":[7329,7382]},{"pos":[7387,7530],"content":"Associate the aggregate Data entity <bpt id=\"p1\">**</bpt>FMBIRevenueByVehicleModelbyMonth<ept id=\"p1\">**</ept> with the aggregate measurement <bpt id=\"p2\">**</bpt>FMAggregateMeasurements<ept id=\"p2\">**</ept> as follows:","source":"Associate the aggregate Data entity **FMBIRevenueByVehicleModelbyMonth** with the aggregate measurement **FMAggregateMeasurements** as follows:"},{"pos":[7539,7570],"content":"Select the <bpt id=\"p1\">**</bpt>DataSource<ept id=\"p1\">**</ept> node.","source":"Select the **DataSource** node."},{"pos":[7579,7618],"content":"Right-click, and select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","source":"Right-click, and select **Properties**."},{"pos":[7627,7712],"content":"Select <bpt id=\"p1\">**</bpt>FMAggregateMeasurement<ept id=\"p1\">**</ept> as the property value for <bpt id=\"p2\">**</bpt>Measurement property<ept id=\"p2\">**</ept>.","source":"Select **FMAggregateMeasurement** as the property value for **Measurement property**."},{"content":"Save the aggregate data entity.","pos":[7721,7752]},{"content":"You will notice the measurement <bpt id=\"p1\">**</bpt>FMAggregateMeasurements<ept id=\"p1\">**</ept> shown under the <bpt id=\"p2\">**</bpt>DataSource<ept id=\"p2\">**</ept> node, as shown below.","pos":[7753,7865],"source":" You will notice the measurement **FMAggregateMeasurements** shown under the **DataSource** node, as shown below."},{"content":"You can expand the aggregate measurement so that you can see each of the fields.","pos":[7866,7946]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms5<ept id=\"p1\">](./media/biforms5.png)](./media/biforms5.png)</ept> <bpt id=\"p2\">**</bpt>Note:<ept id=\"p2\">**</ept> An aggregate data entity can reference only one aggregate measurement.","pos":[7947,8085],"source":"[![BIforms5](./media/biforms5.png)](./media/biforms5.png) **Note:** An aggregate data entity can reference only one aggregate measurement."},{"content":"You can’t define aggregate data entities that reference multiple aggregate measurements.","pos":[8086,8174]},{"content":"Add a measure field to the data entity from the aggregate measurement.","pos":[8180,8250]},{"content":"Multi-select <bpt id=\"p1\">**</bpt>NoRentals<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>TotalRevenue<ept id=\"p2\">**</ept> measures by clicking on both of them while pressing the <bpt id=\"p3\">**</bpt>Ctrl<ept id=\"p3\">**</ept> key.","pos":[8251,8368],"source":" Multi-select **NoRentals** and **TotalRevenue** measures by clicking on both of them while pressing the **Ctrl** key."},{"content":"Use the drag-and drop operation to move the measures into the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> node.","pos":[8373,8451],"source":"Use the drag-and drop operation to move the measures into the **Fields** node."},{"content":"Two fields will be created in the aggregate data entity <bpt id=\"p1\">**</bpt>FMBIRevenueByVehicleModelbyMonth<ept id=\"p1\">**</ept>, as shown below.","pos":[8452,8561],"source":" Two fields will be created in the aggregate data entity **FMBIRevenueByVehicleModelbyMonth**, as shown below."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms6<ept id=\"p1\">](./media/biforms6.png)](./media/biforms6.png)</ept>","pos":[8562,8619],"source":"[![BIforms6](./media/biforms6.png)](./media/biforms6.png)"},{"pos":[8624,8743],"content":"Right-click the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> node of <bpt id=\"p2\">**</bpt>FMBIRevenueByVehicleModelbyMonth<ept id=\"p2\">**</ept>, and then select <bpt id=\"p3\">**</bpt>New <ph id=\"ph1\">&amp;gt;</ph><ept id=\"p3\">**</ept> <bpt id=\"p4\">**</bpt>Mapped Field<ept id=\"p4\">**</ept>.","source":"Right-click the **Fields** node of **FMBIRevenueByVehicleModelbyMonth**, and then select **New &gt;** **Mapped Field**."},{"content":"Add a dimension attribute as a field.","pos":[8748,8785]},{"content":"Right-click the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> node of <bpt id=\"p2\">**</bpt>FMBIRevenueByVehicleModelbyMonth<ept id=\"p2\">**</ept>, and then select <bpt id=\"p3\">**</bpt>Mapped Field.<ept id=\"p3\">**</ept>","pos":[8786,8892],"source":" Right-click the **Fields** node of **FMBIRevenueByVehicleModelbyMonth**, and then select **Mapped Field.**"},{"content":"Enter the following property values.","pos":[8897,8933]},{"pos":[9064,9081],"content":"<bpt id=\"p1\">**</bpt>Property name<ept id=\"p1\">**</ept>","source":"**Property name**"},{"pos":[9089,9098],"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>","source":"**Value**"},{"pos":[9108,9117],"content":"<bpt id=\"p1\">**</bpt>Notes<ept id=\"p1\">**</ept>","source":"**Notes**"},{"pos":[9126,9134],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"content":"VehicleModel","pos":[9151,9163]},{"pos":[9188,9205],"content":"<bpt id=\"p1\">**</bpt>Measure Group<ept id=\"p1\">**</ept>","source":"**Measure Group**"},{"content":"FMRentalCharges","pos":[9213,9228]},{"pos":[9250,9263],"content":"<bpt id=\"p1\">**</bpt>Dimension<ept id=\"p1\">**</ept>","source":"**Dimension**"},{"content":"FMVehicle","pos":[9275,9284]},{"pos":[9312,9325],"content":"<bpt id=\"p1\">**</bpt>Attribute<ept id=\"p1\">**</ept>","source":"**Attribute**"},{"content":"VehicleModel","pos":[9337,9349]},{"pos":[9374,9396],"content":"<bpt id=\"p1\">**</bpt>Extended Data type<ept id=\"p1\">**</ept>","source":"**Extended Data type**"},{"content":"FMVehicleModelId","pos":[9399,9415]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Where discoverable, extended data types that are associated with measures and dimension attributes will be defaulted by the system in the Extended Data type property.","pos":[9435,9611],"source":"**Note:** Where discoverable, extended data types that are associated with measures and dimension attributes will be defaulted by the system in the Extended Data type property."},{"content":"You can change the defaults where required.","pos":[9612,9655]},{"content":"Define another dimension attribute by using dragging and dropping a Dimension.","pos":[9660,9738]},{"content":"Expand <bpt id=\"p1\">**</bpt>Data Source <ph id=\"ph1\">&amp;gt;</ph> FMAggregateMeasurements <ph id=\"ph2\">&amp;gt;</ph> FMRentalCharges <ph id=\"ph3\">&amp;gt;</ph> Dimensions<ept id=\"p1\">**</ept>.","pos":[9739,9828],"source":" Expand **Data Source &gt; FMAggregateMeasurements &gt; FMRentalCharges &gt; Dimensions**."},{"content":"Select the <bpt id=\"p1\">**</bpt>RentalStartDate<ept id=\"p1\">**</ept> dimension.","pos":[9829,9870],"source":" Select the **RentalStartDate** dimension."},{"content":"Drag and drop the dimension into the <bpt id=\"p1\">**</bpt>Fields<ept id=\"p1\">**</ept> node.","pos":[9875,9928],"source":"Drag and drop the dimension into the **Fields** node."},{"content":"Notice that the field properties have been initialized by the drag-and-drop operation.","pos":[9929,10015]},{"content":"Modify the following default properties.","pos":[10016,10056]},{"pos":[10065,10111],"content":"Select <bpt id=\"p1\">**</bpt>Month<ept id=\"p1\">**</ept> as the <bpt id=\"p2\">**</bpt>Attribute<ept id=\"p2\">**</ept> property","source":"Select **Month** as the **Attribute** property"},{"pos":[10120,10167],"content":"Modify the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> property to <bpt id=\"p2\">**</bpt>RentalMonth<ept id=\"p2\">**</ept>","source":"Modify the **Name** property to **RentalMonth**"},{"content":"Note that the aggregate data entity <bpt id=\"p1\">**</bpt>FMBIRevenueByVehicleModelbyMonth <ept id=\"p1\">**</ept>contains 4 fields.","pos":[10173,10264],"source":"Note that the aggregate data entity **FMBIRevenueByVehicleModelbyMonth **contains 4 fields."},{"content":"All measures that are added to aggregate data entities will be grouped by the dimension attributes added as fields.","pos":[10265,10380]},{"content":"Save the aggregate data entity.","pos":[10385,10416]},{"content":"Re-build the project.","pos":[10417,10438]},{"pos":[10447,10542],"content":"Make sure that <bpt id=\"p1\">**</bpt>Synchronize database<ept id=\"p1\">**</ept> is enabled with the build under <bpt id=\"p2\">**</bpt>Project<ept id=\"p2\">**</ept> properties.","source":"Make sure that **Synchronize database** is enabled with the build under **Project** properties."},{"content":"You can also synchronize the database after the build if you have not enabled the above setting.","pos":[10551,10647]},{"content":"Launch <bpt id=\"p1\">**</bpt>Application Explorer<ept id=\"p1\">**</ept>.","pos":[10653,10685],"source":"Launch **Application Explorer**."},{"content":"Click <bpt id=\"p1\">**</bpt>AOT<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Data Model<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Aggregate DataEntities<ept id=\"p3\">**</ept>.","pos":[10686,10752],"source":" Click **AOT** &gt; **Data Model** &gt; **Aggregate DataEntities**."},{"content":"The aggregate data entity that you defined should appear in the node.","pos":[10753,10822]},{"content":"<bpt id=\"p1\">**</bpt>NOTE:<ept id=\"p1\">**</ept> Aggregate data entities are currently reflected within an Aggregate DataEntities node.","pos":[10824,10920],"source":"**NOTE:** Aggregate data entities are currently reflected within an Aggregate DataEntities node."},{"content":"In the future, they will be shown within the <bpt id=\"p1\">**</bpt>Data Entities<ept id=\"p1\">**</ept> node.","pos":[10921,10989],"source":" In the future, they will be shown within the **Data Entities** node."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms7<ept id=\"p1\">](./media/biforms7.png)](./media/biforms7.png)</ept>","pos":[10990,11047],"source":"[![BIforms7](./media/biforms7.png)](./media/biforms7.png)"},{"pos":[11053,11111],"content":"Add the Aggregate Data Entity to the form part data source","linkify":"Add the Aggregate Data Entity to the form part data source","nodes":[{"content":"Add the Aggregate Data Entity to the form part data source","pos":[0,58]}]},{"content":"Select the newly defined aggregate data entity <bpt id=\"p1\">**</bpt>FMBIRevenueByVehicleModelbyMonth<ept id=\"p1\">**</ept> in Solution Explorer.","pos":[11117,11222],"source":"Select the newly defined aggregate data entity **FMBIRevenueByVehicleModelbyMonth** in Solution Explorer."},{"content":"Drag-and-drop the aggregate data entity to the <bpt id=\"p1\">**</bpt>Data sources<ept id=\"p1\">**</ept> node of the form part.","pos":[11223,11309],"source":" Drag-and-drop the aggregate data entity to the **Data sources** node of the form part."},{"content":"Select the aggregate data entity <bpt id=\"p1\">**</bpt>FMBIRevenueByVehicleModelbyMonth<ept id=\"p1\">**</ept> in the Data sources node.","pos":[11314,11409],"source":"Select the aggregate data entity **FMBIRevenueByVehicleModelbyMonth** in the Data sources node."},{"content":"Right-click, and then select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","pos":[11410,11454],"source":" Right-click, and then select **Properties**."},{"content":"Review the following properties.","pos":[11455,11487]},{"content":"You do not need to modify defaults.","pos":[11488,11523]},{"pos":[11676,11693],"content":"<bpt id=\"p1\">**</bpt>Property name<ept id=\"p1\">**</ept>","source":"**Property name**"},{"pos":[11696,11705],"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>","source":"**Value**"},{"pos":[11731,11740],"content":"<bpt id=\"p1\">**</bpt>Notes<ept id=\"p1\">**</ept>","source":"**Notes**"},{"pos":[11749,11757],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"content":"FMBIRevenueByVehicleModelbyMonth","pos":[11769,11801]},{"pos":[11822,11831],"content":"<bpt id=\"p1\">**</bpt>Table<ept id=\"p1\">**</ept>","source":"**Table**"},{"content":"FMBIRevenueByVehicleModelbyMonth","pos":[11842,11874]},{"pos":[11895,11908],"content":"<bpt id=\"p1\">**</bpt>Link type<ept id=\"p1\">**</ept>","source":"**Link type**"},{"content":"Delayed","pos":[11915,11922]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> You could have used other DynaLink types.","pos":[11967,12018],"source":"**Note:** You could have used other DynaLink types."},{"content":"In this case, we want the parts that are built using the AggregateData Entity to be refreshed based on the record selection in the <bpt id=\"p1\">**</bpt>FMVehicleModel<ept id=\"p1\">**</ept> table.","pos":[12019,12175],"source":" In this case, we want the parts that are built using the AggregateData Entity to be refreshed based on the record selection in the **FMVehicleModel** table."},{"pos":[12180,12285],"content":"Next, you will relate the Aggregate Data entity and the <bpt id=\"p1\">**</bpt>FMVehicleModel<ept id=\"p1\">**</ept> table in the form data source.","source":"Next, you will relate the Aggregate Data entity and the **FMVehicleModel** table in the form data source."},{"content":"Save the form.","pos":[12290,12304]},{"pos":[12310,12369],"content":"Define a relationship between data sources in the form part","linkify":"Define a relationship between data sources in the form part","nodes":[{"content":"Define a relationship between data sources in the form part","pos":[0,59]}]},{"content":"In the previous step, we have added the Aggregate Data Entity to the form as a data source.","pos":[12371,12462]},{"content":"However, the aggregate data entity and the main table <bpt id=\"p1\">**</bpt>FMVehicleModel<ept id=\"p1\">**</ept> are not related to each other.","pos":[12463,12566],"source":" However, the aggregate data entity and the main table **FMVehicleModel** are not related to each other."},{"content":"This would prevent the <bpt id=\"p1\">**</bpt>FMVehicleModel<ept id=\"p1\">**</ept> record context from being passed to any of the controls built using the aggregate data entity.","pos":[12567,12703],"source":" This would prevent the **FMVehicleModel** record context from being passed to any of the controls built using the aggregate data entity."},{"content":"Expand the <bpt id=\"p1\">**</bpt>Data sources <ph id=\"ph1\">&amp;gt;</ph> FMBIRevenueByVehicleModelbyMonth <ph id=\"ph2\">&amp;gt;</ph> methods<ept id=\"p1\">**</ept> node in the form part.","pos":[12709,12810],"source":"Expand the **Data sources &gt; FMBIRevenueByVehicleModelbyMonth &gt; methods** node in the form part."},{"content":"Right-click and select <bpt id=\"p1\">**</bpt>Override <ph id=\"ph1\">&amp;gt;</ph> init<ept id=\"p1\">**</ept>.","pos":[12811,12857],"source":" Right-click and select **Override &gt; init**."},{"content":"An Init method will be added to the table.","pos":[12862,12904]},{"content":"The Code editor will launch with the init() method definition.","pos":[12905,12967]},{"pos":[12972,13064],"content":"Copy and paste the  following code into the body of the init() method <bpt id=\"p1\">**</bpt>after <ept id=\"p1\">**</ept>super( )****","source":"Copy and paste the  following code into the body of the init() method **after **super( )****"},{"content":"this.queryBuildDataSource().addDynalink(fieldNum(FMBIRevenueByVehicleModelbyMonth, VehicleModel), FMVehicleModel, fieldNum(FMVehicleModel, Model));","pos":[13073,13220]},{"content":"The completed method definition should be as follows ********","pos":[13226,13287]},{"content":"Save the class, and then build the project.","pos":[13532,13575]},{"pos":[13580,13610],"content":"Model a chart in the form part","linkify":"Model a chart in the form part","nodes":[{"content":"Model a chart in the form part","pos":[0,30]}]},{"content":"Model a chart within the form part by using the data in the temp table.","pos":[13611,13682]},{"content":"Click in the Form Designer window of <bpt id=\"p1\">**</bpt>FMBIVehicleRentalsAndRevenue<ph id=\"ph1\">\\_</ph>Part<ept id=\"p1\">**</ept>.","pos":[13688,13764],"source":"Click in the Form Designer window of **FMBIVehicleRentalsAndRevenue\\_Part**."},{"content":"On the right, select the <bpt id=\"p1\">**</bpt>FormGroupControl<ept id=\"p1\">**</ept> node of the Form designer, right-click, and then select <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Chart<ept id=\"p3\">**</ept>.","pos":[13765,13890],"source":" On the right, select the **FormGroupControl** node of the Form designer, right-click, and then select **New** &gt; **Chart**."},{"content":"A chart control will be added to the form part.","pos":[13891,13938]},{"pos":[13943,14029],"content":"Select <bpt id=\"p1\">**</bpt>SysChart1<ept id=\"p1\">**</ept>, the root node of the chart, and then enter following properties.","source":"Select **SysChart1**, the root node of the chart, and then enter following properties."},{"pos":[14154,14171],"content":"<bpt id=\"p1\">**</bpt>Property name<ept id=\"p1\">**</ept>","source":"**Property name**"},{"pos":[14175,14184],"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>","source":"**Value**"},{"pos":[14195,14204],"content":"<bpt id=\"p1\">**</bpt>Notes<ept id=\"p1\">**</ept>","source":"**Notes**"},{"pos":[14213,14221],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"content":"RentalHistory","pos":[14234,14247]},{"pos":[14272,14287],"content":"<bpt id=\"p1\">**</bpt>Height mode<ept id=\"p1\">**</ept>","source":"**Height mode**"},{"content":"Size to available","pos":[14293,14310]},{"pos":[14331,14345],"content":"<bpt id=\"p1\">**</bpt>Width mode<ept id=\"p1\">**</ept>","source":"**Width mode**"},{"content":"Size to available","pos":[14352,14369]},{"pos":[14390,14408],"content":"<bpt id=\"p1\">**</bpt>Legend enabled<ept id=\"p1\">**</ept>","source":"**Legend enabled**"},{"content":"False","pos":[14411,14416]},{"content":"Expand the <bpt id=\"p1\">**</bpt>Bindings<ept id=\"p1\">**</ept> node, and select <bpt id=\"p2\">**</bpt>SysBuildChartDataSet1<ept id=\"p2\">**</ept> node.","pos":[14448,14520],"source":"Expand the **Bindings** node, and select **SysBuildChartDataSet1** node."},{"content":"Right-click, and select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","pos":[14521,14560],"source":" Right-click, and select **Properties**."},{"content":"Enter the following property values.","pos":[14561,14597]},{"pos":[14750,14767],"content":"<bpt id=\"p1\">**</bpt>Property name<ept id=\"p1\">**</ept>","source":"**Property name**"},{"pos":[14770,14779],"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>","source":"**Value**"},{"pos":[14805,14814],"content":"<bpt id=\"p1\">**</bpt>Notes<ept id=\"p1\">**</ept>","source":"**Notes**"},{"pos":[14823,14831],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"content":"NumRentalsByMonth","pos":[14843,14860]},{"pos":[14896,14911],"content":"<bpt id=\"p1\">**</bpt>Data source<ept id=\"p1\">**</ept>","source":"**Data source**"},{"content":"FMBIRevenueByVehicleModelbyMonth","pos":[14916,14948]},{"pos":[14969,14983],"content":"<bpt id=\"p1\">**</bpt>Categories<ept id=\"p1\">**</ept>","source":"**Categories**"},{"content":"RentalMonth","pos":[14989,15000]},{"content":"Expand the <bpt id=\"p1\">**</bpt>Series<ept id=\"p1\">**</ept> node, and select the <bpt id=\"p2\">**</bpt>SysBuildChartMeasure1<ept id=\"p2\">**</ept> node.","pos":[15041,15115],"source":"Expand the **Series** node, and select the **SysBuildChartMeasure1** node."},{"content":"Right-click, and then select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","pos":[15116,15160],"source":" Right-click, and then select **Properties**."},{"content":"Enter the following property values.","pos":[15161,15197]},{"pos":[15320,15337],"content":"<bpt id=\"p1\">**</bpt>Property name<ept id=\"p1\">**</ept>","source":"**Property name**"},{"pos":[15340,15349],"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>","source":"**Value**"},{"pos":[15360,15369],"content":"<bpt id=\"p1\">**</bpt>Notes<ept id=\"p1\">**</ept>","source":"**Notes**"},{"pos":[15378,15386],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"content":"NumRentals","pos":[15398,15408]},{"pos":[15436,15447],"content":"<bpt id=\"p1\">**</bpt>Binding<ept id=\"p1\">**</ept>","source":"**Binding**"},{"content":"NumRentalsByMonth","pos":[15456,15473]},{"pos":[15494,15508],"content":"<bpt id=\"p1\">**</bpt>Chart Type<ept id=\"p1\">**</ept>","source":"**Chart Type**"},{"content":"Column","pos":[15514,15520]},{"pos":[15552,15561],"content":"<bpt id=\"p1\">**</bpt>Value<ept id=\"p1\">**</ept>","source":"**Value**"},{"content":"NumRentals","pos":[15572,15582]},{"content":"Save the form part and rebuild.","pos":[15609,15640]},{"content":"Press <bpt id=\"p1\">**</bpt>Ctrl+F5<ept id=\"p1\">**</ept> to preview the form.","pos":[15645,15683],"source":"Press **Ctrl+F5** to preview the form."},{"content":"You will see a chart for the record that is selected in the grid.","pos":[15684,15749]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms8<ept id=\"p1\">](./media/biforms8.png)](./media/biforms8.png)</ept> <bpt id=\"p2\">**</bpt>Note:<ept id=\"p2\">**</ept> If the chart doesn’t contain any data, complete the following steps.","pos":[15750,15886],"source":"[![BIforms8](./media/biforms8.png)](./media/biforms8.png) **Note:** If the chart doesn’t contain any data, complete the following steps."},{"content":"Close all instances of the browser and rerun the form","pos":[15891,15944]},{"content":"Verify all instances of the browser and rerun the form","pos":[15949,16003]},{"pos":[16008,16016],"content":"Appendix","linkify":"Appendix","nodes":[{"content":"Appendix","pos":[0,8]}]},{"pos":[16021,16045],"content":"Installing the demo data","linkify":"Installing the demo data","nodes":[{"content":"Installing the demo data","pos":[0,24]}]},{"content":"To work with the sample, you must install the provided demo data.","pos":[16047,16112]},{"content":"Open Internet Explorer, and navigate to your Dynamics AX instance base URL.","pos":[16118,16193]},{"content":"On the cloud environment, the base URL is obtained from LCS","pos":[16202,16261]},{"pos":[16270,16409],"content":"On a local VM, the base URL is <bpt id=\"p1\">[</bpt>https://usnconeboxax1aos.cloud.onebox.dynamics.com<ept id=\"p1\">](https://usnconeboxax1aos.cloud.onebox.dynamics.com/en/)</ept>","source":"On a local VM, the base URL is [https://usnconeboxax1aos.cloud.onebox.dynamics.com](https://usnconeboxax1aos.cloud.onebox.dynamics.com/en/)"},{"content":"Sign in.","pos":[16415,16423]},{"pos":[16428,16543],"content":"On the dashboard, scroll to the far right, and in the <bpt id=\"p1\">**</bpt>Fleet Management<ept id=\"p1\">**</ept> section, click the <bpt id=\"p2\">**</bpt>Fleet setup<ept id=\"p2\">**</ept> tile.","source":"On the dashboard, scroll to the far right, and in the **Fleet Management** section, click the **Fleet setup** tile."},{"pos":[16548,16596],"content":"On the <bpt id=\"p1\">**</bpt>Setup<ept id=\"p1\">**</ept> form, click <bpt id=\"p2\">**</bpt>Load demo data<ept id=\"p2\">**</ept>.","source":"On the **Setup** form, click **Load demo data**."},{"pos":[16601,16659],"content":"If you’re prompted to reload the base data, click <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept>.","source":"If you’re prompted to reload the base data, click **Yes**."},{"pos":[16664,16715],"content":"When the data is finished loading, click <bpt id=\"p1\">**</bpt>Close<ept id=\"p1\">**</ept>.","source":"When the data is finished loading, click **Close**."},{"content":"Click <bpt id=\"p1\">**</bpt>Show navigation pane<ept id=\"p1\">**</ept> on the navigation bar.","pos":[16720,16773],"source":"Click **Show navigation pane** on the navigation bar."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>BIforms9<ept id=\"p1\">](./media/biforms9.png)](./media/biforms9.png)</ept>","pos":[16774,16831],"source":"[![BIforms9](./media/biforms9.png)](./media/biforms9.png)"}],"content":"---\n# required metadata\n\ntitle: Add contextual BI to forms | Microsoft Docs\ndescription: In this tutorial you'll model a form part that displays the previous rental history of vehicles. You'll add the form part to the Vehicles form using a DynaLink. When the user views a vehicle record, the part displays relevant rental history. \nauthor: sericks007\nmanager: AnnBe\nms.date: 2015-12-12 19:10:00\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# keywords: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: annbe\nms.suite: Released- Dynamics AX 7.0.0\n# ms.tgt_pltfrm: \nms.custom: 24571\nms.assetid: 8b6660ae-948e-4a39-8abf-889b55478724\nms.region: Global\n# ms.industry: \nms.author: milindav\n\n---\n\n# Add contextual BI to forms\n\nIn this tutorial you'll model a form part that displays the previous rental history of vehicles. You'll add the form part to the Vehicles form using a DynaLink. When the user views a vehicle record, the part displays relevant rental history. \n\nPrerequisites\n-------------\n\nThis tutorial requires you to access the Microsoft Dynamics AX environment using Remote Desktop, and be provisioned as an administrator on the Dynamics AX instance. For more information, see [Access Microsoft Dynamics AX Instances](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/dev-tools/access-microsoft-dynamics-ax-7-instances-2).\n\n## Key concepts\n-   **Aggregate measurements** - Similar to **perspectives** and **Cubes** from earlier versions of Microsoft Dynamics AX, aggregate measurements let you model and consume aggregate data in Dynamics AX.\n-   **Aggregate data entities** - Aggregate data can be consumed in building charts and other controls. Using the model driven approach, you have the ability to create data entities by directly referencing aggregate measurements and aggregate dimensions. These entities are referred to as **Aggregate data entities**. Aggregate data entities are read-only data entities used for reporting purposes.\n-   **Contextual BI** - Contextual BI refers to providing required insights as a part of the user experience so that the user has relevant insights to not only achieve the task, but be highly productive during the course of the day.\n-   **Embedded BI -** Embedded BI refers to analytic content being embedded within the Dynamics AX user experience. Contextual BI and embedded BI teams are closely related. Contextual BI implies the added notion that the context of analytic context revolves around the data or the task.\n-   **Self-service BI** - Self-service BI refers to enabling to user to tweak existing and/or create new analytic content such as reports, KPIs, and dashboards.\n\n## Setup\n### Install demo data\n\nIf this is the first tutorial you’re working on, follow the steps in the **Appendix** section at the end of this article to install demo data.\n\n### Import the lab 10.2 project\n\nThis tutorial works on Fleet Management model.\n\n1.  Download the Fleet Management sample from <https://github.com/Microsoft/FMLab>, save it to **C:**, and unzip it.\n2.  In Visual Studio, on the **Dynamics AX** menu, click **Import Project**.\n3.  In the **Import Project** window, next to the **Filename** text box, click the ellipsis button.\n4.  In the Select the file to import window, browse to **C:\\\\FmLab\\\\Lab 10-2** folder, click **Add contextual BI to forms –Before Lab.axpp**, and then click **Open**.\n5.  Select the **Overwrite Elements** option, and then click **Ok**.\n6.  Open the project **BIR102 Adding contextual BI - Before Lab.** Double-click the **FMVehicle** form in Solution Explorer.\n\n## Review the FMVehicle form\n1.  In this tutorial, the **FMVehicle** form has been modified with a part that shows the rental history of vehicles that are the same make. The form part has been added to the **FMVehicle** form.\n2.  In Solution Explorer, double-click the **FMVehicle** form. The form designer will open as shown below. Notice the newly added form part. [![BIforms1](./media/biforms1.png)](./media/biforms1.png)\n3.  Select the form part reference node **FMVehicleRentalsAndRevenue\\_Part**, right-click, and then select **Properties**. Notice following properties in the part reference\n    |                          |                                    |           |\n    |--------------------------|------------------------------------|-----------|\n    | **Property name**        | **Value**                          | **Notes** |\n    | **Name**                 | FMVehicleRentalsAndRevenue\\_Part   |           |\n    | **Menu item name**       | FMBIVehicleRentalsAndRevenue\\_Part |           |\n    | **Data source**          | FMVehicle                          |           |\n    | **Data source relation** | FMVehicle.VehicleModel             |           |\n    | **Run mode**             | Local                              |           |\n\n**Note:** In this case, the form part should refresh asynchronously when information about a vehicle, shown in the grid, changes in the parent form. We've selected the **FMVehicleModel** table to be the data source that relates the main form and the part.\n\n## Review the form part to display vehicle model data\nNext, we will review the form part.\n\n1.  In Solution Explorer, select and double-click the form part **FMBIVehicleRentalsAndRevenue\\_Part**.\n2.  The form part will be appear in the Form designer as shown below. [![BIforms2](./media/biforms2.png)](./media/biforms2.png)\n3.  Select **DataSources** &gt; **FMVehicleModel**, right-click, and then select **Properties**.\n4.  Review the following properties.\n    |                   |                |           |\n    |-------------------|----------------|-----------|\n    | **Property name** | **Value**      | **Notes** |\n    | **Table**         | FMVehicleModel |           |\n    | **Link type**     | Delayed        |           |\n\n    **Note:** You could have used other DynaLink types. In this case, we want the form part to refresh asynchronously. So we have selected Delayed as the DynaLink type.\n5.  Next, select the project node, right-click, and then select **Rebuild**. Press **Ctrl+F5** to run the form. You will see the modified Vehicle form.\n6.  Expand the **Rental history of Cars like this** part by clicking the Down Arrow beside the part. [![BIforms3](./media/biforms3.png)](./media/biforms3.png)\n7.  Select and click a record to view detailed information about the record.\n8.  To see context being passed to the form part, select the **List** icon on the bottom left and navigate through the records. You will see the part display model specification for each of the cars shown on the page. [![BIforms4](./media/biforms4.png)](./media/biforms4.png)\n\n## Adding contextual BI to the form part using an aggregate data entity\nIn this section, you’ll model an aggregate data entity. Next, you will add the Aggregate Data entity into the form part and then populate a chart.\n\n### Model an Aggregate data entity that shows the Number of Rentals by Vehicle model by month\n\n1.  Select the project node **BIR102 Adding contextual BI**, right-click, and then select **Add** &gt; **New Item**.\n2.  In the **Add new item** wizard, select **Dynamics AX Artifacts** &gt; **Analytics** &gt; **Aggregate Data entity**. Enter the name **FMBIRevenueByVehicleModelbyMonth**, and select **Add**. The Aggregate Data Entity designer will be displayed.\n3.  Associate the aggregate Data entity **FMBIRevenueByVehicleModelbyMonth** with the aggregate measurement **FMAggregateMeasurements** as follows:\n    1.  Select the **DataSource** node.\n    2.  Right-click, and select **Properties**.\n    3.  Select **FMAggregateMeasurement** as the property value for **Measurement property**.\n    4.  Save the aggregate data entity. You will notice the measurement **FMAggregateMeasurements** shown under the **DataSource** node, as shown below. You can expand the aggregate measurement so that you can see each of the fields. [![BIforms5](./media/biforms5.png)](./media/biforms5.png) **Note:** An aggregate data entity can reference only one aggregate measurement. You can’t define aggregate data entities that reference multiple aggregate measurements.\n\n4.  Add a measure field to the data entity from the aggregate measurement. Multi-select **NoRentals** and **TotalRevenue** measures by clicking on both of them while pressing the **Ctrl** key.\n5.  Use the drag-and drop operation to move the measures into the **Fields** node. Two fields will be created in the aggregate data entity **FMBIRevenueByVehicleModelbyMonth**, as shown below. [![BIforms6](./media/biforms6.png)](./media/biforms6.png)\n6.  Right-click the **Fields** node of **FMBIRevenueByVehicleModelbyMonth**, and then select **New &gt;** **Mapped Field**.\n7.  Add a dimension attribute as a field. Right-click the **Fields** node of **FMBIRevenueByVehicleModelbyMonth**, and then select **Mapped Field.**\n8.  Enter the following property values.\n    |                        |                  |           |\n    |------------------------|------------------|-----------|\n    | **Property name**      | **Value**        | **Notes** |\n    | **Name**               | VehicleModel     |           |\n    | **Measure Group**      | FMRentalCharges  |           |\n    | **Dimension**          | FMVehicle        |           |\n    | **Attribute**          | VehicleModel     |           |\n    | **Extended Data type** | FMVehicleModelId |           |\n\n    **Note:** Where discoverable, extended data types that are associated with measures and dimension attributes will be defaulted by the system in the Extended Data type property. You can change the defaults where required.\n9.  Define another dimension attribute by using dragging and dropping a Dimension. Expand **Data Source &gt; FMAggregateMeasurements &gt; FMRentalCharges &gt; Dimensions**. Select the **RentalStartDate** dimension.\n10. Drag and drop the dimension into the **Fields** node. Notice that the field properties have been initialized by the drag-and-drop operation. Modify the following default properties.\n    -   Select **Month** as the **Attribute** property\n    -   Modify the **Name** property to **RentalMonth**\n\n11. Note that the aggregate data entity **FMBIRevenueByVehicleModelbyMonth **contains 4 fields. All measures that are added to aggregate data entities will be grouped by the dimension attributes added as fields.\n12. Save the aggregate data entity. Re-build the project.\n    -   Make sure that **Synchronize database** is enabled with the build under **Project** properties.\n    -   You can also synchronize the database after the build if you have not enabled the above setting.\n\n13. Launch **Application Explorer**. Click **AOT** &gt; **Data Model** &gt; **Aggregate DataEntities**. The aggregate data entity that you defined should appear in the node.\n\n**NOTE:** Aggregate data entities are currently reflected within an Aggregate DataEntities node. In the future, they will be shown within the **Data Entities** node. [![BIforms7](./media/biforms7.png)](./media/biforms7.png)\n\n### Add the Aggregate Data Entity to the form part data source\n\n1.  Select the newly defined aggregate data entity **FMBIRevenueByVehicleModelbyMonth** in Solution Explorer. Drag-and-drop the aggregate data entity to the **Data sources** node of the form part.\n2.  Select the aggregate data entity **FMBIRevenueByVehicleModelbyMonth** in the Data sources node. Right-click, and then select **Properties**. Review the following properties. You do not need to modify defaults.\n    |                   |                                  |           |\n    |-------------------|----------------------------------|-----------|\n    | **Property name** | **Value**                        | **Notes** |\n    | **Name**          | FMBIRevenueByVehicleModelbyMonth |           |\n    | **Table**         | FMBIRevenueByVehicleModelbyMonth |           |\n    | **Link type**     | Delayed                          |           |\n\n    **Note:** You could have used other DynaLink types. In this case, we want the parts that are built using the AggregateData Entity to be refreshed based on the record selection in the **FMVehicleModel** table.\n3.  Next, you will relate the Aggregate Data entity and the **FMVehicleModel** table in the form data source.\n4.  Save the form.\n\n### Define a relationship between data sources in the form part\n\nIn the previous step, we have added the Aggregate Data Entity to the form as a data source. However, the aggregate data entity and the main table **FMVehicleModel** are not related to each other. This would prevent the **FMVehicleModel** record context from being passed to any of the controls built using the aggregate data entity.\n\n1.  Expand the **Data sources &gt; FMBIRevenueByVehicleModelbyMonth &gt; methods** node in the form part. Right-click and select **Override &gt; init**.\n2.  An Init method will be added to the table. The Code editor will launch with the init() method definition.\n3.  Copy and paste the  following code into the body of the init() method **after **super( )****\n    1.  this.queryBuildDataSource().addDynalink(fieldNum(FMBIRevenueByVehicleModelbyMonth, VehicleModel), FMVehicleModel, fieldNum(FMVehicleModel, Model));\n\n4.  The completed method definition should be as follows ********\n\n         public void init()\n         {\n               super(); \n               this.queryBuildDataSource().addDynalink(fieldNum(FMBIRevenueByVehicleModelbyMonth, VehicleModel), FMVehicleModel, fieldNum(FMVehicleModel, Model));\n         }\n\n5.  Save the class, and then build the project.\n\n## Model a chart in the form part\nModel a chart within the form part by using the data in the temp table.\n\n1.  Click in the Form Designer window of **FMBIVehicleRentalsAndRevenue\\_Part**. On the right, select the **FormGroupControl** node of the Form designer, right-click, and then select **New** &gt; **Chart**. A chart control will be added to the form part.\n2.  Select **SysChart1**, the root node of the chart, and then enter following properties.\n    |                    |                   |           |\n    |--------------------|-------------------|-----------|\n    | **Property name**  | **Value**         | **Notes** |\n    | **Name**           | RentalHistory     |           |\n    | **Height mode**    | Size to available |           |\n    | **Width mode**     | Size to available |           |\n    | **Legend enabled** | False             |           |\n\n3.  Expand the **Bindings** node, and select **SysBuildChartDataSet1** node. Right-click, and select **Properties**. Enter the following property values.\n    |                   |                                  |           |\n    |-------------------|----------------------------------|-----------|\n    | **Property name** | **Value**                        | **Notes** |\n    | **Name**          | NumRentalsByMonth                |           |\n    | **Data source**   | FMBIRevenueByVehicleModelbyMonth |           |\n    | **Categories**    | RentalMonth                      |           |\n\n4.  Expand the **Series** node, and select the **SysBuildChartMeasure1** node. Right-click, and then select **Properties**. Enter the following property values.\n    |                   |                   |           |\n    |-------------------|-------------------|-----------|\n    | **Property name** | **Value**         | **Notes** |\n    | **Name**          | NumRentals        |           |\n    | **Binding**       | NumRentalsByMonth |           |\n    | **Chart Type**    | Column            |           |\n    | **Value**         | NumRentals        |           |\n\n5.  Save the form part and rebuild.\n6.  Press **Ctrl+F5** to preview the form. You will see a chart for the record that is selected in the grid. [![BIforms8](./media/biforms8.png)](./media/biforms8.png) **Note:** If the chart doesn’t contain any data, complete the following steps.\n7.  Close all instances of the browser and rerun the form\n8.  Verify all instances of the browser and rerun the form\n\n## Appendix\n### Installing the demo data\n\nTo work with the sample, you must install the provided demo data.\n\n1.  Open Internet Explorer, and navigate to your Dynamics AX instance base URL.\n    -   On the cloud environment, the base URL is obtained from LCS\n    -   On a local VM, the base URL is [https://usnconeboxax1aos.cloud.onebox.dynamics.com](https://usnconeboxax1aos.cloud.onebox.dynamics.com/en/)\n\n2.  Sign in.\n3.  On the dashboard, scroll to the far right, and in the **Fleet Management** section, click the **Fleet setup** tile.\n4.  On the **Setup** form, click **Load demo data**.\n5.  If you’re prompted to reload the base data, click **Yes**.\n6.  When the data is finished loading, click **Close**.\n7.  Click **Show navigation pane** on the navigation bar. [![BIforms9](./media/biforms9.png)](./media/biforms9.png)\n\n\n"}