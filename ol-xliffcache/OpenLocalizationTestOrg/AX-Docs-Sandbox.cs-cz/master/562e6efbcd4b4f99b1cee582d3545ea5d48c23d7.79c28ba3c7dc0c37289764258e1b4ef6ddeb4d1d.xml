{"nodes":[{"pos":[32,98],"content":"Apply a deployable package on a Dynamics 365 for Operations system","needQuote":true,"needEscape":true,"nodes":[{"content":"Apply a deployable package on a Dynamics 365 for Operations system","pos":[0,66]}]},{"pos":[112,391],"content":"This tutorial walks you through the steps for applying a deployable package on a Microsoft Dynamics 365 for Operations system. This package can be either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.","needQuote":true,"needEscape":true,"nodes":[{"content":"This tutorial walks you through the steps for applying a deployable package on a Microsoft Dynamics 365 for Operations system. This package can be either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.","pos":[0,279],"nodes":[{"content":"This tutorial walks you through the steps for applying a deployable package on a Microsoft Dynamics 365 for Operations system.","pos":[0,126]},{"content":"This package can be either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.","pos":[127,279]}]}]},{"pos":[912,978],"content":"Apply a deployable package on a Dynamics 365 for Operations system","linkify":"Apply a deployable package on a Dynamics 365 for Operations system","nodes":[{"content":"Apply a deployable package on a Dynamics 365 for Operations system","pos":[0,66]}]},{"content":"This tutorial walks you through the steps for applying a deployable package on a Microsoft Dynamics 365 for Operations system.","pos":[980,1106]},{"content":"This package can be either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.","pos":[1107,1259]},{"pos":[1261,1283],"content":"Supported environments","linkify":"Supported environments","nodes":[{"content":"Supported environments","pos":[0,22]}]},{"content":"Package deployment using automated flows in LCS are supported on the following topologies:","pos":[1308,1398]},{"content":"<bpt id=\"p1\">**</bpt>Implementation Project<ept id=\"p1\">**</ept>: All environments (Dev, Test, Build, Demo, Sandbox, and Production) are now supported.","pos":[1404,1517],"source":"**Implementation Project**: All environments (Dev, Test, Build, Demo, Sandbox, and Production) are now supported."},{"content":"Automated package application is self-serve on all environments except Production.","pos":[1518,1600]},{"content":"For Production environments, customers must submit a request through LCS to the Service Engineering team to apply packages.","pos":[1601,1724]},{"pos":[1729,1808],"content":"<bpt id=\"p1\">**</bpt>Partner Projects<ept id=\"p1\">**</ept>: Demo- and single-box Dev/Test environments are supported.","source":"**Partner Projects**: Demo- and single-box Dev/Test environments are supported."},{"content":"Manual package deployment must be used for the following topologies.","pos":[1810,1878]},{"content":"For information about manual package deployment, see <bpt id=\"p1\">[</bpt>Install  a deployable package<ept id=\"p1\">](install-deployable-package.md)</ept>.","pos":[1879,1995],"source":" For information about manual package deployment, see [Install  a deployable package](install-deployable-package.md)."},{"content":"Downloadable VHD","pos":[2001,2017]},{"content":"Partner Projects: Multi-box Dev/Test topology deployments.","pos":[2022,2080]},{"pos":[2085,2097],"content":"Key concepts","linkify":"Key concepts","nodes":[{"content":"Key concepts","pos":[0,12]}]},{"content":"<bpt id=\"p1\">**</bpt>Deployable package<ept id=\"p1\">**</ept> – A deployable package is a unit of deployment that can be applied in any Dynamics 365 for Operations environment.","pos":[2102,2239],"source":"**Deployable package** – A deployable package is a unit of deployment that can be applied in any Dynamics 365 for Operations environment."},{"content":"A deployable package can be a binary hotfix to the Application Object Server (AOS) runtime components, an updated Dynamics 365 for Operations customization package, or a new Dynamics 365 for Operations customization/application module package.","pos":[2240,2483]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Example of a deployable package<ept id=\"p1\">](./media/applypackage_deployablepackage.jpg)](./media/applypackage_deployablepackage.jpg)</ept>","pos":[2484,2608],"source":"[![Example of a deployable package](./media/applypackage_deployablepackage.jpg)](./media/applypackage_deployablepackage.jpg)"},{"content":"<bpt id=\"p1\">**</bpt>Runbook<ept id=\"p1\">**</ept> – The deployment runbook is a series of steps that are generated for applying the deployable package to the target environment.","pos":[2613,2752],"source":"**Runbook** – The deployment runbook is a series of steps that are generated for applying the deployable package to the target environment."},{"content":"Some of the steps are automated, and some are manual.","pos":[2753,2806]},{"content":"AXUpdateInstaller lets you run these steps one at a time and in the correct order.","pos":[2807,2889]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Example of a deployment runbook<ept id=\"p1\">](./media/applypackage_runbook-1024x528.jpg)](./media/applypackage_runbook.jpg)</ept>","pos":[2890,3003],"source":"[![Example of a deployment runbook](./media/applypackage_runbook-1024x528.jpg)](./media/applypackage_runbook.jpg)"},{"content":"<bpt id=\"p1\">**</bpt>AXUpdateInstaller<ept id=\"p1\">**</ept> – When you create a customization package from Microsoft Visual Studio or a Microsoft binary hotfix, the installer executable is bundled together with the deployable package.","pos":[3008,3204],"source":"**AXUpdateInstaller** – When you create a customization package from Microsoft Visual Studio or a Microsoft binary hotfix, the installer executable is bundled together with the deployable package."},{"content":"The installer generates the runbook for the specified topology.","pos":[3205,3268]},{"content":"The installer can also run steps in order, according to the runbook for a specific topology.","pos":[3269,3361]},{"pos":[3366,3389],"content":"Supported package types","linkify":"Supported package types","nodes":[{"content":"Supported package types","pos":[0,23]}]},{"pos":[3394,3561],"content":"<bpt id=\"p1\">**</bpt>AOT deployable package<ept id=\"p1\">**</ept> – A deployable package that is generated after the application source code is applied, any conflicts are resolved, and the code is compiled.","source":"**AOT deployable package** – A deployable package that is generated after the application source code is applied, any conflicts are resolved, and the code is compiled."},{"pos":[3566,3703],"content":"<bpt id=\"p1\">**</bpt>Binary package<ept id=\"p1\">**</ept> – A deployable package that contains binary dynamic-link libraries (DLLs) that the platform and application depend on.","source":"**Binary package** – A deployable package that contains binary dynamic-link libraries (DLLs) that the platform and application depend on."},{"pos":[3708,3876],"content":"<bpt id=\"p1\">**</bpt>Combined Retail deployable package<ept id=\"p1\">**</ept> – A combined deployable package is a combination of various retail packages that are generated after the Retail code is combined.","source":"**Combined Retail deployable package** – A combined deployable package is a combination of various retail packages that are generated after the Retail code is combined."},{"content":"<bpt id=\"p1\">**</bpt>Merged package<ept id=\"p1\">**</ept> –** **A package that is created by merging one package of each type.","pos":[3881,3968],"source":"**Merged package** –** **A package that is created by merging one package of each type."},{"content":"For example, one Binary package, one AOT package, and one Retail package.","pos":[3969,4042]},{"content":"The packages are merged in the Asset Library for the project in LCS.","pos":[4043,4111]},{"pos":[4116,4134],"content":"Prerequisite steps","linkify":"Prerequisite steps","nodes":[{"content":"Prerequisite steps","pos":[0,18]}]},{"content":"<bpt id=\"p1\">**</bpt>Ensure that the package to be applied is valid<ept id=\"p1\">**</ept>: When a package is uploaded to the Asset Library, it is not analyzed and selecting on the package shows the package state to be Not Validated in the right hand pane.","pos":[4139,4355],"source":"**Ensure that the package to be applied is valid**: When a package is uploaded to the Asset Library, it is not analyzed and selecting on the package shows the package state to be Not Validated in the right hand pane."},{"content":"Once a package has been validated and it passes the validation, only then can it be applied to an environment using the below flows.","pos":[4356,4488]},{"content":"The state of the package will be updated in the Asset Library to indicate whether it is valid or not.","pos":[4489,4590]},{"content":"This is important to ensure that the Production environment does not get affected by packages that don't meet the guidelines.","pos":[4591,4716]},{"content":"Kind of validations:","pos":[4725,4745]},{"content":"Basic package format validations","pos":[4758,4790]},{"content":"Platform version checks","pos":[4803,4826]},{"content":"Types of packages","pos":[4839,4856]},{"content":"<bpt id=\"p1\">**</bpt>Ensure that the package is first applied on sandbox environment before being applied on the Production environment<ept id=\"p1\">**</ept>: In order to ensure that the Production environment is always in a good state, we want to make sure that the package is tested on a sandbox environment before it gets applied to Production.","pos":[4861,5169],"source":"**Ensure that the package is first applied on sandbox environment before being applied on the Production environment**: In order to ensure that the Production environment is always in a good state, we want to make sure that the package is tested on a sandbox environment before it gets applied to Production."},{"content":"Hence, make sure the package is first applied using the automated flows in sandbox before it is applied in Production.","pos":[5170,5288]},{"content":"<bpt id=\"p1\">**</bpt>If you want to apply multiple packages, then create a merged package that can be applied first on a sandbox, followed by the Production<ept id=\"p1\">**</ept>: Applying a single package on an average environment takes about 5 hours of downtime.","pos":[5293,5518],"source":"**If you want to apply multiple packages, then create a merged package that can be applied first on a sandbox, followed by the Production**: Applying a single package on an average environment takes about 5 hours of downtime."},{"content":"Instead of taking additional hours of downtime for multiple packages, we have added a feature that enables you to combine a single package of each type.","pos":[5519,5671]},{"content":"So if you select a binary package and an application deployable package in the asset library, it enables a button called <bpt id=\"p1\">**</bpt>Merge<ept id=\"p1\">**</ept> in the toolbar.","pos":[5672,5818],"source":" So if you select a binary package and an application deployable package in the asset library, it enables a button called **Merge** in the toolbar."},{"content":"Clicking on this button will allow you to merge these two packages into a single package reducing the total downtime to half.","pos":[5819,5944]},{"pos":[5949,6019],"content":"Apply package on demo/dev/test/build/sandbox environments by using LCS","linkify":"Apply package on demo/dev/test/build/sandbox environments by using LCS","nodes":[{"content":"Apply package on demo/dev/test/build/sandbox environments by using LCS","pos":[0,70]}]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Package application causes system downtime.","pos":[6020,6073],"source":"**Note:** Package application causes system downtime."},{"content":"All the relevant services will be stopped, and you won't be able to use your environments while the package is being applied.","pos":[6074,6199]},{"content":"Download a hotfix from LCS.","pos":[6205,6232]},{"content":"For information about how to download a hotfix from LCS, see <bpt id=\"p1\">[</bpt>Download hotfixes from Lifecycle Services<ept id=\"p1\">](../migration-upgrade/download-hotfix-lcs.md)</ept>.","pos":[6233,6383],"source":" For information about how to download a hotfix from LCS, see [Download hotfixes from Lifecycle Services](../migration-upgrade/download-hotfix-lcs.md)."},{"content":"For a binary hotfix, upload the hotfix directly to the Asset library.","pos":[6392,6461]},{"content":"For an application/X++ hotfix, apply the package in a dev environment.","pos":[6470,6540]},{"content":"After you resolve any conflicts, generate a deployable package from Visual Studio, and upload the package to the Asset library.","pos":[6541,6668]},{"content":"For information about how to upload to the Asset library and create a deployable package, see <bpt id=\"p1\">[</bpt>Create and apply a deployable package<ept id=\"p1\">](create-apply-deployable-package.md)</ept>.","pos":[6669,6839],"source":" For information about how to upload to the Asset library and create a deployable package, see [Create and apply a deployable package](create-apply-deployable-package.md)."},{"pos":[6845,6939],"content":"Open the <bpt id=\"p1\">**</bpt>Environment details<ept id=\"p1\">**</ept> view for the environment where you want to apply the package.","source":"Open the **Environment details** view for the environment where you want to apply the package."},{"pos":[6944,7005],"content":"Click <bpt id=\"p1\">**</bpt>Maintain<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Apply updates<ept id=\"p2\">**</ept> to apply an update.","source":"Click **Maintain** &gt; **Apply updates** to apply an update."},{"content":"Select the package to apply.","pos":[7010,7038]},{"content":"The filter at the top helps filtering through the list.","pos":[7039,7094]},{"content":"Click <bpt id=\"p1\">**</bpt>Apply<ept id=\"p1\">**</ept>.","pos":[7099,7115],"source":"Click **Apply**."},{"content":"Notice that the status in the upper right of the <bpt id=\"p1\">**</bpt>Environment details<ept id=\"p1\">**</ept> view changes to <bpt id=\"p2\">**</bpt>Queued<ept id=\"p2\">**</ept>, and that an <bpt id=\"p3\">**</bpt>Environment updates<ept id=\"p3\">**</ept> section now shows the progress of the package.","pos":[7116,7299],"source":" Notice that the status in the upper right of the **Environment details** view changes to **Queued**, and that an **Environment updates** section now shows the progress of the package."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>parallelexecutionsandbox<ph id=\"ph2\">\\_</ph>queuedstate<ept id=\"p1\">](./media/parallelexecutionsandbox_queuedstate.jpg)](./media/parallelexecutionsandbox_queuedstate.jpg)</ept>","pos":[7300,7442],"source":"[![parallelexecutionsandbox\\_queuedstate](./media/parallelexecutionsandbox_queuedstate.jpg)](./media/parallelexecutionsandbox_queuedstate.jpg)"},{"content":"Refresh the page to see the progress of the package application.","pos":[7447,7511]},{"content":"Notice that the servicing status is <bpt id=\"p1\">**</bpt>In Progress<ept id=\"p1\">**</ept>, and the environment status is <bpt id=\"p2\">**</bpt>Servicing<ept id=\"p2\">**</ept>.","pos":[7512,7609],"source":" Notice that the servicing status is **In Progress**, and the environment status is **Servicing**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>parallelexecutionsandbox<ph id=\"ph2\">\\_</ph>servicingstate<ept id=\"p1\">](./media/parallelexecutionsandbox_servicingstate.png)](./media/parallelexecutionsandbox_servicingstate.png)</ept>","pos":[7610,7761],"source":"[![parallelexecutionsandbox\\_servicingstate](./media/parallelexecutionsandbox_servicingstate.png)](./media/parallelexecutionsandbox_servicingstate.png)"},{"content":"Continue to refresh the page to see the status updates for the package application request.","pos":[7766,7857]},{"content":"When the package has been applied, the environment status changes to <bpt id=\"p1\">**</bpt>Deployed<ept id=\"p1\">**</ept>, and the servicing status changes to <bpt id=\"p2\">**</bpt>Completed<ept id=\"p2\">**</ept>.","pos":[7858,7991],"source":" When the package has been applied, the environment status changes to **Deployed**, and the servicing status changes to **Completed**."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>parallelexecutionsandbox<ph id=\"ph2\">\\_</ph>signedoffstate<ept id=\"p1\">](./media/parallelexecutionsandbox_signedoffstate.png)](./media/parallelexecutionsandbox_signedoffstate.png)</ept>","pos":[7992,8143],"source":"[![parallelexecutionsandbox\\_signedoffstate](./media/parallelexecutionsandbox_signedoffstate.png)](./media/parallelexecutionsandbox_signedoffstate.png)"},{"content":"To sign off on the package application, click <bpt id=\"p1\">**</bpt>Sign off<ept id=\"p1\">**</ept> if there are no issues.","pos":[8148,8230],"source":"To sign off on the package application, click **Sign off** if there are no issues."},{"content":"If issues occurred when you applied the package, click <bpt id=\"p1\">**</bpt>Sign off with issues<ept id=\"p1\">**</ept>.","pos":[8231,8311],"source":" If issues occurred when you applied the package, click **Sign off with issues**."},{"pos":[8317,8332],"content":"Troubleshooting","linkify":"Troubleshooting","nodes":[{"content":"Troubleshooting","pos":[0,15]}]},{"pos":[8339,8374],"content":"General troubleshooting/diagnostics","linkify":"General troubleshooting/diagnostics","nodes":[{"content":"General troubleshooting/diagnostics","pos":[0,35]}]},{"content":"If package application isn't successful, you can download either the logs or the runbook to see the detailed logs.","pos":[8376,8490]},{"content":"You can also use Remote Desktop Protocol (RDP) to establish a remote connection to an environment to fix issues.","pos":[8491,8603]},{"content":"If you must report the issue to Microsoft, be sure to include the activity ID that is reported in the <bpt id=\"p1\">**</bpt>Environment updates<ept id=\"p1\">**</ept> section.","pos":[8604,8738],"source":" If you must report the issue to Microsoft, be sure to include the activity ID that is reported in the **Environment updates** section."},{"content":"<bpt id=\"p1\">[</bpt> <ept id=\"p1\">](./media/applypackage_sandbox_10.png)</ept><bpt id=\"p2\">[</bpt><ph id=\"ph1\">![</ph>parallelexecutionsandbox<ph id=\"ph2\">\\_</ph>troubleshooting<ept id=\"p2\">](./media/parallelexecutionsandbox_troubleshooting.jpg)](./media/parallelexecutionsandbox_troubleshooting.jpg)</ept>","pos":[8739,8933],"source":"[ ](./media/applypackage_sandbox_10.png)[![parallelexecutionsandbox\\_troubleshooting](./media/parallelexecutionsandbox_troubleshooting.jpg)](./media/parallelexecutionsandbox_troubleshooting.jpg)"},{"pos":[8940,8954],"content":"Using the logs","linkify":"Using the logs","nodes":[{"content":"Using the logs","pos":[0,14]}]},{"content":"Download the logs.","pos":[8960,8978]},{"content":"Unzip the log files.","pos":[8983,9003]},{"content":"Select the role that had the step failure, such as AOS or BI.","pos":[9008,9069]},{"content":"Select the virtual machine (VM) where the step failed.","pos":[9074,9128]},{"content":"This information appears in the <bpt id=\"p1\">**</bpt>Machine name<ept id=\"p1\">**</ept> column in the <bpt id=\"p2\">**</bpt>Environment updates<ept id=\"p2\">**</ept> section.","pos":[9129,9224],"source":" This information appears in the **Machine name** column in the **Environment updates** section."},{"content":"In the logs for the VM, select the folder that corresponds to the step where the issue occurred.","pos":[9229,9325]},{"content":"The folder name identifies the step that each folder corresponds to.","pos":[9326,9394]},{"content":"For example, if the issue occurred in the executing a step, select the <bpt id=\"p1\">**</bpt>ExecuteRunbook<ph id=\"ph1\">\\*</ph><ept id=\"p1\">**</ept> folder.","pos":[9395,9494],"source":" For example, if the issue occurred in the executing a step, select the **ExecuteRunbook\\*** folder."},{"content":"For example, if the folder name is ExecuteRunbook-b0c5c413-dae3-4a7a-a0c4-d558614f7e98-1<ph id=\"ph1\">\\_</ph>I0<ph id=\"ph2\">\\_</ph>R0, the step number is highlighted and is the number after the GUID.","pos":[9496,9658],"source":"For example, if the folder name is ExecuteRunbook-b0c5c413-dae3-4a7a-a0c4-d558614f7e98-1\\_I0\\_R0, the step number is highlighted and is the number after the GUID."},{"pos":[9665,9680],"content":"Package failure","linkify":"Package failure","nodes":[{"content":"Package failure","pos":[0,15]}]},{"content":"If package application fails, you have two options:","pos":[9682,9733]},{"pos":[9739,9786],"content":"Click <bpt id=\"p1\">**</bpt>Resume<ept id=\"p1\">**</ept> to retry the failed operation.","source":"Click **Resume** to retry the failed operation."},{"pos":[9788,9930],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>parallelexecutionsandbox<ph id=\"ph2\">\\_</ph>failedstate<ept id=\"p1\">](./media/parallelexecutionsandbox_failedstate.jpg)](./media/parallelexecutionsandbox_failedstate.jpg)</ept>","source":"[![parallelexecutionsandbox\\_failedstate](./media/parallelexecutionsandbox_failedstate.jpg)](./media/parallelexecutionsandbox_failedstate.jpg)"},{"content":"Click <bpt id=\"p1\">**</bpt>Abort<ept id=\"p1\">**</ept> to stop package application.","pos":[9936,9980],"source":"Click **Abort** to stop package application."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If you click <bpt id=\"p2\">**</bpt>Abort<ept id=\"p2\">**</ept>, you don't roll back the changes that have already been made to your environment.","pos":[9981,10095],"source":"**Note:** If you click **Abort**, you don't roll back the changes that have already been made to your environment."},{"content":"To proceed, you must fix the issue.","pos":[10096,10131]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Message box that appears when you abort package application<ept id=\"p1\">](./media/applypackage_sandbox_13-1024x274.png)](./media/applypackage_sandbox_13.png)</ept>","pos":[10132,10279],"source":"[![Message box that appears when you abort package application](./media/applypackage_sandbox_13-1024x274.png)](./media/applypackage_sandbox_13.png)"},{"pos":[10284,10338],"content":"Apply package on a Production environment by using LCS","linkify":"Apply package on a Production environment by using LCS","nodes":[{"content":"Apply package on a Production environment by using LCS","pos":[0,54]}]},{"content":"In a Production environment, package application through LCS is not self-serve like it is for a Sandbox or other environment types.","pos":[10339,10470]},{"content":"Customers and partners must submit a request to the Service Engineering team to apply a package when the customer is ready to take the downtime.","pos":[10471,10615]},{"content":"Download a hotfix from LCS.","pos":[10622,10649]},{"content":"For information about how to download a hotfix from LCS, see <bpt id=\"p1\">[</bpt>Download hotfixes from Lifecycle Services<ept id=\"p1\">](../migration-upgrade/download-hotfix-lcs.md)</ept>.","pos":[10650,10800],"source":" For information about how to download a hotfix from LCS, see [Download hotfixes from Lifecycle Services](../migration-upgrade/download-hotfix-lcs.md)."},{"content":"For a binary hotfix, upload the hotfix directly to the Asset library.","pos":[10809,10878]},{"content":"For an application/X++ hotfix, apply the package in a dev environment.","pos":[10887,10957]},{"content":"After you resolve any conflicts, generate a deployable package from Visual Studio, and upload the package to the Asset library.","pos":[10958,11085]},{"content":"For information about how to upload to the Asset library and create a deployable package, see <bpt id=\"p1\">[</bpt>Create and apply a deployable package<ept id=\"p1\">](create-apply-deployable-package.md)</ept>.","pos":[11086,11256],"source":" For information about how to upload to the Asset library and create a deployable package, see [Create and apply a deployable package](create-apply-deployable-package.md)."},{"pos":[11262,11433],"content":"On the LCS <bpt id=\"p1\">**</bpt>Asset library<ept id=\"p1\">**</ept> page, on the tab that corresponds to the asset type (<bpt id=\"p2\">**</bpt>Software deployable package<ept id=\"p2\">**</ept>), select a package, and then click <bpt id=\"p3\">**</bpt>Release candidate<ept id=\"p3\">**</ept>.","source":"On the LCS **Asset library** page, on the tab that corresponds to the asset type (**Software deployable package**), select a package, and then click **Release candidate**."},{"content":"Apply the package on a Sandbox environment using the instructions above.","pos":[11438,11510]},{"content":"After the package is successfully applied and signed off in sandbox, open the Asset Library and mark the package as** Release Candidate**.","pos":[11515,11653]},{"pos":[11658,11763],"content":"Open the <bpt id=\"p1\">**</bpt>Environment details<ept id=\"p1\">**</ept> view for the production environment where you want to apply the package.","source":"Open the **Environment details** view for the production environment where you want to apply the package."},{"pos":[11768,11831],"content":"Click <bpt id=\"p1\">**</bpt>Maintain<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Apply updates<ept id=\"p2\">**</ept> to apply the package.","source":"Click **Maintain** &gt; **Apply updates** to apply the package."},{"content":"Select the type of package to apply.","pos":[11836,11872]},{"content":"Select the package to apply in your production environment, and then click <bpt id=\"p1\">**</bpt>Schedule<ept id=\"p1\">**</ept> to submit a request to the Service Engineering team to apply it.","pos":[11877,12029],"source":"Select the package to apply in your production environment, and then click **Schedule** to submit a request to the Service Engineering team to apply it."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The list of packages includes only the packages that have been successfully signed off in the sandbox environment, and that have been marked as release candidates.","pos":[12030,12203],"source":"**Note:** The list of packages includes only the packages that have been successfully signed off in the sandbox environment, and that have been marked as release candidates."},{"content":"Specify the date and time when you want to schedule package application, click <bpt id=\"p1\">**</bpt>Submit<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept> to confirm.","pos":[12208,12332],"source":"Specify the date and time when you want to schedule package application, click **Submit**, and then click **OK** to confirm."},{"content":"Note that your environments will be down and unavailable to perform business while the package is being applied.","pos":[12333,12445]},{"content":"Refresh the page.","pos":[12450,12467]},{"content":"Two fields on the page indicate the status of the request.","pos":[12468,12526]},{"pos":[12535,12635],"content":"<bpt id=\"p1\">**</bpt>Request status<ept id=\"p1\">**</ept> – This field indicates the status of the request that you submitted to Microsoft.","source":"**Request status** – This field indicates the status of the request that you submitted to Microsoft."},{"pos":[12644,12710],"content":"<bpt id=\"p1\">**</bpt>Actionable by<ept id=\"p1\">**</ept> – This field indicates who needs to take action.","source":"**Actionable by** – This field indicates who needs to take action."},{"pos":[12716,12835],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Request status and Actionable by fields<ept id=\"p1\">](./media/applypackage_prod_7-1024x269.png)](./media/applypackage_prod_7.png)</ept>","source":"[![Request status and Actionable by fields](./media/applypackage_prod_7-1024x269.png)](./media/applypackage_prod_7.png)"},{"content":"The Service Engineering team can either accept or deny the request.","pos":[12840,12907]},{"content":"If the request is accepted, the Service Engineering team begins to update the environment.","pos":[12916,13006]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Accepted request: Request status = Request accepted, Actionable by = Microsoft<ept id=\"p1\">](./media/applypackage_prod_9-1024x384.png)](./media/applypackage_prod_9.png)</ept>","pos":[13007,13165],"source":"[![Accepted request: Request status = Request accepted, Actionable by = Microsoft](./media/applypackage_prod_9-1024x384.png)](./media/applypackage_prod_9.png)"},{"content":"If the request is denied, Microsoft informs the customer about the reason for the denial and the action that the customer must take.","pos":[13174,13306]},{"content":"The customer can then reschedule the request, change the package, or cancel the request.","pos":[13307,13395]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Denied request: Request status = Request denied, Actionable by = Customer/Partner<ept id=\"p1\">](./media/applypackage_prod_8-1024x322.png)](./media/applypackage_prod_8.png)</ept>","pos":[13396,13557],"source":"[![Denied request: Request status = Request denied, Actionable by = Customer/Partner](./media/applypackage_prod_8-1024x322.png)](./media/applypackage_prod_8.png)"},{"content":"At any time, the customer can use the <bpt id=\"p1\">**</bpt>Comments<ept id=\"p1\">**</ept> field to post comments to the request.","pos":[13563,13652],"source":"At any time, the customer can use the **Comments** field to post comments to the request."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Example of comments that are posted to a request<ept id=\"p1\">](./media/applypackage_prod_10-1024x336.png)](./media/applypackage_prod_10.png)</ept>","pos":[13653,13783],"source":"[![Example of comments that are posted to a request](./media/applypackage_prod_10-1024x336.png)](./media/applypackage_prod_10.png)"},{"content":"After the environment is serviced, you can monitor the status.","pos":[13788,13850]},{"content":"The <bpt id=\"p1\">**</bpt>Servicing status<ept id=\"p1\">**</ept> field indicates the status of the package application.","pos":[13851,13930],"source":" The **Servicing status** field indicates the status of the package application."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Servicing status and Request status fields<ept id=\"p1\">](./media/applypackage_prod_11-1024x399.png)](./media/applypackage_prod_11.png)</ept> You can also see the number of steps that have been run, out of the total number of steps that are available.","pos":[13931,14165],"source":"[![Servicing status and Request status fields](./media/applypackage_prod_11-1024x399.png)](./media/applypackage_prod_11.png) You can also see the number of steps that have been run, out of the total number of steps that are available."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Progress indicator<ept id=\"p1\">](./media/applypackage_prod_12-1024x414.png)](./media/applypackage_prod_12.png)</ept>","pos":[14166,14266],"source":"[![Progress indicator](./media/applypackage_prod_12-1024x414.png)](./media/applypackage_prod_12.png)"},{"pos":[14272,14302],"content":"Successful package application","linkify":"Successful package application","nodes":[{"content":"Successful package application","pos":[0,30]}]},{"content":"After the deployment is successfully completed, the <bpt id=\"p1\">**</bpt>Servicing<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>status<ept id=\"p2\">**</ept> field is set to <bpt id=\"p3\">**</bpt>Completed<ept id=\"p3\">**</ept>, but the <bpt id=\"p4\">**</bpt>Request status<ept id=\"p4\">**</ept> is still set to <bpt id=\"p5\">**</bpt>In progress<ept id=\"p5\">**</ept>, because the request hasn't yet been closed.","pos":[14308,14519],"source":"After the deployment is successfully completed, the **Servicing** **status** field is set to **Completed**, but the **Request status** is still set to **In progress**, because the request hasn't yet been closed."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Successful deployment: Servicing status = Completed, Request status = In progress<ept id=\"p1\">](./media/applypackage_prod_13-1024x392.png)](./media/applypackage_prod_13.png)</ept>","pos":[14520,14683],"source":"[![Successful deployment: Servicing status = Completed, Request status = In progress](./media/applypackage_prod_13-1024x392.png)](./media/applypackage_prod_13.png)"},{"pos":[14688,14825],"content":"After the Service Engineering team has finished applying the request, you must close the request by clicking <bpt id=\"p1\">**</bpt>Close servicing request<ept id=\"p1\">**</ept>.","source":"After the Service Engineering team has finished applying the request, you must close the request by clicking **Close servicing request**."},{"pos":[14830,15003],"content":"When you're closing a successful request, in the <bpt id=\"p1\">**</bpt>Edit work item details<ept id=\"p1\">**</ept> dialog box, set the <bpt id=\"p2\">**</bpt>Service request status<ept id=\"p2\">**</ept> field to <bpt id=\"p3\">**</bpt>Succeeded<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Submit<ept id=\"p4\">**</ept>.","source":"When you're closing a successful request, in the **Edit work item details** dialog box, set the **Service request status** field to **Succeeded**, and then click **Submit**."},{"pos":[15009,15041],"content":"Unsuccessful package application","linkify":"Unsuccessful package application","nodes":[{"content":"Unsuccessful package application","pos":[0,32]}]},{"content":"If package application fails, Microsoft will investigate the issue.","pos":[15047,15114]},{"content":"The <bpt id=\"p1\">**</bpt>Servicing status<ept id=\"p1\">**</ept> will indicate that package application has failed.","pos":[15115,15190],"source":" The **Servicing status** will indicate that package application has failed."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Unsuccessful package deployment: Servicing status = Failed<ept id=\"p1\">](./media/applypackage_prod_17-1024x289.png)](./media/applypackage_prod_17.png)</ept>","pos":[15191,15331],"source":"[![Unsuccessful package deployment: Servicing status = Failed](./media/applypackage_prod_17-1024x289.png)](./media/applypackage_prod_17.png)"},{"content":"When the deployment fails, Microsoft can abort the package, revert the environment to a good state, and send the request back to the customer, so that the customer can validate the environment and close the request.","pos":[15336,15551]},{"content":"If there is an issue in the package, the customer must submit a new request with the new package.","pos":[15552,15649]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Comment from Microsoft that changes were reverted, and that the customer must validate the environment<ept id=\"p1\">](./media/applypackage_prod_18-1024x346.png)](./media/applypackage_prod_18.png)</ept>","pos":[15650,15834],"source":"[![Comment from Microsoft that changes were reverted, and that the customer must validate the environment](./media/applypackage_prod_18-1024x346.png)](./media/applypackage_prod_18.png)"},{"pos":[15839,15979],"content":"When you're closing a failed request, in the <bpt id=\"p1\">**</bpt>Edit work item details<ept id=\"p1\">**</ept> dialog box, set the <bpt id=\"p2\">**</bpt>Service request status<ept id=\"p2\">**</ept> field to <bpt id=\"p3\">**</bpt>Aborted<ept id=\"p3\">**</ept>.","source":"When you're closing a failed request, in the **Edit work item details** dialog box, set the **Service request status** field to **Aborted**."},{"pos":[15982,15990],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[16001,16062],"content":"<bpt id=\"p1\">[</bpt>Install a deployable package<ept id=\"p1\">](install-deployable-package.md)</ept>","source":"[Install a deployable package](install-deployable-package.md)"}],"content":"---\n# required metadata\n\ntitle: Apply a deployable package on a Dynamics 365 for Operations system\ndescription: This tutorial walks you through the steps for applying a deployable package on a Microsoft Dynamics 365 for Operations system. This package can be either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.\nauthor: kfend\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: Lifecycle Services\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \n# ms.reviewer: 51\nms.search.scope: Operations, Platform, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 107013\nms.assetid: 341a229f-d9c3-4678-b353-d08d5b2c1caf\nms.search.region: Global\n# ms.search.industry: \nms.author: manado\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: Platform update 1\n\n---\n\n# Apply a deployable package on a Dynamics 365 for Operations system\n\nThis tutorial walks you through the steps for applying a deployable package on a Microsoft Dynamics 365 for Operations system. This package can be either a binary hotfix for Application Object Server (AOS) or a deployable package that was created in your development environment.\n\nSupported environments\n----------------------\n\nPackage deployment using automated flows in LCS are supported on the following topologies:\n\n-   **Implementation Project**: All environments (Dev, Test, Build, Demo, Sandbox, and Production) are now supported. Automated package application is self-serve on all environments except Production. For Production environments, customers must submit a request through LCS to the Service Engineering team to apply packages.\n-   **Partner Projects**: Demo- and single-box Dev/Test environments are supported.\n\nManual package deployment must be used for the following topologies. For information about manual package deployment, see [Install  a deployable package](install-deployable-package.md).\n\n-   Downloadable VHD\n-   Partner Projects: Multi-box Dev/Test topology deployments.\n\n## Key concepts\n-   **Deployable package** – A deployable package is a unit of deployment that can be applied in any Dynamics 365 for Operations environment. A deployable package can be a binary hotfix to the Application Object Server (AOS) runtime components, an updated Dynamics 365 for Operations customization package, or a new Dynamics 365 for Operations customization/application module package. [![Example of a deployable package](./media/applypackage_deployablepackage.jpg)](./media/applypackage_deployablepackage.jpg)\n-   **Runbook** – The deployment runbook is a series of steps that are generated for applying the deployable package to the target environment. Some of the steps are automated, and some are manual. AXUpdateInstaller lets you run these steps one at a time and in the correct order. [![Example of a deployment runbook](./media/applypackage_runbook-1024x528.jpg)](./media/applypackage_runbook.jpg)\n-   **AXUpdateInstaller** – When you create a customization package from Microsoft Visual Studio or a Microsoft binary hotfix, the installer executable is bundled together with the deployable package. The installer generates the runbook for the specified topology. The installer can also run steps in order, according to the runbook for a specific topology.\n\n## Supported package types\n-   **AOT deployable package** – A deployable package that is generated after the application source code is applied, any conflicts are resolved, and the code is compiled.\n-   **Binary package** – A deployable package that contains binary dynamic-link libraries (DLLs) that the platform and application depend on.\n-   **Combined Retail deployable package** – A combined deployable package is a combination of various retail packages that are generated after the Retail code is combined.\n-   **Merged package** –** **A package that is created by merging one package of each type. For example, one Binary package, one AOT package, and one Retail package. The packages are merged in the Asset Library for the project in LCS.\n\n## Prerequisite steps\n-   **Ensure that the package to be applied is valid**: When a package is uploaded to the Asset Library, it is not analyzed and selecting on the package shows the package state to be Not Validated in the right hand pane. Once a package has been validated and it passes the validation, only then can it be applied to an environment using the below flows. The state of the package will be updated in the Asset Library to indicate whether it is valid or not. This is important to ensure that the Production environment does not get affected by packages that don't meet the guidelines.\n    -   Kind of validations:\n        -   Basic package format validations\n        -   Platform version checks\n        -   Types of packages\n-   **Ensure that the package is first applied on sandbox environment before being applied on the Production environment**: In order to ensure that the Production environment is always in a good state, we want to make sure that the package is tested on a sandbox environment before it gets applied to Production. Hence, make sure the package is first applied using the automated flows in sandbox before it is applied in Production.\n-   **If you want to apply multiple packages, then create a merged package that can be applied first on a sandbox, followed by the Production**: Applying a single package on an average environment takes about 5 hours of downtime. Instead of taking additional hours of downtime for multiple packages, we have added a feature that enables you to combine a single package of each type. So if you select a binary package and an application deployable package in the asset library, it enables a button called **Merge** in the toolbar. Clicking on this button will allow you to merge these two packages into a single package reducing the total downtime to half.\n\n## Apply package on demo/dev/test/build/sandbox environments by using LCS\n**Note:** Package application causes system downtime. All the relevant services will be stopped, and you won't be able to use your environments while the package is being applied.\n\n1.  Download a hotfix from LCS. For information about how to download a hotfix from LCS, see [Download hotfixes from Lifecycle Services](../migration-upgrade/download-hotfix-lcs.md).\n    -   For a binary hotfix, upload the hotfix directly to the Asset library.\n    -   For an application/X++ hotfix, apply the package in a dev environment. After you resolve any conflicts, generate a deployable package from Visual Studio, and upload the package to the Asset library. For information about how to upload to the Asset library and create a deployable package, see [Create and apply a deployable package](create-apply-deployable-package.md).\n\n2.  Open the **Environment details** view for the environment where you want to apply the package.\n3.  Click **Maintain** &gt; **Apply updates** to apply an update.\n4.  Select the package to apply. The filter at the top helps filtering through the list.\n5.  Click **Apply**. Notice that the status in the upper right of the **Environment details** view changes to **Queued**, and that an **Environment updates** section now shows the progress of the package. [![parallelexecutionsandbox\\_queuedstate](./media/parallelexecutionsandbox_queuedstate.jpg)](./media/parallelexecutionsandbox_queuedstate.jpg)\n6.  Refresh the page to see the progress of the package application. Notice that the servicing status is **In Progress**, and the environment status is **Servicing**. [![parallelexecutionsandbox\\_servicingstate](./media/parallelexecutionsandbox_servicingstate.png)](./media/parallelexecutionsandbox_servicingstate.png)\n7.  Continue to refresh the page to see the status updates for the package application request. When the package has been applied, the environment status changes to **Deployed**, and the servicing status changes to **Completed**. [![parallelexecutionsandbox\\_signedoffstate](./media/parallelexecutionsandbox_signedoffstate.png)](./media/parallelexecutionsandbox_signedoffstate.png)\n8.  To sign off on the package application, click **Sign off** if there are no issues. If issues occurred when you applied the package, click **Sign off with issues**.\n\n### Troubleshooting\n\n#### General troubleshooting/diagnostics\n\nIf package application isn't successful, you can download either the logs or the runbook to see the detailed logs. You can also use Remote Desktop Protocol (RDP) to establish a remote connection to an environment to fix issues. If you must report the issue to Microsoft, be sure to include the activity ID that is reported in the **Environment updates** section. [ ](./media/applypackage_sandbox_10.png)[![parallelexecutionsandbox\\_troubleshooting](./media/parallelexecutionsandbox_troubleshooting.jpg)](./media/parallelexecutionsandbox_troubleshooting.jpg)\n\n#### Using the logs\n\n1.  Download the logs.\n2.  Unzip the log files.\n3.  Select the role that had the step failure, such as AOS or BI.\n4.  Select the virtual machine (VM) where the step failed. This information appears in the **Machine name** column in the **Environment updates** section.\n5.  In the logs for the VM, select the folder that corresponds to the step where the issue occurred. The folder name identifies the step that each folder corresponds to. For example, if the issue occurred in the executing a step, select the **ExecuteRunbook\\*** folder.\n\nFor example, if the folder name is ExecuteRunbook-b0c5c413-dae3-4a7a-a0c4-d558614f7e98-1\\_I0\\_R0, the step number is highlighted and is the number after the GUID.\n\n#### Package failure\n\nIf package application fails, you have two options:\n\n-   Click **Resume** to retry the failed operation.\n\n[![parallelexecutionsandbox\\_failedstate](./media/parallelexecutionsandbox_failedstate.jpg)](./media/parallelexecutionsandbox_failedstate.jpg)\n\n-   Click **Abort** to stop package application. **Note:** If you click **Abort**, you don't roll back the changes that have already been made to your environment. To proceed, you must fix the issue. [![Message box that appears when you abort package application](./media/applypackage_sandbox_13-1024x274.png)](./media/applypackage_sandbox_13.png)\n\n## Apply package on a Production environment by using LCS\nIn a Production environment, package application through LCS is not self-serve like it is for a Sandbox or other environment types. Customers and partners must submit a request to the Service Engineering team to apply a package when the customer is ready to take the downtime. \n\n1.  Download a hotfix from LCS. For information about how to download a hotfix from LCS, see [Download hotfixes from Lifecycle Services](../migration-upgrade/download-hotfix-lcs.md).\n    -   For a binary hotfix, upload the hotfix directly to the Asset library.\n    -   For an application/X++ hotfix, apply the package in a dev environment. After you resolve any conflicts, generate a deployable package from Visual Studio, and upload the package to the Asset library. For information about how to upload to the Asset library and create a deployable package, see [Create and apply a deployable package](create-apply-deployable-package.md).\n\n2.  On the LCS **Asset library** page, on the tab that corresponds to the asset type (**Software deployable package**), select a package, and then click **Release candidate**.\n3.  Apply the package on a Sandbox environment using the instructions above.\n4.  After the package is successfully applied and signed off in sandbox, open the Asset Library and mark the package as** Release Candidate**.\n5.  Open the **Environment details** view for the production environment where you want to apply the package.\n6.  Click **Maintain** &gt; **Apply updates** to apply the package.\n7.  Select the type of package to apply.\n8.  Select the package to apply in your production environment, and then click **Schedule** to submit a request to the Service Engineering team to apply it. **Note:** The list of packages includes only the packages that have been successfully signed off in the sandbox environment, and that have been marked as release candidates.\n9.  Specify the date and time when you want to schedule package application, click **Submit**, and then click **OK** to confirm. Note that your environments will be down and unavailable to perform business while the package is being applied.\n10. Refresh the page. Two fields on the page indicate the status of the request.\n    -   **Request status** – This field indicates the status of the request that you submitted to Microsoft.\n    -   **Actionable by** – This field indicates who needs to take action.\n\n    [![Request status and Actionable by fields](./media/applypackage_prod_7-1024x269.png)](./media/applypackage_prod_7.png)\n11. The Service Engineering team can either accept or deny the request.\n    -   If the request is accepted, the Service Engineering team begins to update the environment. [![Accepted request: Request status = Request accepted, Actionable by = Microsoft](./media/applypackage_prod_9-1024x384.png)](./media/applypackage_prod_9.png)\n    -   If the request is denied, Microsoft informs the customer about the reason for the denial and the action that the customer must take. The customer can then reschedule the request, change the package, or cancel the request. [![Denied request: Request status = Request denied, Actionable by = Customer/Partner](./media/applypackage_prod_8-1024x322.png)](./media/applypackage_prod_8.png)\n\n    At any time, the customer can use the **Comments** field to post comments to the request. [![Example of comments that are posted to a request](./media/applypackage_prod_10-1024x336.png)](./media/applypackage_prod_10.png)\n12. After the environment is serviced, you can monitor the status. The **Servicing status** field indicates the status of the package application. [![Servicing status and Request status fields](./media/applypackage_prod_11-1024x399.png)](./media/applypackage_prod_11.png) You can also see the number of steps that have been run, out of the total number of steps that are available. [![Progress indicator](./media/applypackage_prod_12-1024x414.png)](./media/applypackage_prod_12.png)\n\n### Successful package application\n\n-   After the deployment is successfully completed, the **Servicing** **status** field is set to **Completed**, but the **Request status** is still set to **In progress**, because the request hasn't yet been closed. [![Successful deployment: Servicing status = Completed, Request status = In progress](./media/applypackage_prod_13-1024x392.png)](./media/applypackage_prod_13.png)\n-   After the Service Engineering team has finished applying the request, you must close the request by clicking **Close servicing request**.\n-   When you're closing a successful request, in the **Edit work item details** dialog box, set the **Service request status** field to **Succeeded**, and then click **Submit**.\n\n### Unsuccessful package application\n\n-   If package application fails, Microsoft will investigate the issue. The **Servicing status** will indicate that package application has failed. [![Unsuccessful package deployment: Servicing status = Failed](./media/applypackage_prod_17-1024x289.png)](./media/applypackage_prod_17.png)\n-   When the deployment fails, Microsoft can abort the package, revert the environment to a good state, and send the request back to the customer, so that the customer can validate the environment and close the request. If there is an issue in the package, the customer must submit a new request with the new package. [![Comment from Microsoft that changes were reverted, and that the customer must validate the environment](./media/applypackage_prod_18-1024x346.png)](./media/applypackage_prod_18.png)\n-   When you're closing a failed request, in the **Edit work item details** dialog box, set the **Service request status** field to **Aborted**.\n\n\nSee also\n--------\n\n[Install a deployable package](install-deployable-package.md)\n\n"}