{"content":"---\n# required metadata\n\ntitle: Data upgrade from AX 2012 to Dynamics 365 for Operations – Pre-upgrade checklist in AX 2012\ndescription: This topic describes each task in the Microsoft Dynamics AX 2012 checklist that is associated with data upgrade to Microsoft Dynamics 365 for Operations.\nauthor: tariqbell\nmanager: AnnBe\nms.date: 05/30/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: margoc\nms.search.scope: Operations, Platform, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 106163\nms.assetid: \nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2017-05-31\nms.dyn365.ops.version: Platform update 8\n\n---\n\n# Data upgrade from AX 2012 to Dynamics 365 for Operations – Pre-upgrade checklist in AX 2012\n\n[!include[banner](../includes/banner.md)]\n\nThis topic describes each task in the Microsoft Dynamics AX 2012 checklist that is associated with data upgrade to Microsoft Dynamics 365 for Operations.\n\n> [!NOTE]\n> This topic applies to Microsoft Dynamics AX 2012 R3.\n\n## Installation\n\nTODO – add link to hotfix when it is released\n\nFor private preview, import the XPO file that is supplied.\n\n## Prepare model metadata\n\nDuring data upgrade, one goal is to maintain element IDs between the existing AX 2012 environment and the upgraded Dynamics 365 for Operations environment. To accomplish this goal, you must bring a copy of the element IDs from the AX 2012 environment into the Dynamics 365 for Operations environment. AX 2012 stores element IDs in a table that is named ModelElement. This table is in the model database, which is a separate database from the AX 2012 business data database. During an upgrade to Dynamics 365 for Operations, you must copy the AX 2012 database to Microsoft Azure. This process can be time-consuming. \n\nTo avoid copying the whole model database to Azure SQL Database, use the following procedure to replicate the ModelElement table in the business data database. Later, during data upgrade runs, the database synchronization process will retrieve the required information from this replicated table and make sure that element IDs are maintained in the upgraded Dynamics 365 for Operations environment.\n\n1. In the Dynamics 365 for Operations data upgrade checklist, click **Prepare model metadata**.\n2. When you’re prompted, click **Yes**.\n3. Wait for the copy process to be completed.\n\nIf the process is successful, the task is marked as completed.\n\n## Prepare security role metadata\n\nAnother goal during data upgrade is to preserve security role assignments. This task resembles the previous “Prepare model metadata” task. Security role information that is stored in the AX 2012 model database must be copied to the AX 2012 business data database, so that the information is preserved in the Dynamics 365 for Operations environment after upgrade. During data upgrade runs, the same security role will be restored in the upgraded Dynamics 365 for Operations environment.\n\n1. In the Dynamics 365 for Operations data upgrade checklist, click **Prepare security role metadata**.\n1. When you’re prompted, click **Yes**.\n1. Wait for the copy process to be completed.\n\nIf the process is successful, the task is marked as completed.\n\n## Setup user mapping\n\nIn AX 2012, users are authenticated against an on-premises Active Directory server. However, in Dynamics 365 for Operations, users are authenticated against Azure Active Directory (Azure AD). This task provides a form where you can map existing AX 2012 users to equivalent Azure AD users. The AX 2012 users will then be able to access Dynamics 365 for Operations.\n\n1. In the Dynamics 365 for Operations data upgrade checklist, click **Setup user mapping**.\n1. The **User info email mapping** form appears. Follow one of these steps to fill in the grid:\n\n    - Import users from AX 2012, and then manually fill in the Azure AD email address:\n\n        1. Click **Import from AX**. The grid is filled with existing users.\n        1. For each user, enter the corresponding Azure AD email address, as shown in the following illustration.\n\n            ![Azure AD email addresses for AX 2012 users](media/userInfoEmailMapping.png)\n\n    - Import users from a file. This option is faster. We recommend that you use this option when many users must be updated.\n\n        1. In a comma-separated values (CSV) file, create the mapping between AX 2012 users and Azure AD email addresses. Your IT department can export a similar mapping from your on-premises Active Directory Domain Services.\n\n            ![CSV file with a mapping of AX 2012 users to Azure AD email addresses](media/userToAzureADEmailAddressMapping.png)\n\n        1. After the file is ready, click **Import from file**, browse to the file, and import it.\n\n        The grid should be filled with the mappings that you specified in the file.\n\nIf the imported file contains an entry that isn’t valid, an error file is generated.\n\nTODO add details on where error will be.\n\n## Validate baseline version\n\nRun this task to validate that the current version can be upgraded.\n\n- In the Dynamics 365 for Operations data upgrade checklist, click **Validate baseline version**.\n\nIf the baseline version is one of the supported baseline versions, the task is marked as completed.\n\nTODO, do users get an error message if version doesn’t match?\n\n## Archive retail salt data\n\nThis task is used to migrate the registry key that RetailSaltUtility uses. This tool is used for some deployments where the customer wants to inject a specific random value into the hash that is used to authenticate channel users.\n\n- In the Dynamics 365 for Operations data upgrade checklist, click **Archive retail salt data**.\n\nIf the process is successful, the task is marked as completed.\n","nodes":[{"pos":[32,123],"content":"Data upgrade from AX 2012 to Dynamics 365 for Operations – Pre-upgrade checklist in AX 2012","needQuote":true,"needEscape":true,"nodes":[{"content":"Data upgrade from AX 2012 to Dynamics 365 for Operations – Pre-upgrade checklist in AX 2012","pos":[0,91]}]},{"pos":[137,290],"content":"This topic describes each task in the Microsoft Dynamics AX 2012 checklist that is associated with data upgrade to Microsoft Dynamics 365 for Operations.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic describes each task in the Microsoft Dynamics AX 2012 checklist that is associated with data upgrade to Microsoft Dynamics 365 for Operations.","pos":[0,153]}]},{"pos":[775,866],"content":"Data upgrade from AX 2012 to Dynamics 365 for Operations – Pre-upgrade checklist in AX 2012","linkify":"Data upgrade from AX 2012 to Dynamics 365 for Operations – Pre-upgrade checklist in AX 2012","nodes":[{"content":"Data upgrade from AX 2012 to Dynamics 365 for Operations – Pre-upgrade checklist in AX 2012","pos":[0,91]}]},{"content":"This topic describes each task in the Microsoft Dynamics AX 2012 checklist that is associated with data upgrade to Microsoft Dynamics 365 for Operations.","pos":[911,1064]},{"pos":[1068,1130],"content":"[!NOTE]\nThis topic applies to Microsoft Dynamics AX 2012 R3.","leadings":["","> "],"nodes":[{"content":"This topic applies to Microsoft Dynamics AX 2012 R3.","pos":[8,60]}]},{"pos":[1135,1147],"content":"Installation","linkify":"Installation","nodes":[{"content":"Installation","pos":[0,12]}]},{"content":"TODO – add link to hotfix when it is released","pos":[1149,1194]},{"content":"For private preview, import the XPO file that is supplied.","pos":[1196,1254]},{"pos":[1259,1281],"content":"Prepare model metadata","linkify":"Prepare model metadata","nodes":[{"content":"Prepare model metadata","pos":[0,22]}]},{"content":"During data upgrade, one goal is to maintain element IDs between the existing AX 2012 environment and the upgraded Dynamics 365 for Operations environment.","pos":[1283,1438]},{"content":"To accomplish this goal, you must bring a copy of the element IDs from the AX 2012 environment into the Dynamics 365 for Operations environment.","pos":[1439,1583]},{"content":"AX 2012 stores element IDs in a table that is named ModelElement.","pos":[1584,1649]},{"content":"This table is in the model database, which is a separate database from the AX 2012 business data database.","pos":[1650,1756]},{"content":"During an upgrade to Dynamics 365 for Operations, you must copy the AX 2012 database to Microsoft Azure.","pos":[1757,1861]},{"content":"This process can be time-consuming.","pos":[1862,1897]},{"content":"To avoid copying the whole model database to Azure SQL Database, use the following procedure to replicate the ModelElement table in the business data database.","pos":[1900,2059]},{"content":"Later, during data upgrade runs, the database synchronization process will retrieve the required information from this replicated table and make sure that element IDs are maintained in the upgraded Dynamics 365 for Operations environment.","pos":[2060,2298]},{"pos":[2303,2395],"content":"In the Dynamics 365 for Operations data upgrade checklist, click <bpt id=\"p1\">**</bpt>Prepare model metadata<ept id=\"p1\">**</ept>.","source":"In the Dynamics 365 for Operations data upgrade checklist, click **Prepare model metadata**."},{"pos":[2399,2435],"content":"When you’re prompted, click <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept>.","source":"When you’re prompted, click **Yes**."},{"content":"Wait for the copy process to be completed.","pos":[2439,2481]},{"content":"If the process is successful, the task is marked as completed.","pos":[2483,2545]},{"pos":[2550,2580],"content":"Prepare security role metadata","linkify":"Prepare security role metadata","nodes":[{"content":"Prepare security role metadata","pos":[0,30]}]},{"content":"Another goal during data upgrade is to preserve security role assignments.","pos":[2582,2656]},{"content":"This task resembles the previous “Prepare model metadata” task.","pos":[2657,2720]},{"content":"Security role information that is stored in the AX 2012 model database must be copied to the AX 2012 business data database, so that the information is preserved in the Dynamics 365 for Operations environment after upgrade.","pos":[2721,2944]},{"content":"During data upgrade runs, the same security role will be restored in the upgraded Dynamics 365 for Operations environment.","pos":[2945,3067]},{"pos":[3072,3172],"content":"In the Dynamics 365 for Operations data upgrade checklist, click <bpt id=\"p1\">**</bpt>Prepare security role metadata<ept id=\"p1\">**</ept>.","source":"In the Dynamics 365 for Operations data upgrade checklist, click **Prepare security role metadata**."},{"pos":[3176,3212],"content":"When you’re prompted, click <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept>.","source":"When you’re prompted, click **Yes**."},{"content":"Wait for the copy process to be completed.","pos":[3216,3258]},{"content":"If the process is successful, the task is marked as completed.","pos":[3260,3322]},{"pos":[3327,3345],"content":"Setup user mapping","linkify":"Setup user mapping","nodes":[{"content":"Setup user mapping","pos":[0,18]}]},{"content":"In AX 2012, users are authenticated against an on-premises Active Directory server.","pos":[3347,3430]},{"content":"However, in Dynamics 365 for Operations, users are authenticated against Azure Active Directory (Azure AD).","pos":[3431,3538]},{"content":"This task provides a form where you can map existing AX 2012 users to equivalent Azure AD users.","pos":[3539,3635]},{"content":"The AX 2012 users will then be able to access Dynamics 365 for Operations.","pos":[3636,3710]},{"pos":[3715,3803],"content":"In the Dynamics 365 for Operations data upgrade checklist, click <bpt id=\"p1\">**</bpt>Setup user mapping<ept id=\"p1\">**</ept>.","source":"In the Dynamics 365 for Operations data upgrade checklist, click **Setup user mapping**."},{"content":"The <bpt id=\"p1\">**</bpt>User info email mapping<ept id=\"p1\">**</ept> form appears.","pos":[3807,3852],"source":"The **User info email mapping** form appears."},{"content":"Follow one of these steps to fill in the grid:","pos":[3853,3899]},{"content":"Import users from AX 2012, and then manually fill in the Azure AD email address:","pos":[3907,3987]},{"content":"Click <bpt id=\"p1\">**</bpt>Import from AX<ept id=\"p1\">**</ept>.","pos":[4000,4025],"source":"Click **Import from AX**."},{"content":"The grid is filled with existing users.","pos":[4026,4065]},{"content":"For each user, enter the corresponding Azure AD email address, as shown in the following illustration.","pos":[4077,4179]},{"content":"Azure AD email addresses for AX 2012 users","pos":[4195,4237]},{"content":"Import users from a file.","pos":[4278,4303]},{"content":"This option is faster.","pos":[4304,4326]},{"content":"We recommend that you use this option when many users must be updated.","pos":[4327,4397]},{"content":"In a comma-separated values (CSV) file, create the mapping between AX 2012 users and Azure AD email addresses.","pos":[4410,4520]},{"content":"Your IT department can export a similar mapping from your on-premises Active Directory Domain Services.","pos":[4521,4624]},{"content":"CSV file with a mapping of AX 2012 users to Azure AD email addresses","pos":[4640,4708]},{"pos":[4766,4853],"content":"After the file is ready, click <bpt id=\"p1\">**</bpt>Import from file<ept id=\"p1\">**</ept>, browse to the file, and import it.","source":"After the file is ready, click **Import from file**, browse to the file, and import it."},{"content":"The grid should be filled with the mappings that you specified in the file.","pos":[4863,4938]},{"content":"If the imported file contains an entry that isn’t valid, an error file is generated.","pos":[4940,5024]},{"content":"TODO add details on where error will be.","pos":[5026,5066]},{"pos":[5071,5096],"content":"Validate baseline version","linkify":"Validate baseline version","nodes":[{"content":"Validate baseline version","pos":[0,25]}]},{"content":"Run this task to validate that the current version can be upgraded.","pos":[5098,5165]},{"pos":[5169,5264],"content":"In the Dynamics 365 for Operations data upgrade checklist, click <bpt id=\"p1\">**</bpt>Validate baseline version<ept id=\"p1\">**</ept>.","source":"In the Dynamics 365 for Operations data upgrade checklist, click **Validate baseline version**."},{"content":"If the baseline version is one of the supported baseline versions, the task is marked as completed.","pos":[5266,5365]},{"content":"TODO, do users get an error message if version doesn’t match?","pos":[5367,5428]},{"pos":[5433,5457],"content":"Archive retail salt data","linkify":"Archive retail salt data","nodes":[{"content":"Archive retail salt data","pos":[0,24]}]},{"content":"This task is used to migrate the registry key that RetailSaltUtility uses.","pos":[5459,5533]},{"content":"This tool is used for some deployments where the customer wants to inject a specific random value into the hash that is used to authenticate channel users.","pos":[5534,5689]},{"pos":[5693,5787],"content":"In the Dynamics 365 for Operations data upgrade checklist, click <bpt id=\"p1\">**</bpt>Archive retail salt data<ept id=\"p1\">**</ept>.","source":"In the Dynamics 365 for Operations data upgrade checklist, click **Archive retail salt data**."},{"content":"If the process is successful, the task is marked as completed.","pos":[5789,5851]}]}