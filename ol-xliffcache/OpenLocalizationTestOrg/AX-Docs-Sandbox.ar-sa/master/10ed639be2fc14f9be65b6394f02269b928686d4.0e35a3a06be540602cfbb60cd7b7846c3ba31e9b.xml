{"nodes":[{"pos":[32,84],"content":"Customization Analysis Report (CAR) | Microsoft Docs","needQuote":true,"needEscape":true,"nodes":[{"content":"Customization Analysis Report (CAR) | Microsoft Docs","pos":[0,52]}]},{"pos":[98,354],"content":"This article describes how to generate a Customization Analysis Report for your model. It also describes some best practice rules that are included in the report, and provides suggestions for fixing errors and warnings that are associated with these rules.","needQuote":true,"needEscape":true,"nodes":[{"content":"This article describes how to generate a Customization Analysis Report for your model. It also describes some best practice rules that are included in the report, and provides suggestions for fixing errors and warnings that are associated with these rules.","pos":[0,256],"nodes":[{"content":"This article describes how to generate a Customization Analysis Report for your model.","pos":[0,86]},{"content":"It also describes some best practice rules that are included in the report, and provides suggestions for fixing errors and warnings that are associated with these rules.","pos":[87,256]}]}]},{"pos":[769,804],"content":"Customization Analysis Report (CAR)","linkify":"Customization Analysis Report (CAR)","nodes":[{"content":"Customization Analysis Report (CAR)","pos":[0,35]}]},{"pos":[806,848],"content":"What is the Customization Analysis Report?","linkify":"What is the Customization Analysis Report?","nodes":[{"content":"What is the Customization Analysis Report?","pos":[0,42]}]},{"content":"The Customization Analysis Report is a tool that analyzes your customization and extension models, and runs a predefined set of best practice rules.","pos":[893,1041]},{"content":"The report is one of the requirements of the solution certification process for Microsoft Dynamics 365 for Operations.","pos":[1042,1160]},{"content":"The report is in the form of a Microsoft Excel workbook.","pos":[1161,1217]},{"pos":[1222,1248],"content":"How to generate the report","linkify":"How to generate the report","nodes":[{"content":"How to generate the report","pos":[0,26]}]},{"content":"To generate the Customization Analysis Report, run the following command in a Dynamics 365 for Operations development environment.","pos":[1249,1379]},{"pos":[1526,1537],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"content":"The xppbp.exe tool is located in c:<ph id=\"ph1\">\\\\</ph>packages<ph id=\"ph2\">\\\\</ph>bin or I:<ph id=\"ph3\">\\\\</ph>AosService<ph id=\"ph4\">\\\\</ph>PackagesLocalDirectory<ph id=\"ph5\">\\\\</ph>bin.","pos":[1702,1800],"source":"The xppbp.exe tool is located in c:\\\\packages\\\\bin or I:\\\\AosService\\\\PackagesLocalDirectory\\\\bin."},{"pos":[1805,1816],"content":"Issues List","linkify":"Issues List","nodes":[{"content":"Issues List","pos":[0,11]}]},{"content":"This section describes all best practice rules (errors, warnings, or informational messages) that can appear on the <bpt id=\"p1\">**</bpt>Issues List<ept id=\"p1\">**</ept> page of the report and provides suggestions for fixing the issues.","pos":[1817,2015],"source":"This section describes all best practice rules (errors, warnings, or informational messages) that can appear on the **Issues List** page of the report and provides suggestions for fixing the issues."},{"content":"Issues are of the <bpt id=\"p1\">**</bpt>metadata<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>code<ept id=\"p2\">**</ept> type.","pos":[2016,2064],"source":" Issues are of the **metadata** or **code** type."},{"content":"For all <bpt id=\"p1\">**</bpt>code<ept id=\"p1\">**</ept> issues, keep in mind that, if the warning or error occurs in a method that you've overlaid, the lines of code that violate the rule might belong to a model in a lower layer.","pos":[2065,2255],"source":" For all **code** issues, keep in mind that, if the warning or error occurs in a method that you've overlaid, the lines of code that violate the rule might belong to a model in a lower layer."},{"content":"In that case, you're not responsible for fixing warnings and errors in code that isn't yours.","pos":[2256,2349]},{"pos":[2355,2380],"content":"BPCheckPackReturnsConnull","linkify":"BPCheckPackReturnsConnull","nodes":[{"content":"BPCheckPackReturnsConnull","pos":[0,25]}]},{"content":"Description","pos":[2732,2743]},{"content":"This rule applies to all classes that implement the <bpt id=\"p1\">**</bpt>SysPackable<ept id=\"p1\">**</ept> interface.","pos":[2754,2832],"source":"This rule applies to all classes that implement the **SysPackable** interface."},{"content":"It makes sure that the <bpt id=\"p1\">**</bpt>Pack<ept id=\"p1\">**</ept> method doesn't return <bpt id=\"p2\">**</bpt>Connull()<ept id=\"p2\">**</ept>.","pos":[2833,2901],"source":" It makes sure that the **Pack** method doesn't return **Connull()**."},{"content":"Error message","pos":[2906,2919]},{"content":"Container pack method returns connull in a Runbase derived class","pos":[2928,2992]},{"content":"Issue type/severity","pos":[3080,3099]},{"content":"Code/Warning","pos":[3102,3114]},{"content":"How to fix it","pos":[3254,3267]},{"pos":[3276,3362],"content":"Update the return value of the <bpt id=\"p1\">**</bpt>Pack<ept id=\"p1\">**</ept> method, or return <bpt id=\"p2\">**</bpt>Super()<ept id=\"p2\">**</ept> when applicable.","source":"Update the return value of the **Pack** method, or return **Super()** when applicable."},{"pos":[3431,3456],"content":"BPCheckParametersModified","linkify":"BPCheckParametersModified","nodes":[{"content":"BPCheckParametersModified","pos":[0,25]}]},{"content":"Description","pos":[3698,3709]},{"content":"This rule fails if a parameter of a method is modified inside a method.","pos":[3720,3791]},{"content":"Error message","pos":[3817,3830]},{"content":"Parameter 1% in method %1 are modified inside the method","pos":[3839,3895]},{"content":"Issue type/severity","pos":[3936,3955]},{"content":"Code/Warning","pos":[3958,3970]},{"content":"How to fix it","pos":[4055,4068]},{"content":"Refactor your code.","pos":[4077,4096]},{"content":"Parameters must be modified by the caller, not within the called method.","pos":[4097,4169]},{"pos":[4177,4191],"content":"BPCheckSQLCode","linkify":"BPCheckSQLCode","nodes":[{"content":"BPCheckSQLCode","pos":[0,14]}]},{"content":"Description","pos":[4411,4422]},{"content":"This rule fails if your X++ code contains direct SQL code.","pos":[4433,4491]},{"content":"Error message","pos":[4519,4532]},{"content":"SQL code found in method %1","pos":[4541,4568]},{"content":"Issue type/severity","pos":[4627,4646]},{"content":"Code/Warning","pos":[4649,4661]},{"content":"How to fix it","pos":[4735,4748]},{"content":"Refactor your code to use X++ to access the Dynamics 365 for Operations database.","pos":[4757,4838]},{"pos":[4846,4869],"content":"BPCheckNestedLoopInCode","linkify":"BPCheckNestedLoopInCode","nodes":[{"content":"BPCheckNestedLoopInCode","pos":[0,23]}]},{"content":"Description","pos":[5403,5414]},{"pos":[5425,5498],"content":"This rule fails if it finds a <bpt id=\"p1\">**</bpt>while select<ept id=\"p1\">**</ept> loop nested within a loop.","source":"This rule fails if it finds a **while select** loop nested within a loop."},{"content":"Error message","pos":[5668,5681]},{"content":"Nested data access loop found in %1 method","pos":[5690,5732]},{"content":"Issue type/severity","pos":[5933,5952]},{"content":"Code/Warning","pos":[5955,5967]},{"content":"How to fix it","pos":[6198,6211]},{"content":"Refactor your code to use joins instead of nested data access loops.","pos":[6220,6288]},{"content":"If you can't refactor the code without altering the business logic of your method, document an exception when you submit your Customization Analysis Report to Microsoft.","pos":[6289,6458]},{"pos":[6466,6491],"content":"BPCheckInsertMethodInLoop","linkify":"BPCheckInsertMethodInLoop","nodes":[{"content":"BPCheckInsertMethodInLoop","pos":[0,25]}]},{"content":"Description","pos":[6897,6908]},{"content":"This rules fails if it finds a call to the method <bpt id=\"p1\">**</bpt>insert<ept id=\"p1\">**</ept> nested inside a loop.","pos":[6919,7001],"source":"This rules fails if it finds a call to the method **insert** nested inside a loop."},{"content":"We recommend that you use <bpt id=\"p1\">**</bpt>InsertRecordList<ept id=\"p1\">**</ept>.","pos":[7002,7049],"source":" We recommend that you use **InsertRecordList**."},{"content":"This rule doesn't apply to InMemory tables.","pos":[7050,7093]},{"content":"Error message","pos":[7098,7111]},{"content":"Insert method can be replaced with RecordInsertList in method %1","pos":[7120,7184]},{"content":"Issue type/severity","pos":[7299,7318]},{"content":"Code/Warning","pos":[7321,7333]},{"content":"How to fix it","pos":[7500,7513]},{"pos":[7522,7599],"content":"Refactor your code to use set-based operations, such as <bpt id=\"p1\">**</bpt>InsertRecordList<ept id=\"p1\">**</ept>.","source":"Refactor your code to use set-based operations, such as **InsertRecordList**."},{"pos":[7704,7725],"content":"BPCheckSelectwithJoin","linkify":"BPCheckSelectwithJoin","nodes":[{"content":"BPCheckSelectwithJoin","pos":[0,21]}]},{"content":"Description","pos":[8269,8280]},{"pos":[8291,8367],"content":"This rule fails if it finds nested <bpt id=\"p1\">**</bpt>select<ept id=\"p1\">**</ept> statements that aren't joined.","source":"This rule fails if it finds nested **select** statements that aren't joined."},{"content":"Error message","pos":[8539,8552]},{"content":"Nested select statement in %1 method can be joined","pos":[8561,8611]},{"content":"Issue type/severity","pos":[8809,8828]},{"content":"Code/Warning","pos":[8831,8843]},{"content":"How to fix it","pos":[9079,9092]},{"content":"Refactor your code to use joins instead of a nested <bpt id=\"p1\">**</bpt>select<ept id=\"p1\">**</ept> statement.","pos":[9101,9174],"source":"Refactor your code to use joins instead of a nested **select** statement."},{"content":"If you can't refactor the code without altering the business logic of your method, document an exception when you submit your Customization Analysis Report to Microsoft.","pos":[9175,9344]},{"pos":[9352,9376],"content":"BPFunctionCallwithSelect","linkify":"BPFunctionCallwithSelect","nodes":[{"content":"BPFunctionCallwithSelect","pos":[0,24]}]},{"content":"Description","pos":[9738,9749]},{"pos":[9760,9834],"content":"This rule fails if a function call is found within a <bpt id=\"p1\">**</bpt>select<ept id=\"p1\">**</ept> statement.","source":"This rule fails if a function call is found within a **select** statement."},{"content":"Error message","pos":[9917,9930]},{"content":"Function call found in select statement in method %1","pos":[9939,9991]},{"content":"Issue type/severity","pos":[10096,10115]},{"content":"Code/Warning","pos":[10118,10130]},{"content":"How to fix it","pos":[10275,10288]},{"pos":[10297,10449],"content":"Assign the function’s return value to a local variable before you call the <bpt id=\"p1\">**</bpt>select<ept id=\"p1\">**</ept> statement, and use the local variable in the <bpt id=\"p2\">**</bpt>select<ept id=\"p2\">**</ept> statement.","source":"Assign the function’s return value to a local variable before you call the **select** statement, and use the local variable in the **select** statement."},{"pos":[10457,10483],"content":"BPCheckinvalidExecuteQuery","linkify":"BPCheckinvalidExecuteQuery","nodes":[{"content":"BPCheckinvalidExecuteQuery","pos":[0,26]}]},{"content":"Description","pos":[10761,10772]},{"pos":[10783,10893],"content":"This rule fails if a call to <bpt id=\"p1\">**</bpt>addRange<ept id=\"p1\">**</ept> is found after a call to <bpt id=\"p2\">**</bpt>super()<ept id=\"p2\">**</ept> in the <bpt id=\"p3\">**</bpt>ExecuteQuery<ept id=\"p3\">**</ept> method.","source":"This rule fails if a call to **addRange** is found after a call to **super()** in the **ExecuteQuery** method."},{"content":"Error message","pos":[10898,10911]},{"content":"Add range after super() should not be added in ExecuteQuery method for form %1","pos":[10920,10998]},{"content":"Issue type/severity","pos":[11035,11054]},{"content":"Code/Warning","pos":[11057,11069]},{"content":"How to fix it","pos":[11172,11185]},{"content":"Refactor your code to avoid this pattern.","pos":[11194,11235]},{"pos":[11312,11340],"content":"BPCheckInvalidInitFormMethod","linkify":"BPCheckInvalidInitFormMethod","nodes":[{"content":"BPCheckInvalidInitFormMethod","pos":[0,28]}]},{"content":"Description","pos":[12212,12223]},{"content":"This rule makes sure that you don't initialize form controls and data sources in a form’s <bpt id=\"p1\">**</bpt>init<ept id=\"p1\">**</ept> method before you call <bpt id=\"p2\">**</bpt>super()<ept id=\"p2\">**</ept>.","pos":[12234,12368],"source":"This rule makes sure that you don't initialize form controls and data sources in a form’s **init** method before you call **super()**."},{"content":"It fails if it finds a statement that uses <bpt id=\"p1\">**</bpt>element<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>this<ept id=\"p2\">**</ept> before the call to <bpt id=\"p3\">**</bpt>super()<ept id=\"p3\">**</ept> (<bpt id=\"p4\">**</bpt>this.aMethod()<ept id=\"p4\">**</ept> or <bpt id=\"p5\">**</bpt>element.aMethod()<ept id=\"p5\">**</ept>).","pos":[12369,12513],"source":" It fails if it finds a statement that uses **element** or **this** before the call to **super()** (**this.aMethod()** or **element.aMethod()**)."},{"content":"An informational message is shown only for some allowed patterns, such as initializing number sequences (<bpt id=\"p1\">**</bpt>numberSeqPreInit<ept id=\"p1\">**</ept>).","pos":[12514,12641],"source":" An informational message is shown only for some allowed patterns, such as initializing number sequences (**numberSeqPreInit**)."},{"content":"Error message","pos":[12646,12659]},{"content":"Form element statements should not be used before super() in init method of form %1","pos":[12668,12751]},{"content":"Issue type/severity","pos":[13080,13099]},{"content":"Code/Info or Warning","pos":[13102,13122]},{"content":"How to fix it","pos":[13514,13527]},{"content":"Refactor your code to access form controls and data after the call to <bpt id=\"p1\">**</bpt>super()<ept id=\"p1\">**</ept>.","pos":[13536,13618],"source":"Refactor your code to access form controls and data after the call to **super()**."},{"content":"If your code doesn't initialize any form control and doesn't access any form data sources before <bpt id=\"p1\">**</bpt>super()<ept id=\"p1\">**</ept>, document an exception when you submit your Customization Analysis Report to Microsoft.","pos":[13619,13815],"source":" If your code doesn't initialize any form control and doesn't access any form data sources before **super()**, document an exception when you submit your Customization Analysis Report to Microsoft."},{"pos":[13951,13967],"content":"BPCheckEmptyLoop","linkify":"BPCheckEmptyLoop","nodes":[{"content":"BPCheckEmptyLoop","pos":[0,16]}]},{"content":"Description","pos":[14141,14152]},{"content":"This rule fails if it finds loops that have no statements.","pos":[14163,14221]},{"content":"Error message","pos":[14226,14239]},{"content":"Empty loop found in method %1 in class %2","pos":[14248,14289]},{"content":"Issue type/severity","pos":[14311,14330]},{"content":"Code/Warning","pos":[14333,14345]},{"content":"How to fix it","pos":[14396,14409]},{"content":"Remove the loop from your code.","pos":[14418,14449]},{"pos":[14484,14505],"content":"BPCheckLockQueryRange","linkify":"BPCheckLockQueryRange","nodes":[{"content":"BPCheckLockQueryRange","pos":[0,21]}]},{"content":"Description","pos":[14831,14842]},{"pos":[14853,14982],"content":"This rule fails if the code calls <bpt id=\"p1\">**</bpt>AddRange<ept id=\"p1\">**</ept> in the <bpt id=\"p2\">**</bpt>init<ept id=\"p2\">**</ept> method of the form, and doesn't set the range as locked or hidden.","source":"This rule fails if the code calls **AddRange** in the **init** method of the form, and doesn't set the range as locked or hidden."},{"content":"Error message","pos":[14992,15005]},{"content":"Range should be locked or hidden in form %1","pos":[15014,15057]},{"content":"Issue type/severity","pos":[15153,15172]},{"content":"Code/Warning","pos":[15175,15187]},{"content":"How to fix it","pos":[15314,15327]},{"pos":[15336,15470],"content":"Add <bpt id=\"p1\">**</bpt>QueryBuildRange.status(RangeStatus::Locked)<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>QueryBuildRange.status(RangeStatus::Hidden)<ept id=\"p2\">**</ept> after the call to <bpt id=\"p3\">**</bpt>AddRange<ept id=\"p3\">**</ept>.","source":"Add **QueryBuildRange.status(RangeStatus::Locked)** or **QueryBuildRange.status(RangeStatus::Hidden)** after the call to **AddRange**."},{"pos":[15478,15508],"content":"BPCheckSkipStatementValidation","linkify":"BPCheckSkipStatementValidation","nodes":[{"content":"BPCheckSkipStatementValidation","pos":[0,30]}]},{"content":"Description","pos":[15610,15621]},{"content":"This rule reports an informational message if it finds a set-based operation that doesn't have <bpt id=\"p1\">&lt;strong&gt;</bpt>Skip<ept id=\"p1\">&lt;/strong&gt;</ept> statements.","pos":[15631,15759],"source":"This rule reports an informational message if it finds a set-based operation that doesn't have <strong>Skip</strong> statements."},{"content":"When <bpt id=\"p1\">&lt;strong&gt;</bpt>update_recordset<ept id=\"p1\">&lt;/strong&gt;</ept> is found, the rule checks for <bpt id=\"p2\">&lt;strong&gt;</bpt>skipDataMethods(true)<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[15769,15877],"source":"When <strong>update_recordset</strong> is found, the rule checks for <strong>skipDataMethods(true)</strong>."},{"content":"The rule applies only when the <bpt id=\"p1\">&lt;strong&gt;</bpt>update<ept id=\"p1\">&lt;/strong&gt;</ept> method on the table is overridden.","pos":[15878,15967],"source":" The rule applies only when the <strong>update</strong> method on the table is overridden."},{"content":"When <bpt id=\"p1\">&lt;strong&gt;</bpt>insert_recordset<ept id=\"p1\">&lt;/strong&gt;</ept> is found, the rule checks for <bpt id=\"p2\">&lt;strong&gt;</bpt>skipDataMethods(true)<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[15977,16085],"source":"When <strong>insert_recordset</strong> is found, the rule checks for <strong>skipDataMethods(true)</strong>."},{"content":"The rule applies only when the <bpt id=\"p1\">&lt;strong&gt;</bpt>insert<ept id=\"p1\">&lt;/strong&gt;</ept> method on the table is overridden.","pos":[16086,16175],"source":" The rule applies only when the <strong>insert</strong> method on the table is overridden."},{"content":"When <bpt id=\"p1\">&lt;strong&gt;</bpt>delete_from<ept id=\"p1\">&lt;/strong&gt;</ept> is found, the rule checks for <bpt id=\"p2\">&lt;strong&gt;</bpt>skipDeleteActions(true)<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[16185,16290],"source":"When <strong>delete_from</strong> is found, the rule checks for <strong>skipDeleteActions(true)</strong>."},{"content":"The rule applies only when the <bpt id=\"p1\">&lt;strong&gt;</bpt>insert<ept id=\"p1\">&lt;/strong&gt;</ept> method on the table is overridden.","pos":[16291,16380],"source":" The rule applies only when the <strong>insert</strong> method on the table is overridden."},{"content":"This is an informational message that highlights the need to call <bpt id=\"p1\">&lt;strong&gt;</bpt>skip<ept id=\"p1\">&lt;/strong&gt;</ept> methods to take full advantage of the performance gains of set-based operations.","pos":[16392,16560],"source":"\nThis is an informational message that highlights the need to call <strong>skip</strong> methods to take full advantage of the performance gains of set-based operations."},{"content":"If <bpt id=\"p1\">&lt;strong&gt;</bpt>skip<ept id=\"p1\">&lt;/strong&gt;</ept> methods aren't used, the execution falls back to a row-by-row operation.","pos":[16561,16658],"source":" If <strong>skip</strong> methods aren't used, the execution falls back to a row-by-row operation."},{"content":"Error message","pos":[16692,16705]},{"content":"Set-based operation must invoke Skip statements in method %1 in class %2; otherwise, execution will fall back to a row by row operation.","pos":[16715,16851]},{"content":"Issue type/severity","pos":[16884,16903]},{"content":"Code/Information","pos":[16913,16929]},{"content":"How to fix it","pos":[16963,16976]},{"content":"Use <bpt id=\"p1\">&lt;strong&gt;</bpt>skipDataMethods(true)<ept id=\"p1\">&lt;/strong&gt;</ept> or <bpt id=\"p2\">&lt;strong&gt;</bpt>skipDeleteActions(true)<ept id=\"p2\">&lt;/strong&gt;</ept> when applicable.","pos":[16986,17089],"source":"Use <strong>skipDataMethods(true)</strong> or <strong>skipDeleteActions(true)</strong> when applicable."},{"pos":[17124,17144],"content":"BPCheckNoTTSTryBlock","linkify":"BPCheckNoTTSTryBlock","nodes":[{"content":"BPCheckNoTTSTryBlock","pos":[0,20]}]},{"content":"Description","pos":[17246,17257]},{"content":"This rule fails if it finds a <bpt id=\"p1\">&lt;strong&gt;</bpt>try<ept id=\"p1\">&lt;/strong&gt;</ept> statement within a <bpt id=\"p2\">&lt;strong&gt;</bpt>tts<ept id=\"p2\">&lt;/strong&gt;</ept> block that isn't handled correctly.","pos":[17267,17393],"source":"This rule fails if it finds a <strong>try</strong> statement within a <strong>tts</strong> block that isn't handled correctly."},{"content":"Error message","pos":[17427,17440]},{"content":"Tts block with Try statement does not explicitly catch exceptions in method %1","pos":[17450,17528]},{"content":"Issue type/severity","pos":[17561,17580]},{"content":"Code/Warning","pos":[17590,17602]},{"content":"How to fix it","pos":[17636,17649]},{"content":"The following examples show when the rule will fail or pass.","pos":[17659,17719]},{"content":"Use these examples as guidelines to refactor your code.","pos":[17720,17775]},{"pos":[17987,18010],"content":"BPCheckEmptyTableMethod","linkify":"BPCheckEmptyTableMethod","nodes":[{"content":"BPCheckEmptyTableMethod","pos":[0,23]}]},{"content":"Description","pos":[18390,18401]},{"content":"This rule checks for table methods that have no source code.","pos":[18412,18472]},{"content":"Empty table methods cause record-set operations on the table to fall back to a row-by-row operation.","pos":[18473,18573]},{"content":"Error message","pos":[18578,18591]},{"content":"%1 table has an empty %2 method","pos":[18600,18631]},{"content":"Issue type/severity","pos":[18766,18785]},{"content":"Code/Warning","pos":[18788,18800]},{"content":"How to fix it","pos":[18954,18967]},{"content":"Remove this method from your code.","pos":[18976,19010]},{"pos":[19145,19169],"content":"BPCheckBatchJobsEnbabled","linkify":"BPCheckBatchJobsEnbabled","nodes":[{"content":"BPCheckBatchJobsEnbabled","pos":[0,24]}]},{"content":"Description","pos":[19463,19474]},{"pos":[19485,19603],"content":"This rule makes sure that all classes that extend <bpt id=\"p1\">**</bpt>RunBaseBatch<ept id=\"p1\">**</ept> have a <bpt id=\"p2\">**</bpt>canGoBatch<ept id=\"p2\">**</ept> method that returns <bpt id=\"p3\">**</bpt>true<ept id=\"p3\">**</ept>.","source":"This rule makes sure that all classes that extend **RunBaseBatch** have a **canGoBatch** method that returns **true**."},{"content":"Error message","pos":[19608,19621]},{"content":"Custom job is not batch-enabled in class %1","pos":[19630,19673]},{"content":"Issue type/severity","pos":[19753,19772]},{"content":"Code/Warning","pos":[19775,19787]},{"content":"How to fix it","pos":[19898,19911]},{"pos":[19920,19989],"content":"The <bpt id=\"p1\">**</bpt>canGoBatch<ept id=\"p1\">**</ept> method must return <bpt id=\"p2\">**</bpt>true<ept id=\"p2\">**</ept> for all batch classes.","source":"The **canGoBatch** method must return **true** for all batch classes."},{"pos":[20046,20072],"content":"BPCheckDisplayMethodCached","linkify":"BPCheckDisplayMethodCached","nodes":[{"content":"BPCheckDisplayMethodCached","pos":[0,26]}]},{"content":"Description","pos":[20174,20185]},{"content":"For each control that is bound to a data method, this rules fails if one of these conditions is met:","pos":[20195,20295],"source":"For each control that is bound to a data method, this rules fails if one of these conditions is met:\n"},{"content":"The <bpt id=\"p1\">&lt;strong&gt;</bpt>Cache Data Method<ept id=\"p1\">&lt;/strong&gt;</ept> property is set to <bpt id=\"p2\">&lt;strong&gt;</bpt>Auto<ept id=\"p2\">&lt;/strong&gt;</ept>, the corresponding table <bpt id=\"p3\">&lt;strong&gt;</bpt>display<ept id=\"p3\">&lt;/strong&gt;</ept><ph id=\"ph1\">/</ph><bpt id=\"p4\">&lt;strong&gt;</bpt>edit<ept id=\"p4\">&lt;/strong&gt;</ept> method doesn't have the <bpt id=\"p5\">&lt;strong&gt;</bpt>SysClientCacheDataMethodAttribute<ept id=\"p5\">&lt;/strong&gt;</ept>, and the <bpt id=\"p6\">&lt;strong&gt;</bpt>init<ept id=\"p6\">&lt;/strong&gt;</ept> method of the data source doesn't use <bpt id=\"p7\">&lt;strong&gt;</bpt>CacheAddMethod<ept id=\"p7\">&lt;/strong&gt;</ept>.","pos":[20305,20633],"source":"The <strong>Cache Data Method</strong> property is set to <strong>Auto</strong>, the corresponding table <strong>display</strong>/<strong>edit</strong> method doesn't have the <strong>SysClientCacheDataMethodAttribute</strong>, and the <strong>init</strong> method of the data source doesn't use <strong>CacheAddMethod</strong>."},{"content":"The <bpt id=\"p1\">&lt;strong&gt;</bpt>Cache Data Method<ept id=\"p1\">&lt;/strong&gt;</ept> property is set to <bpt id=\"p2\">&lt;strong&gt;</bpt>No<ept id=\"p2\">&lt;/strong&gt;</ept>, and the <bpt id=\"p3\">&lt;strong&gt;</bpt>init<ept id=\"p3\">&lt;/strong&gt;</ept> method of the data source doesn't use <bpt id=\"p4\">&lt;strong&gt;</bpt>CacheAddMethod<ept id=\"p4\">&lt;/strong&gt;</ept>.","pos":[20643,20822],"source":"The <strong>Cache Data Method</strong> property is set to <strong>No</strong>, and the <strong>init</strong> method of the data source doesn't use <strong>CacheAddMethod</strong>."},{"content":"Error message","pos":[20867,20880]},{"content":"Display method %1 in form %2 not cached","pos":[20890,20929]},{"content":"Issue type/severity","pos":[20962,20981]},{"content":"Code/Warning","pos":[20991,21003]},{"content":"How to fix it","pos":[21037,21050]},{"content":"You can fix this warning by using one of the following patterns:","pos":[21060,21124],"source":"You can fix this warning by using one of the following patterns:\n"},{"content":"Set the <bpt id=\"p1\">&lt;strong&gt;</bpt>Cache Data Method<ept id=\"p1\">&lt;/strong&gt;</ept> property to <bpt id=\"p2\">&lt;strong&gt;</bpt>Yes<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[21134,21210],"source":"Set the <strong>Cache Data Method</strong> property to <strong>Yes</strong>."},{"content":"Set the <bpt id=\"p1\">&lt;strong&gt;</bpt>Cache Data Method<ept id=\"p1\">&lt;/strong&gt;</ept> property to <bpt id=\"p2\">&lt;strong&gt;</bpt>Auto<ept id=\"p2\">&lt;/strong&gt;</ept>, and mark the data method of the table with the <bpt id=\"p3\">&lt;strong&gt;</bpt>SysClientCacheDataMethodAttribute<ept id=\"p3\">&lt;/strong&gt;</ept> attribute.","pos":[21223,21409],"source":"Set the <strong>Cache Data Method</strong> property to <strong>Auto</strong>, and mark the data method of the table with the <strong>SysClientCacheDataMethodAttribute</strong> attribute."},{"content":"Here is an example.","pos":[21410,21429]},{"content":"Use <bpt id=\"p1\">&lt;strong&gt;</bpt>CacheAddMethod<ept id=\"p1\">&lt;/strong&gt;</ept> in the <bpt id=\"p2\">&lt;strong&gt;</bpt>init<ept id=\"p2\">&lt;/strong&gt;</ept> method of the form to mark the method as cached.","pos":[21554,21667],"source":"Use <strong>CacheAddMethod</strong> in the <strong>init</strong> method of the form to mark the method as cached."},{"pos":[21713,21734],"content":"BPCheckSQLQueryInInit","linkify":"BPCheckSQLQueryInInit","nodes":[{"content":"BPCheckSQLQueryInInit","pos":[0,21]}]},{"content":"Description","pos":[22152,22163]},{"content":"This rule fails if a data access query that has a <bpt id=\"p1\">**</bpt>while<ept id=\"p1\">**</ept> loop is found in the <bpt id=\"p2\">**</bpt>init<ept id=\"p2\">**</ept> method of a form.","pos":[22174,22281],"source":"This rule fails if a data access query that has a **while** loop is found in the **init** method of a form."},{"content":"This pattern could cause performance issues when the form is initalized.","pos":[22282,22354]},{"content":"Error message","pos":[22359,22372]},{"content":"SQL query with while loop was found in init method of form %1","pos":[22381,22442]},{"content":"Issue type/severity","pos":[22566,22585]},{"content":"Code/Warning","pos":[22588,22600]},{"content":"How to fix it","pos":[22773,22786]},{"content":"Refactor your code to avoid this pattern.","pos":[22795,22836]},{"pos":[22983,23006],"content":"BPCheckNewQueryWithForm","linkify":"BPCheckNewQueryWithForm","nodes":[{"content":"BPCheckNewQueryWithForm","pos":[0,23]}]},{"content":"Description","pos":[23286,23297]},{"pos":[23308,23419],"content":"This rule fails if it finds the <bpt id=\"p1\">**</bpt>new Query()<ept id=\"p1\">**</ept> statement in the <bpt id=\"p2\">**</bpt>init<ept id=\"p2\">**</ept> or <bpt id=\"p3\">**</bpt>executeQuery<ept id=\"p3\">**</ept> method of a form.","source":"This rule fails if it finds the **new Query()** statement in the **init** or **executeQuery** method of a form."},{"content":"Error message","pos":[23424,23437]},{"content":"Data source query overridden in form method %1","pos":[23446,23492]},{"content":"Issue type/severity","pos":[23562,23581]},{"content":"Code/Warning","pos":[23584,23596]},{"content":"How to fix it","pos":[23700,23713]},{"content":"Refactor your code to avoid this pattern.","pos":[23722,23763]},{"pos":[23841,23869],"content":"BPCheckSelectForUpdateAbsent","linkify":"BPCheckSelectForUpdateAbsent","nodes":[{"content":"BPCheckSelectForUpdateAbsent","pos":[0,28]}]},{"content":"Description","pos":[24321,24332]},{"content":"This rule fails if <bpt id=\"p1\">**</bpt>Select ForUpdate<ept id=\"p1\">**</ept> is used to select records, but an update isn't being performed.","pos":[24343,24446],"source":"This rule fails if **Select ForUpdate** is used to select records, but an update isn't being performed."},{"content":"This rules doesn't apply to tables that are enabled for Optimistic Concurrency Control (OCC).","pos":[24447,24540]},{"content":"Error message","pos":[24545,24558]},{"content":"Select ForUpdate not implemented in method %1","pos":[24567,24612]},{"content":"Issue type/severity","pos":[24769,24788]},{"content":"Code/Warning","pos":[24791,24803]},{"content":"How to fix it","pos":[24993,25006]},{"pos":[25015,25123],"content":"Use <bpt id=\"p1\">**</bpt>Select<ept id=\"p1\">**</ept> instead of <bpt id=\"p2\">**</bpt>Select ForUpdate<ept id=\"p2\">**</ept>, or set the <bpt id=\"p3\">**</bpt>OCC Enabled<ept id=\"p3\">**</ept> property to <bpt id=\"p4\">**</bpt>Yes<ept id=\"p4\">**</ept> on the table.","source":"Use **Select** instead of **Select ForUpdate**, or set the **OCC Enabled** property to **Yes** on the table."},{"pos":[25220,25248],"content":"BPCheckTablePropertyMismatch","linkify":"BPCheckTablePropertyMismatch","nodes":[{"content":"BPCheckTablePropertyMismatch","pos":[0,28]}]},{"content":"Description","pos":[25350,25361]},{"content":"This rule fails when the table belongs to a table group but doesn't have the appropriate <bpt id=\"p1\">&lt;strong&gt;</bpt>Cache Lookup<ept id=\"p1\">&lt;/strong&gt;</ept> value.","pos":[25371,25496],"source":"This rule fails when the table belongs to a table group but doesn't have the appropriate <strong>Cache Lookup</strong> value."},{"content":"The rule fails if one of these conditions is met:","pos":[25497,25546],"source":" The rule fails if one of these conditions is met:\n"},{"content":"The <bpt id=\"p1\">&lt;strong&gt;</bpt>Table Group<ept id=\"p1\">&lt;/strong&gt;</ept> property is set to <bpt id=\"p2\">&lt;strong&gt;</bpt>Main<ept id=\"p2\">&lt;/strong&gt;</ept>, and the <bpt id=\"p3\">&lt;strong&gt;</bpt>Cache Lookup<ept id=\"p3\">&lt;/strong&gt;</ept> property is set to <bpt id=\"p4\">&lt;strong&gt;</bpt>NotinTTS<ept id=\"p4\">&lt;/strong&gt;</ept> or <bpt id=\"p5\">&lt;strong&gt;</bpt>EntireTable<ept id=\"p5\">&lt;/strong&gt;</ept>.","pos":[25556,25746],"source":"The <strong>Table Group</strong> property is set to <strong>Main</strong>, and the <strong>Cache Lookup</strong> property is set to <strong>NotinTTS</strong> or <strong>EntireTable</strong>."},{"content":"The <bpt id=\"p1\">&lt;strong&gt;</bpt>Table Group<ept id=\"p1\">&lt;/strong&gt;</ept> property is set to <bpt id=\"p2\">&lt;strong&gt;</bpt>Group<ept id=\"p2\">&lt;/strong&gt;</ept> or <bpt id=\"p3\">&lt;strong&gt;</bpt>Parameter<ept id=\"p3\">&lt;/strong&gt;</ept>, and the <bpt id=\"p4\">&lt;strong&gt;</bpt>Cache Lookup<ept id=\"p4\">&lt;/strong&gt;</ept> property is set to <bpt id=\"p5\">&lt;strong&gt;</bpt>NotinTTS<ept id=\"p5\">&lt;/strong&gt;</ept>.","pos":[25756,25945],"source":"The <strong>Table Group</strong> property is set to <strong>Group</strong> or <strong>Parameter</strong>, and the <strong>Cache Lookup</strong> property is set to <strong>NotinTTS</strong>."},{"content":"The <bpt id=\"p1\">&lt;strong&gt;</bpt>Table Group<ept id=\"p1\">&lt;/strong&gt;</ept> property is set to <bpt id=\"p2\">&lt;strong&gt;</bpt>WorksheetHeader<ept id=\"p2\">&lt;/strong&gt;</ept>, <bpt id=\"p3\">&lt;strong&gt;</bpt>WorksheetLine<ept id=\"p3\">&lt;/strong&gt;</ept>, or <bpt id=\"p4\">&lt;strong&gt;</bpt>Transaction<ept id=\"p4\">&lt;/strong&gt;</ept>, and the <bpt id=\"p5\">&lt;strong&gt;</bpt>Cache Lookup<ept id=\"p5\">&lt;/strong&gt;</ept> property is set to <bpt id=\"p6\">&lt;strong&gt;</bpt>Found<ept id=\"p6\">&lt;/strong&gt;</ept>, <bpt id=\"p7\">&lt;strong&gt;</bpt>FoundAndEmpty<ept id=\"p7\">&lt;/strong&gt;</ept>, or <bpt id=\"p8\">&lt;strong&gt;</bpt>EntireTable<ept id=\"p8\">&lt;/strong&gt;</ept>.","pos":[25955,26251],"source":"The <strong>Table Group</strong> property is set to <strong>WorksheetHeader</strong>, <strong>WorksheetLine</strong>, or <strong>Transaction</strong>, and the <strong>Cache Lookup</strong> property is set to <strong>Found</strong>, <strong>FoundAndEmpty</strong>, or <strong>EntireTable</strong>."},{"content":"Error message","pos":[26296,26309]},{"content":"%1 table has an invalid combination of table group and cache lookup","pos":[26319,26386]},{"content":"Issue type/severity","pos":[26419,26438]},{"content":"MetaData/Warning","pos":[26448,26464]},{"content":"How to fix it","pos":[26498,26511]},{"content":"Set an appropriate <bpt id=\"p1\">&lt;strong&gt;</bpt>Cache Lookup<ept id=\"p1\">&lt;/strong&gt;</ept> value on the table.","pos":[26521,26589],"source":"Set an appropriate <strong>Cache Lookup</strong> value on the table."},{"pos":[26624,26651],"content":"BPCheckMissingDeleteActions","linkify":"BPCheckMissingDeleteActions","nodes":[{"content":"BPCheckMissingDeleteActions","pos":[0,27]}]},{"content":"Description","pos":[27269,27280]},{"content":"This rule validates that the value of either a <bpt id=\"p1\">**</bpt>delete<ept id=\"p1\">**</ept> action or the <bpt id=\"p2\">**</bpt>On Delete<ept id=\"p2\">**</ept> property of a table relation isn't equal to <bpt id=\"p3\">**</bpt>None<ept id=\"p3\">**</ept>.","pos":[27291,27430],"source":"This rule validates that the value of either a **delete** action or the **On Delete** property of a table relation isn't equal to **None**."},{"content":"The rule isn't triggered when the related or current table is a tempDB, in memory table, reference table, staging table, or parameter table.","pos":[27431,27571]},{"content":"Error message","pos":[27576,27589]},{"content":"Delete actions missing in table %1 which is related to table %2 with relation name %3","pos":[27598,27683]},{"content":"Issue type/severity","pos":[27883,27902]},{"content":"MetaData/Warning","pos":[27905,27921]},{"content":"How to fix it","pos":[28190,28203]},{"pos":[28212,28271],"content":"Set a <bpt id=\"p1\">**</bpt>delete<ept id=\"p1\">**</ept> action value that isn't equal to <bpt id=\"p2\">**</bpt>None<ept id=\"p2\">**</ept>.","source":"Set a **delete** action value that isn't equal to **None**."},{"pos":[28500,28519],"content":"BPCheckAddressModel","linkify":"BPCheckAddressModel","nodes":[{"content":"BPCheckAddressModel","pos":[0,19]}]},{"content":"Description","pos":[28915,28926]},{"content":"This rule fails if a table field is of the <bpt id=\"p1\">**</bpt>AddressZipCodeId<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>AddressStateId<ept id=\"p2\">**</ept> type.","pos":[28937,29028],"source":"This rule fails if a table field is of the **AddressZipCodeId** or **AddressStateId** type."},{"content":"These types indicate that the code didn't uptake the newer Address framework.","pos":[29029,29106]},{"content":"Error message","pos":[29111,29124]},{"content":"Field %1 of table %2 is not part of address location model","pos":[29133,29191]},{"content":"Issue type/severity","pos":[29307,29326]},{"content":"MetaData/Warning","pos":[29329,29345]},{"content":"How to fix it","pos":[29503,29516]},{"content":"Replace these types with any other appropriate EDT type in the Directory model.","pos":[29525,29604]},{"pos":[29702,29723],"content":"BPCheckDimensionModel","linkify":"BPCheckDimensionModel","nodes":[{"content":"BPCheckDimensionModel","pos":[0,21]}]},{"content":"Description","pos":[30127,30138]},{"content":"This rule fails if a table field is of the <bpt id=\"p1\">**</bpt>Dimension<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>LedgerAccount<ept id=\"p2\">**</ept> type.","pos":[30149,30232],"source":"This rule fails if a table field is of the **Dimension** or **LedgerAccount** type."},{"content":"These types indicate that the code didn't uptake the newer Financial Dimension framework.","pos":[30233,30322]},{"content":"Error message","pos":[30327,30340]},{"content":"Field %1 of table %2 is not part of financial dimension framework","pos":[30349,30414]},{"content":"Issue type/severity","pos":[30527,30546]},{"content":"MetaData/Warning","pos":[30549,30565]},{"content":"How to fix it","pos":[30727,30740]},{"content":"Replace these types with any other appropriate EDT type in the Dimensions model.","pos":[30749,30829]},{"pos":[30930,30954],"content":"BPCheckNumberofNewFields","linkify":"BPCheckNumberofNewFields","nodes":[{"content":"BPCheckNumberofNewFields","pos":[0,24]}]},{"content":"Description","pos":[31352,31363]},{"content":"This rule verifies that no more than 10 fields were added to a table during the process of customizing or extending that table.","pos":[31374,31501]},{"content":"This rule doesn't apply to staging tables.","pos":[31502,31544]},{"content":"Error message","pos":[31549,31562]},{"content":"Number of new fields in table %1 is greater than","pos":[31571,31619]},{"content":"Issue type/severity","pos":[31746,31765]},{"content":"Metadata/Warning","pos":[31768,31784]},{"content":"How to fix it","pos":[31943,31956]},{"content":"Refactor your schema and create related tables instead of adding too many fields to an existing table.","pos":[31965,32067]},{"pos":[32143,32166],"content":"BPCheckEnumUpgradeIssue","linkify":"BPCheckEnumUpgradeIssue","nodes":[{"content":"BPCheckEnumUpgradeIssue","pos":[0,23]}]},{"content":"Description","pos":[32626,32637]},{"content":"This rule fails when the following condition is met: When you customize an enum (overlayer), new enum values are less than the maximum existing value + 10.","pos":[32648,32803]},{"content":"This rules doesn't apply to extensible enums.","pos":[32804,32849]},{"content":"Error message","pos":[32854,32867]},{"content":"Enum %1 will have upgrade issues","pos":[32876,32908]},{"content":"Issue type/severity","pos":[33082,33101]},{"content":"MetaData/Warning","pos":[33104,33120]},{"content":"How to fix it","pos":[33310,33323]},{"content":"Use larger enum values, or extend the enum.","pos":[33332,33375]},{"pos":[33541,33562],"content":"BPCheckPassiveJoinUse","linkify":"BPCheckPassiveJoinUse","nodes":[{"content":"BPCheckPassiveJoinUse","pos":[0,21]}]},{"content":"Description","pos":[33664,33675]},{"content":"This rule validates that, when a form allows for pre-loading of data, the link type of tab page data sources is passive.","pos":[33685,33805]},{"content":"The rule fails if all the following conditions are met:","pos":[33806,33861],"source":" The rule fails if all the following conditions are met:\n"},{"content":"A form has the <bpt id=\"p1\">&lt;strong&gt;</bpt>AllowPreLoading<ept id=\"p1\">&lt;/strong&gt;</ept> property set to <bpt id=\"p2\">&lt;strong&gt;</bpt>Yes<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[33871,33956],"source":"A form has the <strong>AllowPreLoading</strong> property set to <strong>Yes</strong>."},{"content":"A tab page on the form is bound to a top-level data source.","pos":[33966,34025]},{"content":"The data source’s <bpt id=\"p1\">&lt;strong&gt;</bpt>Join Source <ept id=\"p1\">&lt;/strong&gt;</ept>property is set.","pos":[34035,34098],"source":"The data source’s <strong>Join Source </strong>property is set."},{"content":"The data source’s <bpt id=\"p1\">&lt;strong&gt;</bpt>Link Type<ept id=\"p1\">&lt;/strong&gt;</ept> property isn't set to <bpt id=\"p2\">&lt;strong&gt;</bpt>Passive<ept id=\"p2\">&lt;/strong&gt;</ept>.","pos":[34108,34200],"source":"The data source’s <strong>Link Type</strong> property isn't set to <strong>Passive</strong>."},{"content":"Error message","pos":[34245,34258]},{"content":"New message suggest: “Use passive joins on data sources %1 bound to a tab page control in form %2”","pos":[34268,34366]},{"content":"Issue type/severity","pos":[34399,34418]},{"content":"MetaData/Warning","pos":[34428,34444]},{"content":"How to fix it","pos":[34478,34491]},{"content":"Set the <bpt id=\"p1\">&lt;strong&gt;</bpt>AllowPreLoading<ept id=\"p1\">&lt;/strong&gt;</ept> property to <bpt id=\"p2\">&lt;strong&gt;</bpt>No<ept id=\"p2\">&lt;/strong&gt;</ept> on the form, or use passive joins on the data source.","pos":[34501,34627],"source":"Set the <strong>AllowPreLoading</strong> property to <strong>No</strong> on the form, or use passive joins on the data source."},{"content":"Passive joins require that you explicitly program when the query of a tab page is run.","pos":[34628,34714]},{"pos":[34749,34773],"content":"BPCheckAltenateKeyAbsent","linkify":"BPCheckAltenateKeyAbsent","nodes":[{"content":"BPCheckAltenateKeyAbsent","pos":[0,24]}]},{"content":"Description","pos":[35007,35018]},{"content":"This rule verifies that tables that have a unique index have at least one alternate key.","pos":[35029,35117]},{"content":"Error message","pos":[35122,35135]},{"content":"Table %1 does not have an alternate key","pos":[35144,35183]},{"content":"Issue type/severity","pos":[35237,35256]},{"content":"MetaData/Warning","pos":[35259,35275]},{"content":"How to fix it","pos":[35352,35365]},{"pos":[35374,35451],"content":"Set the <bpt id=\"p1\">**</bpt>Alternate Key<ept id=\"p1\">**</ept> property to <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept> on a unique index of the table.","source":"Set the **Alternate Key** property to **Yes** on a unique index of the table."},{"pos":[35470,35494],"content":"BPCheckBaseTableModified","linkify":"BPCheckBaseTableModified","nodes":[{"content":"BPCheckBaseTableModified","pos":[0,24]}]},{"content":"Description","pos":[35928,35939]},{"content":"This rule discourages the customization (overlayering) of a list of specific base tables that are shipped by Microsoft.","pos":[35950,36069]},{"content":"Examples are the SourceDocumentHeader and SourceDocumentLine tables.","pos":[36070,36138]},{"content":"Error message","pos":[36143,36156]},{"content":"%1 is a base table and must not be modified","pos":[36165,36208]},{"content":"Issue type/severity","pos":[36358,36377]},{"content":"MetaData/Warning","pos":[36380,36396]},{"content":"How to fix it","pos":[36573,36586]},{"content":"Don't customize the table.","pos":[36595,36621]}],"content":"---\n# required metadata\n\ntitle: Customization Analysis Report (CAR) | Microsoft Docs\ndescription: This article describes how to generate a Customization Analysis Report for your model. It also describes some best practice rules that are included in the report, and provides suggestions for fixing errors and warnings that are associated with these rules.\n\nauthor: annbe\nmanager: AnnBe\nms.date: 2016-11-18 23:49:33\nms.topic: article\nms.prod: \nms.service: Dynamics365Operations\nms.technology: \n\n# optional metadata\n\n# keywords: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: 51\nms.suite: Released- Dynamics AX 7.0.0\n# ms.tgt_pltfrm: \nms.custom: 49681\nms.assetid: e774d1d7-1fad-44d0-85d1-94ca026ed406\n# ms.region: \n# ms.industry: \nms.author: RobinARH\n\n---\n\n# Customization Analysis Report (CAR)\n\nWhat is the Customization Analysis Report?\n------------------------------------------\n\nThe Customization Analysis Report is a tool that analyzes your customization and extension models, and runs a predefined set of best practice rules. The report is one of the requirements of the solution certification process for Microsoft Dynamics 365 for Operations. The report is in the form of a Microsoft Excel workbook.\n\n## How to generate the report\nTo generate the Customization Analysis Report, run the following command in a Dynamics 365 for Operations development environment.\n\n    xppbp.exe -metadata=<local packages folder> -all -model=<ModelName> -xmlLog=C:\\BPCheckLogcd.xml -module=<PackageName> -car=<reportlocation>\n\n**Example**\n\n    xppbp.exe -metadata=C:\\Packages -all -model=\"MyAppSuiteCustomizations\" -xmlLog=C:\\temp\\BPCheckLogcd.xml -module=\"ApplicationSuite\" -car=c:\\temp\\CAReport.xlsx\n\nThe xppbp.exe tool is located in c:\\\\packages\\\\bin or I:\\\\AosService\\\\PackagesLocalDirectory\\\\bin.\n\n## Issues List\nThis section describes all best practice rules (errors, warnings, or informational messages) that can appear on the **Issues List** page of the report and provides suggestions for fixing the issues. Issues are of the **metadata** or **code** type. For all **code** issues, keep in mind that, if the warning or error occurs in a method that you've overlaid, the lines of code that violate the rule might belong to a model in a lower layer. In that case, you're not responsible for fixing warnings and errors in code that isn't yours.\n\n### BPCheckPackReturnsConnull\n\n|                     |                                                                                                                                                     |\n|---------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule applies to all classes that implement the **SysPackable** interface. It makes sure that the **Pack** method doesn't return **Connull()**. |\n| Error message       | Container pack method returns connull in a Runbase derived class                                                                                    |\n| Issue type/severity | Code/Warning                                                                                                                                        |\n| How to fix it       | Update the return value of the **Pack** method, or return **Super()** when applicable.                                                              |\n\n### BPCheckParametersModified\n\n|                     |                                                                                              |\n|---------------------|----------------------------------------------------------------------------------------------|\n| Description         | This rule fails if a parameter of a method is modified inside a method.                      |\n| Error message       | Parameter 1% in method %1 are modified inside the method                                     |\n| Issue type/severity | Code/Warning                                                                                 |\n| How to fix it       | Refactor your code. Parameters must be modified by the caller, not within the called method. |\n\n### BPCheckSQLCode\n\n|                     |                                                                                   |\n|---------------------|-----------------------------------------------------------------------------------|\n| Description         | This rule fails if your X++ code contains direct SQL code.                        |\n| Error message       | SQL code found in method %1                                                       |\n| Issue type/severity | Code/Warning                                                                      |\n| How to fix it       | Refactor your code to use X++ to access the Dynamics 365 for Operations database. |\n\n### BPCheckNestedLoopInCode\n\n|                     |                                                                                                                                                                                                                                                |\n|---------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if it finds a **while select** loop nested within a loop.                                                                                                                                                                      |\n| Error message       | Nested data access loop found in %1 method                                                                                                                                                                                                     |\n| Issue type/severity | Code/Warning                                                                                                                                                                                                                                   |\n| How to fix it       | Refactor your code to use joins instead of nested data access loops. If you can't refactor the code without altering the business logic of your method, document an exception when you submit your Customization Analysis Report to Microsoft. |\n\n### BPCheckInsertMethodInLoop\n\n|                     |                                                                                                                                                                                |\n|---------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rules fails if it finds a call to the method **insert** nested inside a loop. We recommend that you use **InsertRecordList**. This rule doesn't apply to InMemory tables. |\n| Error message       | Insert method can be replaced with RecordInsertList in method %1                                                                                                               |\n| Issue type/severity | Code/Warning                                                                                                                                                                   |\n| How to fix it       | Refactor your code to use set-based operations, such as **InsertRecordList**.                                                                                                  |\n\n### BPCheckSelectwithJoin\n\n|                     |                                                                                                                                                                                                                                                     |\n|---------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if it finds nested **select** statements that aren't joined.                                                                                                                                                                        |\n| Error message       | Nested select statement in %1 method can be joined                                                                                                                                                                                                  |\n| Issue type/severity | Code/Warning                                                                                                                                                                                                                                        |\n| How to fix it       | Refactor your code to use joins instead of a nested **select** statement. If you can't refactor the code without altering the business logic of your method, document an exception when you submit your Customization Analysis Report to Microsoft. |\n\n### BPFunctionCallwithSelect\n\n|                     |                                                                                                                                                          |\n|---------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if a function call is found within a **select** statement.                                                                               |\n| Error message       | Function call found in select statement in method %1                                                                                                     |\n| Issue type/severity | Code/Warning                                                                                                                                             |\n| How to fix it       | Assign the function’s return value to a local variable before you call the **select** statement, and use the local variable in the **select** statement. |\n\n### BPCheckinvalidExecuteQuery\n\n|                     |                                                                                                                |\n|---------------------|----------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if a call to **addRange** is found after a call to **super()** in the **ExecuteQuery** method. |\n| Error message       | Add range after super() should not be added in ExecuteQuery method for form %1                                 |\n| Issue type/severity | Code/Warning                                                                                                   |\n| How to fix it       | Refactor your code to avoid this pattern.                                                                      |\n\n### BPCheckInvalidInitFormMethod\n\n|                     |                                                                                                                                                                                                                                                                                                                                                                                                                         |\n|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule makes sure that you don't initialize form controls and data sources in a form’s **init** method before you call **super()**. It fails if it finds a statement that uses **element** or **this** before the call to **super()** (**this.aMethod()** or **element.aMethod()**). An informational message is shown only for some allowed patterns, such as initializing number sequences (**numberSeqPreInit**). |\n| Error message       | Form element statements should not be used before super() in init method of form %1                                                                                                                                                                                                                                                                                                                                     |\n| Issue type/severity | Code/Info or Warning                                                                                                                                                                                                                                                                                                                                                                                                    |\n| How to fix it       | Refactor your code to access form controls and data after the call to **super()**. If your code doesn't initialize any form control and doesn't access any form data sources before **super()**, document an exception when you submit your Customization Analysis Report to Microsoft.                                                                                                                                 |\n\n### BPCheckEmptyLoop\n\n|                     |                                                            |\n|---------------------|------------------------------------------------------------|\n| Description         | This rule fails if it finds loops that have no statements. |\n| Error message       | Empty loop found in method %1 in class %2                  |\n| Issue type/severity | Code/Warning                                               |\n| How to fix it       | Remove the loop from your code.                            |\n\n### BPCheckLockQueryRange\n\n|                     |                                                                                                                                        |\n|---------------------|----------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if the code calls **AddRange** in the **init** method of the form, and doesn't set the range as locked or hidden.      |\n| Error message       | Range should be locked or hidden in form %1                                                                                            |\n| Issue type/severity | Code/Warning                                                                                                                           |\n| How to fix it       | Add **QueryBuildRange.status(RangeStatus::Locked)** or **QueryBuildRange.status(RangeStatus::Hidden)** after the call to **AddRange**. |\n\n### BPCheckSkipStatementValidation\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td>Description</td>\n<td>This rule reports an informational message if it finds a set-based operation that doesn't have <strong>Skip</strong> statements.\n<ul>\n<li>When <strong>update_recordset</strong> is found, the rule checks for <strong>skipDataMethods(true)</strong>. The rule applies only when the <strong>update</strong> method on the table is overridden.</li>\n<li>When <strong>insert_recordset</strong> is found, the rule checks for <strong>skipDataMethods(true)</strong>. The rule applies only when the <strong>insert</strong> method on the table is overridden.</li>\n<li>When <strong>delete_from</strong> is found, the rule checks for <strong>skipDeleteActions(true)</strong>. The rule applies only when the <strong>insert</strong> method on the table is overridden.</li>\n</ul>\nThis is an informational message that highlights the need to call <strong>skip</strong> methods to take full advantage of the performance gains of set-based operations. If <strong>skip</strong> methods aren't used, the execution falls back to a row-by-row operation.</td>\n</tr>\n<tr class=\"even\">\n<td>Error message</td>\n<td>Set-based operation must invoke Skip statements in method %1 in class %2; otherwise, execution will fall back to a row by row operation.</td>\n</tr>\n<tr class=\"odd\">\n<td>Issue type/severity</td>\n<td>Code/Information</td>\n</tr>\n<tr class=\"even\">\n<td>How to fix it</td>\n<td>Use <strong>skipDataMethods(true)</strong> or <strong>skipDeleteActions(true)</strong> when applicable.</td>\n</tr>\n</tbody>\n</table>\n\n### BPCheckNoTTSTryBlock\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td>Description</td>\n<td>This rule fails if it finds a <strong>try</strong> statement within a <strong>tts</strong> block that isn't handled correctly.</td>\n</tr>\n<tr class=\"even\">\n<td>Error message</td>\n<td>Tts block with Try statement does not explicitly catch exceptions in method %1</td>\n</tr>\n<tr class=\"odd\">\n<td>Issue type/severity</td>\n<td>Code/Warning</td>\n</tr>\n<tr class=\"even\">\n<td>How to fix it</td>\n<td>The following examples show when the rule will fail or pass. Use these examples as guidelines to refactor your code.\n<pre><code>ttsbegin;\ntry {\n}\n// fail\ncatch {\n}\ntry {\n}\n// pass\ncatch(Exception::UpdateConflict) {\n}\ntry {\n}\n// pass\ncatch(Exception::UpdateConflictNotRecovered) {}</code></pre></td>\n</tr>\n</tbody>\n</table>\n\n### BPCheckEmptyTableMethod\n\n|                     |                                                                                                                                                                   |\n|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule checks for table methods that have no source code. Empty table methods cause record-set operations on the table to fall back to a row-by-row operation. |\n| Error message       | %1 table has an empty %2 method                                                                                                                                   |\n| Issue type/severity | Code/Warning                                                                                                                                                      |\n| How to fix it       | Remove this method from your code.                                                                                                                                |\n\n### BPCheckBatchJobsEnbabled\n\n|                     |                                                                                                                        |\n|---------------------|------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule makes sure that all classes that extend **RunBaseBatch** have a **canGoBatch** method that returns **true**. |\n| Error message       | Custom job is not batch-enabled in class %1                                                                            |\n| Issue type/severity | Code/Warning                                                                                                           |\n| How to fix it       | The **canGoBatch** method must return **true** for all batch classes.                                                  |\n\n### BPCheckDisplayMethodCached\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td>Description</td>\n<td>For each control that is bound to a data method, this rules fails if one of these conditions is met:\n<ul>\n<li>The <strong>Cache Data Method</strong> property is set to <strong>Auto</strong>, the corresponding table <strong>display</strong>/<strong>edit</strong> method doesn't have the <strong>SysClientCacheDataMethodAttribute</strong>, and the <strong>init</strong> method of the data source doesn't use <strong>CacheAddMethod</strong>.</li>\n<li>The <strong>Cache Data Method</strong> property is set to <strong>No</strong>, and the <strong>init</strong> method of the data source doesn't use <strong>CacheAddMethod</strong>.</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Error message</td>\n<td>Display method %1 in form %2 not cached</td>\n</tr>\n<tr class=\"odd\">\n<td>Issue type/severity</td>\n<td>Code/Warning</td>\n</tr>\n<tr class=\"even\">\n<td>How to fix it</td>\n<td>You can fix this warning by using one of the following patterns:\n<ul>\n<li>Set the <strong>Cache Data Method</strong> property to <strong>Yes</strong>.</li>\n<li><p>Set the <strong>Cache Data Method</strong> property to <strong>Auto</strong>, and mark the data method of the table with the <strong>SysClientCacheDataMethodAttribute</strong> attribute. Here is an example.</p>\n<pre><code>[SysClientCacheDataMethodAttribute(true)]\nDisplay TransDate myDateMethod()\n{\n    ...\n}</code></pre></li>\n<li>Use <strong>CacheAddMethod</strong> in the <strong>init</strong> method of the form to mark the method as cached.</li>\n</ul></td>\n</tr>\n</tbody>\n</table>\n\n### BPCheckSQLQueryInInit\n\n|                     |                                                                                                                                                                                      |\n|---------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if a data access query that has a **while** loop is found in the **init** method of a form. This pattern could cause performance issues when the form is initalized. |\n| Error message       | SQL query with while loop was found in init method of form %1                                                                                                                        |\n| Issue type/severity | Code/Warning                                                                                                                                                                         |\n| How to fix it       | Refactor your code to avoid this pattern.                                                                                                                                            |\n\n### BPCheckNewQueryWithForm\n\n|                     |                                                                                                                 |\n|---------------------|-----------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if it finds the **new Query()** statement in the **init** or **executeQuery** method of a form. |\n| Error message       | Data source query overridden in form method %1                                                                  |\n| Issue type/severity | Code/Warning                                                                                                    |\n| How to fix it       | Refactor your code to avoid this pattern.                                                                       |\n\n### BPCheckSelectForUpdateAbsent\n\n|                     |                                                                                                                                                                                                       |\n|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if **Select ForUpdate** is used to select records, but an update isn't being performed. This rules doesn't apply to tables that are enabled for Optimistic Concurrency Control (OCC). |\n| Error message       | Select ForUpdate not implemented in method %1                                                                                                                                                         |\n| Issue type/severity | Code/Warning                                                                                                                                                                                          |\n| How to fix it       | Use **Select** instead of **Select ForUpdate**, or set the **OCC Enabled** property to **Yes** on the table.                                                                                          |\n\n### BPCheckTablePropertyMismatch\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td>Description</td>\n<td>This rule fails when the table belongs to a table group but doesn't have the appropriate <strong>Cache Lookup</strong> value. The rule fails if one of these conditions is met:\n<ul>\n<li>The <strong>Table Group</strong> property is set to <strong>Main</strong>, and the <strong>Cache Lookup</strong> property is set to <strong>NotinTTS</strong> or <strong>EntireTable</strong>.</li>\n<li>The <strong>Table Group</strong> property is set to <strong>Group</strong> or <strong>Parameter</strong>, and the <strong>Cache Lookup</strong> property is set to <strong>NotinTTS</strong>.</li>\n<li>The <strong>Table Group</strong> property is set to <strong>WorksheetHeader</strong>, <strong>WorksheetLine</strong>, or <strong>Transaction</strong>, and the <strong>Cache Lookup</strong> property is set to <strong>Found</strong>, <strong>FoundAndEmpty</strong>, or <strong>EntireTable</strong>.</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Error message</td>\n<td>%1 table has an invalid combination of table group and cache lookup</td>\n</tr>\n<tr class=\"odd\">\n<td>Issue type/severity</td>\n<td>MetaData/Warning</td>\n</tr>\n<tr class=\"even\">\n<td>How to fix it</td>\n<td>Set an appropriate <strong>Cache Lookup</strong> value on the table.</td>\n</tr>\n</tbody>\n</table>\n\n### BPCheckMissingDeleteActions\n\n|                     |                                                                                                                                                                                                                                                                                          |\n|---------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule validates that the value of either a **delete** action or the **On Delete** property of a table relation isn't equal to **None**. The rule isn't triggered when the related or current table is a tempDB, in memory table, reference table, staging table, or parameter table. |\n| Error message       | Delete actions missing in table %1 which is related to table %2 with relation name %3                                                                                                                                                                                                    |\n| Issue type/severity | MetaData/Warning                                                                                                                                                                                                                                                                         |\n| How to fix it       | Set a **delete** action value that isn't equal to **None**.                                                                                                                                                                                                                              |\n\n### BPCheckAddressModel\n\n|                     |                                                                                                                                                                           |\n|---------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if a table field is of the **AddressZipCodeId** or **AddressStateId** type. These types indicate that the code didn't uptake the newer Address framework. |\n| Error message       | Field %1 of table %2 is not part of address location model                                                                                                                |\n| Issue type/severity | MetaData/Warning                                                                                                                                                          |\n| How to fix it       | Replace these types with any other appropriate EDT type in the Directory model.                                                                                           |\n\n### BPCheckDimensionModel\n\n|                     |                                                                                                                                                                               |\n|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails if a table field is of the **Dimension** or **LedgerAccount** type. These types indicate that the code didn't uptake the newer Financial Dimension framework. |\n| Error message       | Field %1 of table %2 is not part of financial dimension framework                                                                                                             |\n| Issue type/severity | MetaData/Warning                                                                                                                                                              |\n| How to fix it       | Replace these types with any other appropriate EDT type in the Dimensions model.                                                                                              |\n\n### BPCheckNumberofNewFields\n\n|                     |                                                                                                                                                                            |\n|---------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule verifies that no more than 10 fields were added to a table during the process of customizing or extending that table. This rule doesn't apply to staging tables. |\n| Error message       | Number of new fields in table %1 is greater than                                                                                                                           |\n| Issue type/severity | Metadata/Warning                                                                                                                                                           |\n| How to fix it       | Refactor your schema and create related tables instead of adding too many fields to an existing table.                                                                     |\n\n### BPCheckEnumUpgradeIssue\n\n|                     |                                                                                                                                                                                                           |\n|---------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule fails when the following condition is met: When you customize an enum (overlayer), new enum values are less than the maximum existing value + 10. This rules doesn't apply to extensible enums. |\n| Error message       | Enum %1 will have upgrade issues                                                                                                                                                                          |\n| Issue type/severity | MetaData/Warning                                                                                                                                                                                          |\n| How to fix it       | Use larger enum values, or extend the enum.                                                                                                                                                               |\n\n### BPCheckPassiveJoinUse\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td>Description</td>\n<td>This rule validates that, when a form allows for pre-loading of data, the link type of tab page data sources is passive. The rule fails if all the following conditions are met:\n<ul>\n<li>A form has the <strong>AllowPreLoading</strong> property set to <strong>Yes</strong>.</li>\n<li>A tab page on the form is bound to a top-level data source.</li>\n<li>The data source’s <strong>Join Source </strong>property is set.</li>\n<li>The data source’s <strong>Link Type</strong> property isn't set to <strong>Passive</strong>.</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td>Error message</td>\n<td>New message suggest: “Use passive joins on data sources %1 bound to a tab page control in form %2”</td>\n</tr>\n<tr class=\"odd\">\n<td>Issue type/severity</td>\n<td>MetaData/Warning</td>\n</tr>\n<tr class=\"even\">\n<td>How to fix it</td>\n<td>Set the <strong>AllowPreLoading</strong> property to <strong>No</strong> on the form, or use passive joins on the data source. Passive joins require that you explicitly program when the query of a tab page is run.</td>\n</tr>\n</tbody>\n</table>\n\n### BPCheckAltenateKeyAbsent\n\n|                     |                                                                                          |\n|---------------------|------------------------------------------------------------------------------------------|\n| Description         | This rule verifies that tables that have a unique index have at least one alternate key. |\n| Error message       | Table %1 does not have an alternate key                                                  |\n| Issue type/severity | MetaData/Warning                                                                         |\n| How to fix it       | Set the **Alternate Key** property to **Yes** on a unique index of the table.            |\n\n### BPCheckBaseTableModified\n\n|                     |                                                                                                                                                                                              |\n|---------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Description         | This rule discourages the customization (overlayering) of a list of specific base tables that are shipped by Microsoft. Examples are the SourceDocumentHeader and SourceDocumentLine tables. |\n| Error message       | %1 is a base table and must not be modified                                                                                                                                                  |\n| Issue type/severity | MetaData/Warning                                                                                                                                                                             |\n| How to fix it       | Don't customize the table.                                                                                                                                                                   |\n\n\n\n"}