{"content":"---\n# required metadata\n\ntitle: Manage Retail accounts and devices from headquarters\ndescription: This article explains how an IT Pro can set up Retail activation accounts for retail workers to activate Modern POS or Cloud POS devices.\nauthor: MargoC\nmanager: AnnBe\nms.date: 04/04/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-applications\nms.technology: \n\n# optional metadata\n\nms.search.form: HcmWorker, RetailDeviceActivationValidation, RetailPositionPosPermission\n# ROBOTS: \naudience: IT Pro\n# ms.devlang: \n# ms.reviewer: 11\nms.search.scope: AX 7.0.0, Operations, Core, Retail\n# ms.tgt_pltfrm: \nms.custom: 20471\nms.assetid: 5394e10c-539c-4e26-a097-504c6950cd56\nms.search.region: Global\nms.search.industry: Retail\nms.author: athinesh\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Manage Retail accounts and devices from headquarters\n\n[!include[banner](includes/banner.md)]\n\n\nThis article explains how an IT Pro can set up Retail activation accounts for retail workers to activate Modern POS or Cloud POS devices.\n\nSetting up a device activation account for a single worker\n----------------------------------------------------------\n\nThis procedure should be completed before you activate Cloud POS.\n\n1.  In Microsoft Dynamics 365 for Operations, from the **Workers** page, open the **Worker details** page for the worker to assign AAD device activation privileges to. Click **Edit**.\n2.  On the **Retail** tab, click the **POS permissions** link. Make sure that the worker is in the Manager Permission group, or that **Manage Devices** is set to **Yes** for the worker.\n3.  On the **Retail** tab, under **External identity**, update the values for the following fields:\n    -   Alias\n    -   UPN\n    -   External identifier\n\n4.  You can update the **External identity** fields by using an existing AAD account or creating a new AAD account. To update the fields, access the **External identity** options from the **Retail** main menu (**Retail** &gt; ****Associate existing **identity** or **Retail** &gt; **Create new identity**).\n5.  To use an existing AAD account, select **Retail** &gt;** Associate existing identity**. In the slider, click the AAD account that has the correct name, and then click **OK**. The AAD account that is associated with that name and alias is the user's Activation account for Modern POS.\n6.  Complete and save the changes on the **Workers** page, and then refresh the page. The section that contains external identity information should be updated with the new information. The mapped AAD account is now your Activation account for Cloud POS and Modern POS. This account is mapped to a worker for the required POS permissions. You can use this AAD account for Modern POS or Cloud POS activation.\n7.  The Create external identity feature creates a new AAD account for you by using the alias that you enter. To update the fields, access the **External identity** options from the **Retail** main menu (**Retail** &gt; **Create new identity**).\n8.  You can either manually enter the alias to generate or use the **Reset to default** button. Then manually enter a strong password, and click **OK**.\n9.  If the worker is created successfully, you receive a message on the **Workers** page. The mapped AAD account is now the user's Activation account for Cloud POS and Modern POS. This account is mapped to a worker for the required POS permissions. You can use this AAD account for Modern POS or Cloud POS activation.\n\n## Setting up device activation accounts for multiple workers\nYou can set up activation accounts for multiple workers in bulk. However, this functionality is supported only if you're creating new external identities, not if you're associating identities.\n\n1.  In the workers form, select the list of workers to set the activation account for.\n2.  Click **Retail** &gt; **Create external identity** to update the fields. Any AAD accounts that are associated with the workers appear in this pane. **Note:** These accounts aren't device activation accounts until you map them by using the external identity flow options.\n3.  If you want to use the existing AAD accounts as activation accounts, you can't map them in bulk. Cancel the selection of those workers, and then map them individually by using **Use existing external identity**.\n4.  To create new AAD accounts and associate them with the workers, so that they can be used as activation accounts, update the **Alias** and **Password** fields, and then click **OK**. In the main worker form, you receive a message as activation accounts are created for each worker.\n\n## Run the Validate Devices for Activation check at headquarters\nBefore handing an activation account to a worker, an IT Pro must run the Validate devices check for the devices assigned to the worker. This will help identify any potential failures of device activation in advance and fix it before it is given to the worker.\n\n1.  Open the **Device** page in HQ (**Retail and commerce** &gt; **Channel setup &gt; POS setup** &gt; **Devices**).\n2.  Select the device to validate for device activation, and then click **Validate devices for activation**. For example, select device **HOUSTON-2**.\n3.  In the dialog box that appears, select the worker to validate the device for (that is, the worker that you mapped to the AAD account in the previous procedure). For example, select worker **000160**.\n4.  Click **OK**, and make sure that you receive a message similar to the following: \"Pre-Activation validation completed for Device HOUSTON-2 and Staff 000160. Validation: Passed\"\n\n## Checklist to follow before activation\n1.  Complete the **Validate devices for activation** check in HQ, and make sure that the device passes validation.\n2.  On the client machine where you're activating the device, access the Retail Server URL health check, and make sure that the health check is passed. Use the following format: https://clxtestax404ret.cloud.test.dynamics.com/en/healthcheck?testname=ping\n3.  The worker must be mapped to an AAD account (under **External identity**).\n4.  The AAD account to map must belong to the same tenant.\n5.  To map the worker to the AAD account, sign in to HQ by using the Admin account for Microsoft Dynamics Lifecycle Services (LCS).\n6.  Make sure that the worker is set up as a Dynamics 365 for Operations user in the Manager role (checked by validation).\n7.  Make sure that the channel is published (checked by validation).\n8.  Make sure that the channel database has the synced data from HQ, and that download jobs are running. To check this, run the following command in the channel database for the store.\n\n        select * from crt.STORAGELOOKUPVIEW\n\n    Make sure that data is returned, and that the result isn't empty.\n\n9.  Set up the hardware profile under **Registers &gt; Register** (checked by validation).\n10. Make sure that the register and store have a screen layout (checked by validation).\n11. Make sure that a primary address is set up for the legal entity.\n12. Make sure that the language is set up for the Commerce Data Exchange: Real-time Service user profile (JBB in the demo data).\n13. Make sure that the Real-time Service profile has the correct access.\n14. Make sure that the electronic funds transfer (EFT) configuration value is present.\n\n\n\n\n","nodes":[{"pos":[32,84],"content":"Manage Retail accounts and devices from headquarters","needQuote":true,"needEscape":true,"nodes":[{"content":"Manage Retail accounts and devices from headquarters","pos":[0,52]}]},{"pos":[98,235],"content":"This article explains how an IT Pro can set up Retail activation accounts for retail workers to activate Modern POS or Cloud POS devices.","needQuote":true,"needEscape":true,"nodes":[{"content":"This article explains how an IT Pro can set up Retail activation accounts for retail workers to activate Modern POS or Cloud POS devices.","pos":[0,137]}]},{"pos":[819,871],"content":"Manage Retail accounts and devices from headquarters","linkify":"Manage Retail accounts and devices from headquarters","nodes":[{"content":"Manage Retail accounts and devices from headquarters","pos":[0,52]}]},{"content":"This article explains how an IT Pro can set up Retail activation accounts for retail workers to activate Modern POS or Cloud POS devices.","pos":[914,1051]},{"pos":[1053,1111],"content":"Setting up a device activation account for a single worker","linkify":"Setting up a device activation account for a single worker","nodes":[{"content":"Setting up a device activation account for a single worker","pos":[0,58]}]},{"content":"This procedure should be completed before you activate Cloud POS.","pos":[1172,1237]},{"content":"In Microsoft Dynamics 365 for Operations, from the <bpt id=\"p1\">**</bpt>Workers<ept id=\"p1\">**</ept> page, open the <bpt id=\"p2\">**</bpt>Worker details<ept id=\"p2\">**</ept> page for the worker to assign AAD device activation privileges to.","pos":[1243,1406],"source":"In Microsoft Dynamics 365 for Operations, from the **Workers** page, open the **Worker details** page for the worker to assign AAD device activation privileges to."},{"content":"Click <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept>.","pos":[1407,1422],"source":" Click **Edit**."},{"content":"On the <bpt id=\"p1\">**</bpt>Retail<ept id=\"p1\">**</ept> tab, click the <bpt id=\"p2\">**</bpt>POS permissions<ept id=\"p2\">**</ept> link.","pos":[1427,1485],"source":"On the **Retail** tab, click the **POS permissions** link."},{"content":"Make sure that the worker is in the Manager Permission group, or that <bpt id=\"p1\">**</bpt>Manage Devices<ept id=\"p1\">**</ept> is set to <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept> for the worker.","pos":[1486,1608],"source":" Make sure that the worker is in the Manager Permission group, or that **Manage Devices** is set to **Yes** for the worker."},{"pos":[1613,1708],"content":"On the <bpt id=\"p1\">**</bpt>Retail<ept id=\"p1\">**</ept> tab, under <bpt id=\"p2\">**</bpt>External identity<ept id=\"p2\">**</ept>, update the values for the following fields:","source":"On the **Retail** tab, under **External identity**, update the values for the following fields:"},{"content":"Alias","pos":[1717,1722]},{"content":"UPN","pos":[1731,1734]},{"content":"External identifier","pos":[1743,1762]},{"content":"You can update the <bpt id=\"p1\">**</bpt>External identity<ept id=\"p1\">**</ept> fields by using an existing AAD account or creating a new AAD account.","pos":[1768,1879],"source":"You can update the **External identity** fields by using an existing AAD account or creating a new AAD account."},{"content":"To update the fields, access the <bpt id=\"p1\">**</bpt>External identity<ept id=\"p1\">**</ept> options from the <bpt id=\"p2\">**</bpt>Retail<ept id=\"p2\">**</ept> main menu (<bpt id=\"p3\">**</bpt>Retail<ept id=\"p3\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> ****Associate existing <bpt id=\"p4\">**</bpt>identity<ept id=\"p4\">**</ept> or <bpt id=\"p5\">**</bpt>Retail<ept id=\"p5\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p6\">**</bpt>Create new identity<ept id=\"p6\">**</ept>).","pos":[1880,2070],"source":" To update the fields, access the **External identity** options from the **Retail** main menu (**Retail** &gt; ****Associate existing **identity** or **Retail** &gt; **Create new identity**)."},{"content":"To use an existing AAD account, select <bpt id=\"p1\">**</bpt>Retail<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph>** Associate existing identity**.","pos":[2075,2162],"source":"To use an existing AAD account, select **Retail** &gt;** Associate existing identity**."},{"content":"In the slider, click the AAD account that has the correct name, and then click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","pos":[2163,2249],"source":" In the slider, click the AAD account that has the correct name, and then click **OK**."},{"content":"The AAD account that is associated with that name and alias is the user's Activation account for Modern POS.","pos":[2250,2358]},{"content":"Complete and save the changes on the <bpt id=\"p1\">**</bpt>Workers<ept id=\"p1\">**</ept> page, and then refresh the page.","pos":[2363,2444],"source":"Complete and save the changes on the **Workers** page, and then refresh the page."},{"content":"The section that contains external identity information should be updated with the new information.","pos":[2445,2544]},{"content":"The mapped AAD account is now your Activation account for Cloud POS and Modern POS.","pos":[2545,2628]},{"content":"This account is mapped to a worker for the required POS permissions.","pos":[2629,2697]},{"content":"You can use this AAD account for Modern POS or Cloud POS activation.","pos":[2698,2766]},{"content":"The Create external identity feature creates a new AAD account for you by using the alias that you enter.","pos":[2771,2876]},{"content":"To update the fields, access the <bpt id=\"p1\">**</bpt>External identity<ept id=\"p1\">**</ept> options from the <bpt id=\"p2\">**</bpt>Retail<ept id=\"p2\">**</ept> main menu (<bpt id=\"p3\">**</bpt>Retail<ept id=\"p3\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Create new identity<ept id=\"p4\">**</ept>).","pos":[2877,3012],"source":" To update the fields, access the **External identity** options from the **Retail** main menu (**Retail** &gt; **Create new identity**)."},{"content":"You can either manually enter the alias to generate or use the <bpt id=\"p1\">**</bpt>Reset to default<ept id=\"p1\">**</ept> button.","pos":[3017,3108],"source":"You can either manually enter the alias to generate or use the **Reset to default** button."},{"content":"Then manually enter a strong password, and click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","pos":[3109,3165],"source":" Then manually enter a strong password, and click **OK**."},{"content":"If the worker is created successfully, you receive a message on the <bpt id=\"p1\">**</bpt>Workers<ept id=\"p1\">**</ept> page.","pos":[3170,3255],"source":"If the worker is created successfully, you receive a message on the **Workers** page."},{"content":"The mapped AAD account is now the user's Activation account for Cloud POS and Modern POS.","pos":[3256,3345]},{"content":"This account is mapped to a worker for the required POS permissions.","pos":[3346,3414]},{"content":"You can use this AAD account for Modern POS or Cloud POS activation.","pos":[3415,3483]},{"pos":[3488,3546],"content":"Setting up device activation accounts for multiple workers","linkify":"Setting up device activation accounts for multiple workers","nodes":[{"content":"Setting up device activation accounts for multiple workers","pos":[0,58]}]},{"content":"You can set up activation accounts for multiple workers in bulk.","pos":[3547,3611]},{"content":"However, this functionality is supported only if you're creating new external identities, not if you're associating identities.","pos":[3612,3739]},{"content":"In the workers form, select the list of workers to set the activation account for.","pos":[3745,3827]},{"content":"Click <bpt id=\"p1\">**</bpt>Retail<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Create external identity<ept id=\"p2\">**</ept> to update the fields.","pos":[3832,3904],"source":"Click **Retail** &gt; **Create external identity** to update the fields."},{"content":"Any AAD accounts that are associated with the workers appear in this pane.","pos":[3905,3979]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> These accounts aren't device activation accounts until you map them by using the external identity flow options.","pos":[3980,4102],"source":"**Note:** These accounts aren't device activation accounts until you map them by using the external identity flow options."},{"content":"If you want to use the existing AAD accounts as activation accounts, you can't map them in bulk.","pos":[4107,4203]},{"content":"Cancel the selection of those workers, and then map them individually by using <bpt id=\"p1\">**</bpt>Use existing external identity<ept id=\"p1\">**</ept>.","pos":[4204,4318],"source":" Cancel the selection of those workers, and then map them individually by using **Use existing external identity**."},{"content":"To create new AAD accounts and associate them with the workers, so that they can be used as activation accounts, update the <bpt id=\"p1\">**</bpt>Alias<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Password<ept id=\"p2\">**</ept> fields, and then click <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.","pos":[4323,4504],"source":"To create new AAD accounts and associate them with the workers, so that they can be used as activation accounts, update the **Alias** and **Password** fields, and then click **OK**."},{"content":"In the main worker form, you receive a message as activation accounts are created for each worker.","pos":[4505,4603]},{"pos":[4608,4669],"content":"Run the Validate Devices for Activation check at headquarters","linkify":"Run the Validate Devices for Activation check at headquarters","nodes":[{"content":"Run the Validate Devices for Activation check at headquarters","pos":[0,61]}]},{"content":"Before handing an activation account to a worker, an IT Pro must run the Validate devices check for the devices assigned to the worker.","pos":[4670,4805]},{"content":"This will help identify any potential failures of device activation in advance and fix it before it is given to the worker.","pos":[4806,4929]},{"pos":[4935,5047],"content":"Open the <bpt id=\"p1\">**</bpt>Device<ept id=\"p1\">**</ept> page in HQ (<bpt id=\"p2\">**</bpt>Retail and commerce<ept id=\"p2\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Channel setup <ph id=\"ph2\">&amp;gt;</ph> POS setup<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Devices<ept id=\"p4\">**</ept>).","source":"Open the **Device** page in HQ (**Retail and commerce** &gt; **Channel setup &gt; POS setup** &gt; **Devices**)."},{"content":"Select the device to validate for device activation, and then click <bpt id=\"p1\">**</bpt>Validate devices for activation<ept id=\"p1\">**</ept>.","pos":[5052,5156],"source":"Select the device to validate for device activation, and then click **Validate devices for activation**."},{"content":"For example, select device <bpt id=\"p1\">**</bpt>HOUSTON-2<ept id=\"p1\">**</ept>.","pos":[5157,5198],"source":" For example, select device **HOUSTON-2**."},{"content":"In the dialog box that appears, select the worker to validate the device for (that is, the worker that you mapped to the AAD account in the previous procedure).","pos":[5203,5363]},{"content":"For example, select worker <bpt id=\"p1\">**</bpt>000160<ept id=\"p1\">**</ept>.","pos":[5364,5402],"source":" For example, select worker **000160**."},{"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>, and make sure that you receive a message similar to the following: \"Pre-Activation validation completed for Device HOUSTON-2 and Staff 000160.","pos":[5407,5563],"source":"Click **OK**, and make sure that you receive a message similar to the following: \"Pre-Activation validation completed for Device HOUSTON-2 and Staff 000160."},{"content":"Validation: Passed\"","pos":[5564,5583]},{"pos":[5588,5625],"content":"Checklist to follow before activation","linkify":"Checklist to follow before activation","nodes":[{"content":"Checklist to follow before activation","pos":[0,37]}]},{"pos":[5630,5740],"content":"Complete the <bpt id=\"p1\">**</bpt>Validate devices for activation<ept id=\"p1\">**</ept> check in HQ, and make sure that the device passes validation.","source":"Complete the **Validate devices for activation** check in HQ, and make sure that the device passes validation."},{"content":"On the client machine where you're activating the device, access the Retail Server URL health check, and make sure that the health check is passed.","pos":[5745,5892]},{"content":"Use the following format: https://clxtestax404ret.cloud.test.dynamics.com/en/healthcheck?testname=ping","pos":[5893,5995]},{"pos":[6000,6074],"content":"The worker must be mapped to an AAD account (under <bpt id=\"p1\">**</bpt>External identity<ept id=\"p1\">**</ept>).","source":"The worker must be mapped to an AAD account (under **External identity**)."},{"content":"The AAD account to map must belong to the same tenant.","pos":[6079,6133]},{"content":"To map the worker to the AAD account, sign in to HQ by using the Admin account for Microsoft Dynamics Lifecycle Services (LCS).","pos":[6138,6265]},{"content":"Make sure that the worker is set up as a Dynamics 365 for Operations user in the Manager role (checked by validation).","pos":[6270,6388]},{"content":"Make sure that the channel is published (checked by validation).","pos":[6393,6457]},{"content":"Make sure that the channel database has the synced data from HQ, and that download jobs are running.","pos":[6462,6562]},{"content":"To check this, run the following command in the channel database for the store.","pos":[6563,6642]},{"content":"Make sure that data is returned, and that the result isn't empty.","pos":[6693,6758]},{"pos":[6764,6850],"content":"Set up the hardware profile under <bpt id=\"p1\">**</bpt>Registers <ph id=\"ph1\">&amp;gt;</ph> Register<ept id=\"p1\">**</ept> (checked by validation).","source":"Set up the hardware profile under **Registers &gt; Register** (checked by validation)."},{"content":"Make sure that the register and store have a screen layout (checked by validation).","pos":[6855,6938]},{"content":"Make sure that a primary address is set up for the legal entity.","pos":[6943,7007]},{"content":"Make sure that the language is set up for the Commerce Data Exchange: Real-time Service user profile (JBB in the demo data).","pos":[7012,7136]},{"content":"Make sure that the Real-time Service profile has the correct access.","pos":[7141,7209]},{"content":"Make sure that the electronic funds transfer (EFT) configuration value is present.","pos":[7214,7296]}]}